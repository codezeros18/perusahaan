(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))g(S);new MutationObserver(S=>{for(const C of S)if(C.type==="childList")for(const w of C.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&g(w)}).observe(document,{childList:!0,subtree:!0});function m(S){const C={};return S.integrity&&(C.integrity=S.integrity),S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?C.credentials="include":S.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function g(S){if(S.ep)return;S.ep=!0;const C=m(S);fetch(S.href,C)}})();function ux(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Pg={exports:{}},bp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function Db(){if(T_)return bp;T_=1;var o=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function m(g,S,C){var w=null;if(C!==void 0&&(w=""+C),S.key!==void 0&&(w=""+S.key),"key"in S){C={};for(var c in S)c!=="key"&&(C[c]=S[c])}else C=S;return S=C.ref,{$$typeof:o,type:g,key:w,ref:S!==void 0?S:null,props:C}}return bp.Fragment=l,bp.jsx=m,bp.jsxs=m,bp}var S_;function Rb(){return S_||(S_=1,Pg.exports=Db()),Pg.exports}var ge=Rb(),zg={exports:{}},fi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function kb(){if(M_)return fi;M_=1;var o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),w=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),$=Symbol.iterator;function Y(ye){return ye===null||typeof ye!="object"?null:(ye=$&&ye[$]||ye["@@iterator"],typeof ye=="function"?ye:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,xe={};function Re(ye,Ke,Mt){this.props=ye,this.context=Ke,this.refs=xe,this.updater=Mt||X}Re.prototype.isReactComponent={},Re.prototype.setState=function(ye,Ke){if(typeof ye!="object"&&typeof ye!="function"&&ye!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ye,Ke,"setState")},Re.prototype.forceUpdate=function(ye){this.updater.enqueueForceUpdate(this,ye,"forceUpdate")};function ce(){}ce.prototype=Re.prototype;function De(ye,Ke,Mt){this.props=ye,this.context=Ke,this.refs=xe,this.updater=Mt||X}var Ce=De.prototype=new ce;Ce.constructor=De,se(Ce,Re.prototype),Ce.isPureReactComponent=!0;var Ye=Array.isArray,Fe={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function ht(ye,Ke,Mt,St,Bt,hi){return Mt=hi.ref,{$$typeof:o,type:ye,key:Ke,ref:Mt!==void 0?Mt:null,props:hi}}function et(ye,Ke){return ht(ye.type,Ke,void 0,void 0,void 0,ye.props)}function ut(ye){return typeof ye=="object"&&ye!==null&&ye.$$typeof===o}function lt(ye){var Ke={"=":"=0",":":"=2"};return"$"+ye.replace(/[=:]/g,function(Mt){return Ke[Mt]})}var Tt=/\/+/g;function Et(ye,Ke){return typeof ye=="object"&&ye!==null&&ye.key!=null?lt(""+ye.key):Ke.toString(36)}function ai(){}function Li(ye){switch(ye.status){case"fulfilled":return ye.value;case"rejected":throw ye.reason;default:switch(typeof ye.status=="string"?ye.then(ai,ai):(ye.status="pending",ye.then(function(Ke){ye.status==="pending"&&(ye.status="fulfilled",ye.value=Ke)},function(Ke){ye.status==="pending"&&(ye.status="rejected",ye.reason=Ke)})),ye.status){case"fulfilled":return ye.value;case"rejected":throw ye.reason}}throw ye}function ui(ye,Ke,Mt,St,Bt){var hi=typeof ye;(hi==="undefined"||hi==="boolean")&&(ye=null);var Nt=!1;if(ye===null)Nt=!0;else switch(hi){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(ye.$$typeof){case o:case l:Nt=!0;break;case j:return Nt=ye._init,ui(Nt(ye._payload),Ke,Mt,St,Bt)}}if(Nt)return Bt=Bt(ye),Nt=St===""?"."+Et(ye,0):St,Ye(Bt)?(Mt="",Nt!=null&&(Mt=Nt.replace(Tt,"$&/")+"/"),ui(Bt,Ke,Mt,"",function(Xn){return Xn})):Bt!=null&&(ut(Bt)&&(Bt=et(Bt,Mt+(Bt.key==null||ye&&ye.key===Bt.key?"":(""+Bt.key).replace(Tt,"$&/")+"/")+Nt)),Ke.push(Bt)),1;Nt=0;var Hn=St===""?".":St+":";if(Ye(ye))for(var gi=0;gi<ye.length;gi++)St=ye[gi],hi=Hn+Et(St,gi),Nt+=ui(St,Ke,Mt,hi,Bt);else if(gi=Y(ye),typeof gi=="function")for(ye=gi.call(ye),gi=0;!(St=ye.next()).done;)St=St.value,hi=Hn+Et(St,gi++),Nt+=ui(St,Ke,Mt,hi,Bt);else if(hi==="object"){if(typeof ye.then=="function")return ui(Li(ye),Ke,Mt,St,Bt);throw Ke=String(ye),Error("Objects are not valid as a React child (found: "+(Ke==="[object Object]"?"object with keys {"+Object.keys(ye).join(", ")+"}":Ke)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function je(ye,Ke,Mt){if(ye==null)return ye;var St=[],Bt=0;return ui(ye,St,"","",function(hi){return Ke.call(Mt,hi,Bt++)}),St}function it(ye){if(ye._status===-1){var Ke=ye._result;Ke=Ke(),Ke.then(function(Mt){(ye._status===0||ye._status===-1)&&(ye._status=1,ye._result=Mt)},function(Mt){(ye._status===0||ye._status===-1)&&(ye._status=2,ye._result=Mt)}),ye._status===-1&&(ye._status=0,ye._result=Ke)}if(ye._status===1)return ye._result.default;throw ye._result}var st=typeof reportError=="function"?reportError:function(ye){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ke=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ye=="object"&&ye!==null&&typeof ye.message=="string"?String(ye.message):String(ye),error:ye});if(!window.dispatchEvent(Ke))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ye);return}console.error(ye)};function mt(){}return fi.Children={map:je,forEach:function(ye,Ke,Mt){je(ye,function(){Ke.apply(this,arguments)},Mt)},count:function(ye){var Ke=0;return je(ye,function(){Ke++}),Ke},toArray:function(ye){return je(ye,function(Ke){return Ke})||[]},only:function(ye){if(!ut(ye))throw Error("React.Children.only expected to receive a single React element child.");return ye}},fi.Component=Re,fi.Fragment=m,fi.Profiler=S,fi.PureComponent=De,fi.StrictMode=g,fi.Suspense=R,fi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Fe,fi.__COMPILER_RUNTIME={__proto__:null,c:function(ye){return Fe.H.useMemoCache(ye)}},fi.cache=function(ye){return function(){return ye.apply(null,arguments)}},fi.cloneElement=function(ye,Ke,Mt){if(ye==null)throw Error("The argument must be a React element, but you passed "+ye+".");var St=se({},ye.props),Bt=ye.key,hi=void 0;if(Ke!=null)for(Nt in Ke.ref!==void 0&&(hi=void 0),Ke.key!==void 0&&(Bt=""+Ke.key),Ke)!ct.call(Ke,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&Ke.ref===void 0||(St[Nt]=Ke[Nt]);var Nt=arguments.length-2;if(Nt===1)St.children=Mt;else if(1<Nt){for(var Hn=Array(Nt),gi=0;gi<Nt;gi++)Hn[gi]=arguments[gi+2];St.children=Hn}return ht(ye.type,Bt,void 0,void 0,hi,St)},fi.createContext=function(ye){return ye={$$typeof:w,_currentValue:ye,_currentValue2:ye,_threadCount:0,Provider:null,Consumer:null},ye.Provider=ye,ye.Consumer={$$typeof:C,_context:ye},ye},fi.createElement=function(ye,Ke,Mt){var St,Bt={},hi=null;if(Ke!=null)for(St in Ke.key!==void 0&&(hi=""+Ke.key),Ke)ct.call(Ke,St)&&St!=="key"&&St!=="__self"&&St!=="__source"&&(Bt[St]=Ke[St]);var Nt=arguments.length-2;if(Nt===1)Bt.children=Mt;else if(1<Nt){for(var Hn=Array(Nt),gi=0;gi<Nt;gi++)Hn[gi]=arguments[gi+2];Bt.children=Hn}if(ye&&ye.defaultProps)for(St in Nt=ye.defaultProps,Nt)Bt[St]===void 0&&(Bt[St]=Nt[St]);return ht(ye,hi,void 0,void 0,null,Bt)},fi.createRef=function(){return{current:null}},fi.forwardRef=function(ye){return{$$typeof:c,render:ye}},fi.isValidElement=ut,fi.lazy=function(ye){return{$$typeof:j,_payload:{_status:-1,_result:ye},_init:it}},fi.memo=function(ye,Ke){return{$$typeof:k,type:ye,compare:Ke===void 0?null:Ke}},fi.startTransition=function(ye){var Ke=Fe.T,Mt={};Fe.T=Mt;try{var St=ye(),Bt=Fe.S;Bt!==null&&Bt(Mt,St),typeof St=="object"&&St!==null&&typeof St.then=="function"&&St.then(mt,st)}catch(hi){st(hi)}finally{Fe.T=Ke}},fi.unstable_useCacheRefresh=function(){return Fe.H.useCacheRefresh()},fi.use=function(ye){return Fe.H.use(ye)},fi.useActionState=function(ye,Ke,Mt){return Fe.H.useActionState(ye,Ke,Mt)},fi.useCallback=function(ye,Ke){return Fe.H.useCallback(ye,Ke)},fi.useContext=function(ye){return Fe.H.useContext(ye)},fi.useDebugValue=function(){},fi.useDeferredValue=function(ye,Ke){return Fe.H.useDeferredValue(ye,Ke)},fi.useEffect=function(ye,Ke,Mt){var St=Fe.H;if(typeof Mt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return St.useEffect(ye,Ke)},fi.useId=function(){return Fe.H.useId()},fi.useImperativeHandle=function(ye,Ke,Mt){return Fe.H.useImperativeHandle(ye,Ke,Mt)},fi.useInsertionEffect=function(ye,Ke){return Fe.H.useInsertionEffect(ye,Ke)},fi.useLayoutEffect=function(ye,Ke){return Fe.H.useLayoutEffect(ye,Ke)},fi.useMemo=function(ye,Ke){return Fe.H.useMemo(ye,Ke)},fi.useOptimistic=function(ye,Ke){return Fe.H.useOptimistic(ye,Ke)},fi.useReducer=function(ye,Ke,Mt){return Fe.H.useReducer(ye,Ke,Mt)},fi.useRef=function(ye){return Fe.H.useRef(ye)},fi.useState=function(ye){return Fe.H.useState(ye)},fi.useSyncExternalStore=function(ye,Ke,Mt){return Fe.H.useSyncExternalStore(ye,Ke,Mt)},fi.useTransition=function(){return Fe.H.useTransition()},fi.version="19.1.1",fi}var E_;function ky(){return E_||(E_=1,zg.exports=kb()),zg.exports}var Ae=ky();const pn=ux(Ae);var Ig={exports:{}},wp={},Dg={exports:{}},Rg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function Lb(){return C_||(C_=1,function(o){function l(je,it){var st=je.length;je.push(it);e:for(;0<st;){var mt=st-1>>>1,ye=je[mt];if(0<S(ye,it))je[mt]=it,je[st]=ye,st=mt;else break e}}function m(je){return je.length===0?null:je[0]}function g(je){if(je.length===0)return null;var it=je[0],st=je.pop();if(st!==it){je[0]=st;e:for(var mt=0,ye=je.length,Ke=ye>>>1;mt<Ke;){var Mt=2*(mt+1)-1,St=je[Mt],Bt=Mt+1,hi=je[Bt];if(0>S(St,st))Bt<ye&&0>S(hi,St)?(je[mt]=hi,je[Bt]=st,mt=Bt):(je[mt]=St,je[Mt]=st,mt=Mt);else if(Bt<ye&&0>S(hi,st))je[mt]=hi,je[Bt]=st,mt=Bt;else break e}}return it}function S(je,it){var st=je.sortIndex-it.sortIndex;return st!==0?st:je.id-it.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var C=performance;o.unstable_now=function(){return C.now()}}else{var w=Date,c=w.now();o.unstable_now=function(){return w.now()-c}}var R=[],k=[],j=1,$=null,Y=3,X=!1,se=!1,xe=!1,Re=!1,ce=typeof setTimeout=="function"?setTimeout:null,De=typeof clearTimeout=="function"?clearTimeout:null,Ce=typeof setImmediate<"u"?setImmediate:null;function Ye(je){for(var it=m(k);it!==null;){if(it.callback===null)g(k);else if(it.startTime<=je)g(k),it.sortIndex=it.expirationTime,l(R,it);else break;it=m(k)}}function Fe(je){if(xe=!1,Ye(je),!se)if(m(R)!==null)se=!0,ct||(ct=!0,Et());else{var it=m(k);it!==null&&ui(Fe,it.startTime-je)}}var ct=!1,ht=-1,et=5,ut=-1;function lt(){return Re?!0:!(o.unstable_now()-ut<et)}function Tt(){if(Re=!1,ct){var je=o.unstable_now();ut=je;var it=!0;try{e:{se=!1,xe&&(xe=!1,De(ht),ht=-1),X=!0;var st=Y;try{t:{for(Ye(je),$=m(R);$!==null&&!($.expirationTime>je&&lt());){var mt=$.callback;if(typeof mt=="function"){$.callback=null,Y=$.priorityLevel;var ye=mt($.expirationTime<=je);if(je=o.unstable_now(),typeof ye=="function"){$.callback=ye,Ye(je),it=!0;break t}$===m(R)&&g(R),Ye(je)}else g(R);$=m(R)}if($!==null)it=!0;else{var Ke=m(k);Ke!==null&&ui(Fe,Ke.startTime-je),it=!1}}break e}finally{$=null,Y=st,X=!1}it=void 0}}finally{it?Et():ct=!1}}}var Et;if(typeof Ce=="function")Et=function(){Ce(Tt)};else if(typeof MessageChannel<"u"){var ai=new MessageChannel,Li=ai.port2;ai.port1.onmessage=Tt,Et=function(){Li.postMessage(null)}}else Et=function(){ce(Tt,0)};function ui(je,it){ht=ce(function(){je(o.unstable_now())},it)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(je){je.callback=null},o.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<je?Math.floor(1e3/je):5},o.unstable_getCurrentPriorityLevel=function(){return Y},o.unstable_next=function(je){switch(Y){case 1:case 2:case 3:var it=3;break;default:it=Y}var st=Y;Y=it;try{return je()}finally{Y=st}},o.unstable_requestPaint=function(){Re=!0},o.unstable_runWithPriority=function(je,it){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var st=Y;Y=je;try{return it()}finally{Y=st}},o.unstable_scheduleCallback=function(je,it,st){var mt=o.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?mt+st:mt):st=mt,je){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=st+ye,je={id:j++,callback:it,priorityLevel:je,startTime:st,expirationTime:ye,sortIndex:-1},st>mt?(je.sortIndex=st,l(k,je),m(R)===null&&je===m(k)&&(xe?(De(ht),ht=-1):xe=!0,ui(Fe,st-mt))):(je.sortIndex=ye,l(R,je),se||X||(se=!0,ct||(ct=!0,Et()))),je},o.unstable_shouldYield=lt,o.unstable_wrapCallback=function(je){var it=Y;return function(){var st=Y;Y=it;try{return je.apply(this,arguments)}finally{Y=st}}}}(Rg)),Rg}var A_;function Ob(){return A_||(A_=1,Dg.exports=Lb()),Dg.exports}var kg={exports:{}},Ea={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Bb(){if(P_)return Ea;P_=1;var o=ky();function l(R){var k="https://react.dev/errors/"+R;if(1<arguments.length){k+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)k+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+R+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(){}var g={d:{f:m,r:function(){throw Error(l(522))},D:m,C:m,L:m,m,X:m,S:m,M:m},p:0,findDOMNode:null},S=Symbol.for("react.portal");function C(R,k,j){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:$==null?null:""+$,children:R,containerInfo:k,implementation:j}}var w=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(R,k){if(R==="font")return"";if(typeof k=="string")return k==="use-credentials"?k:""}return Ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=g,Ea.createPortal=function(R,k){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k||k.nodeType!==1&&k.nodeType!==9&&k.nodeType!==11)throw Error(l(299));return C(R,k,null,j)},Ea.flushSync=function(R){var k=w.T,j=g.p;try{if(w.T=null,g.p=2,R)return R()}finally{w.T=k,g.p=j,g.d.f()}},Ea.preconnect=function(R,k){typeof R=="string"&&(k?(k=k.crossOrigin,k=typeof k=="string"?k==="use-credentials"?k:"":void 0):k=null,g.d.C(R,k))},Ea.prefetchDNS=function(R){typeof R=="string"&&g.d.D(R)},Ea.preinit=function(R,k){if(typeof R=="string"&&k&&typeof k.as=="string"){var j=k.as,$=c(j,k.crossOrigin),Y=typeof k.integrity=="string"?k.integrity:void 0,X=typeof k.fetchPriority=="string"?k.fetchPriority:void 0;j==="style"?g.d.S(R,typeof k.precedence=="string"?k.precedence:void 0,{crossOrigin:$,integrity:Y,fetchPriority:X}):j==="script"&&g.d.X(R,{crossOrigin:$,integrity:Y,fetchPriority:X,nonce:typeof k.nonce=="string"?k.nonce:void 0})}},Ea.preinitModule=function(R,k){if(typeof R=="string")if(typeof k=="object"&&k!==null){if(k.as==null||k.as==="script"){var j=c(k.as,k.crossOrigin);g.d.M(R,{crossOrigin:j,integrity:typeof k.integrity=="string"?k.integrity:void 0,nonce:typeof k.nonce=="string"?k.nonce:void 0})}}else k==null&&g.d.M(R)},Ea.preload=function(R,k){if(typeof R=="string"&&typeof k=="object"&&k!==null&&typeof k.as=="string"){var j=k.as,$=c(j,k.crossOrigin);g.d.L(R,j,{crossOrigin:$,integrity:typeof k.integrity=="string"?k.integrity:void 0,nonce:typeof k.nonce=="string"?k.nonce:void 0,type:typeof k.type=="string"?k.type:void 0,fetchPriority:typeof k.fetchPriority=="string"?k.fetchPriority:void 0,referrerPolicy:typeof k.referrerPolicy=="string"?k.referrerPolicy:void 0,imageSrcSet:typeof k.imageSrcSet=="string"?k.imageSrcSet:void 0,imageSizes:typeof k.imageSizes=="string"?k.imageSizes:void 0,media:typeof k.media=="string"?k.media:void 0})}},Ea.preloadModule=function(R,k){if(typeof R=="string")if(k){var j=c(k.as,k.crossOrigin);g.d.m(R,{as:typeof k.as=="string"&&k.as!=="script"?k.as:void 0,crossOrigin:j,integrity:typeof k.integrity=="string"?k.integrity:void 0})}else g.d.m(R)},Ea.requestFormReset=function(R){g.d.r(R)},Ea.unstable_batchedUpdates=function(R,k){return R(k)},Ea.useFormState=function(R,k,j){return w.H.useFormState(R,k,j)},Ea.useFormStatus=function(){return w.H.useHostTransitionStatus()},Ea.version="19.1.1",Ea}var z_;function jb(){if(z_)return kg.exports;z_=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(l){console.error(l)}}return o(),kg.exports=Bb(),kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function Nb(){if(I_)return wp;I_=1;var o=Ob(),l=ky(),m=jb();function g(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function C(i){var s=i,d=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(d=s.return),i=s.return;while(i)}return s.tag===3?d:null}function w(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(C(i)!==i)throw Error(g(188))}function R(i){var s=i.alternate;if(!s){if(s=C(i),s===null)throw Error(g(188));return s!==i?null:i}for(var d=i,v=s;;){var E=d.return;if(E===null)break;var I=E.alternate;if(I===null){if(v=E.return,v!==null){d=v;continue}break}if(E.child===I.child){for(I=E.child;I;){if(I===d)return c(E),i;if(I===v)return c(E),s;I=I.sibling}throw Error(g(188))}if(d.return!==v.return)d=E,v=I;else{for(var Z=!1,ee=E.child;ee;){if(ee===d){Z=!0,d=E,v=I;break}if(ee===v){Z=!0,v=E,d=I;break}ee=ee.sibling}if(!Z){for(ee=I.child;ee;){if(ee===d){Z=!0,d=I,v=E;break}if(ee===v){Z=!0,v=I,d=E;break}ee=ee.sibling}if(!Z)throw Error(g(189))}}if(d.alternate!==v)throw Error(g(190))}if(d.tag!==3)throw Error(g(188));return d.stateNode.current===d?i:s}function k(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=k(i),s!==null)return s;i=i.sibling}return null}var j=Object.assign,$=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),Re=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),De=Symbol.for("react.consumer"),Ce=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),ut=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),Tt=Symbol.iterator;function Et(i){return i===null||typeof i!="object"?null:(i=Tt&&i[Tt]||i["@@iterator"],typeof i=="function"?i:null)}var ai=Symbol.for("react.client.reference");function Li(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ai?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case se:return"Fragment";case Re:return"Profiler";case xe:return"StrictMode";case Fe:return"Suspense";case ct:return"SuspenseList";case ut:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case X:return"Portal";case Ce:return(i.displayName||"Context")+".Provider";case De:return(i._context.displayName||"Context")+".Consumer";case Ye:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ht:return s=i.displayName||null,s!==null?s:Li(i.type)||"Memo";case et:s=i._payload,i=i._init;try{return Li(i(s))}catch{}}return null}var ui=Array.isArray,je=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=m.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},mt=[],ye=-1;function Ke(i){return{current:i}}function Mt(i){0>ye||(i.current=mt[ye],mt[ye]=null,ye--)}function St(i,s){ye++,mt[ye]=i.current,i.current=s}var Bt=Ke(null),hi=Ke(null),Nt=Ke(null),Hn=Ke(null);function gi(i,s){switch(St(Nt,s),St(hi,i),St(Bt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Pm(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Pm(s),i=hp(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Mt(Bt),St(Bt,i)}function Xn(){Mt(Bt),Mt(hi),Mt(Nt)}function Us(i){i.memoizedState!==null&&St(Hn,i);var s=Bt.current,d=hp(s,i.type);s!==d&&(St(hi,i),St(Bt,d))}function ps(i){hi.current===i&&(Mt(Bt),Mt(hi)),Hn.current===i&&(Mt(Hn),Me._currentValue=st)}var zr=Object.prototype.hasOwnProperty,en=o.unstable_scheduleCallback,ln=o.unstable_cancelCallback,Aa=o.unstable_shouldYield,Ya=o.unstable_requestPaint,pr=o.unstable_now,Wa=o.unstable_getCurrentPriorityLevel,Pa=o.unstable_ImmediatePriority,Eo=o.unstable_UserBlockingPriority,za=o.unstable_NormalPriority,Gs=o.unstable_LowPriority,ms=o.unstable_IdlePriority,Co=o.log,Zs=o.unstable_setDisableYieldValue,oa=null,In=null;function Hr(i){if(typeof Co=="function"&&Zs(i),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(oa,i)}catch{}}var Te=Math.clz32?Math.clz32:te,K=Math.log,J=Math.LN2;function te(i){return i>>>=0,i===0?32:31-(K(i)/J|0)|0}var de=256,we=4194304;function Se(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ne(i,s,d){var v=i.pendingLanes;if(v===0)return 0;var E=0,I=i.suspendedLanes,Z=i.pingedLanes;i=i.warmLanes;var ee=v&134217727;return ee!==0?(v=ee&~I,v!==0?E=Se(v):(Z&=ee,Z!==0?E=Se(Z):d||(d=ee&~i,d!==0&&(E=Se(d))))):(ee=v&~I,ee!==0?E=Se(ee):Z!==0?E=Se(Z):d||(d=v&~i,d!==0&&(E=Se(d)))),E===0?0:s!==0&&s!==E&&(s&I)===0&&(I=E&-E,d=s&-s,I>=d||I===32&&(d&4194048)!==0)?s:E}function Pe(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Xe(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var i=de;return de<<=1,(de&4194048)===0&&(de=256),i}function Qe(){var i=we;return we<<=1,(we&62914560)===0&&(we=4194304),i}function Pt(i){for(var s=[],d=0;31>d;d++)s.push(i);return s}function ze(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Zt(i,s,d,v,E,I){var Z=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var ee=i.entanglements,_e=i.expirationTimes,Ge=i.hiddenUpdates;for(d=Z&~d;0<d;){var Je=31-Te(d),at=1<<Je;ee[Je]=0,_e[Je]=-1;var qe=Ge[Je];if(qe!==null)for(Ge[Je]=null,Je=0;Je<qe.length;Je++){var He=qe[Je];He!==null&&(He.lane&=-536870913)}d&=~at}v!==0&&si(i,v,0),I!==0&&E===0&&i.tag!==0&&(i.suspendedLanes|=I&~(Z&~s))}function si(i,s,d){i.pendingLanes|=s,i.suspendedLanes&=~s;var v=31-Te(s);i.entangledLanes|=s,i.entanglements[v]=i.entanglements[v]|1073741824|d&4194090}function Rt(i,s){var d=i.entangledLanes|=s;for(i=i.entanglements;d;){var v=31-Te(d),E=1<<v;E&s|i[v]&s&&(i[v]|=s),d&=~E}}function Yt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ii(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Dn(){var i=it.p;return i!==0?i:(i=window.event,i===void 0?32:Lt(i.type))}function Nn(i,s){var d=it.p;try{return it.p=i,s()}finally{it.p=d}}var Oi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Oi,qt="__reactProps$"+Oi,Xi="__reactContainer$"+Oi,dt="__reactEvents$"+Oi,mr="__reactListeners$"+Oi,cn="__reactHandles$"+Oi,gs="__reactResources$"+Oi,Ka="__reactMarker$"+Oi;function bt(i){delete i[Vt],delete i[qt],delete i[dt],delete i[mr],delete i[cn]}function Qt(i){var s=i[Vt];if(s)return s;for(var d=i.parentNode;d;){if(s=d[Xi]||d[Vt]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(i=ru(i);i!==null;){if(d=i[Vt])return d;i=ru(i)}return s}i=d,d=i.parentNode}return null}function Ht(i){if(i=i[Vt]||i[Xi]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function En(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(g(33))}function la(i){var s=i[gs];return s||(s=i[gs]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Yi(i){i[Ka]=!0}var Jt=new Set,cc={};function Ur(i,s){ys(i,s),ys(i+"Capture",s)}function ys(i,s){for(cc[i]=s,i=0;i<s.length;i++)Jt.add(s[i])}var Qa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ao={},un={};function mu(i){return zr.call(un,i)?!0:zr.call(Ao,i)?!1:Qa.test(i)?un[i]=!0:(Ao[i]=!0,!1)}function er(i,s,d){if(mu(s))if(d===null)i.removeAttribute(s);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var v=s.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+d)}}function Ti(i,s,d){if(d===null)i.removeAttribute(s);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+d)}}function Ja(i,s,d,v){if(v===null)i.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(s,d,""+v)}}var Po,gu;function Xr(i){if(Po===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);Po=s&&s[1]||"",gu=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Po+i+gu}var es=!1;function uc(i,s){if(!i||es)return"";es=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(s){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(He){var qe=He}Reflect.construct(i,[],at)}else{try{at.call()}catch(He){qe=He}i.call(at.prototype)}}else{try{throw Error()}catch(He){qe=He}(at=i())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(He){if(He&&qe&&typeof He.stack=="string")return[He.stack,qe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),Z=I[0],ee=I[1];if(Z&&ee){var _e=Z.split(`
`),Ge=ee.split(`
`);for(E=v=0;v<_e.length&&!_e[v].includes("DetermineComponentFrameRoot");)v++;for(;E<Ge.length&&!Ge[E].includes("DetermineComponentFrameRoot");)E++;if(v===_e.length||E===Ge.length)for(v=_e.length-1,E=Ge.length-1;1<=v&&0<=E&&_e[v]!==Ge[E];)E--;for(;1<=v&&0<=E;v--,E--)if(_e[v]!==Ge[E]){if(v!==1||E!==1)do if(v--,E--,0>E||_e[v]!==Ge[E]){var Je=`
`+_e[v].replace(" at new "," at ");return i.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",i.displayName)),Je}while(1<=v&&0<=E);break}}}finally{es=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?Xr(d):""}function md(i){switch(i.tag){case 26:case 27:case 5:return Xr(i.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return uc(i.type,!1);case 11:return uc(i.type.render,!1);case 1:return uc(i.type,!0);case 31:return Xr("Activity");default:return""}}function uh(i){try{var s="";do s+=md(i),i=i.return;while(i);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function tr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ef(i){var s=hh(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),v=""+i[s];if(!i.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,I=d.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return E.call(this)},set:function(Z){v=""+Z,I.call(this,Z)}}),Object.defineProperty(i,s,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(Z){v=""+Z},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function yu(i){i._valueTracker||(i._valueTracker=Ef(i))}function gd(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var d=s.getValue(),v="";return i&&(v=hh(i)?i.checked?"true":"false":i.value),i=v,i!==d?(s.setValue(i),!0):!1}function ml(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gl=/[\n"\\]/g;function Gr(i){return i.replace(gl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function hc(i,s,d,v,E,I,Z,ee){i.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?i.type=Z:i.removeAttribute("type"),s!=null?Z==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+tr(s)):i.value!==""+tr(s)&&(i.value=""+tr(s)):Z!=="submit"&&Z!=="reset"||i.removeAttribute("value"),s!=null?dc(i,Z,tr(s)):d!=null?dc(i,Z,tr(d)):v!=null&&i.removeAttribute("value"),E==null&&I!=null&&(i.defaultChecked=!!I),E!=null&&(i.checked=E&&typeof E!="function"&&typeof E!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?i.name=""+tr(ee):i.removeAttribute("name")}function zo(i,s,d,v,E,I,Z,ee){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(i.type=I),s!=null||d!=null){if(!(I!=="submit"&&I!=="reset"||s!=null))return;d=d!=null?""+tr(d):"",s=s!=null?""+tr(s):d,ee||s===i.value||(i.value=s),i.defaultValue=s}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,i.checked=ee?i.checked:!!v,i.defaultChecked=!!v,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(i.name=Z)}function dc(i,s,d){s==="number"&&ml(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function qs(i,s,d,v){if(i=i.options,s){s={};for(var E=0;E<d.length;E++)s["$"+d[E]]=!0;for(d=0;d<i.length;d++)E=s.hasOwnProperty("$"+i[d].value),i[d].selected!==E&&(i[d].selected=E),E&&v&&(i[d].defaultSelected=!0)}else{for(d=""+tr(d),s=null,E=0;E<i.length;E++){if(i[E].value===d){i[E].selected=!0,v&&(i[E].defaultSelected=!0);return}s!==null||i[E].disabled||(s=i[E])}s!==null&&(s.selected=!0)}}function yd(i,s,d){if(s!=null&&(s=""+tr(s),s!==i.value&&(i.value=s),d==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=d!=null?""+tr(d):""}function Io(i,s,d,v){if(s==null){if(v!=null){if(d!=null)throw Error(g(92));if(ui(v)){if(1<v.length)throw Error(g(93));v=v[0]}d=v}d==null&&(d=""),s=d}d=tr(s),i.defaultValue=d,v=i.textContent,v===d&&v!==""&&v!==null&&(i.value=v)}function ts(i,s){if(s){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=s;return}}i.textContent=s}var Ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oi(i,s,d){var v=s.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":v?i.setProperty(s,d):typeof d!="number"||d===0||Ia.has(s)?s==="float"?i.cssFloat=d:i[s]=(""+d).trim():i[s]=d+"px"}function $s(i,s,d){if(s!=null&&typeof s!="object")throw Error(g(62));if(i=i.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||s!=null&&s.hasOwnProperty(v)||(v.indexOf("--")===0?i.setProperty(v,""):v==="float"?i.cssFloat="":i[v]="");for(var E in s)v=s[E],s.hasOwnProperty(E)&&d[E]!==v&&oi(i,E,v)}else for(var I in s)s.hasOwnProperty(I)&&oi(i,I,s[I])}function is(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Do=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ni(i){return Do.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var vs=null;function yl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xs=null,Rn=null;function Fn(i){var s=Ht(i);if(s&&(i=s.stateNode)){var d=i[qt]||null;e:switch(i=s.stateNode,s.type){case"input":if(hc(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),s=d.name,d.type==="radio"&&s!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Gr(""+s)+'"][type="radio"]'),s=0;s<d.length;s++){var v=d[s];if(v!==i&&v.form===i.form){var E=v[qt]||null;if(!E)throw Error(g(90));hc(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<d.length;s++)v=d[s],v.form===i.form&&gd(v)}break e;case"textarea":yd(i,d.value,d.defaultValue);break e;case"select":s=d.value,s!=null&&qs(i,!!d.multiple,s,!1)}}}var ir=!1;function Cn(i,s,d){if(ir)return i(s,d);ir=!0;try{var v=i(s);return v}finally{if(ir=!1,(xs!==null||Rn!==null)&&(Yd(),xs&&(s=xs,i=Rn,Rn=xs=null,Fn(s),i)))for(s=0;s<i.length;s++)Fn(i[s])}}function bi(i,s){var d=i.stateNode;if(d===null)return null;var v=d[qt]||null;if(v===null)return null;d=v[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(i=i.type,v=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!v;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(g(231,s,typeof d));return d}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nr=!1;if(ns)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){nr=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{nr=!1}var hn=null,Bi=null,rs=null;function Ft(){if(rs)return rs;var i,s=Bi,d=s.length,v,E="value"in hn?hn.value:hn.textContent,I=E.length;for(i=0;i<d&&s[i]===E[i];i++);var Z=d-i;for(v=1;v<=Z&&s[d-v]===E[I-v];v++);return rs=E.slice(i,1<v?1-v:void 0)}function $t(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ca(){return!0}function di(){return!1}function Ui(i){function s(d,v,E,I,Z){this._reactName=d,this._targetInst=E,this.type=v,this.nativeEvent=I,this.target=Z,this.currentTarget=null;for(var ee in i)i.hasOwnProperty(ee)&&(d=i[ee],this[ee]=d?d(I):I[ee]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?ca:di,this.isPropagationStopped=di,this}return j(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=Ui(gr),Hs=j({},gr,{view:0,detail:0}),dh=Ui(Hs),Xs,Ro,Ys,ko=j({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ys&&(Ys&&i.type==="mousemove"?(Xs=i.screenX-Ys.screenX,Ro=i.screenY-Ys.screenY):Ro=Xs=0,Ys=i),Xs)},movementY:function(i){return"movementY"in i?i.movementY:Ro}}),fc=Ui(ko),Da=j({},ko,{dataTransfer:0}),Yn=Ui(Da),_l=j({},Hs,{relatedTarget:0}),Lo=Ui(_l),Oo=j({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),mn=Ui(Oo),_d=j({},gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),pc=Ui(_d),fh=j({},gr,{data:0}),vd=Ui(fh),vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ar={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function as(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=mc[i])?!!s[i]:!1}function Bo(){return as}var gc=j({},Hs,{key:function(i){if(i.key){var s=vl[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=$t(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ar[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bo,charCode:function(i){return i.type==="keypress"?$t(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$t(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yc=Ui(gc),yr=j({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ph=Ui(yr),_u=j({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bo}),Cf=Ui(_u),mh=j({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Af=Ui(mh),Pf=j({},ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vu=Ui(Pf),gh=j({},gr,{newState:0,oldState:0}),jo=Ui(gh),yh=[9,13,27,32],xl=ns&&"CompositionEvent"in window,Ir=null;ns&&"documentMode"in document&&(Ir=document.documentMode);var zf=ns&&"TextEvent"in window&&!Ir,_c=ns&&(!xl||Ir&&8<Ir&&11>=Ir),bl=" ",wl=!1;function xd(i,s){switch(i){case"keyup":return yh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Tl=!1;function No(i,s){switch(i){case"compositionend":return vc(s);case"keypress":return s.which!==32?null:(wl=!0,bl);case"textInput":return i=s.data,i===bl&&wl?null:i;default:return null}}function bd(i,s){if(Tl)return i==="compositionend"||!xl&&xd(i,s)?(i=Ft(),rs=Bi=hn=null,Tl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _c&&s.locale!=="ko"?null:s.data;default:return null}}var _h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_h[i.type]:s==="textarea"}function vh(i,s,d,v){xs?Rn?Rn.push(v):Rn=[v]:xs=v,s=Jh(s,"onChange"),0<s.length&&(d=new Yr("onChange","change",null,d,v),i.push({event:d,listeners:s}))}var Fo=null,Sl=null;function xu(i){Em(i,0)}function xc(i){var s=En(i);if(gd(s))return i}function xh(i,s){if(i==="change")return s}var Ws=!1;if(ns){var bc;if(ns){var wc="oninput"in document;if(!wc){var Ml=document.createElement("div");Ml.setAttribute("oninput","return;"),wc=typeof Ml.oninput=="function"}bc=wc}else bc=!1;Ws=bc&&(!document.documentMode||9<document.documentMode)}function Td(){Fo&&(Fo.detachEvent("onpropertychange",El),Sl=Fo=null)}function El(i){if(i.propertyName==="value"&&xc(Sl)){var s=[];vh(s,Sl,i,yl(i)),Cn(xu,s)}}function Sd(i,s,d){i==="focusin"?(Td(),Fo=s,Sl=d,Fo.attachEvent("onpropertychange",El)):i==="focusout"&&Td()}function If(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xc(Sl)}function Md(i,s){if(i==="click")return xc(s)}function Ed(i,s){if(i==="input"||i==="change")return xc(s)}function bh(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Dr=typeof Object.is=="function"?Object.is:bh;function Cl(i,s){if(Dr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var d=Object.keys(i),v=Object.keys(s);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var E=d[v];if(!zr.call(s,E)||!Dr(i[E],s[E]))return!1}return!0}function Tc(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ss(i,s){var d=Tc(i);i=0;for(var v;d;){if(d.nodeType===3){if(v=i+d.textContent.length,i<=s&&v>=s)return{node:d,offset:s-i};i=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Tc(d)}}function yi(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?yi(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function bu(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ml(i.document);s instanceof i.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)i=s.contentWindow;else break;s=ml(i.document)}return s}function Sc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Cd=ns&&"documentMode"in document&&11>=document.documentMode,Ks=null,bs=null,Vo=null,wh=!1;function Ad(i,s,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wh||Ks==null||Ks!==ml(v)||(v=Ks,"selectionStart"in v&&Sc(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Vo&&Cl(Vo,v)||(Vo=v,v=Jh(bs,"onSelect"),0<v.length&&(s=new Yr("onSelect","select",null,s,d),i.push({event:s,listeners:v}),s.target=Ks)))}function Uo(i,s){var d={};return d[i.toLowerCase()]=s.toLowerCase(),d["Webkit"+i]="webkit"+s,d["Moz"+i]="moz"+s,d}var Al={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionrun:Uo("Transition","TransitionRun"),transitionstart:Uo("Transition","TransitionStart"),transitioncancel:Uo("Transition","TransitionCancel"),transitionend:Uo("Transition","TransitionEnd")},wu={},Pd={};ns&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function Qs(i){if(wu[i])return wu[i];if(!Al[i])return i;var s=Al[i],d;for(d in s)if(s.hasOwnProperty(d)&&d in Pd)return wu[i]=s[d];return i}var Mc=Qs("animationend"),Ec=Qs("animationiteration"),Cc=Qs("animationstart"),Th=Qs("transitionrun"),Go=Qs("transitionstart"),Ac=Qs("transitioncancel"),Zo=Qs("transitionend"),Wr=new Map,Tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tu.push("scrollEnd");function ua(i,s){Wr.set(i,s),Ur(s,[i])}var Su=new WeakMap;function Wn(i,s){if(typeof i=="object"&&i!==null){var d=Su.get(i);return d!==void 0?d:(s={value:i,source:s,stack:uh(s)},Su.set(i,s),s)}return{value:i,source:s,stack:uh(s)}}var Rr=[],ws=0,qo=0;function $o(){for(var i=ws,s=qo=ws=0;s<i;){var d=Rr[s];Rr[s++]=null;var v=Rr[s];Rr[s++]=null;var E=Rr[s];Rr[s++]=null;var I=Rr[s];if(Rr[s++]=null,v!==null&&E!==null){var Z=v.pending;Z===null?E.next=E:(E.next=Z.next,Z.next=E),v.pending=E}I!==0&&Sh(d,E,I)}}function Pc(i,s,d,v){Rr[ws++]=i,Rr[ws++]=s,Rr[ws++]=d,Rr[ws++]=v,qo|=v,i.lanes|=v,i=i.alternate,i!==null&&(i.lanes|=v)}function Js(i,s,d,v){return Pc(i,s,d,v),Pl(i)}function Kr(i,s){return Pc(i,null,null,s),Pl(i)}function Sh(i,s,d){i.lanes|=d;var v=i.alternate;v!==null&&(v.lanes|=d);for(var E=!1,I=i.return;I!==null;)I.childLanes|=d,v=I.alternate,v!==null&&(v.childLanes|=d),I.tag===22&&(i=I.stateNode,i===null||i._visibility&1||(E=!0)),i=I,I=I.return;return i.tag===3?(I=i.stateNode,E&&s!==null&&(E=31-Te(d),i=I.hiddenUpdates,v=i[E],v===null?i[E]=[s]:v.push(s),s.lane=d|536870912),I):null}function Pl(i){if(50<Qc)throw Qc=0,Wl=null,Error(g(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ii={};function zc(i,s,d,v){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(i,s,d,v){return new zc(i,s,d,v)}function Mu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _r(i,s){var d=i.alternate;return d===null?(d=Qr(i.tag,s,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=s,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,s=i.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function Mh(i,s){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,s=d.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Eu(i,s,d,v,E,I){var Z=0;if(v=i,typeof i=="function")Mu(i)&&(Z=1);else if(typeof i=="string")Z=A(i,d,Bt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ut:return i=Qr(31,d,s,E),i.elementType=ut,i.lanes=I,i;case se:return eo(d.children,E,I,s);case xe:Z=8,E|=24;break;case Re:return i=Qr(12,d,s,E|2),i.elementType=Re,i.lanes=I,i;case Fe:return i=Qr(13,d,s,E),i.elementType=Fe,i.lanes=I,i;case ct:return i=Qr(19,d,s,E),i.elementType=ct,i.lanes=I,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ce:case Ce:Z=10;break e;case De:Z=9;break e;case Ye:Z=11;break e;case ht:Z=14;break e;case et:Z=16,v=null;break e}Z=29,d=Error(g(130,i===null?"null":typeof i,"")),v=null}return s=Qr(Z,d,s,E),s.elementType=i,s.type=v,s.lanes=I,s}function eo(i,s,d,v){return i=Qr(7,i,v,s),i.lanes=d,i}function Eh(i,s,d){return i=Qr(6,i,null,s),i.lanes=d,i}function Ic(i,s,d){return s=Qr(4,i.children!==null?i.children:[],i.key,s),s.lanes=d,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Ts=[],os=0,to=null,zl=0,Jr=[],vr=0,Ra=null,ea=1,ha="";function Ss(i,s){Ts[os++]=zl,Ts[os++]=to,to=i,zl=s}function io(i,s,d){Jr[vr++]=ea,Jr[vr++]=ha,Jr[vr++]=Ra,Ra=i;var v=ea;i=ha;var E=32-Te(v)-1;v&=~(1<<E),d+=1;var I=32-Te(s)+E;if(30<I){var Z=E-E%5;I=(v&(1<<Z)-1).toString(32),v>>=Z,E-=Z,ea=1<<32-Te(s)+E|d<<E|v,ha=I+i}else ea=1<<I|d<<E|v,ha=i}function Dc(i){i.return!==null&&(Ss(i,1),io(i,1,0))}function Il(i){for(;i===to;)to=Ts[--os],Ts[os]=null,zl=Ts[--os],Ts[os]=null;for(;i===Ra;)Ra=Jr[--vr],Jr[vr]=null,ha=Jr[--vr],Jr[vr]=null,ea=Jr[--vr],Jr[vr]=null}var An=null,tn=null,wi=!1,no=null,ta=!1,Rc=Error(g(519));function Ho(i){var s=Error(g(418,""));throw Ms(Wn(s,i)),Rc}function Cu(i){var s=i.stateNode,d=i.type,v=i.memoizedProps;switch(s[Vt]=i,s[qt]=v,d){case"dialog":xi("cancel",s),xi("close",s);break;case"iframe":case"object":case"embed":xi("load",s);break;case"video":case"audio":for(d=0;d<Kh.length;d++)xi(Kh[d],s);break;case"source":xi("error",s);break;case"img":case"image":case"link":xi("error",s),xi("load",s);break;case"details":xi("toggle",s);break;case"input":xi("invalid",s),zo(s,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),yu(s);break;case"select":xi("invalid",s);break;case"textarea":xi("invalid",s),Io(s,v.value,v.defaultValue,v.children),yu(s)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||s.textContent===""+d||v.suppressHydrationWarning===!0||up(s.textContent,d)?(v.popover!=null&&(xi("beforetoggle",s),xi("toggle",s)),v.onScroll!=null&&xi("scroll",s),v.onScrollEnd!=null&&xi("scrollend",s),v.onClick!=null&&(s.onclick=$r),s=!0):s=!1,s||Ho(i)}function nn(i){for(An=i.return;An;)switch(An.tag){case 5:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:An=An.return}}function Zr(i){if(i!==An)return!1;if(!wi)return nn(i),wi=!0,!1;var s=i.tag,d;if((d=s!==3&&s!==27)&&((d=s===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||bo(i.type,i.memoizedProps)),d=!d),d&&tn&&Ho(i),nn(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(g(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(s===0){tn=Ns(i.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++;i=i.nextSibling}tn=null}}else s===27?(s=tn,cl(i.type)?(i=fp,fp=null,tn=i):tn=s):tn=An?Ns(i.stateNode.nextSibling):null;return!0}function xr(){tn=An=null,wi=!1}function kc(){var i=no;return i!==null&&(ba===null?ba=i:ba.push.apply(ba,i),no=null),i}function Ms(i){no===null?no=[i]:no.push(i)}var Au=Ke(null),ia=null,da=null;function br(i,s,d){St(Au,s._currentValue),s._currentValue=d}function ka(i){i._currentValue=Au.current,Mt(Au)}function Pu(i,s,d){for(;i!==null;){var v=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,v!==null&&(v.childLanes|=s)):v!==null&&(v.childLanes&s)!==s&&(v.childLanes|=s),i===d)break;i=i.return}}function zu(i,s,d,v){var E=i.child;for(E!==null&&(E.return=i);E!==null;){var I=E.dependencies;if(I!==null){var Z=E.child;I=I.firstContext;e:for(;I!==null;){var ee=I;I=E;for(var _e=0;_e<s.length;_e++)if(ee.context===s[_e]){I.lanes|=d,ee=I.alternate,ee!==null&&(ee.lanes|=d),Pu(I.return,d,i),v||(Z=null);break e}I=ee.next}}else if(E.tag===18){if(Z=E.return,Z===null)throw Error(g(341));Z.lanes|=d,I=Z.alternate,I!==null&&(I.lanes|=d),Pu(Z,d,i),Z=null}else Z=E.child;if(Z!==null)Z.return=E;else for(Z=E;Z!==null;){if(Z===i){Z=null;break}if(E=Z.sibling,E!==null){E.return=Z.return,Z=E;break}Z=Z.return}E=Z}}function Dl(i,s,d,v){i=null;for(var E=s,I=!1;E!==null;){if(!I){if((E.flags&524288)!==0)I=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Z=E.alternate;if(Z===null)throw Error(g(387));if(Z=Z.memoizedProps,Z!==null){var ee=E.type;Dr(E.pendingProps.value,Z.value)||(i!==null?i.push(ee):i=[ee])}}else if(E===Hn.current){if(Z=E.alternate,Z===null)throw Error(g(387));Z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(i!==null?i.push(Me):i=[Me])}E=E.return}i!==null&&zu(s,i,d,v),s.flags|=262144}function Lc(i){for(i=i.firstContext;i!==null;){if(!Dr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ro(i){ia=i,da=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Gi(i){return kr(ia,i)}function Es(i,s){return ia===null&&ro(i),kr(i,s)}function kr(i,s){var d=s._currentValue;if(s={context:s,memoizedValue:d,next:null},da===null){if(i===null)throw Error(g(308));da=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else da=da.next=s;return d}var Rl=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(d,v){i.push(v)}};this.abort=function(){s.aborted=!0,i.forEach(function(d){return d()})}},Ch=o.unstable_scheduleCallback,zd=o.unstable_NormalPriority,kn={$$typeof:Ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ao(){return{controller:new Rl,data:new Map,refCount:0}}function Xo(i){i.refCount--,i.refCount===0&&Ch(zd,function(){i.controller.abort()})}var ls=null,Iu=0,Vn=0,wr=null;function kl(i,s){if(ls===null){var d=ls=[];Iu=0,Vn=Yh(),wr={status:"pending",value:void 0,then:function(v){d.push(v)}}}return Iu++,s.then(fa,fa),s}function fa(){if(--Iu===0&&ls!==null){wr!==null&&(wr.status="fulfilled");var i=ls;ls=null,Vn=0,wr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Ll(i,s){var d=[],v={status:"pending",value:null,reason:null,then:function(E){d.push(E)}};return i.then(function(){v.status="fulfilled",v.value=s;for(var E=0;E<d.length;E++)(0,d[E])(s)},function(E){for(v.status="rejected",v.reason=E,E=0;E<d.length;E++)(0,d[E])(void 0)}),v}var Id=je.S;je.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&kl(i,s),Id!==null&&Id(i,s)};var La=Ke(null);function Ah(){var i=La.current;return i!==null?i:on.pooledCache}function Du(i,s){s===null?St(La,La.current):St(La,s.pool)}function Ol(){var i=Ah();return i===null?null:{parent:kn._currentValue,pool:i}}var Cs=Error(g(460)),pa=Error(g(474)),wt=Error(g(542)),Oc={then:function(){}};function Bc(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Bl(){}function Yo(i,s,d){switch(d=i[d],d===void 0?i.push(s):d!==s&&(s.then(Bl,Bl),s=d),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ci(i),i;default:if(typeof s.status=="string")s.then(Bl,Bl);else{if(i=on,i!==null&&100<i.shellSuspendCounter)throw Error(g(482));i=s,i.status="pending",i.then(function(v){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=v}},function(v){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=v}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ci(i),i}throw Oa=s,Cs}}var Oa=null;function jc(){if(Oa===null)throw Error(g(459));var i=Oa;return Oa=null,i}function ci(i){if(i===Cs||i===wt)throw Error(g(483))}var Ba=!1;function Ph(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jl(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function so(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function As(i,s,d){var v=i.updateQueue;if(v===null)return null;if(v=v.shared,(Ni&2)!==0){var E=v.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),v.pending=s,s=Pl(i),Sh(i,null,d),s}return Pc(i,v,s,d),Pl(i)}function Wo(i,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194048)!==0)){var v=s.lanes;v&=i.pendingLanes,d|=v,s.lanes=d,Rt(i,d)}}function Nc(i,s){var d=i.updateQueue,v=i.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var E=null,I=null;if(d=d.firstBaseUpdate,d!==null){do{var Z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};I===null?E=I=Z:I=I.next=Z,d=d.next}while(d!==null);I===null?E=I=s:I=I.next=s}else E=I=s;d={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=s:i.next=s,d.lastBaseUpdate=s}var Ru=!1;function Nl(){if(Ru){var i=wr;if(i!==null)throw i}}function Ko(i,s,d,v){Ru=!1;var E=i.updateQueue;Ba=!1;var I=E.firstBaseUpdate,Z=E.lastBaseUpdate,ee=E.shared.pending;if(ee!==null){E.shared.pending=null;var _e=ee,Ge=_e.next;_e.next=null,Z===null?I=Ge:Z.next=Ge,Z=_e;var Je=i.alternate;Je!==null&&(Je=Je.updateQueue,ee=Je.lastBaseUpdate,ee!==Z&&(ee===null?Je.firstBaseUpdate=Ge:ee.next=Ge,Je.lastBaseUpdate=_e))}if(I!==null){var at=E.baseState;Z=0,Je=Ge=_e=null,ee=I;do{var qe=ee.lane&-536870913,He=qe!==ee.lane;if(He?(pi&qe)===qe:(v&qe)===qe){qe!==0&&qe===Vn&&(Ru=!0),Je!==null&&(Je=Je.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Kt=i,Xt=ee;qe=s;var Hi=d;switch(Xt.tag){case 1:if(Kt=Xt.payload,typeof Kt=="function"){at=Kt.call(Hi,at,qe);break e}at=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Xt.payload,qe=typeof Kt=="function"?Kt.call(Hi,at,qe):Kt,qe==null)break e;at=j({},at,qe);break e;case 2:Ba=!0}}qe=ee.callback,qe!==null&&(i.flags|=64,He&&(i.flags|=8192),He=E.callbacks,He===null?E.callbacks=[qe]:He.push(qe))}else He={lane:qe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Je===null?(Ge=Je=He,_e=at):Je=Je.next=He,Z|=qe;if(ee=ee.next,ee===null){if(ee=E.shared.pending,ee===null)break;He=ee,ee=He.next,He.next=null,E.lastBaseUpdate=He,E.shared.pending=null}}while(!0);Je===null&&(_e=at),E.baseState=_e,E.firstBaseUpdate=Ge,E.lastBaseUpdate=Je,I===null&&(E.shared.lanes=0),_o|=Z,i.lanes=Z,i.memoizedState=at}}function zh(i,s){if(typeof i!="function")throw Error(g(191,i));i.call(s)}function Ih(i,s){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)zh(d[i],s)}var Tr=Ke(null),ji=Ke(0);function Qo(i,s){i=sl,St(ji,i),St(Tr,s),sl=i|s.baseLanes}function Fc(){St(ji,sl),St(Tr,Tr.current)}function ku(){sl=ji.current,Mt(Tr),Mt(ji)}var cs=0,li=null,Di=null,Ri=null,Jo=!1,Ct=!1,kt=!1,el=0,ma=0,Ps=null,Lr=0;function gn(){throw Error(g(321))}function qr(i,s){if(s===null)return!1;for(var d=0;d<s.length&&d<i.length;d++)if(!Dr(i[d],s[d]))return!1;return!0}function Dh(i,s,d,v,E,I){return cs=I,li=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,je.H=i===null||i.memoizedState===null?ya:Mr,kt=!1,I=d(v,E),kt=!1,Ct&&(I=Ei(s,d,v,E)),Fl(i),I}function Fl(i){je.H=sr;var s=Di!==null&&Di.next!==null;if(cs=0,Ri=Di=li=null,Jo=!1,ma=0,Ps=null,s)throw Error(g(300));i===null||Gn||(i=i.dependencies,i!==null&&Lc(i)&&(Gn=!0))}function Ei(i,s,d,v){li=i;var E=0;do{if(Ct&&(Ps=null),ma=0,Ct=!1,25<=E)throw Error(g(301));if(E+=1,Ri=Di=null,i.updateQueue!=null){var I=i.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}je.H=fo,I=s(d,v)}while(Ct);return I}function yn(){var i=je.H,s=i.useState()[0];return s=typeof s.then=="function"?Is(s):s,i=i.useState()[0],(Di!==null?Di.memoizedState:null)!==i&&(li.flags|=1024),s}function Vl(){var i=el!==0;return el=0,i}function oo(i,s,d){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~d}function lo(i){if(Jo){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jo=!1}cs=0,Ri=Di=li=null,Ct=!1,ma=el=0,Ps=null}function Sr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?li.memoizedState=Ri=i:Ri=Ri.next=i,Ri}function Wi(){if(Di===null){var i=li.alternate;i=i!==null?i.memoizedState:null}else i=Di.next;var s=Ri===null?li.memoizedState:Ri.next;if(s!==null)Ri=s,Di=i;else{if(i===null)throw li.alternate===null?Error(g(467)):Error(g(310));Di=i,i={memoizedState:Di.memoizedState,baseState:Di.baseState,baseQueue:Di.baseQueue,queue:Di.queue,next:null},Ri===null?li.memoizedState=Ri=i:Ri=Ri.next=i}return Ri}function zs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Is(i){var s=ma;return ma+=1,Ps===null&&(Ps=[]),i=Yo(Ps,i,s),s=li,(Ri===null?s.memoizedState:Ri.next)===null&&(s=s.alternate,je.H=s===null||s.memoizedState===null?ya:Mr),i}function tl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Is(i);if(i.$$typeof===Ce)return Gi(i)}throw Error(g(438,String(i)))}function Ds(i){var s=null,d=li.updateQueue;if(d!==null&&(s=d.memoCache),s==null){var v=li.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(s={data:v.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),d===null&&(d=zs(),li.updateQueue=d),d.memoCache=s,d=s.data[s.index],d===void 0)for(d=s.data[s.index]=Array(i),v=0;v<i;v++)d[v]=lt;return s.index++,d}function ja(i,s){return typeof s=="function"?s(i):s}function Ul(i){var s=Wi();return Gl(s,Di,i)}function Gl(i,s,d){var v=i.queue;if(v===null)throw Error(g(311));v.lastRenderedReducer=d;var E=i.baseQueue,I=v.pending;if(I!==null){if(E!==null){var Z=E.next;E.next=I.next,I.next=Z}s.baseQueue=E=I,v.pending=null}if(I=i.baseState,E===null)i.memoizedState=I;else{s=E.next;var ee=Z=null,_e=null,Ge=s,Je=!1;do{var at=Ge.lane&-536870913;if(at!==Ge.lane?(pi&at)===at:(cs&at)===at){var qe=Ge.revertLane;if(qe===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),at===Vn&&(Je=!0);else if((cs&qe)===qe){Ge=Ge.next,qe===Vn&&(Je=!0);continue}else at={lane:0,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},_e===null?(ee=_e=at,Z=I):_e=_e.next=at,li.lanes|=qe,_o|=qe;at=Ge.action,kt&&d(I,at),I=Ge.hasEagerState?Ge.eagerState:d(I,at)}else qe={lane:at,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},_e===null?(ee=_e=qe,Z=I):_e=_e.next=qe,li.lanes|=at,_o|=at;Ge=Ge.next}while(Ge!==null&&Ge!==s);if(_e===null?Z=I:_e.next=ee,!Dr(I,i.memoizedState)&&(Gn=!0,Je&&(d=wr,d!==null)))throw d;i.memoizedState=I,i.baseState=Z,i.baseQueue=_e,v.lastRenderedState=I}return E===null&&(v.lanes=0),[i.memoizedState,v.dispatch]}function Vc(i){var s=Wi(),d=s.queue;if(d===null)throw Error(g(311));d.lastRenderedReducer=i;var v=d.dispatch,E=d.pending,I=s.memoizedState;if(E!==null){d.pending=null;var Z=E=E.next;do I=i(I,Z.action),Z=Z.next;while(Z!==E);Dr(I,s.memoizedState)||(Gn=!0),s.memoizedState=I,s.baseQueue===null&&(s.baseState=I),d.lastRenderedState=I}return[I,v]}function y(i,s,d){var v=li,E=Wi(),I=wi;if(I){if(d===void 0)throw Error(g(407));d=d()}else d=s();var Z=!Dr((Di||E).memoizedState,d);Z&&(E.memoizedState=d,Gn=!0),E=E.queue;var ee=h.bind(null,v,E,i);if(Ee(2048,8,ee,[i]),E.getSnapshot!==s||Z||Ri!==null&&Ri.memoizedState.tag&1){if(v.flags|=2048,ue(9,me(),a.bind(null,v,E,d,s),null),on===null)throw Error(g(349));I||(cs&124)!==0||e(v,s,d)}return d}function e(i,s,d){i.flags|=16384,i={getSnapshot:s,value:d},s=li.updateQueue,s===null?(s=zs(),li.updateQueue=s,s.stores=[i]):(d=s.stores,d===null?s.stores=[i]:d.push(i))}function a(i,s,d,v){s.value=d,s.getSnapshot=v,p(s)&&_(i)}function h(i,s,d){return d(function(){p(s)&&_(i)})}function p(i){var s=i.getSnapshot;i=i.value;try{var d=s();return!Dr(i,d)}catch{return!0}}function _(i){var s=Kr(i,2);s!==null&&Za(s,i,2)}function T(i){var s=Sr();if(typeof i=="function"){var d=i;if(i=d(),kt){Hr(!0);try{d()}finally{Hr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:i},s}function P(i,s,d,v){return i.baseState=d,Gl(i,Di,typeof v=="function"?v:ja)}function z(i,s,d,v,E){if(ks(i))throw Error(g(485));if(i=s.action,i!==null){var I={payload:E,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){I.listeners.push(Z)}};je.T!==null?d(!0):I.isTransition=!1,v(I),d=s.pending,d===null?(I.next=s.pending=I,L(s,I)):(I.next=d.next,s.pending=d.next=I)}}function L(i,s){var d=s.action,v=s.payload,E=i.state;if(s.isTransition){var I=je.T,Z={};je.T=Z;try{var ee=d(E,v),_e=je.S;_e!==null&&_e(Z,ee),B(i,s,ee)}catch(Ge){F(i,s,Ge)}finally{je.T=I}}else try{I=d(E,v),B(i,s,I)}catch(Ge){F(i,s,Ge)}}function B(i,s,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){V(i,s,v)},function(v){return F(i,s,v)}):V(i,s,d)}function V(i,s,d){s.status="fulfilled",s.value=d,G(s),i.state=d,s=i.pending,s!==null&&(d=s.next,d===s?i.pending=null:(d=d.next,s.next=d,L(i,d)))}function F(i,s,d){var v=i.pending;if(i.pending=null,v!==null){v=v.next;do s.status="rejected",s.reason=d,G(s),s=s.next;while(s!==v)}i.action=null}function G(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function W(i,s){return s}function re(i,s){if(wi){var d=on.formState;if(d!==null){e:{var v=li;if(wi){if(tn){t:{for(var E=tn,I=ta;E.nodeType!==8;){if(!I){E=null;break t}if(E=Ns(E.nextSibling),E===null){E=null;break t}}I=E.data,E=I==="F!"||I==="F"?E:null}if(E){tn=Ns(E.nextSibling),v=E.data==="F!";break e}}Ho(v)}v=!1}v&&(s=d[0])}}return d=Sr(),d.memoizedState=d.baseState=s,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:W,lastRenderedState:s},d.queue=v,d=Rs.bind(null,li,v),v.dispatch=d,v=T(!1),I=co.bind(null,li,!1,v.queue),v=Sr(),E={state:s,dispatch:null,action:i,pending:null},v.queue=E,d=z.bind(null,li,E,I,d),E.dispatch=d,v.memoizedState=i,[s,d,!1]}function ne(i){var s=Wi();return ae(s,Di,i)}function ae(i,s,d){if(s=Gl(i,s,W)[0],i=Ul(ja)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var v=Is(s)}catch(Z){throw Z===Cs?wt:Z}else v=s;s=Wi();var E=s.queue,I=E.dispatch;return d!==s.memoizedState&&(li.flags|=2048,ue(9,me(),le.bind(null,E,d),null)),[v,I,i]}function le(i,s){i.action=s}function fe(i){var s=Wi(),d=Di;if(d!==null)return ae(s,d,i);Wi(),s=s.memoizedState,d=Wi();var v=d.queue.dispatch;return d.memoizedState=i,[s,v,!1]}function ue(i,s,d,v){return i={tag:i,create:d,deps:v,inst:s,next:null},s=li.updateQueue,s===null&&(s=zs(),li.updateQueue=s),d=s.lastEffect,d===null?s.lastEffect=i.next=i:(v=d.next,d.next=i,i.next=v,s.lastEffect=i),i}function me(){return{destroy:void 0,resource:void 0}}function be(){return Wi().memoizedState}function he(i,s,d,v){var E=Sr();v=v===void 0?null:v,li.flags|=i,E.memoizedState=ue(1|s,me(),d,v)}function Ee(i,s,d,v){var E=Wi();v=v===void 0?null:v;var I=E.memoizedState.inst;Di!==null&&v!==null&&qr(v,Di.memoizedState.deps)?E.memoizedState=ue(s,I,d,v):(li.flags|=i,E.memoizedState=ue(1|s,I,d,v))}function Ze(i,s){he(8390656,8,i,s)}function Le(i,s){Ee(2048,8,i,s)}function Oe(i,s){return Ee(4,2,i,s)}function Ue(i,s){return Ee(4,4,i,s)}function ft(i,s){if(typeof s=="function"){i=i();var d=s(i);return function(){typeof d=="function"?d():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function gt(i,s,d){d=d!=null?d.concat([i]):null,Ee(4,4,ft.bind(null,s,i),d)}function tt(){}function zt(i,s){var d=Wi();s=s===void 0?null:s;var v=d.memoizedState;return s!==null&&qr(s,v[1])?v[0]:(d.memoizedState=[i,s],i)}function ei(i,s){var d=Wi();s=s===void 0?null:s;var v=d.memoizedState;if(s!==null&&qr(s,v[1]))return v[0];if(v=i(),kt){Hr(!0);try{i()}finally{Hr(!1)}}return d.memoizedState=[v,s],v}function _i(i,s,d){return d===void 0||(cs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=d,i=hm(),li.lanes|=i,_o|=i,d)}function Ci(i,s,d,v){return Dr(d,s)?d:Tr.current!==null?(i=_i(i,d,v),Dr(i,s)||(Gn=!0),i):(cs&42)===0?(Gn=!0,i.memoizedState=d):(i=hm(),li.lanes|=i,_o|=i,s)}function Si(i,s,d,v,E){var I=it.p;it.p=I!==0&&8>I?I:8;var Z=je.T,ee={};je.T=ee,co(i,!1,s,d);try{var _e=E(),Ge=je.S;if(Ge!==null&&Ge(ee,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Je=Ll(_e,v);ga(i,s,Je,wa(i))}else ga(i,s,v,wa(i))}catch(at){ga(i,s,{then:function(){},status:"rejected",reason:at},wa())}finally{it.p=I,je.T=Z}}function rn(){}function Ki(i,s,d,v){if(i.tag!==5)throw Error(g(476));var E=Wt(i).queue;Si(i,E,s,st,d===null?rn:function(){return Ai(i),d(v)})}function Wt(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:st},next:null};var d={};return s.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:d},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Ai(i){var s=Wt(i).next.queue;ga(i,s,{},wa())}function _n(){return Gi(Me)}function Ln(){return Wi().memoizedState}function Un(){return Wi().memoizedState}function Or(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var d=wa();i=so(d);var v=As(s,i,d);v!==null&&(Za(v,s,d),Wo(v,s,d)),s={cache:ao()},i.payload=s;return}s=s.return}}function Na(i,s,d){var v=wa();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},ks(i)?uo(s,d):(d=Js(i,s,d,v),d!==null&&(Za(d,i,v),ho(d,s,v)))}function Rs(i,s,d){var v=wa();ga(i,s,d,v)}function ga(i,s,d,v){var E={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(ks(i))uo(s,E);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=s.lastRenderedReducer,I!==null))try{var Z=s.lastRenderedState,ee=I(Z,d);if(E.hasEagerState=!0,E.eagerState=ee,Dr(ee,Z))return Pc(i,s,E,0),on===null&&$o(),!1}catch{}finally{}if(d=Js(i,s,E,v),d!==null)return Za(d,i,v),ho(d,s,v),!0}return!1}function co(i,s,d,v){if(v={lane:2,revertLane:Yh(),action:v,hasEagerState:!1,eagerState:null,next:null},ks(i)){if(s)throw Error(g(479))}else s=Js(i,d,v,2),s!==null&&Za(s,i,2)}function ks(i){var s=i.alternate;return i===li||s!==null&&s===li}function uo(i,s){Ct=Jo=!0;var d=i.pending;d===null?s.next=s:(s.next=d.next,d.next=s),i.pending=s}function ho(i,s,d){if((d&4194048)!==0){var v=s.lanes;v&=i.pendingLanes,d|=v,s.lanes=d,Rt(i,d)}}var sr={readContext:Gi,use:tl,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},ya={readContext:Gi,use:tl,useCallback:function(i,s){return Sr().memoizedState=[i,s===void 0?null:s],i},useContext:Gi,useEffect:Ze,useImperativeHandle:function(i,s,d){d=d!=null?d.concat([i]):null,he(4194308,4,ft.bind(null,s,i),d)},useLayoutEffect:function(i,s){return he(4194308,4,i,s)},useInsertionEffect:function(i,s){he(4,2,i,s)},useMemo:function(i,s){var d=Sr();s=s===void 0?null:s;var v=i();if(kt){Hr(!0);try{i()}finally{Hr(!1)}}return d.memoizedState=[v,s],v},useReducer:function(i,s,d){var v=Sr();if(d!==void 0){var E=d(s);if(kt){Hr(!0);try{d(s)}finally{Hr(!1)}}}else E=s;return v.memoizedState=v.baseState=E,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:E},v.queue=i,i=i.dispatch=Na.bind(null,li,i),[v.memoizedState,i]},useRef:function(i){var s=Sr();return i={current:i},s.memoizedState=i},useState:function(i){i=T(i);var s=i.queue,d=Rs.bind(null,li,s);return s.dispatch=d,[i.memoizedState,d]},useDebugValue:tt,useDeferredValue:function(i,s){var d=Sr();return _i(d,i,s)},useTransition:function(){var i=T(!1);return i=Si.bind(null,li,i.queue,!0,!1),Sr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,d){var v=li,E=Sr();if(wi){if(d===void 0)throw Error(g(407));d=d()}else{if(d=s(),on===null)throw Error(g(349));(pi&124)!==0||e(v,s,d)}E.memoizedState=d;var I={value:d,getSnapshot:s};return E.queue=I,Ze(h.bind(null,v,I,i),[i]),v.flags|=2048,ue(9,me(),a.bind(null,v,I,d,s),null),d},useId:function(){var i=Sr(),s=on.identifierPrefix;if(wi){var d=ha,v=ea;d=(v&~(1<<32-Te(v)-1)).toString(32)+d,s=""+s+"R"+d,d=el++,0<d&&(s+="H"+d.toString(32)),s+=""}else d=Lr++,s=""+s+"r"+d.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:_n,useFormState:re,useActionState:re,useOptimistic:function(i){var s=Sr();s.memoizedState=s.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=d,s=co.bind(null,li,!0,d),d.dispatch=s,[i,s]},useMemoCache:Ds,useCacheRefresh:function(){return Sr().memoizedState=Or.bind(null,li)}},Mr={readContext:Gi,use:tl,useCallback:zt,useContext:Gi,useEffect:Le,useImperativeHandle:gt,useInsertionEffect:Oe,useLayoutEffect:Ue,useMemo:ei,useReducer:Ul,useRef:be,useState:function(){return Ul(ja)},useDebugValue:tt,useDeferredValue:function(i,s){var d=Wi();return Ci(d,Di.memoizedState,i,s)},useTransition:function(){var i=Ul(ja)[0],s=Wi().memoizedState;return[typeof i=="boolean"?i:Is(i),s]},useSyncExternalStore:y,useId:Ln,useHostTransitionStatus:_n,useFormState:ne,useActionState:ne,useOptimistic:function(i,s){var d=Wi();return P(d,Di,i,s)},useMemoCache:Ds,useCacheRefresh:Un},fo={readContext:Gi,use:tl,useCallback:zt,useContext:Gi,useEffect:Le,useImperativeHandle:gt,useInsertionEffect:Oe,useLayoutEffect:Ue,useMemo:ei,useReducer:Vc,useRef:be,useState:function(){return Vc(ja)},useDebugValue:tt,useDeferredValue:function(i,s){var d=Wi();return Di===null?_i(d,i,s):Ci(d,Di.memoizedState,i,s)},useTransition:function(){var i=Vc(ja)[0],s=Wi().memoizedState;return[typeof i=="boolean"?i:Is(i),s]},useSyncExternalStore:y,useId:Ln,useHostTransitionStatus:_n,useFormState:fe,useActionState:fe,useOptimistic:function(i,s){var d=Wi();return Di!==null?P(d,Di,i,s):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:Ds,useCacheRefresh:Un},Qi=null,dn=0;function Br(i){var s=dn;return dn+=1,Qi===null&&(Qi=[]),Yo(Qi,i,s)}function an(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function po(i,s){throw s.$$typeof===$?Error(g(525)):(i=Object.prototype.toString.call(s),Error(g(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function il(i){var s=i._init;return s(i._payload)}function us(i){function s(ke,Ie){if(i){var Ve=ke.deletions;Ve===null?(ke.deletions=[Ie],ke.flags|=16):Ve.push(Ie)}}function d(ke,Ie){if(!i)return null;for(;Ie!==null;)s(ke,Ie),Ie=Ie.sibling;return null}function v(ke){for(var Ie=new Map;ke!==null;)ke.key!==null?Ie.set(ke.key,ke):Ie.set(ke.index,ke),ke=ke.sibling;return Ie}function E(ke,Ie){return ke=_r(ke,Ie),ke.index=0,ke.sibling=null,ke}function I(ke,Ie,Ve){return ke.index=Ve,i?(Ve=ke.alternate,Ve!==null?(Ve=Ve.index,Ve<Ie?(ke.flags|=67108866,Ie):Ve):(ke.flags|=67108866,Ie)):(ke.flags|=1048576,Ie)}function Z(ke){return i&&ke.alternate===null&&(ke.flags|=67108866),ke}function ee(ke,Ie,Ve,rt){return Ie===null||Ie.tag!==6?(Ie=Eh(Ve,ke.mode,rt),Ie.return=ke,Ie):(Ie=E(Ie,Ve),Ie.return=ke,Ie)}function _e(ke,Ie,Ve,rt){var Ot=Ve.type;return Ot===se?Je(ke,Ie,Ve.props.children,rt,Ve.key):Ie!==null&&(Ie.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===et&&il(Ot)===Ie.type)?(Ie=E(Ie,Ve.props),an(Ie,Ve),Ie.return=ke,Ie):(Ie=Eu(Ve.type,Ve.key,Ve.props,null,ke.mode,rt),an(Ie,Ve),Ie.return=ke,Ie)}function Ge(ke,Ie,Ve,rt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ve.containerInfo||Ie.stateNode.implementation!==Ve.implementation?(Ie=Ic(Ve,ke.mode,rt),Ie.return=ke,Ie):(Ie=E(Ie,Ve.children||[]),Ie.return=ke,Ie)}function Je(ke,Ie,Ve,rt,Ot){return Ie===null||Ie.tag!==7?(Ie=eo(Ve,ke.mode,rt,Ot),Ie.return=ke,Ie):(Ie=E(Ie,Ve),Ie.return=ke,Ie)}function at(ke,Ie,Ve){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Eh(""+Ie,ke.mode,Ve),Ie.return=ke,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case Y:return Ve=Eu(Ie.type,Ie.key,Ie.props,null,ke.mode,Ve),an(Ve,Ie),Ve.return=ke,Ve;case X:return Ie=Ic(Ie,ke.mode,Ve),Ie.return=ke,Ie;case et:var rt=Ie._init;return Ie=rt(Ie._payload),at(ke,Ie,Ve)}if(ui(Ie)||Et(Ie))return Ie=eo(Ie,ke.mode,Ve,null),Ie.return=ke,Ie;if(typeof Ie.then=="function")return at(ke,Br(Ie),Ve);if(Ie.$$typeof===Ce)return at(ke,Es(ke,Ie),Ve);po(ke,Ie)}return null}function qe(ke,Ie,Ve,rt){var Ot=Ie!==null?Ie.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ot!==null?null:ee(ke,Ie,""+Ve,rt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case Y:return Ve.key===Ot?_e(ke,Ie,Ve,rt):null;case X:return Ve.key===Ot?Ge(ke,Ie,Ve,rt):null;case et:return Ot=Ve._init,Ve=Ot(Ve._payload),qe(ke,Ie,Ve,rt)}if(ui(Ve)||Et(Ve))return Ot!==null?null:Je(ke,Ie,Ve,rt,null);if(typeof Ve.then=="function")return qe(ke,Ie,Br(Ve),rt);if(Ve.$$typeof===Ce)return qe(ke,Ie,Es(ke,Ve),rt);po(ke,Ve)}return null}function He(ke,Ie,Ve,rt,Ot){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return ke=ke.get(Ve)||null,ee(Ie,ke,""+rt,Ot);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case Y:return ke=ke.get(rt.key===null?Ve:rt.key)||null,_e(Ie,ke,rt,Ot);case X:return ke=ke.get(rt.key===null?Ve:rt.key)||null,Ge(Ie,ke,rt,Ot);case et:var mi=rt._init;return rt=mi(rt._payload),He(ke,Ie,Ve,rt,Ot)}if(ui(rt)||Et(rt))return ke=ke.get(Ve)||null,Je(Ie,ke,rt,Ot,null);if(typeof rt.then=="function")return He(ke,Ie,Ve,Br(rt),Ot);if(rt.$$typeof===Ce)return He(ke,Ie,Ve,Es(Ie,rt),Ot);po(Ie,rt)}return null}function Kt(ke,Ie,Ve,rt){for(var Ot=null,mi=null,Dt=Ie,Gt=Ie=0,dr=null;Dt!==null&&Gt<Ve.length;Gt++){Dt.index>Gt?(dr=Dt,Dt=null):dr=Dt.sibling;var zi=qe(ke,Dt,Ve[Gt],rt);if(zi===null){Dt===null&&(Dt=dr);break}i&&Dt&&zi.alternate===null&&s(ke,Dt),Ie=I(zi,Ie,Gt),mi===null?Ot=zi:mi.sibling=zi,mi=zi,Dt=dr}if(Gt===Ve.length)return d(ke,Dt),wi&&Ss(ke,Gt),Ot;if(Dt===null){for(;Gt<Ve.length;Gt++)Dt=at(ke,Ve[Gt],rt),Dt!==null&&(Ie=I(Dt,Ie,Gt),mi===null?Ot=Dt:mi.sibling=Dt,mi=Dt);return wi&&Ss(ke,Gt),Ot}for(Dt=v(Dt);Gt<Ve.length;Gt++)dr=He(Dt,ke,Gt,Ve[Gt],rt),dr!==null&&(i&&dr.alternate!==null&&Dt.delete(dr.key===null?Gt:dr.key),Ie=I(dr,Ie,Gt),mi===null?Ot=dr:mi.sibling=dr,mi=dr);return i&&Dt.forEach(function(ec){return s(ke,ec)}),wi&&Ss(ke,Gt),Ot}function Xt(ke,Ie,Ve,rt){if(Ve==null)throw Error(g(151));for(var Ot=null,mi=null,Dt=Ie,Gt=Ie=0,dr=null,zi=Ve.next();Dt!==null&&!zi.done;Gt++,zi=Ve.next()){Dt.index>Gt?(dr=Dt,Dt=null):dr=Dt.sibling;var ec=qe(ke,Dt,zi.value,rt);if(ec===null){Dt===null&&(Dt=dr);break}i&&Dt&&ec.alternate===null&&s(ke,Dt),Ie=I(ec,Ie,Gt),mi===null?Ot=ec:mi.sibling=ec,mi=ec,Dt=dr}if(zi.done)return d(ke,Dt),wi&&Ss(ke,Gt),Ot;if(Dt===null){for(;!zi.done;Gt++,zi=Ve.next())zi=at(ke,zi.value,rt),zi!==null&&(Ie=I(zi,Ie,Gt),mi===null?Ot=zi:mi.sibling=zi,mi=zi);return wi&&Ss(ke,Gt),Ot}for(Dt=v(Dt);!zi.done;Gt++,zi=Ve.next())zi=He(Dt,ke,Gt,zi.value,rt),zi!==null&&(i&&zi.alternate!==null&&Dt.delete(zi.key===null?Gt:zi.key),Ie=I(zi,Ie,Gt),mi===null?Ot=zi:mi.sibling=zi,mi=zi);return i&&Dt.forEach(function(Ag){return s(ke,Ag)}),wi&&Ss(ke,Gt),Ot}function Hi(ke,Ie,Ve,rt){if(typeof Ve=="object"&&Ve!==null&&Ve.type===se&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case Y:e:{for(var Ot=Ve.key;Ie!==null;){if(Ie.key===Ot){if(Ot=Ve.type,Ot===se){if(Ie.tag===7){d(ke,Ie.sibling),rt=E(Ie,Ve.props.children),rt.return=ke,ke=rt;break e}}else if(Ie.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===et&&il(Ot)===Ie.type){d(ke,Ie.sibling),rt=E(Ie,Ve.props),an(rt,Ve),rt.return=ke,ke=rt;break e}d(ke,Ie);break}else s(ke,Ie);Ie=Ie.sibling}Ve.type===se?(rt=eo(Ve.props.children,ke.mode,rt,Ve.key),rt.return=ke,ke=rt):(rt=Eu(Ve.type,Ve.key,Ve.props,null,ke.mode,rt),an(rt,Ve),rt.return=ke,ke=rt)}return Z(ke);case X:e:{for(Ot=Ve.key;Ie!==null;){if(Ie.key===Ot)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ve.containerInfo&&Ie.stateNode.implementation===Ve.implementation){d(ke,Ie.sibling),rt=E(Ie,Ve.children||[]),rt.return=ke,ke=rt;break e}else{d(ke,Ie);break}else s(ke,Ie);Ie=Ie.sibling}rt=Ic(Ve,ke.mode,rt),rt.return=ke,ke=rt}return Z(ke);case et:return Ot=Ve._init,Ve=Ot(Ve._payload),Hi(ke,Ie,Ve,rt)}if(ui(Ve))return Kt(ke,Ie,Ve,rt);if(Et(Ve)){if(Ot=Et(Ve),typeof Ot!="function")throw Error(g(150));return Ve=Ot.call(Ve),Xt(ke,Ie,Ve,rt)}if(typeof Ve.then=="function")return Hi(ke,Ie,Br(Ve),rt);if(Ve.$$typeof===Ce)return Hi(ke,Ie,Es(ke,Ve),rt);po(ke,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Ie!==null&&Ie.tag===6?(d(ke,Ie.sibling),rt=E(Ie,Ve),rt.return=ke,ke=rt):(d(ke,Ie),rt=Eh(Ve,ke.mode,rt),rt.return=ke,ke=rt),Z(ke)):d(ke,Ie)}return function(ke,Ie,Ve,rt){try{dn=0;var Ot=Hi(ke,Ie,Ve,rt);return Qi=null,Ot}catch(Dt){if(Dt===Cs||Dt===wt)throw Dt;var mi=Qr(29,Dt,null,ke.mode);return mi.lanes=rt,mi.return=ke,mi}finally{}}}var Er=us(!0),Ls=us(!1),na=Ke(null),vn=null;function Os(i){var s=i.alternate;St(Zi,Zi.current&1),St(na,i),vn===null&&(s===null||Tr.current!==null||s.memoizedState!==null)&&(vn=i)}function Lu(i){if(i.tag===22){if(St(Zi,Zi.current),St(na,i),vn===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(vn=i)}}else Fa()}function Fa(){St(Zi,Zi.current),St(na,na.current)}function _a(i){Mt(na),vn===i&&(vn=null),Mt(Zi)}var Zi=Ke(0);function va(i){for(var s=i;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Ju(d)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Dd(i,s,d,v){s=i.memoizedState,d=d(v,s),d=d==null?s:j({},s,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Df={enqueueSetState:function(i,s,d){i=i._reactInternals;var v=wa(),E=so(v);E.payload=s,d!=null&&(E.callback=d),s=As(i,E,v),s!==null&&(Za(s,i,v),Wo(s,i,v))},enqueueReplaceState:function(i,s,d){i=i._reactInternals;var v=wa(),E=so(v);E.tag=1,E.payload=s,d!=null&&(E.callback=d),s=As(i,E,v),s!==null&&(Za(s,i,v),Wo(s,i,v))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var d=wa(),v=so(d);v.tag=2,s!=null&&(v.callback=s),s=As(i,v,d),s!==null&&(Za(s,i,d),Wo(s,i,d))}};function Rd(i,s,d,v,E,I,Z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(v,I,Z):s.prototype&&s.prototype.isPureReactComponent?!Cl(d,v)||!Cl(E,I):!0}function Rf(i,s,d,v){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,v),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,v),s.state!==i&&Df.enqueueReplaceState(s,s.state,null)}function Uc(i,s){var d=s;if("ref"in s){d={};for(var v in s)v!=="ref"&&(d[v]=s[v])}if(i=i.defaultProps){d===s&&(d=j({},d));for(var E in i)d[E]===void 0&&(d[E]=i[E])}return d}var Rh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function $p(i){Rh(i)}function kd(i){console.error(i)}function Hp(i){Rh(i)}function Ou(i,s){try{var d=i.onUncaughtError;d(s.value,{componentStack:s.stack})}catch(v){setTimeout(function(){throw v})}}function kf(i,s,d){try{var v=i.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Ld(i,s,d){return d=so(d),d.tag=3,d.payload={element:null},d.callback=function(){Ou(i,s)},d}function Gc(i){return i=so(i),i.tag=3,i}function Xp(i,s,d,v){var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var I=v.value;i.payload=function(){return E(I)},i.callback=function(){kf(s,d,v)}}var Z=d.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(i.callback=function(){kf(s,d,v),typeof E!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var ee=v.stack;this.componentDidCatch(v.value,{componentStack:ee!==null?ee:""})})}function kh(i,s,d,v,E){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(s=d.alternate,s!==null&&Dl(s,d,E,!0),d=na.current,d!==null){switch(d.tag){case 13:return vn===null?Wd():d.alternate===null&&Pn===0&&(Pn=3),d.flags&=-257,d.flags|=65536,d.lanes=E,v===Oc?d.flags|=16384:(s=d.updateQueue,s===null?d.updateQueue=new Set([v]):s.add(v),np(i,v,E)),!1;case 22:return d.flags|=65536,v===Oc?d.flags|=16384:(s=d.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=s):(d=s.retryQueue,d===null?s.retryQueue=new Set([v]):d.add(v)),np(i,v,E)),!1}throw Error(g(435,d.tag))}return np(i,v,E),Wd(),!1}if(wi)return s=na.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,v!==Rc&&(i=Error(g(422),{cause:v}),Ms(Wn(i,d)))):(v!==Rc&&(s=Error(g(423),{cause:v}),Ms(Wn(s,d))),i=i.current.alternate,i.flags|=65536,E&=-E,i.lanes|=E,v=Wn(v,d),E=Ld(i.stateNode,v,E),Nc(i,E),Pn!==4&&(Pn=2)),!1;var I=Error(g(520),{cause:v});if(I=Wn(I,d),Xl===null?Xl=[I]:Xl.push(I),Pn!==4&&(Pn=2),s===null)return!0;v=Wn(v,d),d=s;do{switch(d.tag){case 3:return d.flags|=65536,i=E&-E,d.lanes|=i,i=Ld(d.stateNode,v,i),Nc(d,i),!1;case 1:if(s=d.type,I=d.stateNode,(d.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ol===null||!ol.has(I))))return d.flags|=65536,E&=-E,d.lanes|=E,E=Gc(E),Xp(E,i,d,v),Nc(d,E),!1}d=d.return}while(d!==null);return!1}var Lh=Error(g(461)),Gn=!1;function Cr(i,s,d,v){s.child=i===null?Ls(s,null,d,v):Er(s,i.child,d,v)}function Lf(i,s,d,v,E){d=d.render;var I=s.ref;if("ref"in v){var Z={};for(var ee in v)ee!=="ref"&&(Z[ee]=v[ee])}else Z=v;return ro(s),v=Dh(i,s,d,Z,I,E),ee=Vl(),i!==null&&!Gn?(oo(i,s,E),Bs(i,s,E)):(wi&&ee&&Dc(s),s.flags|=1,Cr(i,s,v,E),s.child)}function Yp(i,s,d,v,E){if(i===null){var I=d.type;return typeof I=="function"&&!Mu(I)&&I.defaultProps===void 0&&d.compare===null?(s.tag=15,s.type=I,Wp(i,s,I,v,E)):(i=Eu(d.type,null,v,s,s.mode,E),i.ref=s.ref,i.return=s,s.child=i)}if(I=i.child,!Vd(i,E)){var Z=I.memoizedProps;if(d=d.compare,d=d!==null?d:Cl,d(Z,v)&&i.ref===s.ref)return Bs(i,s,E)}return s.flags|=1,i=_r(I,v),i.ref=s.ref,i.return=s,s.child=i}function Wp(i,s,d,v,E){if(i!==null){var I=i.memoizedProps;if(Cl(I,v)&&i.ref===s.ref)if(Gn=!1,s.pendingProps=v=I,Vd(i,E))(i.flags&131072)!==0&&(Gn=!0);else return s.lanes=i.lanes,Bs(i,s,E)}return jf(i,s,d,v,E)}function Of(i,s,d){var v=s.pendingProps,E=v.children,I=i!==null?i.memoizedState:null;if(v.mode==="hidden"){if((s.flags&128)!==0){if(v=I!==null?I.baseLanes|d:d,i!==null){for(E=s.child=i.child,I=0;E!==null;)I=I|E.lanes|E.childLanes,E=E.sibling;s.childLanes=I&~v}else s.childLanes=0,s.child=null;return Bf(i,s,v,d)}if((d&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Du(s,I!==null?I.cachePool:null),I!==null?Qo(s,I):Fc(),Lu(s);else return s.lanes=s.childLanes=536870912,Bf(i,s,I!==null?I.baseLanes|d:d,d)}else I!==null?(Du(s,I.cachePool),Qo(s,I),Fa(),s.memoizedState=null):(i!==null&&Du(s,null),Fc(),Fa());return Cr(i,s,E,d),s.child}function Bf(i,s,d,v){var E=Ah();return E=E===null?null:{parent:kn._currentValue,pool:E},s.memoizedState={baseLanes:d,cachePool:E},i!==null&&Du(s,null),Fc(),Lu(s),i!==null&&Dl(i,s,v,!0),null}function Oh(i,s){var d=s.ref;if(d===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(g(284));(i===null||i.ref!==d)&&(s.flags|=4194816)}}function jf(i,s,d,v,E){return ro(s),d=Dh(i,s,d,v,void 0,E),v=Vl(),i!==null&&!Gn?(oo(i,s,E),Bs(i,s,E)):(wi&&v&&Dc(s),s.flags|=1,Cr(i,s,d,E),s.child)}function Od(i,s,d,v,E,I){return ro(s),s.updateQueue=null,d=Ei(s,v,d,E),Fl(i),v=Vl(),i!==null&&!Gn?(oo(i,s,I),Bs(i,s,I)):(wi&&v&&Dc(s),s.flags|=1,Cr(i,s,d,I),s.child)}function Nf(i,s,d,v,E){if(ro(s),s.stateNode===null){var I=ii,Z=d.contextType;typeof Z=="object"&&Z!==null&&(I=Gi(Z)),I=new d(v,I),s.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Df,s.stateNode=I,I._reactInternals=s,I=s.stateNode,I.props=v,I.state=s.memoizedState,I.refs={},Ph(s),Z=d.contextType,I.context=typeof Z=="object"&&Z!==null?Gi(Z):ii,I.state=s.memoizedState,Z=d.getDerivedStateFromProps,typeof Z=="function"&&(Dd(s,d,Z,v),I.state=s.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Z=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Z!==I.state&&Df.enqueueReplaceState(I,I.state,null),Ko(s,v,I,E),Nl(),I.state=s.memoizedState),typeof I.componentDidMount=="function"&&(s.flags|=4194308),v=!0}else if(i===null){I=s.stateNode;var ee=s.memoizedProps,_e=Uc(d,ee);I.props=_e;var Ge=I.context,Je=d.contextType;Z=ii,typeof Je=="object"&&Je!==null&&(Z=Gi(Je));var at=d.getDerivedStateFromProps;Je=typeof at=="function"||typeof I.getSnapshotBeforeUpdate=="function",ee=s.pendingProps!==ee,Je||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ee||Ge!==Z)&&Rf(s,I,v,Z),Ba=!1;var qe=s.memoizedState;I.state=qe,Ko(s,v,I,E),Nl(),Ge=s.memoizedState,ee||qe!==Ge||Ba?(typeof at=="function"&&(Dd(s,d,at,v),Ge=s.memoizedState),(_e=Ba||Rd(s,d,_e,v,qe,Ge,Z))?(Je||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(s.flags|=4194308)):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=v,s.memoizedState=Ge),I.props=v,I.state=Ge,I.context=Z,v=_e):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),v=!1)}else{I=s.stateNode,jl(i,s),Z=s.memoizedProps,Je=Uc(d,Z),I.props=Je,at=s.pendingProps,qe=I.context,Ge=d.contextType,_e=ii,typeof Ge=="object"&&Ge!==null&&(_e=Gi(Ge)),ee=d.getDerivedStateFromProps,(Ge=typeof ee=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Z!==at||qe!==_e)&&Rf(s,I,v,_e),Ba=!1,qe=s.memoizedState,I.state=qe,Ko(s,v,I,E),Nl();var He=s.memoizedState;Z!==at||qe!==He||Ba||i!==null&&i.dependencies!==null&&Lc(i.dependencies)?(typeof ee=="function"&&(Dd(s,d,ee,v),He=s.memoizedState),(Je=Ba||Rd(s,d,Je,v,qe,He,_e)||i!==null&&i.dependencies!==null&&Lc(i.dependencies))?(Ge||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,He,_e),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,He,_e)),typeof I.componentDidUpdate=="function"&&(s.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof I.componentDidUpdate!="function"||Z===i.memoizedProps&&qe===i.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Z===i.memoizedProps&&qe===i.memoizedState||(s.flags|=1024),s.memoizedProps=v,s.memoizedState=He),I.props=v,I.state=He,I.context=_e,v=Je):(typeof I.componentDidUpdate!="function"||Z===i.memoizedProps&&qe===i.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Z===i.memoizedProps&&qe===i.memoizedState||(s.flags|=1024),v=!1)}return I=v,Oh(i,s),v=(s.flags&128)!==0,I||v?(I=s.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:I.render(),s.flags|=1,i!==null&&v?(s.child=Er(s,i.child,null,E),s.child=Er(s,null,d,E)):Cr(i,s,d,E),s.memoizedState=I.state,i=s.child):i=Bs(i,s,E),i}function Bd(i,s,d,v){return xr(),s.flags|=256,Cr(i,s,d,v),s.child}var Zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jr(i){return{baseLanes:i,cachePool:Ol()}}function jd(i,s,d){return i=i!==null?i.childLanes&~d:0,s&&(i|=Ga),i}function Nd(i,s,d){var v=s.pendingProps,E=!1,I=(s.flags&128)!==0,Z;if((Z=I)||(Z=i!==null&&i.memoizedState===null?!1:(Zi.current&2)!==0),Z&&(E=!0,s.flags&=-129),Z=(s.flags&32)!==0,s.flags&=-33,i===null){if(wi){if(E?Os(s):Fa(),wi){var ee=tn,_e;if(_e=ee){e:{for(_e=ee,ee=ta;_e.nodeType!==8;){if(!ee){ee=null;break e}if(_e=Ns(_e.nextSibling),_e===null){ee=null;break e}}ee=_e}ee!==null?(s.memoizedState={dehydrated:ee,treeContext:Ra!==null?{id:ea,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},_e=Qr(18,null,null,0),_e.stateNode=ee,_e.return=s,s.child=_e,An=s,tn=null,_e=!0):_e=!1}_e||Ho(s)}if(ee=s.memoizedState,ee!==null&&(ee=ee.dehydrated,ee!==null))return Ju(ee)?s.lanes=32:s.lanes=536870912,null;_a(s)}return ee=v.children,v=v.fallback,E?(Fa(),E=s.mode,ee=Bh({mode:"hidden",children:ee},E),v=eo(v,E,d,null),ee.return=s,v.return=s,ee.sibling=v,s.child=ee,E=s.child,E.memoizedState=jr(d),E.childLanes=jd(i,Z,d),s.memoizedState=Zc,v):(Os(s),Ff(s,ee))}if(_e=i.memoizedState,_e!==null&&(ee=_e.dehydrated,ee!==null)){if(I)s.flags&256?(Os(s),s.flags&=-257,s=Vf(i,s,d)):s.memoizedState!==null?(Fa(),s.child=i.child,s.flags|=128,s=null):(Fa(),E=v.fallback,ee=s.mode,v=Bh({mode:"visible",children:v.children},ee),E=eo(E,ee,d,null),E.flags|=2,v.return=s,E.return=s,v.sibling=E,s.child=v,Er(s,i.child,null,d),v=s.child,v.memoizedState=jr(d),v.childLanes=jd(i,Z,d),s.memoizedState=Zc,s=E);else if(Os(s),Ju(ee)){if(Z=ee.nextSibling&&ee.nextSibling.dataset,Z)var Ge=Z.dgst;Z=Ge,v=Error(g(419)),v.stack="",v.digest=Z,Ms({value:v,source:null,stack:null}),s=Vf(i,s,d)}else if(Gn||Dl(i,s,d,!1),Z=(d&i.childLanes)!==0,Gn||Z){if(Z=on,Z!==null&&(v=d&-d,v=(v&42)!==0?1:Yt(v),v=(v&(Z.suspendedLanes|d))!==0?0:v,v!==0&&v!==_e.retryLane))throw _e.retryLane=v,Kr(i,v),Za(Z,i,v),Lh;ee.data==="$?"||Wd(),s=Vf(i,s,d)}else ee.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=_e.treeContext,tn=Ns(ee.nextSibling),An=s,wi=!0,no=null,ta=!1,i!==null&&(Jr[vr++]=ea,Jr[vr++]=ha,Jr[vr++]=Ra,ea=i.id,ha=i.overflow,Ra=s),s=Ff(s,v.children),s.flags|=4096);return s}return E?(Fa(),E=v.fallback,ee=s.mode,_e=i.child,Ge=_e.sibling,v=_r(_e,{mode:"hidden",children:v.children}),v.subtreeFlags=_e.subtreeFlags&65011712,Ge!==null?E=_r(Ge,E):(E=eo(E,ee,d,null),E.flags|=2),E.return=s,v.return=s,v.sibling=E,s.child=v,v=E,E=s.child,ee=i.child.memoizedState,ee===null?ee=jr(d):(_e=ee.cachePool,_e!==null?(Ge=kn._currentValue,_e=_e.parent!==Ge?{parent:Ge,pool:Ge}:_e):_e=Ol(),ee={baseLanes:ee.baseLanes|d,cachePool:_e}),E.memoizedState=ee,E.childLanes=jd(i,Z,d),s.memoizedState=Zc,v):(Os(s),d=i.child,i=d.sibling,d=_r(d,{mode:"visible",children:v.children}),d.return=s,d.sibling=null,i!==null&&(Z=s.deletions,Z===null?(s.deletions=[i],s.flags|=16):Z.push(i)),s.child=d,s.memoizedState=null,d)}function Ff(i,s){return s=Bh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Bh(i,s){return i=Qr(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Vf(i,s,d){return Er(s,i.child,null,d),i=Ff(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Kp(i,s,d){i.lanes|=s;var v=i.alternate;v!==null&&(v.lanes|=s),Pu(i.return,s,d)}function Fd(i,s,d,v,E){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:E}:(I.isBackwards=s,I.rendering=null,I.renderingStartTime=0,I.last=v,I.tail=d,I.tailMode=E)}function Qp(i,s,d){var v=s.pendingProps,E=v.revealOrder,I=v.tail;if(Cr(i,s,v.children,d),v=Zi.current,(v&2)!==0)v=v&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kp(i,d,s);else if(i.tag===19)Kp(i,d,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}v&=1}switch(St(Zi,v),E){case"forwards":for(d=s.child,E=null;d!==null;)i=d.alternate,i!==null&&va(i)===null&&(E=d),d=d.sibling;d=E,d===null?(E=s.child,s.child=null):(E=d.sibling,d.sibling=null),Fd(s,!1,E,d,I);break;case"backwards":for(d=null,E=s.child,s.child=null;E!==null;){if(i=E.alternate,i!==null&&va(i)===null){s.child=E;break}i=E.sibling,E.sibling=d,d=E,E=i}Fd(s,!0,d,null,I);break;case"together":Fd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bs(i,s,d){if(i!==null&&(s.dependencies=i.dependencies),_o|=s.lanes,(d&s.childLanes)===0)if(i!==null){if(Dl(i,s,d,!1),(d&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(g(153));if(s.child!==null){for(i=s.child,d=_r(i,i.pendingProps),s.child=d,d.return=s;i.sibling!==null;)i=i.sibling,d=d.sibling=_r(i,i.pendingProps),d.return=s;d.sibling=null}return s.child}function Vd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Lc(i)))}function Jp(i,s,d){switch(s.tag){case 3:gi(s,s.stateNode.containerInfo),br(s,kn,i.memoizedState.cache),xr();break;case 27:case 5:Us(s);break;case 4:gi(s,s.stateNode.containerInfo);break;case 10:br(s,s.type,s.memoizedProps.value);break;case 13:var v=s.memoizedState;if(v!==null)return v.dehydrated!==null?(Os(s),s.flags|=128,null):(d&s.child.childLanes)!==0?Nd(i,s,d):(Os(s),i=Bs(i,s,d),i!==null?i.sibling:null);Os(s);break;case 19:var E=(i.flags&128)!==0;if(v=(d&s.childLanes)!==0,v||(Dl(i,s,d,!1),v=(d&s.childLanes)!==0),E){if(v)return Qp(i,s,d);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),St(Zi,Zi.current),v)break;return null;case 22:case 23:return s.lanes=0,Of(i,s,d);case 24:br(s,kn,i.memoizedState.cache)}return Bs(i,s,d)}function em(i,s,d){if(i!==null)if(i.memoizedProps!==s.pendingProps)Gn=!0;else{if(!Vd(i,d)&&(s.flags&128)===0)return Gn=!1,Jp(i,s,d);Gn=(i.flags&131072)!==0}else Gn=!1,wi&&(s.flags&1048576)!==0&&io(s,zl,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var v=s.elementType,E=v._init;if(v=E(v._payload),s.type=v,typeof v=="function")Mu(v)?(i=Uc(v,i),s.tag=1,s=Nf(null,s,v,i,d)):(s.tag=0,s=jf(null,s,v,i,d));else{if(v!=null){if(E=v.$$typeof,E===Ye){s.tag=11,s=Lf(null,s,v,i,d);break e}else if(E===ht){s.tag=14,s=Yp(null,s,v,i,d);break e}}throw s=Li(v)||v,Error(g(306,s,""))}}return s;case 0:return jf(i,s,s.type,s.pendingProps,d);case 1:return v=s.type,E=Uc(v,s.pendingProps),Nf(i,s,v,E,d);case 3:e:{if(gi(s,s.stateNode.containerInfo),i===null)throw Error(g(387));v=s.pendingProps;var I=s.memoizedState;E=I.element,jl(i,s),Ko(s,v,null,d);var Z=s.memoizedState;if(v=Z.cache,br(s,kn,v),v!==I.cache&&zu(s,[kn],d,!0),Nl(),v=Z.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:Z.cache},s.updateQueue.baseState=I,s.memoizedState=I,s.flags&256){s=Bd(i,s,v,d);break e}else if(v!==E){E=Wn(Error(g(424)),s),Ms(E),s=Bd(i,s,v,d);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(tn=Ns(i.firstChild),An=s,wi=!0,no=null,ta=!0,d=Ls(s,null,v,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(xr(),v===E){s=Bs(i,s,d);break e}Cr(i,s,v,d)}s=s.child}return s;case 26:return Oh(i,s),i===null?(d=rd(s.type,null,s.pendingProps,null))?s.memoizedState=d:wi||(d=s.type,i=s.pendingProps,v=td(Nt.current).createElement(d),v[Vt]=s,v[qt]=i,zn(v,d,i),Yi(v),s.stateNode=v):s.memoizedState=rd(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Us(s),i===null&&wi&&(v=s.stateNode=lr(s.type,s.pendingProps,Nt.current),An=s,ta=!0,E=tn,cl(s.type)?(fp=E,tn=Ns(v.firstChild)):tn=E),Cr(i,s,s.pendingProps.children,d),Oh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&wi&&((E=v=tn)&&(v=cf(v,s.type,s.pendingProps,ta),v!==null?(s.stateNode=v,An=s,tn=Ns(v.firstChild),ta=!1,E=!0):E=!1),E||Ho(s)),Us(s),E=s.type,I=s.pendingProps,Z=i!==null?i.memoizedProps:null,v=I.children,bo(E,I)?v=null:Z!==null&&bo(E,Z)&&(s.flags|=32),s.memoizedState!==null&&(E=Dh(i,s,yn,null,null,d),Me._currentValue=E),Oh(i,s),Cr(i,s,v,d),s.child;case 6:return i===null&&wi&&((i=d=tn)&&(d=uf(d,s.pendingProps,ta),d!==null?(s.stateNode=d,An=s,tn=null,i=!0):i=!1),i||Ho(s)),null;case 13:return Nd(i,s,d);case 4:return gi(s,s.stateNode.containerInfo),v=s.pendingProps,i===null?s.child=Er(s,null,v,d):Cr(i,s,v,d),s.child;case 11:return Lf(i,s,s.type,s.pendingProps,d);case 7:return Cr(i,s,s.pendingProps,d),s.child;case 8:return Cr(i,s,s.pendingProps.children,d),s.child;case 12:return Cr(i,s,s.pendingProps.children,d),s.child;case 10:return v=s.pendingProps,br(s,s.type,v.value),Cr(i,s,v.children,d),s.child;case 9:return E=s.type._context,v=s.pendingProps.children,ro(s),E=Gi(E),v=v(E),s.flags|=1,Cr(i,s,v,d),s.child;case 14:return Yp(i,s,s.type,s.pendingProps,d);case 15:return Wp(i,s,s.type,s.pendingProps,d);case 19:return Qp(i,s,d);case 31:return v=s.pendingProps,d=s.mode,v={mode:v.mode,children:v.children},i===null?(d=Bh(v,d),d.ref=s.ref,s.child=d,d.return=s,s=d):(d=_r(i.child,v),d.ref=s.ref,s.child=d,d.return=s,s=d),s;case 22:return Of(i,s,d);case 24:return ro(s),v=Gi(kn),i===null?(E=Ah(),E===null&&(E=on,I=ao(),E.pooledCache=I,I.refCount++,I!==null&&(E.pooledCacheLanes|=d),E=I),s.memoizedState={parent:v,cache:E},Ph(s),br(s,kn,E)):((i.lanes&d)!==0&&(jl(i,s),Ko(s,null,null,d),Nl()),E=i.memoizedState,I=s.memoizedState,E.parent!==v?(E={parent:v,cache:v},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),br(s,kn,v)):(v=I.cache,br(s,kn,v),v!==E.cache&&zu(s,[kn],d,!0))),Cr(i,s,s.pendingProps.children,d),s.child;case 29:throw s.pendingProps}throw Error(g(156,s.tag))}function nl(i){i.flags|=4}function tm(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!D(s)){if(s=na.current,s!==null&&((pi&4194048)===pi?vn!==null:(pi&62914560)!==pi&&(pi&536870912)===0||s!==vn))throw Oa=Oc,pa;i.flags|=8192}}function Bu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Qe():536870912,i.lanes|=s,Yu|=s)}function qc(i,s){if(!wi)switch(i.tailMode){case"hidden":s=i.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:v.sibling=null}}function xn(i){var s=i.alternate!==null&&i.alternate.child===i.child,d=0,v=0;if(s)for(var E=i.child;E!==null;)d|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)d|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=v,i.childLanes=d,s}function $c(i,s,d){var v=s.pendingProps;switch(Il(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(s),null;case 1:return xn(s),null;case 3:return d=s.stateNode,v=null,i!==null&&(v=i.memoizedState.cache),s.memoizedState.cache!==v&&(s.flags|=2048),ka(kn),Xn(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Zr(s)?nl(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kc())),xn(s),null;case 26:return d=s.memoizedState,i===null?(nl(s),d!==null?(xn(s),tm(s,d)):(xn(s),s.flags&=-16777217)):d?d!==i.memoizedState?(nl(s),xn(s),tm(s,d)):(xn(s),s.flags&=-16777217):(i.memoizedProps!==v&&nl(s),xn(s),s.flags&=-16777217),null;case 27:ps(s),d=Nt.current;var E=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==v&&nl(s);else{if(!v){if(s.stateNode===null)throw Error(g(166));return xn(s),null}i=Bt.current,Zr(s)?Cu(s):(i=lr(E,v,d),s.stateNode=i,nl(s))}return xn(s),null;case 5:if(ps(s),d=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==v&&nl(s);else{if(!v){if(s.stateNode===null)throw Error(g(166));return xn(s),null}if(i=Bt.current,Zr(s))Cu(s);else{switch(E=td(Nt.current),i){case 1:i=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof v.is=="string"?E.createElement("select",{is:v.is}):E.createElement("select"),v.multiple?i.multiple=!0:v.size&&(i.size=v.size);break;default:i=typeof v.is=="string"?E.createElement(d,{is:v.is}):E.createElement(d)}}i[Vt]=s,i[qt]=v;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)i.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=i;e:switch(zn(i,d,v),d){case"button":case"input":case"select":case"textarea":i=!!v.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&nl(s)}}return xn(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==v&&nl(s);else{if(typeof v!="string"&&s.stateNode===null)throw Error(g(166));if(i=Nt.current,Zr(s)){if(i=s.stateNode,d=s.memoizedProps,v=null,E=An,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}i[Vt]=s,i=!!(i.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||up(i.nodeValue,d)),i||Ho(s)}else i=td(i).createTextNode(v),i[Vt]=s,s.stateNode=i}return xn(s),null;case 13:if(v=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(E=Zr(s),v!==null&&v.dehydrated!==null){if(i===null){if(!E)throw Error(g(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(g(317));E[Vt]=s}else xr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xn(s),E=!1}else E=kc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(_a(s),s):(_a(s),null)}if(_a(s),(s.flags&128)!==0)return s.lanes=d,s;if(d=v!==null,i=i!==null&&i.memoizedState!==null,d){v=s.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool);var I=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==E&&(v.flags|=2048)}return d!==i&&d&&(s.child.flags|=8192),Bu(s,s.updateQueue),xn(s),null;case 4:return Xn(),i===null&&tf(s.stateNode.containerInfo),xn(s),null;case 10:return ka(s.type),xn(s),null;case 19:if(Mt(Zi),E=s.memoizedState,E===null)return xn(s),null;if(v=(s.flags&128)!==0,I=E.rendering,I===null)if(v)qc(E,!1);else{if(Pn!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(I=va(i),I!==null){for(s.flags|=128,qc(E,!1),i=I.updateQueue,s.updateQueue=i,Bu(s,i),s.subtreeFlags=0,i=d,d=s.child;d!==null;)Mh(d,i),d=d.sibling;return St(Zi,Zi.current&1|2),s.child}i=i.sibling}E.tail!==null&&pr()>$d&&(s.flags|=128,v=!0,qc(E,!1),s.lanes=4194304)}else{if(!v)if(i=va(I),i!==null){if(s.flags|=128,v=!0,i=i.updateQueue,s.updateQueue=i,Bu(s,i),qc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!wi)return xn(s),null}else 2*pr()-E.renderingStartTime>$d&&d!==536870912&&(s.flags|=128,v=!0,qc(E,!1),s.lanes=4194304);E.isBackwards?(I.sibling=s.child,s.child=I):(i=E.last,i!==null?i.sibling=I:s.child=I,E.last=I)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=pr(),s.sibling=null,i=Zi.current,St(Zi,v?i&1|2:i&1),s):(xn(s),null);case 22:case 23:return _a(s),ku(),v=s.memoizedState!==null,i!==null?i.memoizedState!==null!==v&&(s.flags|=8192):v&&(s.flags|=8192),v?(d&536870912)!==0&&(s.flags&128)===0&&(xn(s),s.subtreeFlags&6&&(s.flags|=8192)):xn(s),d=s.updateQueue,d!==null&&Bu(s,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),v=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(v=s.memoizedState.cachePool.pool),v!==d&&(s.flags|=2048),i!==null&&Mt(La),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),ka(kn),xn(s),null;case 25:return null;case 30:return null}throw Error(g(156,s.tag))}function jh(i,s){switch(Il(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ka(kn),Xn(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ps(s),null;case 13:if(_a(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(g(340));xr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Mt(Zi),null;case 4:return Xn(),null;case 10:return ka(s.type),null;case 22:case 23:return _a(s),ku(),i!==null&&Mt(La),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ka(kn),null;case 25:return null;default:return null}}function im(i,s){switch(Il(s),s.tag){case 3:ka(kn),Xn();break;case 26:case 27:case 5:ps(s);break;case 4:Xn();break;case 13:_a(s);break;case 19:Mt(Zi);break;case 10:ka(s.type);break;case 22:case 23:_a(s),ku(),i!==null&&Mt(La);break;case 24:ka(kn)}}function Nh(i,s){try{var d=s.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var E=v.next;d=E;do{if((d.tag&i)===i){v=void 0;var I=d.create,Z=d.inst;v=I(),Z.destroy=v}d=d.next}while(d!==E)}}catch(ee){qi(s,s.return,ee)}}function Zl(i,s,d){try{var v=s.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var I=E.next;v=I;do{if((v.tag&i)===i){var Z=v.inst,ee=Z.destroy;if(ee!==void 0){Z.destroy=void 0,E=s;var _e=d,Ge=ee;try{Ge()}catch(Je){qi(E,_e,Je)}}}v=v.next}while(v!==I)}}catch(Je){qi(s,s.return,Je)}}function nm(i){var s=i.updateQueue;if(s!==null){var d=i.stateNode;try{Ih(s,d)}catch(v){qi(i,i.return,v)}}}function rm(i,s,d){d.props=Uc(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(v){qi(i,s,v)}}function Fh(i,s){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var v=i.stateNode;break;case 30:v=i.stateNode;break;default:v=i.stateNode}typeof d=="function"?i.refCleanup=d(v):d.current=v}}catch(E){qi(i,s,E)}}function mo(i,s){var d=i.ref,v=i.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(E){qi(i,s,E)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(E){qi(i,s,E)}else d.current=null}function Ud(i){var s=i.type,d=i.memoizedProps,v=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(E){qi(i,i.return,E)}}function Uf(i,s,d){try{var v=i.stateNode;Am(v,i.type,d,s),v[qt]=s}catch(E){qi(i,i.return,E)}}function Gf(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&cl(i.type)||i.tag===4}function Hc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gf(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&cl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zf(i,s,d){var v=i.tag;if(v===5||v===6)i=i.stateNode,s?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,s):(s=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,s.appendChild(i),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=$r));else if(v!==4&&(v===27&&cl(i.type)&&(d=i.stateNode,s=null),i=i.child,i!==null))for(Zf(i,s,d),i=i.sibling;i!==null;)Zf(i,s,d),i=i.sibling}function sn(i,s,d){var v=i.tag;if(v===5||v===6)i=i.stateNode,s?d.insertBefore(i,s):d.appendChild(i);else if(v!==4&&(v===27&&cl(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(sn(i,s,d),i=i.sibling;i!==null;)sn(i,s,d),i=i.sibling}function Xc(i){var s=i.stateNode,d=i.memoizedProps;try{for(var v=i.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);zn(s,v,d),s[Vt]=i,s[qt]=d}catch(I){qi(i,i.return,I)}}var go=!1,bn=!1,ju=!1,Nu=typeof WeakSet=="function"?WeakSet:Set,or=null;function am(i,s){if(i=i.containerInfo,af=yt,i=bu(i),Sc(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var E=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{d.nodeType,I.nodeType}catch{d=null;break e}var Z=0,ee=-1,_e=-1,Ge=0,Je=0,at=i,qe=null;t:for(;;){for(var He;at!==d||E!==0&&at.nodeType!==3||(ee=Z+E),at!==I||v!==0&&at.nodeType!==3||(_e=Z+v),at.nodeType===3&&(Z+=at.nodeValue.length),(He=at.firstChild)!==null;)qe=at,at=He;for(;;){if(at===i)break t;if(qe===d&&++Ge===E&&(ee=Z),qe===I&&++Je===v&&(_e=Z),(He=at.nextSibling)!==null)break;at=qe,qe=at.parentNode}at=He}d=ee===-1||_e===-1?null:{start:ee,end:_e}}else d=null}d=d||{start:0,end:0}}else d=null;for(sf={focusedElem:i,selectionRange:d},yt=!1,or=s;or!==null;)if(s=or,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,or=i;else for(;or!==null;){switch(s=or,I=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&I!==null){i=void 0,d=s,E=I.memoizedProps,I=I.memoizedState,v=d.stateNode;try{var Kt=Uc(d.type,E,d.elementType===d.type);i=v.getSnapshotBeforeUpdate(Kt,I),v.__reactInternalSnapshotBeforeUpdate=i}catch(Xt){qi(d,d.return,Xt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,d=i.nodeType,d===9)lf(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":lf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(g(163))}if(i=s.sibling,i!==null){i.return=s.return,or=i;break}or=s.return}}function Fu(i,s,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:al(i,d),v&4&&Nh(5,d);break;case 1:if(al(i,d),v&4)if(i=d.stateNode,s===null)try{i.componentDidMount()}catch(Z){qi(d,d.return,Z)}else{var E=Uc(d.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(E,s,i.__reactInternalSnapshotBeforeUpdate)}catch(Z){qi(d,d.return,Z)}}v&64&&nm(d),v&512&&Fh(d,d.return);break;case 3:if(al(i,d),v&64&&(i=d.updateQueue,i!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=d.child.stateNode;break;case 1:s=d.child.stateNode}try{Ih(i,s)}catch(Z){qi(d,d.return,Z)}}break;case 27:s===null&&v&4&&Xc(d);case 26:case 5:al(i,d),s===null&&v&4&&Ud(d),v&512&&Fh(d,d.return);break;case 12:al(i,d);break;case 13:al(i,d),v&4&&sm(i,d),v&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=bg.bind(null,d),Cg(i,d))));break;case 22:if(v=d.memoizedState!==null||go,!v){s=s!==null&&s.memoizedState!==null||bn,E=go;var I=bn;go=v,(bn=s)&&!I?ql(i,d,(d.subtreeFlags&8772)!==0):al(i,d),go=E,bn=I}break;case 30:break;default:al(i,d)}}function Gd(i){var s=i.alternate;s!==null&&(i.alternate=null,Gd(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&bt(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Vi=null,Nr=!1;function xa(i,s,d){for(d=d.child;d!==null;)Vu(i,s,d),d=d.sibling}function Vu(i,s,d){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(oa,d)}catch{}switch(d.tag){case 26:bn||mo(d,s),xa(i,s,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:bn||mo(d,s);var v=Vi,E=Nr;cl(d.type)&&(Vi=d.stateNode,Nr=!1),xa(i,s,d),au(d.stateNode),Vi=v,Nr=E;break;case 5:bn||mo(d,s);case 6:if(v=Vi,E=Nr,Vi=null,xa(i,s,d),Vi=v,Nr=E,Vi!==null)if(Nr)try{(Vi.nodeType===9?Vi.body:Vi.nodeName==="HTML"?Vi.ownerDocument.body:Vi).removeChild(d.stateNode)}catch(I){qi(d,s,I)}else try{Vi.removeChild(d.stateNode)}catch(I){qi(d,s,I)}break;case 18:Vi!==null&&(Nr?(i=Vi,id(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),Sn(i)):id(Vi,d.stateNode));break;case 4:v=Vi,E=Nr,Vi=d.stateNode.containerInfo,Nr=!0,xa(i,s,d),Vi=v,Nr=E;break;case 0:case 11:case 14:case 15:bn||Zl(2,d,s),bn||Zl(4,d,s),xa(i,s,d);break;case 1:bn||(mo(d,s),v=d.stateNode,typeof v.componentWillUnmount=="function"&&rm(d,s,v)),xa(i,s,d);break;case 21:xa(i,s,d);break;case 22:bn=(v=bn)||d.memoizedState!==null,xa(i,s,d),bn=v;break;default:xa(i,s,d)}}function sm(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Sn(i)}catch(d){qi(s,s.return,d)}}function om(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Nu),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Nu),s;default:throw Error(g(435,i.tag))}}function rl(i,s){var d=om(i);s.forEach(function(v){var E=wg.bind(null,i,v);d.has(v)||(d.add(v),v.then(E,E))})}function Va(i,s){var d=s.deletions;if(d!==null)for(var v=0;v<d.length;v++){var E=d[v],I=i,Z=s,ee=Z;e:for(;ee!==null;){switch(ee.tag){case 27:if(cl(ee.type)){Vi=ee.stateNode,Nr=!1;break e}break;case 5:Vi=ee.stateNode,Nr=!1;break e;case 3:case 4:Vi=ee.stateNode.containerInfo,Nr=!0;break e}ee=ee.return}if(Vi===null)throw Error(g(160));Vu(I,Z,E),Vi=null,Nr=!1,I=E.alternate,I!==null&&(I.return=null),E.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Uu(s,i),s=s.sibling}var hs=null;function Uu(i,s){var d=i.alternate,v=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Va(s,i),ra(i),v&4&&(Zl(3,i,i.return),Nh(3,i),Zl(5,i,i.return));break;case 1:Va(s,i),ra(i),v&512&&(bn||d===null||mo(d,d.return)),v&64&&go&&(i=i.updateQueue,i!==null&&(v=i.callbacks,v!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var E=hs;if(Va(s,i),ra(i),v&512&&(bn||d===null||mo(d,d.return)),v&4){var I=d!==null?d.memoizedState:null;if(v=i.memoizedState,d===null)if(v===null)if(i.stateNode===null){e:{v=i.type,d=i.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":I=E.getElementsByTagName("title")[0],(!I||I[Ka]||I[Vt]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=E.createElement(v),E.head.insertBefore(I,E.querySelector("head > title"))),zn(I,v,d),I[Vt]=i,Yi(I),v=I;break e;case"link":var Z=b("link","href",E).get(v+(d.href||""));if(Z){for(var ee=0;ee<Z.length;ee++)if(I=Z[ee],I.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&I.getAttribute("rel")===(d.rel==null?null:d.rel)&&I.getAttribute("title")===(d.title==null?null:d.title)&&I.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){Z.splice(ee,1);break t}}I=E.createElement(v),zn(I,v,d),E.head.appendChild(I);break;case"meta":if(Z=b("meta","content",E).get(v+(d.content||""))){for(ee=0;ee<Z.length;ee++)if(I=Z[ee],I.getAttribute("content")===(d.content==null?null:""+d.content)&&I.getAttribute("name")===(d.name==null?null:d.name)&&I.getAttribute("property")===(d.property==null?null:d.property)&&I.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&I.getAttribute("charset")===(d.charSet==null?null:d.charSet)){Z.splice(ee,1);break t}}I=E.createElement(v),zn(I,v,d),E.head.appendChild(I);break;default:throw Error(g(468,v))}I[Vt]=i,Yi(I),v=I}i.stateNode=v}else M(E,i.type,i.stateNode);else i.stateNode=t(E,v,i.memoizedProps);else I!==v?(I===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):I.count--,v===null?M(E,i.type,i.stateNode):t(E,v,i.memoizedProps)):v===null&&i.stateNode!==null&&Uf(i,i.memoizedProps,d.memoizedProps)}break;case 27:Va(s,i),ra(i),v&512&&(bn||d===null||mo(d,d.return)),d!==null&&v&4&&Uf(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Va(s,i),ra(i),v&512&&(bn||d===null||mo(d,d.return)),i.flags&32){E=i.stateNode;try{ts(E,"")}catch(He){qi(i,i.return,He)}}v&4&&i.stateNode!=null&&(E=i.memoizedProps,Uf(i,E,d!==null?d.memoizedProps:E)),v&1024&&(ju=!0);break;case 6:if(Va(s,i),ra(i),v&4){if(i.stateNode===null)throw Error(g(162));v=i.memoizedProps,d=i.stateNode;try{d.nodeValue=v}catch(He){qi(i,i.return,He)}}break;case 3:if(x=null,E=hs,hs=eh(s.containerInfo),Va(s,i),hs=E,ra(i),v&4&&d!==null&&d.memoizedState.isDehydrated)try{Sn(s.containerInfo)}catch(He){qi(i,i.return,He)}ju&&(ju=!1,qf(i));break;case 4:v=hs,hs=eh(i.stateNode.containerInfo),Va(s,i),ra(i),hs=v;break;case 12:Va(s,i),ra(i);break;case 13:Va(s,i),ra(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Wf=pr()),v&4&&(v=i.updateQueue,v!==null&&(i.updateQueue=null,rl(i,v)));break;case 22:E=i.memoizedState!==null;var _e=d!==null&&d.memoizedState!==null,Ge=go,Je=bn;if(go=Ge||E,bn=Je||_e,Va(s,i),bn=Je,go=Ge,ra(i),v&8192)e:for(s=i.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(d===null||_e||go||bn||Yc(i)),d=null,s=i;;){if(s.tag===5||s.tag===26){if(d===null){_e=d=s;try{if(I=_e.stateNode,E)Z=I.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{ee=_e.stateNode;var at=_e.memoizedProps.style,qe=at!=null&&at.hasOwnProperty("display")?at.display:null;ee.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(He){qi(_e,_e.return,He)}}}else if(s.tag===6){if(d===null){_e=s;try{_e.stateNode.nodeValue=E?"":_e.memoizedProps}catch(He){qi(_e,_e.return,He)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;d===s&&(d=null),s=s.return}d===s&&(d=null),s.sibling.return=s.return,s=s.sibling}v&4&&(v=i.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,rl(i,d))));break;case 19:Va(s,i),ra(i),v&4&&(v=i.updateQueue,v!==null&&(i.updateQueue=null,rl(i,v)));break;case 30:break;case 21:break;default:Va(s,i),ra(i)}}function ra(i){var s=i.flags;if(s&2){try{for(var d,v=i.return;v!==null;){if(Gf(v)){d=v;break}v=v.return}if(d==null)throw Error(g(160));switch(d.tag){case 27:var E=d.stateNode,I=Hc(i);sn(i,I,E);break;case 5:var Z=d.stateNode;d.flags&32&&(ts(Z,""),d.flags&=-33);var ee=Hc(i);sn(i,ee,Z);break;case 3:case 4:var _e=d.stateNode.containerInfo,Ge=Hc(i);Zf(i,Ge,_e);break;default:throw Error(g(161))}}catch(Je){qi(i,i.return,Je)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function qf(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;qf(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function al(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Fu(i,s.alternate,s),s=s.sibling}function Yc(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Zl(4,s,s.return),Yc(s);break;case 1:mo(s,s.return);var d=s.stateNode;typeof d.componentWillUnmount=="function"&&rm(s,s.return,d),Yc(s);break;case 27:au(s.stateNode);case 26:case 5:mo(s,s.return),Yc(s);break;case 22:s.memoizedState===null&&Yc(s);break;case 30:Yc(s);break;default:Yc(s)}i=i.sibling}}function ql(i,s,d){for(d=d&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var v=s.alternate,E=i,I=s,Z=I.flags;switch(I.tag){case 0:case 11:case 15:ql(E,I,d),Nh(4,I);break;case 1:if(ql(E,I,d),v=I,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ge){qi(v,v.return,Ge)}if(v=I,E=v.updateQueue,E!==null){var ee=v.stateNode;try{var _e=E.shared.hiddenCallbacks;if(_e!==null)for(E.shared.hiddenCallbacks=null,E=0;E<_e.length;E++)zh(_e[E],ee)}catch(Ge){qi(v,v.return,Ge)}}d&&Z&64&&nm(I),Fh(I,I.return);break;case 27:Xc(I);case 26:case 5:ql(E,I,d),d&&v===null&&Z&4&&Ud(I),Fh(I,I.return);break;case 12:ql(E,I,d);break;case 13:ql(E,I,d),d&&Z&4&&sm(E,I);break;case 22:I.memoizedState===null&&ql(E,I,d),Fh(I,I.return);break;case 30:break;default:ql(E,I,d)}s=s.sibling}}function $f(i,s){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&Xo(d))}function Hf(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Xo(i))}function yo(i,s,d,v){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Wc(i,s,d,v),s=s.sibling}function Wc(i,s,d,v){var E=s.flags;switch(s.tag){case 0:case 11:case 15:yo(i,s,d,v),E&2048&&Nh(9,s);break;case 1:yo(i,s,d,v);break;case 3:yo(i,s,d,v),E&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Xo(i)));break;case 12:if(E&2048){yo(i,s,d,v),i=s.stateNode;try{var I=s.memoizedProps,Z=I.id,ee=I.onPostCommit;typeof ee=="function"&&ee(Z,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(_e){qi(s,s.return,_e)}}else yo(i,s,d,v);break;case 13:yo(i,s,d,v);break;case 23:break;case 22:I=s.stateNode,Z=s.alternate,s.memoizedState!==null?I._visibility&2?yo(i,s,d,v):Vh(i,s):I._visibility&2?yo(i,s,d,v):(I._visibility|=2,Gu(i,s,d,v,(s.subtreeFlags&10256)!==0)),E&2048&&$f(Z,s);break;case 24:yo(i,s,d,v),E&2048&&Hf(s.alternate,s);break;default:yo(i,s,d,v)}}function Gu(i,s,d,v,E){for(E=E&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var I=i,Z=s,ee=d,_e=v,Ge=Z.flags;switch(Z.tag){case 0:case 11:case 15:Gu(I,Z,ee,_e,E),Nh(8,Z);break;case 23:break;case 22:var Je=Z.stateNode;Z.memoizedState!==null?Je._visibility&2?Gu(I,Z,ee,_e,E):Vh(I,Z):(Je._visibility|=2,Gu(I,Z,ee,_e,E)),E&&Ge&2048&&$f(Z.alternate,Z);break;case 24:Gu(I,Z,ee,_e,E),E&&Ge&2048&&Hf(Z.alternate,Z);break;default:Gu(I,Z,ee,_e,E)}s=s.sibling}}function Vh(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var d=i,v=s,E=v.flags;switch(v.tag){case 22:Vh(d,v),E&2048&&$f(v.alternate,v);break;case 24:Vh(d,v),E&2048&&Hf(v.alternate,v);break;default:Vh(d,v)}s=s.sibling}}var Zu=8192;function qu(i){if(i.subtreeFlags&Zu)for(i=i.child;i!==null;)Xf(i),i=i.sibling}function Xf(i){switch(i.tag){case 26:qu(i),i.flags&Zu&&i.memoizedState!==null&&U(hs,i.memoizedState,i.memoizedProps);break;case 5:qu(i);break;case 3:case 4:var s=hs;hs=eh(i.stateNode.containerInfo),qu(i),hs=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Zu,Zu=16777216,qu(i),Zu=s):qu(i));break;default:qu(i)}}function lm(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Kc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var d=0;d<s.length;d++){var v=s[d];or=v,cm(v,i)}lm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$u(i),i=i.sibling}function $u(i){switch(i.tag){case 0:case 11:case 15:Kc(i),i.flags&2048&&Zl(9,i,i.return);break;case 3:Kc(i);break;case 12:Kc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Hu(i)):Kc(i);break;default:Kc(i)}}function Hu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var d=0;d<s.length;d++){var v=s[d];or=v,cm(v,i)}lm(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Zl(8,s,s.return),Hu(s);break;case 22:d=s.stateNode,d._visibility&2&&(d._visibility&=-3,Hu(s));break;default:Hu(s)}i=i.sibling}}function cm(i,s){for(;or!==null;){var d=or;switch(d.tag){case 0:case 11:case 15:Zl(8,d,s);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Xo(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,or=v;else e:for(d=i;or!==null;){v=or;var E=v.sibling,I=v.return;if(Gd(v),v===d){or=null;break e}if(E!==null){E.return=I,or=E;break e}or=I}}}var _g={getCacheForType:function(i){var s=Gi(kn),d=s.data.get(i);return d===void 0&&(d=i(),s.data.set(i,d)),d}},um=typeof WeakMap=="function"?WeakMap:Map,Ni=0,on=null,vi=null,pi=0,Fi=0,Ua=null,$l=!1,Xu=!1,Yf=!1,sl=0,Pn=0,_o=0,Hl=0,Zd=0,Ga=0,Yu=0,Xl=null,ba=null,qd=!1,Wf=0,$d=1/0,Hd=null,ol=null,Fr=0,Yl=null,vo=null,fn=0,Uh=0,Xd=null,Kf=null,Qc=0,Wl=null;function wa(){if((Ni&2)!==0&&pi!==0)return pi&-pi;if(je.T!==null){var i=Vn;return i!==0?i:Yh()}return Dn()}function hm(){Ga===0&&(Ga=(pi&536870912)===0||wi?ot():536870912);var i=na.current;return i!==null&&(i.flags|=32),Ga}function Za(i,s,d){(i===on&&(Fi===2||Fi===9)||i.cancelPendingCommit!==null)&&(Wu(i,0),Kl(i,pi,Ga,!1)),ze(i,d),((Ni&2)===0||i!==on)&&(i===on&&((Ni&2)===0&&(Hl|=d),Pn===4&&Kl(i,pi,Ga,!1)),qa(i))}function dm(i,s,d){if((Ni&6)!==0)throw Error(g(327));var v=!d&&(s&124)===0&&(s&i.expiredLanes)===0||Pe(i,s),E=v?Ql(i,s):Gh(i,s,!0),I=v;do{if(E===0){Xu&&!v&&Kl(i,s,0,!1);break}else{if(d=i.current.alternate,I&&!vg(d)){E=Gh(i,s,!1),I=!1;continue}if(E===2){if(I=s,i.errorRecoveryDisabledLanes&I)var Z=0;else Z=i.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){s=Z;e:{var ee=i;E=Xl;var _e=ee.current.memoizedState.isDehydrated;if(_e&&(Wu(ee,Z).flags|=256),Z=Gh(ee,Z,!1),Z!==2){if(Yf&&!_e){ee.errorRecoveryDisabledLanes|=I,Hl|=I,E=4;break e}I=ba,ba=E,I!==null&&(ba===null?ba=I:ba.push.apply(ba,I))}E=Z}if(I=!1,E!==2)continue}}if(E===1){Wu(i,0),Kl(i,s,0,!0);break}e:{switch(v=i,I=E,I){case 0:case 1:throw Error(g(345));case 4:if((s&4194048)!==s)break;case 6:Kl(v,s,Ga,!$l);break e;case 2:ba=null;break;case 3:case 5:break;default:throw Error(g(329))}if((s&62914560)===s&&(E=Wf+300-pr(),10<E)){if(Kl(v,s,Ga,!$l),Ne(v,0,!0)!==0)break e;v.timeoutHandle=dp(fm.bind(null,v,d,ba,Hd,qd,s,Ga,Hl,Yu,$l,I,2,-0,0),E);break e}fm(v,d,ba,Hd,qd,s,Ga,Hl,Yu,$l,I,0,-0,0)}}break}while(!0);qa(i)}function fm(i,s,d,v,E,I,Z,ee,_e,Ge,Je,at,qe,He){if(i.timeoutHandle=-1,at=s.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(O={stylesheets:null,count:0,unsuspend:N},Xf(s),at=q(),at!==null)){i.cancelPendingCommit=at(Jf.bind(null,i,s,I,d,v,E,Z,ee,_e,Je,1,qe,He)),Kl(i,I,Z,!Ge);return}Jf(i,s,I,d,v,E,Z,ee,_e)}function vg(i){for(var s=i;;){var d=s.tag;if((d===0||d===11||d===15)&&s.flags&16384&&(d=s.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var E=d[v],I=E.getSnapshot;E=E.value;try{if(!Dr(I(),E))return!1}catch{return!1}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Kl(i,s,d,v){s&=~Zd,s&=~Hl,i.suspendedLanes|=s,i.pingedLanes&=~s,v&&(i.warmLanes|=s),v=i.expirationTimes;for(var E=s;0<E;){var I=31-Te(E),Z=1<<I;v[I]=-1,E&=~Z}d!==0&&si(i,d,s)}function Yd(){return(Ni&6)===0?(tu(0),!1):!0}function Qf(){if(vi!==null){if(Fi===0)var i=vi.return;else i=vi,da=ia=null,lo(i),Qi=null,dn=0,i=vi;for(;i!==null;)im(i.alternate,i),i=i.return;vi=null}}function Wu(i,s){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,Im(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),Qf(),on=i,vi=d=_r(i.current,null),pi=s,Fi=0,Ua=null,$l=!1,Xu=Pe(i,s),Yf=!1,Yu=Ga=Zd=Hl=_o=Pn=0,ba=Xl=null,qd=!1,(s&8)!==0&&(s|=s&32);var v=i.entangledLanes;if(v!==0)for(i=i.entanglements,v&=s;0<v;){var E=31-Te(v),I=1<<E;s|=i[E],v&=~I}return sl=s,$o(),d}function pm(i,s){li=null,je.H=sr,s===Cs||s===wt?(s=jc(),Fi=3):s===pa?(s=jc(),Fi=4):Fi=s===Lh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ua=s,vi===null&&(Pn=1,Ou(i,Wn(s,i.current)))}function mm(){var i=je.H;return je.H=sr,i===null?sr:i}function gm(){var i=je.A;return je.A=_g,i}function Wd(){Pn=4,$l||(pi&4194048)!==pi&&na.current!==null||(Xu=!0),(_o&134217727)===0&&(Hl&134217727)===0||on===null||Kl(on,pi,Ga,!1)}function Gh(i,s,d){var v=Ni;Ni|=2;var E=mm(),I=gm();(on!==i||pi!==s)&&(Hd=null,Wu(i,s)),s=!1;var Z=Pn;e:do try{if(Fi!==0&&vi!==null){var ee=vi,_e=Ua;switch(Fi){case 8:Qf(),Z=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(s=!0);var Ge=Fi;if(Fi=0,Ua=null,ll(i,ee,_e,Ge),d&&Xu){Z=0;break e}break;default:Ge=Fi,Fi=0,Ua=null,ll(i,ee,_e,Ge)}}ym(),Z=Pn;break}catch(Je){pm(i,Je)}while(!0);return s&&i.shellSuspendCounter++,da=ia=null,Ni=v,je.H=E,je.A=I,vi===null&&(on=null,pi=0,$o()),Z}function ym(){for(;vi!==null;)Jc(vi)}function Ql(i,s){var d=Ni;Ni|=2;var v=mm(),E=gm();on!==i||pi!==s?(Hd=null,$d=pr()+500,Wu(i,s)):Xu=Pe(i,s);e:do try{if(Fi!==0&&vi!==null){s=vi;var I=Ua;t:switch(Fi){case 1:Fi=0,Ua=null,ll(i,s,I,1);break;case 2:case 9:if(Bc(I)){Fi=0,Ua=null,qh(s);break}s=function(){Fi!==2&&Fi!==9||on!==i||(Fi=7),qa(i)},I.then(s,s);break e;case 3:Fi=7;break e;case 4:Fi=5;break e;case 7:Bc(I)?(Fi=0,Ua=null,qh(s)):(Fi=0,Ua=null,ll(i,s,I,7));break;case 5:var Z=null;switch(vi.tag){case 26:Z=vi.memoizedState;case 5:case 27:var ee=vi;if(!Z||D(Z)){Fi=0,Ua=null;var _e=ee.sibling;if(_e!==null)vi=_e;else{var Ge=ee.return;Ge!==null?(vi=Ge,Kd(Ge)):vi=null}break t}}Fi=0,Ua=null,ll(i,s,I,5);break;case 6:Fi=0,Ua=null,ll(i,s,I,6);break;case 8:Qf(),Pn=6;break e;default:throw Error(g(462))}}Zh();break}catch(Je){pm(i,Je)}while(!0);return da=ia=null,je.H=v,je.A=E,Ni=d,vi!==null?0:(on=null,pi=0,$o(),Pn)}function Zh(){for(;vi!==null&&!Aa();)Jc(vi)}function Jc(i){var s=em(i.alternate,i,sl);i.memoizedProps=i.pendingProps,s===null?Kd(i):vi=s}function qh(i){var s=i,d=s.alternate;switch(s.tag){case 15:case 0:s=Od(d,s,s.pendingProps,s.type,void 0,pi);break;case 11:s=Od(d,s,s.pendingProps,s.type.render,s.ref,pi);break;case 5:lo(s);default:im(d,s),s=vi=Mh(s,sl),s=em(d,s,sl)}i.memoizedProps=i.pendingProps,s===null?Kd(i):vi=s}function ll(i,s,d,v){da=ia=null,lo(s),Qi=null,dn=0;var E=s.return;try{if(kh(i,E,s,d,pi)){Pn=1,Ou(i,Wn(d,i.current)),vi=null;return}}catch(I){if(E!==null)throw vi=E,I;Pn=1,Ou(i,Wn(d,i.current)),vi=null;return}s.flags&32768?(wi||v===1?i=!0:Xu||(pi&536870912)!==0?i=!1:($l=i=!0,(v===2||v===9||v===3||v===6)&&(v=na.current,v!==null&&v.tag===13&&(v.flags|=16384))),_m(s,i)):Kd(s)}function Kd(i){var s=i;do{if((s.flags&32768)!==0){_m(s,$l);return}i=s.return;var d=$c(s.alternate,s,sl);if(d!==null){vi=d;return}if(s=s.sibling,s!==null){vi=s;return}vi=s=i}while(s!==null);Pn===0&&(Pn=5)}function _m(i,s){do{var d=jh(i.alternate,i);if(d!==null){d.flags&=32767,vi=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!s&&(i=i.sibling,i!==null)){vi=i;return}vi=i=d}while(i!==null);Pn=6,vi=null}function Jf(i,s,d,v,E,I,Z,ee,_e){i.cancelPendingCommit=null;do Ku();while(Fr!==0);if((Ni&6)!==0)throw Error(g(327));if(s!==null){if(s===i.current)throw Error(g(177));if(I=s.lanes|s.childLanes,I|=qo,Zt(i,d,I,Z,ee,_e),i===on&&(vi=on=null,pi=0),vo=s,Yl=i,fn=d,Uh=I,Xd=E,Kf=v,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wm(za,function(){return Qd(),null})):(i.callbackNode=null,i.callbackPriority=0),v=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||v){v=je.T,je.T=null,E=it.p,it.p=2,Z=Ni,Ni|=4;try{am(i,s,d)}finally{Ni=Z,it.p=E,je.T=v}}Fr=1,ep(),vm(),tp()}}function ep(){if(Fr===1){Fr=0;var i=Yl,s=vo,d=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||d){d=je.T,je.T=null;var v=it.p;it.p=2;var E=Ni;Ni|=4;try{Uu(s,i);var I=sf,Z=bu(i.containerInfo),ee=I.focusedElem,_e=I.selectionRange;if(Z!==ee&&ee&&ee.ownerDocument&&yi(ee.ownerDocument.documentElement,ee)){if(_e!==null&&Sc(ee)){var Ge=_e.start,Je=_e.end;if(Je===void 0&&(Je=Ge),"selectionStart"in ee)ee.selectionStart=Ge,ee.selectionEnd=Math.min(Je,ee.value.length);else{var at=ee.ownerDocument||document,qe=at&&at.defaultView||window;if(qe.getSelection){var He=qe.getSelection(),Kt=ee.textContent.length,Xt=Math.min(_e.start,Kt),Hi=_e.end===void 0?Xt:Math.min(_e.end,Kt);!He.extend&&Xt>Hi&&(Z=Hi,Hi=Xt,Xt=Z);var ke=ss(ee,Xt),Ie=ss(ee,Hi);if(ke&&Ie&&(He.rangeCount!==1||He.anchorNode!==ke.node||He.anchorOffset!==ke.offset||He.focusNode!==Ie.node||He.focusOffset!==Ie.offset)){var Ve=at.createRange();Ve.setStart(ke.node,ke.offset),He.removeAllRanges(),Xt>Hi?(He.addRange(Ve),He.extend(Ie.node,Ie.offset)):(Ve.setEnd(Ie.node,Ie.offset),He.addRange(Ve))}}}}for(at=[],He=ee;He=He.parentNode;)He.nodeType===1&&at.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<at.length;ee++){var rt=at[ee];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}yt=!!af,sf=af=null}finally{Ni=E,it.p=v,je.T=d}}i.current=s,Fr=2}}function vm(){if(Fr===2){Fr=0;var i=Yl,s=vo,d=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||d){d=je.T,je.T=null;var v=it.p;it.p=2;var E=Ni;Ni|=4;try{Fu(i,s.alternate,s)}finally{Ni=E,it.p=v,je.T=d}}Fr=3}}function tp(){if(Fr===4||Fr===3){Fr=0,Ya();var i=Yl,s=vo,d=fn,v=Kf;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Fr=5:(Fr=0,vo=Yl=null,ip(i,i.pendingLanes));var E=i.pendingLanes;if(E===0&&(ol=null),Ii(d),s=s.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(oa,s,void 0,(s.current.flags&128)===128)}catch{}if(v!==null){s=je.T,E=it.p,it.p=2,je.T=null;try{for(var I=i.onRecoverableError,Z=0;Z<v.length;Z++){var ee=v[Z];I(ee.value,{componentStack:ee.stack})}}finally{je.T=s,it.p=E}}(fn&3)!==0&&Ku(),qa(i),E=i.pendingLanes,(d&4194090)!==0&&(E&42)!==0?i===Wl?Qc++:(Qc=0,Wl=i):Qc=0,tu(0)}}function ip(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Xo(s)))}function Ku(i){return ep(),vm(),tp(),Qd()}function Qd(){if(Fr!==5)return!1;var i=Yl,s=Uh;Uh=0;var d=Ii(fn),v=je.T,E=it.p;try{it.p=32>d?32:d,je.T=null,d=Xd,Xd=null;var I=Yl,Z=fn;if(Fr=0,vo=Yl=null,fn=0,(Ni&6)!==0)throw Error(g(331));var ee=Ni;if(Ni|=4,$u(I.current),Wc(I,I.current,Z,d),Ni=ee,tu(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(oa,I)}catch{}return!0}finally{it.p=E,je.T=v,ip(i,s)}}function xm(i,s,d){s=Wn(d,s),s=Ld(i.stateNode,s,2),i=As(i,s,2),i!==null&&(ze(i,2),qa(i))}function qi(i,s,d){if(i.tag===3)xm(i,i,d);else for(;s!==null;){if(s.tag===3){xm(s,i,d);break}else if(s.tag===1){var v=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ol===null||!ol.has(v))){i=Wn(d,i),d=Gc(2),v=As(s,d,2),v!==null&&(Xp(d,v,s,i),ze(v,2),qa(v));break}}s=s.return}}function np(i,s,d){var v=i.pingCache;if(v===null){v=i.pingCache=new um;var E=new Set;v.set(s,E)}else E=v.get(s),E===void 0&&(E=new Set,v.set(s,E));E.has(d)||(Yf=!0,E.add(d),i=xg.bind(null,i,s,d),s.then(i,i))}function xg(i,s,d){var v=i.pingCache;v!==null&&v.delete(s),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,on===i&&(pi&d)===d&&(Pn===4||Pn===3&&(pi&62914560)===pi&&300>pr()-Wf?(Ni&2)===0&&Wu(i,0):Zd|=d,Yu===pi&&(Yu=0)),qa(i)}function bm(i,s){s===0&&(s=Qe()),i=Kr(i,s),i!==null&&(ze(i,s),qa(i))}function bg(i){var s=i.memoizedState,d=0;s!==null&&(d=s.retryLane),bm(i,d)}function wg(i,s){var d=0;switch(i.tag){case 13:var v=i.stateNode,E=i.memoizedState;E!==null&&(d=E.retryLane);break;case 19:v=i.stateNode;break;case 22:v=i.stateNode._retryCache;break;default:throw Error(g(314))}v!==null&&v.delete(s),bm(i,d)}function wm(i,s){return en(i,s)}var $h=null,Ta=null,xo=!1,Hh=!1,Xh=!1,eu=0;function qa(i){i!==Ta&&i.next===null&&(Ta===null?$h=Ta=i:Ta=Ta.next=i),Hh=!0,xo||(xo=!0,Tm())}function tu(i,s){if(!Xh&&Hh){Xh=!0;do for(var d=!1,v=$h;v!==null;){if(i!==0){var E=v.pendingLanes;if(E===0)var I=0;else{var Z=v.suspendedLanes,ee=v.pingedLanes;I=(1<<31-Te(42|i)+1)-1,I&=E&~(Z&~ee),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(d=!0,rp(v,I))}else I=pi,I=Ne(v,v===on?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||Pe(v,I)||(d=!0,rp(v,I));v=v.next}while(d);Xh=!1}}function Tg(){Jd()}function Jd(){Hh=xo=!1;var i=0;eu!==0&&(zm()&&(i=eu),eu=0);for(var s=pr(),d=null,v=$h;v!==null;){var E=v.next,I=ef(v,s);I===0?(v.next=null,d===null?$h=E:d.next=E,E===null&&(Ta=d)):(d=v,(i!==0||(I&3)!==0)&&(Hh=!0)),v=E}tu(i)}function ef(i,s){for(var d=i.suspendedLanes,v=i.pingedLanes,E=i.expirationTimes,I=i.pendingLanes&-62914561;0<I;){var Z=31-Te(I),ee=1<<Z,_e=E[Z];_e===-1?((ee&d)===0||(ee&v)!==0)&&(E[Z]=Xe(ee,s)):_e<=s&&(i.expiredLanes|=ee),I&=~ee}if(s=on,d=pi,d=Ne(i,i===s?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),v=i.callbackNode,d===0||i===s&&(Fi===2||Fi===9)||i.cancelPendingCommit!==null)return v!==null&&v!==null&&ln(v),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||Pe(i,d)){if(s=d&-d,s===i.callbackPriority)return s;switch(v!==null&&ln(v),Ii(d)){case 2:case 8:d=Eo;break;case 32:d=za;break;case 268435456:d=ms;break;default:d=za}return v=iu.bind(null,i),d=en(d,v),i.callbackPriority=s,i.callbackNode=d,s}return v!==null&&v!==null&&ln(v),i.callbackPriority=2,i.callbackNode=null,2}function iu(i,s){if(Fr!==0&&Fr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Ku()&&i.callbackNode!==d)return null;var v=pi;return v=Ne(i,i===on?v:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),v===0?null:(dm(i,v,s),ef(i,pr()),i.callbackNode!=null&&i.callbackNode===d?iu.bind(null,i):null)}function rp(i,s){if(Ku())return null;dm(i,s,!0)}function Tm(){Eg(function(){(Ni&6)!==0?en(Pa,Tg):Jd()})}function Yh(){return eu===0&&(eu=ot()),eu}function ap(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ni(""+i)}function Wh(i,s){var d=s.ownerDocument.createElement("input");return d.name=s.name,d.value=s.value,i.id&&d.setAttribute("form",i.id),s.parentNode.insertBefore(d,s),i=new FormData(i),d.parentNode.removeChild(d),i}function Sm(i,s,d,v,E){if(s==="submit"&&d&&d.stateNode===E){var I=ap((E[qt]||null).action),Z=v.submitter;Z&&(s=(s=Z[qt]||null)?ap(s.formAction):Z.getAttribute("formAction"),s!==null&&(I=s,Z=null));var ee=new Yr("action","action",null,v,E);i.push({event:ee,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(eu!==0){var _e=Z?Wh(E,Z):new FormData(E);Ki(d,{pending:!0,data:_e,method:E.method,action:I},null,_e)}}else typeof I=="function"&&(ee.preventDefault(),_e=Z?Wh(E,Z):new FormData(E),Ki(d,{pending:!0,data:_e,method:E.method,action:I},I,_e))},currentTarget:E}]})}}for(var sp=0;sp<Tu.length;sp++){var op=Tu[sp],Mm=op.toLowerCase(),Sg=op[0].toUpperCase()+op.slice(1);ua(Mm,"on"+Sg)}ua(Mc,"onAnimationEnd"),ua(Ec,"onAnimationIteration"),ua(Cc,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(Th,"onTransitionRun"),ua(Go,"onTransitionStart"),ua(Ac,"onTransitionCancel"),ua(Zo,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kh));function Em(i,s){s=(s&4)!==0;for(var d=0;d<i.length;d++){var v=i[d],E=v.event;v=v.listeners;e:{var I=void 0;if(s)for(var Z=v.length-1;0<=Z;Z--){var ee=v[Z],_e=ee.instance,Ge=ee.currentTarget;if(ee=ee.listener,_e!==I&&E.isPropagationStopped())break e;I=ee,E.currentTarget=Ge;try{I(E)}catch(Je){Rh(Je)}E.currentTarget=null,I=_e}else for(Z=0;Z<v.length;Z++){if(ee=v[Z],_e=ee.instance,Ge=ee.currentTarget,ee=ee.listener,_e!==I&&E.isPropagationStopped())break e;I=ee,E.currentTarget=Ge;try{I(E)}catch(Je){Rh(Je)}E.currentTarget=null,I=_e}}}}function xi(i,s){var d=s[dt];d===void 0&&(d=s[dt]=new Set);var v=i+"__bubble";d.has(v)||(lp(s,i,2,!1),d.add(v))}function Qh(i,s,d){var v=0;s&&(v|=4),lp(d,i,v,s)}var js="_reactListening"+Math.random().toString(36).slice(2);function tf(i){if(!i[js]){i[js]=!0,Jt.forEach(function(d){d!=="selectionchange"&&(Mg.has(d)||Qh(d,!1,i),Qh(d,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[js]||(s[js]=!0,Qh("selectionchange",!1,s))}}function lp(i,s,d,v){switch(Lt(s)){case 2:var E=It;break;case 8:E=xt;break;default:E=_t}d=E.bind(null,s,d,i),E=void 0,!nr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),v?E!==void 0?i.addEventListener(s,d,{capture:!0,passive:E}):i.addEventListener(s,d,!0):E!==void 0?i.addEventListener(s,d,{passive:E}):i.addEventListener(s,d,!1)}function nf(i,s,d,v,E){var I=v;if((s&1)===0&&(s&2)===0&&v!==null)e:for(;;){if(v===null)return;var Z=v.tag;if(Z===3||Z===4){var ee=v.stateNode.containerInfo;if(ee===E)break;if(Z===4)for(Z=v.return;Z!==null;){var _e=Z.tag;if((_e===3||_e===4)&&Z.stateNode.containerInfo===E)return;Z=Z.return}for(;ee!==null;){if(Z=Qt(ee),Z===null)return;if(_e=Z.tag,_e===5||_e===6||_e===26||_e===27){v=I=Z;continue e}ee=ee.parentNode}}v=v.return}Cn(function(){var Ge=I,Je=yl(d),at=[];e:{var qe=Wr.get(i);if(qe!==void 0){var He=Yr,Kt=i;switch(i){case"keypress":if($t(d)===0)break e;case"keydown":case"keyup":He=yc;break;case"focusin":Kt="focus",He=Lo;break;case"focusout":Kt="blur",He=Lo;break;case"beforeblur":case"afterblur":He=Lo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=Cf;break;case Mc:case Ec:case Cc:He=mn;break;case Zo:He=Af;break;case"scroll":case"scrollend":He=dh;break;case"wheel":He=vu;break;case"copy":case"cut":case"paste":He=pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=ph;break;case"toggle":case"beforetoggle":He=jo}var Xt=(s&4)!==0,Hi=!Xt&&(i==="scroll"||i==="scrollend"),ke=Xt?qe!==null?qe+"Capture":null:qe;Xt=[];for(var Ie=Ge,Ve;Ie!==null;){var rt=Ie;if(Ve=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||Ve===null||ke===null||(rt=bi(Ie,ke),rt!=null&&Xt.push(Qu(Ie,rt,Ve))),Hi)break;Ie=Ie.return}0<Xt.length&&(qe=new He(qe,Kt,null,d,Je),at.push({event:qe,listeners:Xt}))}}if((s&7)===0){e:{if(qe=i==="mouseover"||i==="pointerover",He=i==="mouseout"||i==="pointerout",qe&&d!==vs&&(Kt=d.relatedTarget||d.fromElement)&&(Qt(Kt)||Kt[Xi]))break e;if((He||qe)&&(qe=Je.window===Je?Je:(qe=Je.ownerDocument)?qe.defaultView||qe.parentWindow:window,He?(Kt=d.relatedTarget||d.toElement,He=Ge,Kt=Kt?Qt(Kt):null,Kt!==null&&(Hi=C(Kt),Xt=Kt.tag,Kt!==Hi||Xt!==5&&Xt!==27&&Xt!==6)&&(Kt=null)):(He=null,Kt=Ge),He!==Kt)){if(Xt=fc,rt="onMouseLeave",ke="onMouseEnter",Ie="mouse",(i==="pointerout"||i==="pointerover")&&(Xt=ph,rt="onPointerLeave",ke="onPointerEnter",Ie="pointer"),Hi=He==null?qe:En(He),Ve=Kt==null?qe:En(Kt),qe=new Xt(rt,Ie+"leave",He,d,Je),qe.target=Hi,qe.relatedTarget=Ve,rt=null,Qt(Je)===Ge&&(Xt=new Xt(ke,Ie+"enter",Kt,d,Je),Xt.target=Ve,Xt.relatedTarget=Hi,rt=Xt),Hi=rt,He&&Kt)t:{for(Xt=He,ke=Kt,Ie=0,Ve=Xt;Ve;Ve=Jl(Ve))Ie++;for(Ve=0,rt=ke;rt;rt=Jl(rt))Ve++;for(;0<Ie-Ve;)Xt=Jl(Xt),Ie--;for(;0<Ve-Ie;)ke=Jl(ke),Ve--;for(;Ie--;){if(Xt===ke||ke!==null&&Xt===ke.alternate)break t;Xt=Jl(Xt),ke=Jl(ke)}Xt=null}else Xt=null;He!==null&&cp(at,qe,He,Xt,!1),Kt!==null&&Hi!==null&&cp(at,Hi,Kt,Xt,!0)}}e:{if(qe=Ge?En(Ge):window,He=qe.nodeName&&qe.nodeName.toLowerCase(),He==="select"||He==="input"&&qe.type==="file")var Ot=xh;else if(wd(qe))if(Ws)Ot=Ed;else{Ot=If;var mi=Sd}else He=qe.nodeName,!He||He.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Ge&&is(Ge.elementType)&&(Ot=xh):Ot=Md;if(Ot&&(Ot=Ot(i,Ge))){vh(at,Ot,d,Je);break e}mi&&mi(i,qe,Ge),i==="focusout"&&Ge&&qe.type==="number"&&Ge.memoizedProps.value!=null&&dc(qe,"number",qe.value)}switch(mi=Ge?En(Ge):window,i){case"focusin":(wd(mi)||mi.contentEditable==="true")&&(Ks=mi,bs=Ge,Vo=null);break;case"focusout":Vo=bs=Ks=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,Ad(at,d,Je);break;case"selectionchange":if(Cd)break;case"keydown":case"keyup":Ad(at,d,Je)}var Dt;if(xl)e:{switch(i){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Tl?xd(i,d)&&(Gt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Gt="onCompositionStart");Gt&&(_c&&d.locale!=="ko"&&(Tl||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Tl&&(Dt=Ft()):(hn=Je,Bi="value"in hn?hn.value:hn.textContent,Tl=!0)),mi=Jh(Ge,Gt),0<mi.length&&(Gt=new vd(Gt,i,null,d,Je),at.push({event:Gt,listeners:mi}),Dt?Gt.data=Dt:(Dt=vc(d),Dt!==null&&(Gt.data=Dt)))),(Dt=zf?No(i,d):bd(i,d))&&(Gt=Jh(Ge,"onBeforeInput"),0<Gt.length&&(mi=new vd("onBeforeInput","beforeinput",null,d,Je),at.push({event:mi,listeners:Gt}),mi.data=Dt)),Sm(at,i,Ge,d,Je)}Em(at,s)})}function Qu(i,s,d){return{instance:i,listener:s,currentTarget:d}}function Jh(i,s){for(var d=s+"Capture",v=[];i!==null;){var E=i,I=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||I===null||(E=bi(i,d),E!=null&&v.unshift(Qu(i,E,I)),E=bi(i,s),E!=null&&v.push(Qu(i,E,I))),i.tag===3)return v;i=i.return}return[]}function Jl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function cp(i,s,d,v,E){for(var I=s._reactName,Z=[];d!==null&&d!==v;){var ee=d,_e=ee.alternate,Ge=ee.stateNode;if(ee=ee.tag,_e!==null&&_e===v)break;ee!==5&&ee!==26&&ee!==27||Ge===null||(_e=Ge,E?(Ge=bi(d,I),Ge!=null&&Z.unshift(Qu(d,Ge,_e))):E||(Ge=bi(d,I),Ge!=null&&Z.push(Qu(d,Ge,_e)))),d=d.return}Z.length!==0&&i.push({event:s,listeners:Z})}var ed=/\r\n?/g,Cm=/\u0000|\uFFFD/g;function rf(i){return(typeof i=="string"?i:""+i).replace(ed,`
`).replace(Cm,"")}function up(i,s){return s=rf(s),rf(i)===s}function $r(){}function Mi(i,s,d,v,E,I){switch(d){case"children":typeof v=="string"?s==="body"||s==="textarea"&&v===""||ts(i,v):(typeof v=="number"||typeof v=="bigint")&&s!=="body"&&ts(i,""+v);break;case"className":Ti(i,"class",v);break;case"tabIndex":Ti(i,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ti(i,d,v);break;case"style":$s(i,v,I);break;case"data":if(s!=="object"){Ti(i,"data",v);break}case"src":case"href":if(v===""&&(s!=="a"||d!=="href")){i.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){i.removeAttribute(d);break}v=ni(""+v),i.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(d==="formAction"?(s!=="input"&&Mi(i,s,"name",E.name,E,null),Mi(i,s,"formEncType",E.formEncType,E,null),Mi(i,s,"formMethod",E.formMethod,E,null),Mi(i,s,"formTarget",E.formTarget,E,null)):(Mi(i,s,"encType",E.encType,E,null),Mi(i,s,"method",E.method,E,null),Mi(i,s,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){i.removeAttribute(d);break}v=ni(""+v),i.setAttribute(d,v);break;case"onClick":v!=null&&(i.onclick=$r);break;case"onScroll":v!=null&&xi("scroll",i);break;case"onScrollEnd":v!=null&&xi("scrollend",i);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(g(61));if(d=v.__html,d!=null){if(E.children!=null)throw Error(g(60));i.innerHTML=d}}break;case"multiple":i.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":i.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){i.removeAttribute("xlink:href");break}d=ni(""+v),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,""+v):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":v===!0?i.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,v):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?i.setAttribute(d,v):i.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?i.removeAttribute(d):i.setAttribute(d,v);break;case"popover":xi("beforetoggle",i),xi("toggle",i),er(i,"popover",v);break;case"xlinkActuate":Ja(i,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Ja(i,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Ja(i,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Ja(i,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Ja(i,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Ja(i,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Ja(i,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":er(i,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=_s.get(d)||d,er(i,d,v))}}function nu(i,s,d,v,E,I){switch(d){case"style":$s(i,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(g(61));if(d=v.__html,d!=null){if(E.children!=null)throw Error(g(60));i.innerHTML=d}}break;case"children":typeof v=="string"?ts(i,v):(typeof v=="number"||typeof v=="bigint")&&ts(i,""+v);break;case"onScroll":v!=null&&xi("scroll",i);break;case"onScrollEnd":v!=null&&xi("scrollend",i);break;case"onClick":v!=null&&(i.onclick=$r);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cc.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(E=d.endsWith("Capture"),s=d.slice(2,E?d.length-7:void 0),I=i[qt]||null,I=I!=null?I[d]:null,typeof I=="function"&&i.removeEventListener(s,I,E),typeof v=="function")){typeof I!="function"&&I!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(s,v,E);break e}d in i?i[d]=v:v===!0?i.setAttribute(d,""):er(i,d,v)}}}function zn(i,s,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xi("error",i),xi("load",i);var v=!1,E=!1,I;for(I in d)if(d.hasOwnProperty(I)){var Z=d[I];if(Z!=null)switch(I){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(g(137,s));default:Mi(i,s,I,Z,d,null)}}E&&Mi(i,s,"srcSet",d.srcSet,d,null),v&&Mi(i,s,"src",d.src,d,null);return;case"input":xi("invalid",i);var ee=I=Z=E=null,_e=null,Ge=null;for(v in d)if(d.hasOwnProperty(v)){var Je=d[v];if(Je!=null)switch(v){case"name":E=Je;break;case"type":Z=Je;break;case"checked":_e=Je;break;case"defaultChecked":Ge=Je;break;case"value":I=Je;break;case"defaultValue":ee=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(g(137,s));break;default:Mi(i,s,v,Je,d,null)}}zo(i,I,ee,_e,Ge,Z,E,!1),yu(i);return;case"select":xi("invalid",i),v=Z=I=null;for(E in d)if(d.hasOwnProperty(E)&&(ee=d[E],ee!=null))switch(E){case"value":I=ee;break;case"defaultValue":Z=ee;break;case"multiple":v=ee;default:Mi(i,s,E,ee,d,null)}s=I,d=Z,i.multiple=!!v,s!=null?qs(i,!!v,s,!1):d!=null&&qs(i,!!v,d,!0);return;case"textarea":xi("invalid",i),I=E=v=null;for(Z in d)if(d.hasOwnProperty(Z)&&(ee=d[Z],ee!=null))switch(Z){case"value":v=ee;break;case"defaultValue":E=ee;break;case"children":I=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(g(91));break;default:Mi(i,s,Z,ee,d,null)}Io(i,v,E,I),yu(i);return;case"option":for(_e in d)if(d.hasOwnProperty(_e)&&(v=d[_e],v!=null))switch(_e){case"selected":i.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Mi(i,s,_e,v,d,null)}return;case"dialog":xi("beforetoggle",i),xi("toggle",i),xi("cancel",i),xi("close",i);break;case"iframe":case"object":xi("load",i);break;case"video":case"audio":for(v=0;v<Kh.length;v++)xi(Kh[v],i);break;case"image":xi("error",i),xi("load",i);break;case"details":xi("toggle",i);break;case"embed":case"source":case"link":xi("error",i),xi("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ge in d)if(d.hasOwnProperty(Ge)&&(v=d[Ge],v!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":throw Error(g(137,s));default:Mi(i,s,Ge,v,d,null)}return;default:if(is(s)){for(Je in d)d.hasOwnProperty(Je)&&(v=d[Je],v!==void 0&&nu(i,s,Je,v,d,void 0));return}}for(ee in d)d.hasOwnProperty(ee)&&(v=d[ee],v!=null&&Mi(i,s,ee,v,d,null))}function Am(i,s,d,v){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,I=null,Z=null,ee=null,_e=null,Ge=null,Je=null;for(He in d){var at=d[He];if(d.hasOwnProperty(He)&&at!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":_e=at;default:v.hasOwnProperty(He)||Mi(i,s,He,null,v,at)}}for(var qe in v){var He=v[qe];if(at=d[qe],v.hasOwnProperty(qe)&&(He!=null||at!=null))switch(qe){case"type":I=He;break;case"name":E=He;break;case"checked":Ge=He;break;case"defaultChecked":Je=He;break;case"value":Z=He;break;case"defaultValue":ee=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(g(137,s));break;default:He!==at&&Mi(i,s,qe,He,v,at)}}hc(i,Z,ee,_e,Ge,Je,I,E);return;case"select":He=Z=ee=qe=null;for(I in d)if(_e=d[I],d.hasOwnProperty(I)&&_e!=null)switch(I){case"value":break;case"multiple":He=_e;default:v.hasOwnProperty(I)||Mi(i,s,I,null,v,_e)}for(E in v)if(I=v[E],_e=d[E],v.hasOwnProperty(E)&&(I!=null||_e!=null))switch(E){case"value":qe=I;break;case"defaultValue":ee=I;break;case"multiple":Z=I;default:I!==_e&&Mi(i,s,E,I,v,_e)}s=ee,d=Z,v=He,qe!=null?qs(i,!!d,qe,!1):!!v!=!!d&&(s!=null?qs(i,!!d,s,!0):qs(i,!!d,d?[]:"",!1));return;case"textarea":He=qe=null;for(ee in d)if(E=d[ee],d.hasOwnProperty(ee)&&E!=null&&!v.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:Mi(i,s,ee,null,v,E)}for(Z in v)if(E=v[Z],I=d[Z],v.hasOwnProperty(Z)&&(E!=null||I!=null))switch(Z){case"value":qe=E;break;case"defaultValue":He=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(g(91));break;default:E!==I&&Mi(i,s,Z,E,v,I)}yd(i,qe,He);return;case"option":for(var Kt in d)if(qe=d[Kt],d.hasOwnProperty(Kt)&&qe!=null&&!v.hasOwnProperty(Kt))switch(Kt){case"selected":i.selected=!1;break;default:Mi(i,s,Kt,null,v,qe)}for(_e in v)if(qe=v[_e],He=d[_e],v.hasOwnProperty(_e)&&qe!==He&&(qe!=null||He!=null))switch(_e){case"selected":i.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Mi(i,s,_e,qe,v,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in d)qe=d[Xt],d.hasOwnProperty(Xt)&&qe!=null&&!v.hasOwnProperty(Xt)&&Mi(i,s,Xt,null,v,qe);for(Ge in v)if(qe=v[Ge],He=d[Ge],v.hasOwnProperty(Ge)&&qe!==He&&(qe!=null||He!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(g(137,s));break;default:Mi(i,s,Ge,qe,v,He)}return;default:if(is(s)){for(var Hi in d)qe=d[Hi],d.hasOwnProperty(Hi)&&qe!==void 0&&!v.hasOwnProperty(Hi)&&nu(i,s,Hi,void 0,v,qe);for(Je in v)qe=v[Je],He=d[Je],!v.hasOwnProperty(Je)||qe===He||qe===void 0&&He===void 0||nu(i,s,Je,qe,v,He);return}}for(var ke in d)qe=d[ke],d.hasOwnProperty(ke)&&qe!=null&&!v.hasOwnProperty(ke)&&Mi(i,s,ke,null,v,qe);for(at in v)qe=v[at],He=d[at],!v.hasOwnProperty(at)||qe===He||qe==null&&He==null||Mi(i,s,at,qe,v,He)}var af=null,sf=null;function td(i){return i.nodeType===9?i:i.ownerDocument}function Pm(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hp(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function bo(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var of=null;function zm(){var i=window.event;return i&&i.type==="popstate"?i===of?!1:(of=i,!0):(of=null,!1)}var dp=typeof setTimeout=="function"?setTimeout:void 0,Im=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,Eg=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(i){return Dm.resolve(null).then(i).catch(Rm)}:dp;function Rm(i){setTimeout(function(){throw i})}function cl(i){return i==="head"}function id(i,s){var d=s,v=0,E=0;do{var I=d.nextSibling;if(i.removeChild(d),I&&I.nodeType===8)if(d=I.data,d==="/$"){if(0<v&&8>v){d=v;var Z=i.ownerDocument;if(d&1&&au(Z.documentElement),d&2&&au(Z.body),d&4)for(d=Z.head,au(d),Z=d.firstChild;Z;){var ee=Z.nextSibling,_e=Z.nodeName;Z[Ka]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||d.removeChild(Z),Z=ee}}if(E===0){i.removeChild(I),Sn(s);return}E--}else d==="$"||d==="$?"||d==="$!"?E++:v=d.charCodeAt(0)-48;else v=0;d=I}while(d);Sn(s)}function lf(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var d=s;switch(s=s.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":lf(d),bt(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function cf(i,s,d,v){for(;i.nodeType===1;){var E=d;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!v&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(v){if(!i[Ka])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(I=i.getAttribute("rel"),I==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(I!==E.rel||i.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||i.getAttribute("title")!==(E.title==null?null:E.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(I=i.getAttribute("src"),(I!==(E.src==null?null:E.src)||i.getAttribute("type")!==(E.type==null?null:E.type)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&I&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var I=E.name==null?null:""+E.name;if(E.type==="hidden"&&i.getAttribute("name")===I)return i}else return i;if(i=Ns(i.nextSibling),i===null)break}return null}function uf(i,s,d){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Ns(i.nextSibling),i===null))return null;return i}function Ju(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function Cg(i,s){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")s();else{var v=function(){s(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),i._reactRetry=v}}function Ns(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var fp=null;function ru(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return i;s--}else d==="/$"&&s++}i=i.previousSibling}return null}function lr(i,s,d){switch(s=td(d),i){case"html":if(i=s.documentElement,!i)throw Error(g(452));return i;case"head":if(i=s.head,!i)throw Error(g(453));return i;case"body":if(i=s.body,!i)throw Error(g(454));return i;default:throw Error(g(451))}}function au(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);bt(i)}var $a=new Map,pp=new Set;function eh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ul=it.d;it.d={f:km,r:Lm,D:gp,C:yp,L:Om,m:nd,X:Bm,S:_p,M:vp};function km(){var i=ul.f(),s=Yd();return i||s}function Lm(i){var s=Ht(i);s!==null&&s.tag===5&&s.type==="form"?Ai(s):ul.r(i)}var th=typeof document>"u"?null:document;function mp(i,s,d){var v=th;if(v&&typeof s=="string"&&s){var E=Gr(s);E='link[rel="'+i+'"][href="'+E+'"]',typeof d=="string"&&(E+='[crossorigin="'+d+'"]'),pp.has(E)||(pp.add(E),i={rel:i,crossOrigin:d,href:s},v.querySelector(E)===null&&(s=v.createElement("link"),zn(s,"link",i),Yi(s),v.head.appendChild(s)))}}function gp(i){ul.D(i),mp("dns-prefetch",i,null)}function yp(i,s){ul.C(i,s),mp("preconnect",i,s)}function Om(i,s,d){ul.L(i,s,d);var v=th;if(v&&i&&s){var E='link[rel="preload"][as="'+Gr(s)+'"]';s==="image"&&d&&d.imageSrcSet?(E+='[imagesrcset="'+Gr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(E+='[imagesizes="'+Gr(d.imageSizes)+'"]')):E+='[href="'+Gr(i)+'"]';var I=E;switch(s){case"style":I=wo(i);break;case"script":I=ih(i)}$a.has(I)||(i=j({rel:"preload",href:s==="image"&&d&&d.imageSrcSet?void 0:i,as:s},d),$a.set(I,i),v.querySelector(E)!==null||s==="style"&&v.querySelector(su(I))||s==="script"&&v.querySelector(r(I))||(s=v.createElement("link"),zn(s,"link",i),Yi(s),v.head.appendChild(s)))}}function nd(i,s){ul.m(i,s);var d=th;if(d&&i){var v=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+Gr(v)+'"][href="'+Gr(i)+'"]',I=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=ih(i)}if(!$a.has(I)&&(i=j({rel:"modulepreload",href:i},s),$a.set(I,i),d.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(r(I)))return}v=d.createElement("link"),zn(v,"link",i),Yi(v),d.head.appendChild(v)}}}function _p(i,s,d){ul.S(i,s,d);var v=th;if(v&&i){var E=la(v).hoistableStyles,I=wo(i);s=s||"default";var Z=E.get(I);if(!Z){var ee={loading:0,preload:null};if(Z=v.querySelector(su(I)))ee.loading=5;else{i=j({rel:"stylesheet",href:i,"data-precedence":s},d),(d=$a.get(I))&&u(i,d);var _e=Z=v.createElement("link");Yi(_e),zn(_e,"link",i),_e._p=new Promise(function(Ge,Je){_e.onload=Ge,_e.onerror=Je}),_e.addEventListener("load",function(){ee.loading|=1}),_e.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,n(Z,s,v)}Z={type:"stylesheet",instance:Z,count:1,state:ee},E.set(I,Z)}}}function Bm(i,s){ul.X(i,s);var d=th;if(d&&i){var v=la(d).hoistableScripts,E=ih(i),I=v.get(E);I||(I=d.querySelector(r(E)),I||(i=j({src:i,async:!0},s),(s=$a.get(E))&&f(i,s),I=d.createElement("script"),Yi(I),zn(I,"link",i),d.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(E,I))}}function vp(i,s){ul.M(i,s);var d=th;if(d&&i){var v=la(d).hoistableScripts,E=ih(i),I=v.get(E);I||(I=d.querySelector(r(E)),I||(i=j({src:i,async:!0,type:"module"},s),(s=$a.get(E))&&f(i,s),I=d.createElement("script"),Yi(I),zn(I,"link",i),d.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(E,I))}}function rd(i,s,d,v){var E=(E=Nt.current)?eh(E):null;if(!E)throw Error(g(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(s=wo(d.href),d=la(E).hoistableStyles,v=d.get(s),v||(v={type:"style",instance:null,count:0,state:null},d.set(s,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=wo(d.href);var I=la(E).hoistableStyles,Z=I.get(i);if(Z||(E=E.ownerDocument||E,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(i,Z),(I=E.querySelector(su(i)))&&!I._p&&(Z.instance=I,Z.state.loading=5),$a.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},$a.set(i,d),I||xp(E,i,d,Z.state))),s&&v===null)throw Error(g(528,""));return Z}if(s&&v!==null)throw Error(g(529,""));return null;case"script":return s=d.async,d=d.src,typeof d=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ih(d),d=la(E).hoistableScripts,v=d.get(s),v||(v={type:"script",instance:null,count:0,state:null},d.set(s,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(g(444,i))}}function wo(i){return'href="'+Gr(i)+'"'}function su(i){return'link[rel="stylesheet"]['+i+"]"}function hf(i){return j({},i,{"data-precedence":i.precedence,precedence:null})}function xp(i,s,d,v){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?v.loading=1:(s=i.createElement("link"),v.preload=s,s.addEventListener("load",function(){return v.loading|=1}),s.addEventListener("error",function(){return v.loading|=2}),zn(s,"link",d),Yi(s),i.head.appendChild(s))}function ih(i){return'[src="'+Gr(i)+'"]'}function r(i){return"script[async]"+i}function t(i,s,d){if(s.count++,s.instance===null)switch(s.type){case"style":var v=i.querySelector('style[data-href~="'+Gr(d.href)+'"]');if(v)return s.instance=v,Yi(v),v;var E=j({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(i.ownerDocument||i).createElement("style"),Yi(v),zn(v,"style",E),n(v,d.precedence,i),s.instance=v;case"stylesheet":E=wo(d.href);var I=i.querySelector(su(E));if(I)return s.state.loading|=4,s.instance=I,Yi(I),I;v=hf(d),(E=$a.get(E))&&u(v,E),I=(i.ownerDocument||i).createElement("link"),Yi(I);var Z=I;return Z._p=new Promise(function(ee,_e){Z.onload=ee,Z.onerror=_e}),zn(I,"link",v),s.state.loading|=4,n(I,d.precedence,i),s.instance=I;case"script":return I=ih(d.src),(E=i.querySelector(r(I)))?(s.instance=E,Yi(E),E):(v=d,(E=$a.get(I))&&(v=j({},d),f(v,E)),i=i.ownerDocument||i,E=i.createElement("script"),Yi(E),zn(E,"link",v),i.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(g(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(v=s.instance,s.state.loading|=4,n(v,d.precedence,i));return s.instance}function n(i,s,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,I=E,Z=0;Z<v.length;Z++){var ee=v[Z];if(ee.dataset.precedence===s)I=ee;else if(I!==E)break}I?I.parentNode.insertBefore(i,I.nextSibling):(s=d.nodeType===9?d.head:d,s.insertBefore(i,s.firstChild))}function u(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function f(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var x=null;function b(i,s,d){if(x===null){var v=new Map,E=x=new Map;E.set(d,v)}else E=x,v=E.get(d),v||(v=new Map,E.set(d,v));if(v.has(i))return v;for(v.set(i,null),d=d.getElementsByTagName(i),E=0;E<d.length;E++){var I=d[E];if(!(I[Ka]||I[Vt]||i==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=I.getAttribute(s)||"";Z=i+Z;var ee=v.get(Z);ee?ee.push(I):v.set(Z,[I])}}return v}function M(i,s,d){i=i.ownerDocument||i,i.head.insertBefore(d,s==="title"?i.querySelector("head > title"):null)}function A(i,s,d){if(d===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function D(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var O=null;function N(){}function U(i,s,d){if(O===null)throw Error(g(475));var v=O;if(s.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var E=wo(d.href),I=i.querySelector(su(E));if(I){i=I._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(v.count++,v=H.bind(v),i.then(v,v)),s.state.loading|=4,s.instance=I,Yi(I);return}I=i.ownerDocument||i,d=hf(d),(E=$a.get(E))&&u(d,E),I=I.createElement("link"),Yi(I);var Z=I;Z._p=new Promise(function(ee,_e){Z.onload=ee,Z.onerror=_e}),zn(I,"link",d),s.instance=I}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(v.count++,s=H.bind(v),i.addEventListener("load",s),i.addEventListener("error",s))}}function q(){if(O===null)throw Error(g(475));var i=O;return i.stylesheets&&i.count===0&&ie(i,i.stylesheets),0<i.count?function(s){var d=setTimeout(function(){if(i.stylesheets&&ie(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(d)}}:null}function H(){if(this.count--,this.count===0){if(this.stylesheets)ie(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Q=null;function ie(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Q=new Map,s.forEach(oe,i),Q=null,H.call(i))}function oe(i,s){if(!(s.state.loading&4)){var d=Q.get(i);if(d)var v=d.get(null);else{d=new Map,Q.set(i,d);for(var E=i.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<E.length;I++){var Z=E[I];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(d.set(Z.dataset.precedence,Z),v=Z)}v&&d.set(null,v)}E=s.instance,Z=E.getAttribute("data-precedence"),I=d.get(Z)||v,I===v&&d.set(null,E),d.set(Z,E),this.count++,v=H.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),I?I.parentNode.insertBefore(E,I.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(E,i.firstChild)),s.state.loading|=4}}var Me={$$typeof:Ce,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function pe(i,s,d,v,E,I,Z,ee){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=I,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function ve(i,s,d,v,E,I,Z,ee,_e,Ge,Je,at){return i=new pe(i,s,d,Z,ee,_e,Ge,at),s=1,I===!0&&(s|=24),I=Qr(3,null,null,s),i.current=I,I.stateNode=i,s=ao(),s.refCount++,i.pooledCache=s,s.refCount++,I.memoizedState={element:v,isDehydrated:d,cache:s},Ph(I),i}function Be(i){return i?(i=ii,i):ii}function $e(i,s,d,v,E,I){E=Be(E),v.context===null?v.context=E:v.pendingContext=E,v=so(s),v.payload={element:d},I=I===void 0?null:I,I!==null&&(v.callback=I),d=As(i,v,s),d!==null&&(Za(d,i,s),Wo(d,i,s))}function nt(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<s?d:s}}function vt(i,s){nt(i,s),(i=i.alternate)&&nt(i,s)}function pt(i){if(i.tag===13){var s=Kr(i,67108864);s!==null&&Za(s,i,67108864),vt(i,67108864)}}var yt=!0;function It(i,s,d,v){var E=je.T;je.T=null;var I=it.p;try{it.p=2,_t(i,s,d,v)}finally{it.p=I,je.T=E}}function xt(i,s,d,v){var E=je.T;je.T=null;var I=it.p;try{it.p=8,_t(i,s,d,v)}finally{it.p=I,je.T=E}}function _t(i,s,d,v){if(yt){var E=We(v);if(E===null)nf(i,s,v,jt,d),Ji(i,v);else if(ur(E,i,s,d,v))v.stopPropagation();else if(Ji(i,v),s&4&&-1<cr.indexOf(i)){for(;E!==null;){var I=Ht(E);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var Z=Se(I.pendingLanes);if(Z!==0){var ee=I;for(ee.pendingLanes|=2,ee.entangledLanes|=2;Z;){var _e=1<<31-Te(Z);ee.entanglements[1]|=_e,Z&=~_e}qa(I),(Ni&6)===0&&($d=pr()+500,tu(0))}}break;case 13:ee=Kr(I,2),ee!==null&&Za(ee,I,2),Yd(),vt(I,2)}if(I=We(v),I===null&&nf(i,s,v,jt,d),I===E)break;E=I}E!==null&&v.stopPropagation()}else nf(i,s,v,null,d)}}function We(i){return i=yl(i),Ut(i)}var jt=null;function Ut(i){if(jt=null,i=Qt(i),i!==null){var s=C(i);if(s===null)i=null;else{var d=s.tag;if(d===13){if(i=w(s),i!==null)return i;i=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return jt=i,null}function Lt(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wa()){case Pa:return 2;case Eo:return 8;case za:case Gs:return 32;case ms:return 268435456;default:return 32}default:return 32}}var At=!1,ti=null,Pi=null,$i=null,On=new Map,Vr=new Map,Bn=[],cr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ji(i,s){switch(i){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":On.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(s.pointerId)}}function wn(i,s,d,v,E,I){return i===null||i.nativeEvent!==I?(i={blockedOn:s,domEventName:d,eventSystemFlags:v,nativeEvent:I,targetContainers:[E]},s!==null&&(s=Ht(s),s!==null&&pt(s)),i):(i.eventSystemFlags|=v,s=i.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),i)}function ur(i,s,d,v,E){switch(s){case"focusin":return ti=wn(ti,i,s,d,v,E),!0;case"dragenter":return Pi=wn(Pi,i,s,d,v,E),!0;case"mouseover":return $i=wn($i,i,s,d,v,E),!0;case"pointerover":var I=E.pointerId;return On.set(I,wn(On.get(I)||null,i,s,d,v,E)),!0;case"gotpointercapture":return I=E.pointerId,Vr.set(I,wn(Vr.get(I)||null,i,s,d,v,E)),!0}return!1}function Kn(i){var s=Qt(i.target);if(s!==null){var d=C(s);if(d!==null){if(s=d.tag,s===13){if(s=w(d),s!==null){i.blockedOn=s,Nn(i.priority,function(){if(d.tag===13){var v=wa();v=Yt(v);var E=Kr(d,v);E!==null&&Za(E,d,v),vt(d,v)}});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var d=We(i.nativeEvent);if(d===null){d=i.nativeEvent;var v=new d.constructor(d.type,d);vs=v,d.target.dispatchEvent(v),vs=null}else return s=Ht(d),s!==null&&pt(s),i.blockedOn=d,!1;s.shift()}return!0}function Sa(i,s,d){hr(i)&&d.delete(s)}function Qn(){At=!1,ti!==null&&hr(ti)&&(ti=null),Pi!==null&&hr(Pi)&&(Pi=null),$i!==null&&hr($i)&&($i=null),On.forEach(Sa),Vr.forEach(Sa)}function Ar(i,s){i.blockedOn===s&&(i.blockedOn=null,At||(At=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Qn)))}var Tn=null;function Zn(i){Tn!==i&&(Tn=i,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Tn===i&&(Tn=null);for(var s=0;s<i.length;s+=3){var d=i[s],v=i[s+1],E=i[s+2];if(typeof v!="function"){if(Ut(v||d)===null)continue;break}var I=Ht(d);I!==null&&(i.splice(s,3),s-=3,Ki(I,{pending:!0,data:E,method:d.method,action:v},v,E))}}))}function Sn(i){function s(_e){return Ar(_e,i)}ti!==null&&Ar(ti,i),Pi!==null&&Ar(Pi,i),$i!==null&&Ar($i,i),On.forEach(s),Vr.forEach(s);for(var d=0;d<Bn.length;d++){var v=Bn[d];v.blockedOn===i&&(v.blockedOn=null)}for(;0<Bn.length&&(d=Bn[0],d.blockedOn===null);)Kn(d),d.blockedOn===null&&Bn.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var E=d[v],I=d[v+1],Z=E[qt]||null;if(typeof I=="function")Z||Zn(d);else if(Z){var ee=null;if(I&&I.hasAttribute("formAction")){if(E=I,Z=I[qt]||null)ee=Z.formAction;else if(Ut(E)!==null)continue}else ee=Z.action;typeof ee=="function"?d[v+1]=ee:(d.splice(v,3),v-=3),Zn(d)}}}function Mn(i){this._internalRoot=i}ki.prototype.render=Mn.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(g(409));var d=s.current,v=wa();$e(d,v,i,s,null,null)},ki.prototype.unmount=Mn.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;$e(i.current,2,null,i,null,null),Yd(),s[Xi]=null}};function ki(i){this._internalRoot=i}ki.prototype.unstable_scheduleHydration=function(i){if(i){var s=Dn();i={blockedOn:null,target:i,priority:s};for(var d=0;d<Bn.length&&s!==0&&s<Bn[d].priority;d++);Bn.splice(d,0,i),d===0&&Kn(i)}};var ds=l.version;if(ds!=="19.1.1")throw Error(g(527,ds,"19.1.1"));it.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(g(188)):(i=Object.keys(i).join(","),Error(g(268,i)));return i=R(s),i=i!==null?k(i):null,i=i===null?null:i.stateNode,i};var nh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:je,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{oa=Ma.inject(nh),In=Ma}catch{}}return wp.createRoot=function(i,s){if(!S(i))throw Error(g(299));var d=!1,v="",E=$p,I=kd,Z=Hp,ee=null;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(I=s.onCaughtError),s.onRecoverableError!==void 0&&(Z=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(ee=s.unstable_transitionCallbacks)),s=ve(i,1,!1,null,null,d,v,E,I,Z,ee,null),i[Xi]=s.current,tf(i),new Mn(s)},wp.hydrateRoot=function(i,s,d){if(!S(i))throw Error(g(299));var v=!1,E="",I=$p,Z=kd,ee=Hp,_e=null,Ge=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(I=d.onUncaughtError),d.onCaughtError!==void 0&&(Z=d.onCaughtError),d.onRecoverableError!==void 0&&(ee=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(_e=d.unstable_transitionCallbacks),d.formState!==void 0&&(Ge=d.formState)),s=ve(i,1,!0,s,d??null,v,E,I,Z,ee,_e,Ge),s.context=Be(null),d=s.current,v=wa(),v=Yt(v),E=so(v),E.callback=null,As(d,E,v),d=v,s.current.lanes=d,ze(s,d),qa(s),i[Xi]=s.current,tf(i),new ki(s)},wp.version="19.1.1",wp}var D_;function Fb(){if(D_)return Ig.exports;D_=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(l){console.error(l)}}return o(),Ig.exports=Nb(),Ig.exports}var Vb=Fb();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R_="popstate";function Ub(o={}){function l(S,C){let{pathname:w="/",search:c="",hash:R=""}=pd(S.location.hash.substring(1));return!w.startsWith("/")&&!w.startsWith(".")&&(w="/"+w),sy("",{pathname:w,search:c,hash:R},C.state&&C.state.usr||null,C.state&&C.state.key||"default")}function m(S,C){let w=S.document.querySelector("base"),c="";if(w&&w.getAttribute("href")){let R=S.location.href,k=R.indexOf("#");c=k===-1?R:R.slice(0,k)}return c+"#"+(typeof C=="string"?C:Dp(C))}function g(S,C){fl(S.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(C)})`)}return Zb(l,m,g,o)}function $n(o,l){if(o===!1||o===null||typeof o>"u")throw new Error(l)}function fl(o,l){if(!o){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Gb(){return Math.random().toString(36).substring(2,10)}function k_(o,l){return{usr:o.state,key:o.key,idx:l}}function sy(o,l,m=null,g){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof l=="string"?pd(l):l,state:m,key:l&&l.key||g||Gb()}}function Dp({pathname:o="/",search:l="",hash:m=""}){return l&&l!=="?"&&(o+=l.charAt(0)==="?"?l:"?"+l),m&&m!=="#"&&(o+=m.charAt(0)==="#"?m:"#"+m),o}function pd(o){let l={};if(o){let m=o.indexOf("#");m>=0&&(l.hash=o.substring(m),o=o.substring(0,m));let g=o.indexOf("?");g>=0&&(l.search=o.substring(g),o=o.substring(0,g)),o&&(l.pathname=o)}return l}function Zb(o,l,m,g={}){let{window:S=document.defaultView,v5Compat:C=!1}=g,w=S.history,c="POP",R=null,k=j();k==null&&(k=0,w.replaceState({...w.state,idx:k},""));function j(){return(w.state||{idx:null}).idx}function $(){c="POP";let Re=j(),ce=Re==null?null:Re-k;k=Re,R&&R({action:c,location:xe.location,delta:ce})}function Y(Re,ce){c="PUSH";let De=sy(xe.location,Re,ce);m&&m(De,Re),k=j()+1;let Ce=k_(De,k),Ye=xe.createHref(De);try{w.pushState(Ce,"",Ye)}catch(Fe){if(Fe instanceof DOMException&&Fe.name==="DataCloneError")throw Fe;S.location.assign(Ye)}C&&R&&R({action:c,location:xe.location,delta:1})}function X(Re,ce){c="REPLACE";let De=sy(xe.location,Re,ce);m&&m(De,Re),k=j();let Ce=k_(De,k),Ye=xe.createHref(De);w.replaceState(Ce,"",Ye),C&&R&&R({action:c,location:xe.location,delta:0})}function se(Re){return qb(Re)}let xe={get action(){return c},get location(){return o(S,w)},listen(Re){if(R)throw new Error("A history only accepts one active listener");return S.addEventListener(R_,$),R=Re,()=>{S.removeEventListener(R_,$),R=null}},createHref(Re){return l(S,Re)},createURL:se,encodeLocation(Re){let ce=se(Re);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:Y,replace:X,go(Re){return w.go(Re)}};return xe}function qb(o,l=!1){let m="http://localhost";typeof window<"u"&&(m=window.location.origin!=="null"?window.location.origin:window.location.href),$n(m,"No window.location.(origin|href) available to create URL");let g=typeof o=="string"?o:Dp(o);return g=g.replace(/ $/,"%20"),!l&&g.startsWith("//")&&(g=m+g),new URL(g,m)}function hx(o,l,m="/"){return $b(o,l,m,!1)}function $b(o,l,m,g){let S=typeof l=="string"?pd(l):l,C=du(S.pathname||"/",m);if(C==null)return null;let w=dx(o);Hb(w);let c=null;for(let R=0;c==null&&R<w.length;++R){let k=r1(C);c=i1(w[R],k,g)}return c}function dx(o,l=[],m=[],g=""){let S=(C,w,c)=>{let R={relativePath:c===void 0?C.path||"":c,caseSensitive:C.caseSensitive===!0,childrenIndex:w,route:C};R.relativePath.startsWith("/")&&($n(R.relativePath.startsWith(g),`Absolute route path "${R.relativePath}" nested under path "${g}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(g.length));let k=uu([g,R.relativePath]),j=m.concat(R);C.children&&C.children.length>0&&($n(C.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),dx(C.children,l,j,k)),!(C.path==null&&!C.index)&&l.push({path:k,score:e1(k,C.index),routesMeta:j})};return o.forEach((C,w)=>{if(C.path===""||!C.path?.includes("?"))S(C,w);else for(let c of fx(C.path))S(C,w,c)}),l}function fx(o){let l=o.split("/");if(l.length===0)return[];let[m,...g]=l,S=m.endsWith("?"),C=m.replace(/\?$/,"");if(g.length===0)return S?[C,""]:[C];let w=fx(g.join("/")),c=[];return c.push(...w.map(R=>R===""?C:[C,R].join("/"))),S&&c.push(...w),c.map(R=>o.startsWith("/")&&R===""?"/":R)}function Hb(o){o.sort((l,m)=>l.score!==m.score?m.score-l.score:t1(l.routesMeta.map(g=>g.childrenIndex),m.routesMeta.map(g=>g.childrenIndex)))}var Xb=/^:[\w-]+$/,Yb=3,Wb=2,Kb=1,Qb=10,Jb=-2,L_=o=>o==="*";function e1(o,l){let m=o.split("/"),g=m.length;return m.some(L_)&&(g+=Jb),l&&(g+=Wb),m.filter(S=>!L_(S)).reduce((S,C)=>S+(Xb.test(C)?Yb:C===""?Kb:Qb),g)}function t1(o,l){return o.length===l.length&&o.slice(0,-1).every((g,S)=>g===l[S])?o[o.length-1]-l[l.length-1]:0}function i1(o,l,m=!1){let{routesMeta:g}=o,S={},C="/",w=[];for(let c=0;c<g.length;++c){let R=g[c],k=c===g.length-1,j=C==="/"?l:l.slice(C.length)||"/",$=eg({path:R.relativePath,caseSensitive:R.caseSensitive,end:k},j),Y=R.route;if(!$&&k&&m&&!g[g.length-1].route.index&&($=eg({path:R.relativePath,caseSensitive:R.caseSensitive,end:!1},j)),!$)return null;Object.assign(S,$.params),w.push({params:S,pathname:uu([C,$.pathname]),pathnameBase:l1(uu([C,$.pathnameBase])),route:Y}),$.pathnameBase!=="/"&&(C=uu([C,$.pathnameBase]))}return w}function eg(o,l){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[m,g]=n1(o.path,o.caseSensitive,o.end),S=l.match(m);if(!S)return null;let C=S[0],w=C.replace(/(.)\/+$/,"$1"),c=S.slice(1);return{params:g.reduce((k,{paramName:j,isOptional:$},Y)=>{if(j==="*"){let se=c[Y]||"";w=C.slice(0,C.length-se.length).replace(/(.)\/+$/,"$1")}const X=c[Y];return $&&!X?k[j]=void 0:k[j]=(X||"").replace(/%2F/g,"/"),k},{}),pathname:C,pathnameBase:w,pattern:o}}function n1(o,l=!1,m=!0){fl(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let g=[],S="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,c,R)=>(g.push({paramName:c,isOptional:R!=null}),R?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(g.push({paramName:"*"}),S+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):m?S+="\\/*$":o!==""&&o!=="/"&&(S+="(?:(?=\\/|$))"),[new RegExp(S,l?void 0:"i"),g]}function r1(o){try{return o.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return fl(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),o}}function du(o,l){if(l==="/")return o;if(!o.toLowerCase().startsWith(l.toLowerCase()))return null;let m=l.endsWith("/")?l.length-1:l.length,g=o.charAt(m);return g&&g!=="/"?null:o.slice(m)||"/"}function a1(o,l="/"){let{pathname:m,search:g="",hash:S=""}=typeof o=="string"?pd(o):o;return{pathname:m?m.startsWith("/")?m:s1(m,l):l,search:c1(g),hash:u1(S)}}function s1(o,l){let m=l.replace(/\/+$/,"").split("/");return o.split("/").forEach(S=>{S===".."?m.length>1&&m.pop():S!=="."&&m.push(S)}),m.length>1?m.join("/"):"/"}function Lg(o,l,m,g){return`Cannot include a '${o}' character in a manually specified \`to.${l}\` field [${JSON.stringify(g)}].  Please separate it out to the \`to.${m}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function o1(o){return o.filter((l,m)=>m===0||l.route.path&&l.route.path.length>0)}function px(o){let l=o1(o);return l.map((m,g)=>g===l.length-1?m.pathname:m.pathnameBase)}function mx(o,l,m,g=!1){let S;typeof o=="string"?S=pd(o):(S={...o},$n(!S.pathname||!S.pathname.includes("?"),Lg("?","pathname","search",S)),$n(!S.pathname||!S.pathname.includes("#"),Lg("#","pathname","hash",S)),$n(!S.search||!S.search.includes("#"),Lg("#","search","hash",S)));let C=o===""||S.pathname==="",w=C?"/":S.pathname,c;if(w==null)c=m;else{let $=l.length-1;if(!g&&w.startsWith("..")){let Y=w.split("/");for(;Y[0]==="..";)Y.shift(),$-=1;S.pathname=Y.join("/")}c=$>=0?l[$]:"/"}let R=a1(S,c),k=w&&w!=="/"&&w.endsWith("/"),j=(C||w===".")&&m.endsWith("/");return!R.pathname.endsWith("/")&&(k||j)&&(R.pathname+="/"),R}var uu=o=>o.join("/").replace(/\/\/+/g,"/"),l1=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),c1=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,u1=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function h1(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var gx=["POST","PUT","PATCH","DELETE"];new Set(gx);var d1=["GET",...gx];new Set(d1);var wf=Ae.createContext(null);wf.displayName="DataRouter";var dg=Ae.createContext(null);dg.displayName="DataRouterState";Ae.createContext(!1);var yx=Ae.createContext({isTransitioning:!1});yx.displayName="ViewTransition";var f1=Ae.createContext(new Map);f1.displayName="Fetchers";var p1=Ae.createContext(null);p1.displayName="Await";var oc=Ae.createContext(null);oc.displayName="Navigation";var Np=Ae.createContext(null);Np.displayName="Location";var lc=Ae.createContext({outlet:null,matches:[],isDataRoute:!1});lc.displayName="Route";var Ly=Ae.createContext(null);Ly.displayName="RouteError";function m1(o,{relative:l}={}){$n(Fp(),"useHref() may be used only in the context of a <Router> component.");let{basename:m,navigator:g}=Ae.useContext(oc),{hash:S,pathname:C,search:w}=Vp(o,{relative:l}),c=C;return m!=="/"&&(c=C==="/"?m:uu([m,C])),g.createHref({pathname:c,search:w,hash:S})}function Fp(){return Ae.useContext(Np)!=null}function lh(){return $n(Fp(),"useLocation() may be used only in the context of a <Router> component."),Ae.useContext(Np).location}var _x="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vx(o){Ae.useContext(oc).static||Ae.useLayoutEffect(o)}function g1(){let{isDataRoute:o}=Ae.useContext(lc);return o?z1():y1()}function y1(){$n(Fp(),"useNavigate() may be used only in the context of a <Router> component.");let o=Ae.useContext(wf),{basename:l,navigator:m}=Ae.useContext(oc),{matches:g}=Ae.useContext(lc),{pathname:S}=lh(),C=JSON.stringify(px(g)),w=Ae.useRef(!1);return vx(()=>{w.current=!0}),Ae.useCallback((R,k={})=>{if(fl(w.current,_x),!w.current)return;if(typeof R=="number"){m.go(R);return}let j=mx(R,JSON.parse(C),S,k.relative==="path");o==null&&l!=="/"&&(j.pathname=j.pathname==="/"?l:uu([l,j.pathname])),(k.replace?m.replace:m.push)(j,k.state,k)},[l,m,C,S,o])}Ae.createContext(null);function _1(){let{matches:o}=Ae.useContext(lc),l=o[o.length-1];return l?l.params:{}}function Vp(o,{relative:l}={}){let{matches:m}=Ae.useContext(lc),{pathname:g}=lh(),S=JSON.stringify(px(m));return Ae.useMemo(()=>mx(o,JSON.parse(S),g,l==="path"),[o,S,g,l])}function v1(o,l){return xx(o,l)}function xx(o,l,m,g){$n(Fp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:S}=Ae.useContext(oc),{matches:C}=Ae.useContext(lc),w=C[C.length-1],c=w?w.params:{},R=w?w.pathname:"/",k=w?w.pathnameBase:"/",j=w&&w.route;{let ce=j&&j.path||"";bx(R,!j||ce.endsWith("*")||ce.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${ce}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ce}"> to <Route path="${ce==="/"?"*":`${ce}/*`}">.`)}let $=lh(),Y;if(l){let ce=typeof l=="string"?pd(l):l;$n(k==="/"||ce.pathname?.startsWith(k),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${k}" but pathname "${ce.pathname}" was given in the \`location\` prop.`),Y=ce}else Y=$;let X=Y.pathname||"/",se=X;if(k!=="/"){let ce=k.replace(/^\//,"").split("/");se="/"+X.replace(/^\//,"").split("/").slice(ce.length).join("/")}let xe=hx(o,{pathname:se});fl(j||xe!=null,`No routes matched location "${Y.pathname}${Y.search}${Y.hash}" `),fl(xe==null||xe[xe.length-1].route.element!==void 0||xe[xe.length-1].route.Component!==void 0||xe[xe.length-1].route.lazy!==void 0,`Matched leaf route at location "${Y.pathname}${Y.search}${Y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Re=S1(xe&&xe.map(ce=>Object.assign({},ce,{params:Object.assign({},c,ce.params),pathname:uu([k,S.encodeLocation?S.encodeLocation(ce.pathname).pathname:ce.pathname]),pathnameBase:ce.pathnameBase==="/"?k:uu([k,S.encodeLocation?S.encodeLocation(ce.pathnameBase).pathname:ce.pathnameBase])})),C,m,g);return l&&Re?Ae.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...Y},navigationType:"POP"}},Re):Re}function x1(){let o=P1(),l=h1(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),m=o instanceof Error?o.stack:null,g="rgba(200,200,200, 0.5)",S={padding:"0.5rem",backgroundColor:g},C={padding:"2px 4px",backgroundColor:g},w=null;return console.error("Error handled by React Router default ErrorBoundary:",o),w=Ae.createElement(Ae.Fragment,null,Ae.createElement("p",null," Hey developer "),Ae.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ae.createElement("code",{style:C},"ErrorBoundary")," or"," ",Ae.createElement("code",{style:C},"errorElement")," prop on your route.")),Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",null,"Unexpected Application Error!"),Ae.createElement("h3",{style:{fontStyle:"italic"}},l),m?Ae.createElement("pre",{style:S},m):null,w)}var b1=Ae.createElement(x1,null),w1=class extends Ae.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,l){return l.location!==o.location||l.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:l.error,location:l.location,revalidation:o.revalidation||l.revalidation}}componentDidCatch(o,l){console.error("React Router caught the following error during render",o,l)}render(){return this.state.error!==void 0?Ae.createElement(lc.Provider,{value:this.props.routeContext},Ae.createElement(Ly.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T1({routeContext:o,match:l,children:m}){let g=Ae.useContext(wf);return g&&g.static&&g.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=l.route.id),Ae.createElement(lc.Provider,{value:o},m)}function S1(o,l=[],m=null,g=null){if(o==null){if(!m)return null;if(m.errors)o=m.matches;else if(l.length===0&&!m.initialized&&m.matches.length>0)o=m.matches;else return null}let S=o,C=m?.errors;if(C!=null){let R=S.findIndex(k=>k.route.id&&C?.[k.route.id]!==void 0);$n(R>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(C).join(",")}`),S=S.slice(0,Math.min(S.length,R+1))}let w=!1,c=-1;if(m)for(let R=0;R<S.length;R++){let k=S[R];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(c=R),k.route.id){let{loaderData:j,errors:$}=m,Y=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!$||$[k.route.id]===void 0);if(k.route.lazy||Y){w=!0,c>=0?S=S.slice(0,c+1):S=[S[0]];break}}}return S.reduceRight((R,k,j)=>{let $,Y=!1,X=null,se=null;m&&($=C&&k.route.id?C[k.route.id]:void 0,X=k.route.errorElement||b1,w&&(c<0&&j===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,se=null):c===j&&(Y=!0,se=k.route.hydrateFallbackElement||null)));let xe=l.concat(S.slice(0,j+1)),Re=()=>{let ce;return $?ce=X:Y?ce=se:k.route.Component?ce=Ae.createElement(k.route.Component,null):k.route.element?ce=k.route.element:ce=R,Ae.createElement(T1,{match:k,routeContext:{outlet:R,matches:xe,isDataRoute:m!=null},children:ce})};return m&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?Ae.createElement(w1,{location:m.location,revalidation:m.revalidation,component:X,error:$,children:Re(),routeContext:{outlet:null,matches:xe,isDataRoute:!0}}):Re()},null)}function Oy(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M1(o){let l=Ae.useContext(wf);return $n(l,Oy(o)),l}function E1(o){let l=Ae.useContext(dg);return $n(l,Oy(o)),l}function C1(o){let l=Ae.useContext(lc);return $n(l,Oy(o)),l}function By(o){let l=C1(o),m=l.matches[l.matches.length-1];return $n(m.route.id,`${o} can only be used on routes that contain a unique "id"`),m.route.id}function A1(){return By("useRouteId")}function P1(){let o=Ae.useContext(Ly),l=E1("useRouteError"),m=By("useRouteError");return o!==void 0?o:l.errors?.[m]}function z1(){let{router:o}=M1("useNavigate"),l=By("useNavigate"),m=Ae.useRef(!1);return vx(()=>{m.current=!0}),Ae.useCallback(async(S,C={})=>{fl(m.current,_x),m.current&&(typeof S=="number"?o.navigate(S):await o.navigate(S,{fromRouteId:l,...C}))},[o,l])}var O_={};function bx(o,l,m){!l&&!O_[o]&&(O_[o]=!0,fl(!1,m))}Ae.memo(I1);function I1({routes:o,future:l,state:m}){return xx(o,void 0,m,l)}function df(o){$n(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D1({basename:o="/",children:l=null,location:m,navigationType:g="POP",navigator:S,static:C=!1}){$n(!Fp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=o.replace(/^\/*/,"/"),c=Ae.useMemo(()=>({basename:w,navigator:S,static:C,future:{}}),[w,S,C]);typeof m=="string"&&(m=pd(m));let{pathname:R="/",search:k="",hash:j="",state:$=null,key:Y="default"}=m,X=Ae.useMemo(()=>{let se=du(R,w);return se==null?null:{location:{pathname:se,search:k,hash:j,state:$,key:Y},navigationType:g}},[w,R,k,j,$,Y,g]);return fl(X!=null,`<Router basename="${w}"> is not able to match the URL "${R}${k}${j}" because it does not start with the basename, so the <Router> won't render anything.`),X==null?null:Ae.createElement(oc.Provider,{value:c},Ae.createElement(Np.Provider,{children:l,value:X}))}function R1({children:o,location:l}){return v1(oy(o),l)}function oy(o,l=[]){let m=[];return Ae.Children.forEach(o,(g,S)=>{if(!Ae.isValidElement(g))return;let C=[...l,S];if(g.type===Ae.Fragment){m.push.apply(m,oy(g.props.children,C));return}$n(g.type===df,`[${typeof g.type=="string"?g.type:g.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$n(!g.props.index||!g.props.children,"An index route cannot have child routes.");let w={id:g.props.id||C.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,hydrateFallbackElement:g.props.hydrateFallbackElement,HydrateFallback:g.props.HydrateFallback,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.hasErrorBoundary===!0||g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(w.children=oy(g.props.children,C)),m.push(w)}),m}var $m="get",Hm="application/x-www-form-urlencoded";function fg(o){return o!=null&&typeof o.tagName=="string"}function k1(o){return fg(o)&&o.tagName.toLowerCase()==="button"}function L1(o){return fg(o)&&o.tagName.toLowerCase()==="form"}function O1(o){return fg(o)&&o.tagName.toLowerCase()==="input"}function B1(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function j1(o,l){return o.button===0&&(!l||l==="_self")&&!B1(o)}var jm=null;function N1(){if(jm===null)try{new FormData(document.createElement("form"),0),jm=!1}catch{jm=!0}return jm}var F1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Og(o){return o!=null&&!F1.has(o)?(fl(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hm}"`),null):o}function V1(o,l){let m,g,S,C,w;if(L1(o)){let c=o.getAttribute("action");g=c?du(c,l):null,m=o.getAttribute("method")||$m,S=Og(o.getAttribute("enctype"))||Hm,C=new FormData(o)}else if(k1(o)||O1(o)&&(o.type==="submit"||o.type==="image")){let c=o.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let R=o.getAttribute("formaction")||c.getAttribute("action");if(g=R?du(R,l):null,m=o.getAttribute("formmethod")||c.getAttribute("method")||$m,S=Og(o.getAttribute("formenctype"))||Og(c.getAttribute("enctype"))||Hm,C=new FormData(c,o),!N1()){let{name:k,type:j,value:$}=o;if(j==="image"){let Y=k?`${k}.`:"";C.append(`${Y}x`,"0"),C.append(`${Y}y`,"0")}else k&&C.append(k,$)}}else{if(fg(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');m=$m,g=null,S=Hm,w=o}return C&&S==="text/plain"&&(w=C,C=void 0),{action:g,method:m.toLowerCase(),encType:S,formData:C,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jy(o,l){if(o===!1||o===null||typeof o>"u")throw new Error(l)}function U1(o,l,m){let g=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return g.pathname==="/"?g.pathname=`_root.${m}`:l&&du(g.pathname,l)==="/"?g.pathname=`${l.replace(/\/$/,"")}/_root.${m}`:g.pathname=`${g.pathname.replace(/\/$/,"")}.${m}`,g}async function G1(o,l){if(o.id in l)return l[o.id];try{let m=await import(o.module);return l[o.id]=m,m}catch(m){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(m),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z1(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function q1(o,l,m){let g=await Promise.all(o.map(async S=>{let C=l.routes[S.route.id];if(C){let w=await G1(C,m);return w.links?w.links():[]}return[]}));return Y1(g.flat(1).filter(Z1).filter(S=>S.rel==="stylesheet"||S.rel==="preload").map(S=>S.rel==="stylesheet"?{...S,rel:"prefetch",as:"style"}:{...S,rel:"prefetch"}))}function B_(o,l,m,g,S,C){let w=(R,k)=>m[k]?R.route.id!==m[k].route.id:!0,c=(R,k)=>m[k].pathname!==R.pathname||m[k].route.path?.endsWith("*")&&m[k].params["*"]!==R.params["*"];return C==="assets"?l.filter((R,k)=>w(R,k)||c(R,k)):C==="data"?l.filter((R,k)=>{let j=g.routes[R.route.id];if(!j||!j.hasLoader)return!1;if(w(R,k)||c(R,k))return!0;if(R.route.shouldRevalidate){let $=R.route.shouldRevalidate({currentUrl:new URL(S.pathname+S.search+S.hash,window.origin),currentParams:m[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:R.params,defaultShouldRevalidate:!0});if(typeof $=="boolean")return $}return!0}):[]}function $1(o,l,{includeHydrateFallback:m}={}){return H1(o.map(g=>{let S=l.routes[g.route.id];if(!S)return[];let C=[S.module];return S.clientActionModule&&(C=C.concat(S.clientActionModule)),S.clientLoaderModule&&(C=C.concat(S.clientLoaderModule)),m&&S.hydrateFallbackModule&&(C=C.concat(S.hydrateFallbackModule)),S.imports&&(C=C.concat(S.imports)),C}).flat(1))}function H1(o){return[...new Set(o)]}function X1(o){let l={},m=Object.keys(o).sort();for(let g of m)l[g]=o[g];return l}function Y1(o,l){let m=new Set;return new Set(l),o.reduce((g,S)=>{let C=JSON.stringify(X1(S));return m.has(C)||(m.add(C),g.push({key:C,link:S})),g},[])}function wx(){let o=Ae.useContext(wf);return jy(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function W1(){let o=Ae.useContext(dg);return jy(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Ny=Ae.createContext(void 0);Ny.displayName="FrameworkContext";function Tx(){let o=Ae.useContext(Ny);return jy(o,"You must render this element inside a <HydratedRouter> element"),o}function K1(o,l){let m=Ae.useContext(Ny),[g,S]=Ae.useState(!1),[C,w]=Ae.useState(!1),{onFocus:c,onBlur:R,onMouseEnter:k,onMouseLeave:j,onTouchStart:$}=l,Y=Ae.useRef(null);Ae.useEffect(()=>{if(o==="render"&&w(!0),o==="viewport"){let xe=ce=>{ce.forEach(De=>{w(De.isIntersecting)})},Re=new IntersectionObserver(xe,{threshold:.5});return Y.current&&Re.observe(Y.current),()=>{Re.disconnect()}}},[o]),Ae.useEffect(()=>{if(g){let xe=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(xe)}}},[g]);let X=()=>{S(!0)},se=()=>{S(!1),w(!1)};return m?o!=="intent"?[C,Y,{}]:[C,Y,{onFocus:Tp(c,X),onBlur:Tp(R,se),onMouseEnter:Tp(k,X),onMouseLeave:Tp(j,se),onTouchStart:Tp($,X)}]:[!1,Y,{}]}function Tp(o,l){return m=>{o&&o(m),m.defaultPrevented||l(m)}}function Q1({page:o,...l}){let{router:m}=wx(),g=Ae.useMemo(()=>hx(m.routes,o,m.basename),[m.routes,o,m.basename]);return g?Ae.createElement(ew,{page:o,matches:g,...l}):null}function J1(o){let{manifest:l,routeModules:m}=Tx(),[g,S]=Ae.useState([]);return Ae.useEffect(()=>{let C=!1;return q1(o,l,m).then(w=>{C||S(w)}),()=>{C=!0}},[o,l,m]),g}function ew({page:o,matches:l,...m}){let g=lh(),{manifest:S,routeModules:C}=Tx(),{basename:w}=wx(),{loaderData:c,matches:R}=W1(),k=Ae.useMemo(()=>B_(o,l,R,S,g,"data"),[o,l,R,S,g]),j=Ae.useMemo(()=>B_(o,l,R,S,g,"assets"),[o,l,R,S,g]),$=Ae.useMemo(()=>{if(o===g.pathname+g.search+g.hash)return[];let se=new Set,xe=!1;if(l.forEach(ce=>{let De=S.routes[ce.route.id];!De||!De.hasLoader||(!k.some(Ce=>Ce.route.id===ce.route.id)&&ce.route.id in c&&C[ce.route.id]?.shouldRevalidate||De.hasClientLoader?xe=!0:se.add(ce.route.id))}),se.size===0)return[];let Re=U1(o,w,"data");return xe&&se.size>0&&Re.searchParams.set("_routes",l.filter(ce=>se.has(ce.route.id)).map(ce=>ce.route.id).join(",")),[Re.pathname+Re.search]},[w,c,g,S,k,l,o,C]),Y=Ae.useMemo(()=>$1(j,S),[j,S]),X=J1(j);return Ae.createElement(Ae.Fragment,null,$.map(se=>Ae.createElement("link",{key:se,rel:"prefetch",as:"fetch",href:se,...m})),Y.map(se=>Ae.createElement("link",{key:se,rel:"modulepreload",href:se,...m})),X.map(({key:se,link:xe})=>Ae.createElement("link",{key:se,...xe})))}function tw(...o){return l=>{o.forEach(m=>{typeof m=="function"?m(l):m!=null&&(m.current=l)})}}var Sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sx&&(window.__reactRouterVersion="7.7.1")}catch{}function iw({basename:o,children:l,window:m}){let g=Ae.useRef();g.current==null&&(g.current=Ub({window:m,v5Compat:!0}));let S=g.current,[C,w]=Ae.useState({action:S.action,location:S.location}),c=Ae.useCallback(R=>{Ae.startTransition(()=>w(R))},[w]);return Ae.useLayoutEffect(()=>S.listen(c),[S,c]),Ae.createElement(D1,{basename:o,children:l,location:C.location,navigationType:C.action,navigator:S})}var Mx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hu=Ae.forwardRef(function({onClick:l,discover:m="render",prefetch:g="none",relative:S,reloadDocument:C,replace:w,state:c,target:R,to:k,preventScrollReset:j,viewTransition:$,...Y},X){let{basename:se}=Ae.useContext(oc),xe=typeof k=="string"&&Mx.test(k),Re,ce=!1;if(typeof k=="string"&&xe&&(Re=k,Sx))try{let ut=new URL(window.location.href),lt=k.startsWith("//")?new URL(ut.protocol+k):new URL(k),Tt=du(lt.pathname,se);lt.origin===ut.origin&&Tt!=null?k=Tt+lt.search+lt.hash:ce=!0}catch{fl(!1,`<Link to="${k}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let De=m1(k,{relative:S}),[Ce,Ye,Fe]=K1(g,Y),ct=sw(k,{replace:w,state:c,target:R,preventScrollReset:j,relative:S,viewTransition:$});function ht(ut){l&&l(ut),ut.defaultPrevented||ct(ut)}let et=Ae.createElement("a",{...Y,...Fe,href:Re||De,onClick:ce||C?l:ht,ref:tw(X,Ye),target:R,"data-discover":!xe&&m==="render"?"true":void 0});return Ce&&!xe?Ae.createElement(Ae.Fragment,null,et,Ae.createElement(Q1,{page:De})):et});hu.displayName="Link";var nw=Ae.forwardRef(function({"aria-current":l="page",caseSensitive:m=!1,className:g="",end:S=!1,style:C,to:w,viewTransition:c,children:R,...k},j){let $=Vp(w,{relative:k.relative}),Y=lh(),X=Ae.useContext(dg),{navigator:se,basename:xe}=Ae.useContext(oc),Re=X!=null&&hw($)&&c===!0,ce=se.encodeLocation?se.encodeLocation($).pathname:$.pathname,De=Y.pathname,Ce=X&&X.navigation&&X.navigation.location?X.navigation.location.pathname:null;m||(De=De.toLowerCase(),Ce=Ce?Ce.toLowerCase():null,ce=ce.toLowerCase()),Ce&&xe&&(Ce=du(Ce,xe)||Ce);const Ye=ce!=="/"&&ce.endsWith("/")?ce.length-1:ce.length;let Fe=De===ce||!S&&De.startsWith(ce)&&De.charAt(Ye)==="/",ct=Ce!=null&&(Ce===ce||!S&&Ce.startsWith(ce)&&Ce.charAt(ce.length)==="/"),ht={isActive:Fe,isPending:ct,isTransitioning:Re},et=Fe?l:void 0,ut;typeof g=="function"?ut=g(ht):ut=[g,Fe?"active":null,ct?"pending":null,Re?"transitioning":null].filter(Boolean).join(" ");let lt=typeof C=="function"?C(ht):C;return Ae.createElement(hu,{...k,"aria-current":et,className:ut,ref:j,style:lt,to:w,viewTransition:c},typeof R=="function"?R(ht):R)});nw.displayName="NavLink";var rw=Ae.forwardRef(({discover:o="render",fetcherKey:l,navigate:m,reloadDocument:g,replace:S,state:C,method:w=$m,action:c,onSubmit:R,relative:k,preventScrollReset:j,viewTransition:$,...Y},X)=>{let se=cw(),xe=uw(c,{relative:k}),Re=w.toLowerCase()==="get"?"get":"post",ce=typeof c=="string"&&Mx.test(c),De=Ce=>{if(R&&R(Ce),Ce.defaultPrevented)return;Ce.preventDefault();let Ye=Ce.nativeEvent.submitter,Fe=Ye?.getAttribute("formmethod")||w;se(Ye||Ce.currentTarget,{fetcherKey:l,method:Fe,navigate:m,replace:S,state:C,relative:k,preventScrollReset:j,viewTransition:$})};return Ae.createElement("form",{ref:X,method:Re,action:xe,onSubmit:g?R:De,...Y,"data-discover":!ce&&o==="render"?"true":void 0})});rw.displayName="Form";function aw(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ex(o){let l=Ae.useContext(wf);return $n(l,aw(o)),l}function sw(o,{target:l,replace:m,state:g,preventScrollReset:S,relative:C,viewTransition:w}={}){let c=g1(),R=lh(),k=Vp(o,{relative:C});return Ae.useCallback(j=>{if(j1(j,l)){j.preventDefault();let $=m!==void 0?m:Dp(R)===Dp(k);c(o,{replace:$,state:g,preventScrollReset:S,relative:C,viewTransition:w})}},[R,c,k,m,g,l,o,S,C,w])}var ow=0,lw=()=>`__${String(++ow)}__`;function cw(){let{router:o}=Ex("useSubmit"),{basename:l}=Ae.useContext(oc),m=A1();return Ae.useCallback(async(g,S={})=>{let{action:C,method:w,encType:c,formData:R,body:k}=V1(g,l);if(S.navigate===!1){let j=S.fetcherKey||lw();await o.fetch(j,m,S.action||C,{preventScrollReset:S.preventScrollReset,formData:R,body:k,formMethod:S.method||w,formEncType:S.encType||c,flushSync:S.flushSync})}else await o.navigate(S.action||C,{preventScrollReset:S.preventScrollReset,formData:R,body:k,formMethod:S.method||w,formEncType:S.encType||c,replace:S.replace,state:S.state,fromRouteId:m,flushSync:S.flushSync,viewTransition:S.viewTransition})},[o,l,m])}function uw(o,{relative:l}={}){let{basename:m}=Ae.useContext(oc),g=Ae.useContext(lc);$n(g,"useFormAction must be used inside a RouteContext");let[S]=g.matches.slice(-1),C={...Vp(o||".",{relative:l})},w=lh();if(o==null){C.search=w.search;let c=new URLSearchParams(C.search),R=c.getAll("index");if(R.some(j=>j==="")){c.delete("index"),R.filter($=>$).forEach($=>c.append("index",$));let j=c.toString();C.search=j?`?${j}`:""}}return(!o||o===".")&&S.route.index&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),m!=="/"&&(C.pathname=C.pathname==="/"?m:uu([m,C.pathname])),Dp(C)}function hw(o,{relative:l}={}){let m=Ae.useContext(yx);$n(m!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:g}=Ex("useViewTransitionState"),S=Vp(o,{relative:l});if(!m.isTransitioning)return!1;let C=du(m.currentLocation.pathname,g)||m.currentLocation.pathname,w=du(m.nextLocation.pathname,g)||m.nextLocation.pathname;return eg(S.pathname,w)!=null||eg(S.pathname,C)!=null}var Cx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},j_=pn.createContext&&pn.createContext(Cx),dw=["attr","size","title"];function fw(o,l){if(o==null)return{};var m=pw(o,l),g,S;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(o);for(S=0;S<C.length;S++)g=C[S],!(l.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(o,g)&&(m[g]=o[g])}return m}function pw(o,l){if(o==null)return{};var m={};for(var g in o)if(Object.prototype.hasOwnProperty.call(o,g)){if(l.indexOf(g)>=0)continue;m[g]=o[g]}return m}function tg(){return tg=Object.assign?Object.assign.bind():function(o){for(var l=1;l<arguments.length;l++){var m=arguments[l];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(o[g]=m[g])}return o},tg.apply(this,arguments)}function N_(o,l){var m=Object.keys(o);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(o);l&&(g=g.filter(function(S){return Object.getOwnPropertyDescriptor(o,S).enumerable})),m.push.apply(m,g)}return m}function ig(o){for(var l=1;l<arguments.length;l++){var m=arguments[l]!=null?arguments[l]:{};l%2?N_(Object(m),!0).forEach(function(g){mw(o,g,m[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(m)):N_(Object(m)).forEach(function(g){Object.defineProperty(o,g,Object.getOwnPropertyDescriptor(m,g))})}return o}function mw(o,l,m){return l=gw(l),l in o?Object.defineProperty(o,l,{value:m,enumerable:!0,configurable:!0,writable:!0}):o[l]=m,o}function gw(o){var l=yw(o,"string");return typeof l=="symbol"?l:l+""}function yw(o,l){if(typeof o!="object"||!o)return o;var m=o[Symbol.toPrimitive];if(m!==void 0){var g=m.call(o,l);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(o)}function Ax(o){return o&&o.map((l,m)=>pn.createElement(l.tag,ig({key:m},l.attr),Ax(l.child)))}function pl(o){return l=>pn.createElement(_w,tg({attr:ig({},o.attr)},l),Ax(o.child))}function _w(o){var l=m=>{var{attr:g,size:S,title:C}=o,w=fw(o,dw),c=S||m.size||"1em",R;return m.className&&(R=m.className),o.className&&(R=(R?R+" ":"")+o.className),pn.createElement("svg",tg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},m.attr,g,w,{className:R,style:ig(ig({color:o.color||m.color},m.style),o.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),C&&pn.createElement("title",null,C),o.children)};return j_!==void 0?pn.createElement(j_.Consumer,null,m=>l(m)):l(Cx)}function vw(o){return pl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(o)}function xw(o){return pl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(o)}function Px(o){return pl({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(o)}function bw(o){return pl({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(o)}function ww(o){return pl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(o)}function Tw(o){return pl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(o)}function Sw(o){return pl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(o)}const F_=[{icon:xw,url:"https://linkedin.com",color:"hover:text-blue-600"},{icon:vw,url:"https://youtube.com",color:"hover:text-red-500"},{icon:ww,url:"mailto:info@example.com",color:"hover:text-gray-400"}],Mw=()=>ge.jsx("div",{className:"text-white/90 text-[14px] leading-[20px] tracking-[0.7px] font-[400] font-dm",children:ge.jsxs("div",{className:"max-w-6xl mx-auto hidden lg:flex justify-between items-center px-4 pt-1",children:[ge.jsxs("div",{className:"flex items-center gap-4",children:[ge.jsx("span",{className:"tracking-wider",children:"ANUGRAH ENERGI INDONESIA"}),ge.jsx("button",{className:"hover:text-[#F37C1D] transition duration-300 cursor-pointer",children:"CONTACT"})]}),ge.jsx("div",{className:"flex items-center gap-4",children:F_.map(({icon:o,url:l,color:m},g)=>ge.jsxs(pn.Fragment,{children:[ge.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:`cursor-pointer transition ${m}`,children:ge.jsx(o,{})}),g<F_.length-1&&ge.jsx("div",{className:"w-px h-10 bg-white/30"})]},g))})]})});function Bg(o){return pl({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(o)}function Ew(o){return pl({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(o)}function Cw(o){return pl({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(o)}const Fy=Ae.createContext({});function Vy(o){const l=Ae.useRef(null);return l.current===null&&(l.current=o()),l.current}const Uy=typeof window<"u",zx=Uy?Ae.useLayoutEffect:Ae.useEffect,pg=Ae.createContext(null);function Gy(o,l){o.indexOf(l)===-1&&o.push(l)}function Zy(o,l){const m=o.indexOf(l);m>-1&&o.splice(m,1)}const fu=(o,l,m)=>m>l?l:m<o?o:m;let qy=()=>{};const pu={},Ix=o=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(o);function Dx(o){return typeof o=="object"&&o!==null}const Rx=o=>/^0[^.\s]+$/u.test(o);function $y(o){let l;return()=>(l===void 0&&(l=o()),l)}const Mo=o=>o,Aw=(o,l)=>m=>l(o(m)),Up=(...o)=>o.reduce(Aw),Rp=(o,l,m)=>{const g=l-o;return g===0?1:(m-o)/g};class Hy{constructor(){this.subscriptions=[]}add(l){return Gy(this.subscriptions,l),()=>Zy(this.subscriptions,l)}notify(l,m,g){const S=this.subscriptions.length;if(S)if(S===1)this.subscriptions[0](l,m,g);else for(let C=0;C<S;C++){const w=this.subscriptions[C];w&&w(l,m,g)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nc=o=>o*1e3,rc=o=>o/1e3;function kx(o,l){return l?o*(1e3/l):0}const Lx=(o,l,m)=>(((1-3*m+3*l)*o+(3*m-6*l))*o+3*l)*o,Pw=1e-7,zw=12;function Iw(o,l,m,g,S){let C,w,c=0;do w=l+(m-l)/2,C=Lx(w,g,S)-o,C>0?m=w:l=w;while(Math.abs(C)>Pw&&++c<zw);return w}function Gp(o,l,m,g){if(o===l&&m===g)return Mo;const S=C=>Iw(C,0,1,o,m);return C=>C===0||C===1?C:Lx(S(C),l,g)}const Ox=o=>l=>l<=.5?o(2*l)/2:(2-o(2*(1-l)))/2,Bx=o=>l=>1-o(1-l),jx=Gp(.33,1.53,.69,.99),Xy=Bx(jx),Nx=Ox(Xy),Fx=o=>(o*=2)<1?.5*Xy(o):.5*(2-Math.pow(2,-10*(o-1))),Yy=o=>1-Math.sin(Math.acos(o)),Vx=Bx(Yy),Ux=Ox(Yy),Dw=Gp(.42,0,1,1),Rw=Gp(0,0,.58,1),Gx=Gp(.42,0,.58,1),kw=o=>Array.isArray(o)&&typeof o[0]!="number",Zx=o=>Array.isArray(o)&&typeof o[0]=="number",Lw={linear:Mo,easeIn:Dw,easeInOut:Gx,easeOut:Rw,circIn:Yy,circInOut:Ux,circOut:Vx,backIn:Xy,backInOut:Nx,backOut:jx,anticipate:Fx},Ow=o=>typeof o=="string",V_=o=>{if(Zx(o)){qy(o.length===4);const[l,m,g,S]=o;return Gp(l,m,g,S)}else if(Ow(o))return Lw[o];return o},Nm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Bw(o,l){let m=new Set,g=new Set,S=!1,C=!1;const w=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function R(j){w.has(j)&&(k.schedule(j),o()),j(c)}const k={schedule:(j,$=!1,Y=!1)=>{const se=Y&&S?m:g;return $&&w.add(j),se.has(j)||se.add(j),j},cancel:j=>{g.delete(j),w.delete(j)},process:j=>{if(c=j,S){C=!0;return}S=!0,[m,g]=[g,m],m.forEach(R),m.clear(),S=!1,C&&(C=!1,k.process(j))}};return k}const jw=40;function qx(o,l){let m=!1,g=!0;const S={delta:0,timestamp:0,isProcessing:!1},C=()=>m=!0,w=Nm.reduce((Ce,Ye)=>(Ce[Ye]=Bw(C),Ce),{}),{setup:c,read:R,resolveKeyframes:k,preUpdate:j,update:$,preRender:Y,render:X,postRender:se}=w,xe=()=>{const Ce=pu.useManualTiming?S.timestamp:performance.now();m=!1,pu.useManualTiming||(S.delta=g?1e3/60:Math.max(Math.min(Ce-S.timestamp,jw),1)),S.timestamp=Ce,S.isProcessing=!0,c.process(S),R.process(S),k.process(S),j.process(S),$.process(S),Y.process(S),X.process(S),se.process(S),S.isProcessing=!1,m&&l&&(g=!1,o(xe))},Re=()=>{m=!0,g=!0,S.isProcessing||o(xe)};return{schedule:Nm.reduce((Ce,Ye)=>{const Fe=w[Ye];return Ce[Ye]=(ct,ht=!1,et=!1)=>(m||Re(),Fe.schedule(ct,ht,et)),Ce},{}),cancel:Ce=>{for(let Ye=0;Ye<Nm.length;Ye++)w[Nm[Ye]].cancel(Ce)},state:S,steps:w}}const{schedule:jn,cancel:sh,state:sa,steps:jg}=qx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mo,!0);let Xm;function Nw(){Xm=void 0}const fs={now:()=>(Xm===void 0&&fs.set(sa.isProcessing||pu.useManualTiming?sa.timestamp:performance.now()),Xm),set:o=>{Xm=o,queueMicrotask(Nw)}},$x=o=>l=>typeof l=="string"&&l.startsWith(o),Wy=$x("--"),Fw=$x("var(--"),Ky=o=>Fw(o)?Vw.test(o.split("/*")[0].trim()):!1,Vw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tf={test:o=>typeof o=="number",parse:parseFloat,transform:o=>o},kp={...Tf,transform:o=>fu(0,1,o)},Fm={...Tf,default:1},Ep=o=>Math.round(o*1e5)/1e5,Qy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uw(o){return o==null}const Gw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jy=(o,l)=>m=>!!(typeof m=="string"&&Gw.test(m)&&m.startsWith(o)||l&&!Uw(m)&&Object.prototype.hasOwnProperty.call(m,l)),Hx=(o,l,m)=>g=>{if(typeof g!="string")return g;const[S,C,w,c]=g.match(Qy);return{[o]:parseFloat(S),[l]:parseFloat(C),[m]:parseFloat(w),alpha:c!==void 0?parseFloat(c):1}},Zw=o=>fu(0,255,o),Ng={...Tf,transform:o=>Math.round(Zw(o))},cd={test:Jy("rgb","red"),parse:Hx("red","green","blue"),transform:({red:o,green:l,blue:m,alpha:g=1})=>"rgba("+Ng.transform(o)+", "+Ng.transform(l)+", "+Ng.transform(m)+", "+Ep(kp.transform(g))+")"};function qw(o){let l="",m="",g="",S="";return o.length>5?(l=o.substring(1,3),m=o.substring(3,5),g=o.substring(5,7),S=o.substring(7,9)):(l=o.substring(1,2),m=o.substring(2,3),g=o.substring(3,4),S=o.substring(4,5),l+=l,m+=m,g+=g,S+=S),{red:parseInt(l,16),green:parseInt(m,16),blue:parseInt(g,16),alpha:S?parseInt(S,16)/255:1}}const ly={test:Jy("#"),parse:qw,transform:cd.transform},Zp=o=>({test:l=>typeof l=="string"&&l.endsWith(o)&&l.split(" ").length===1,parse:parseFloat,transform:l=>`${l}${o}`}),rh=Zp("deg"),ac=Zp("%"),ri=Zp("px"),$w=Zp("vh"),Hw=Zp("vw"),U_={...ac,parse:o=>ac.parse(o)/100,transform:o=>ac.transform(o*100)},ff={test:Jy("hsl","hue"),parse:Hx("hue","saturation","lightness"),transform:({hue:o,saturation:l,lightness:m,alpha:g=1})=>"hsla("+Math.round(o)+", "+ac.transform(Ep(l))+", "+ac.transform(Ep(m))+", "+Ep(kp.transform(g))+")"},Pr={test:o=>cd.test(o)||ly.test(o)||ff.test(o),parse:o=>cd.test(o)?cd.parse(o):ff.test(o)?ff.parse(o):ly.parse(o),transform:o=>typeof o=="string"?o:o.hasOwnProperty("red")?cd.transform(o):ff.transform(o),getAnimatableNone:o=>{const l=Pr.parse(o);return l.alpha=0,Pr.transform(l)}},Xw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yw(o){return isNaN(o)&&typeof o=="string"&&(o.match(Qy)?.length||0)+(o.match(Xw)?.length||0)>0}const Xx="number",Yx="color",Ww="var",Kw="var(",G_="${}",Qw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lp(o){const l=o.toString(),m=[],g={color:[],number:[],var:[]},S=[];let C=0;const c=l.replace(Qw,R=>(Pr.test(R)?(g.color.push(C),S.push(Yx),m.push(Pr.parse(R))):R.startsWith(Kw)?(g.var.push(C),S.push(Ww),m.push(R)):(g.number.push(C),S.push(Xx),m.push(parseFloat(R))),++C,G_)).split(G_);return{values:m,split:c,indexes:g,types:S}}function Wx(o){return Lp(o).values}function Kx(o){const{split:l,types:m}=Lp(o),g=l.length;return S=>{let C="";for(let w=0;w<g;w++)if(C+=l[w],S[w]!==void 0){const c=m[w];c===Xx?C+=Ep(S[w]):c===Yx?C+=Pr.transform(S[w]):C+=S[w]}return C}}const Jw=o=>typeof o=="number"?0:Pr.test(o)?Pr.getAnimatableNone(o):o;function e2(o){const l=Wx(o);return Kx(o)(l.map(Jw))}const oh={test:Yw,parse:Wx,createTransformer:Kx,getAnimatableNone:e2};function Fg(o,l,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?o+(l-o)*6*m:m<1/2?l:m<2/3?o+(l-o)*(2/3-m)*6:o}function t2({hue:o,saturation:l,lightness:m,alpha:g}){o/=360,l/=100,m/=100;let S=0,C=0,w=0;if(!l)S=C=w=m;else{const c=m<.5?m*(1+l):m+l-m*l,R=2*m-c;S=Fg(R,c,o+1/3),C=Fg(R,c,o),w=Fg(R,c,o-1/3)}return{red:Math.round(S*255),green:Math.round(C*255),blue:Math.round(w*255),alpha:g}}function ng(o,l){return m=>m>0?l:o}const qn=(o,l,m)=>o+(l-o)*m,Vg=(o,l,m)=>{const g=o*o,S=m*(l*l-g)+g;return S<0?0:Math.sqrt(S)},i2=[ly,cd,ff],n2=o=>i2.find(l=>l.test(o));function Z_(o){const l=n2(o);if(!l)return!1;let m=l.parse(o);return l===ff&&(m=t2(m)),m}const q_=(o,l)=>{const m=Z_(o),g=Z_(l);if(!m||!g)return ng(o,l);const S={...m};return C=>(S.red=Vg(m.red,g.red,C),S.green=Vg(m.green,g.green,C),S.blue=Vg(m.blue,g.blue,C),S.alpha=qn(m.alpha,g.alpha,C),cd.transform(S))},cy=new Set(["none","hidden"]);function r2(o,l){return cy.has(o)?m=>m<=0?o:l:m=>m>=1?l:o}function a2(o,l){return m=>qn(o,l,m)}function e_(o){return typeof o=="number"?a2:typeof o=="string"?Ky(o)?ng:Pr.test(o)?q_:l2:Array.isArray(o)?Qx:typeof o=="object"?Pr.test(o)?q_:s2:ng}function Qx(o,l){const m=[...o],g=m.length,S=o.map((C,w)=>e_(C)(C,l[w]));return C=>{for(let w=0;w<g;w++)m[w]=S[w](C);return m}}function s2(o,l){const m={...o,...l},g={};for(const S in m)o[S]!==void 0&&l[S]!==void 0&&(g[S]=e_(o[S])(o[S],l[S]));return S=>{for(const C in g)m[C]=g[C](S);return m}}function o2(o,l){const m=[],g={color:0,var:0,number:0};for(let S=0;S<l.values.length;S++){const C=l.types[S],w=o.indexes[C][g[C]],c=o.values[w]??0;m[S]=c,g[C]++}return m}const l2=(o,l)=>{const m=oh.createTransformer(l),g=Lp(o),S=Lp(l);return g.indexes.var.length===S.indexes.var.length&&g.indexes.color.length===S.indexes.color.length&&g.indexes.number.length>=S.indexes.number.length?cy.has(o)&&!S.values.length||cy.has(l)&&!g.values.length?r2(o,l):Up(Qx(o2(g,S),S.values),m):ng(o,l)};function Jx(o,l,m){return typeof o=="number"&&typeof l=="number"&&typeof m=="number"?qn(o,l,m):e_(o)(o,l)}const c2=o=>{const l=({timestamp:m})=>o(m);return{start:(m=!0)=>jn.update(l,m),stop:()=>sh(l),now:()=>sa.isProcessing?sa.timestamp:fs.now()}},e0=(o,l,m=10)=>{let g="";const S=Math.max(Math.round(l/m),2);for(let C=0;C<S;C++)g+=Math.round(o(C/(S-1))*1e4)/1e4+", ";return`linear(${g.substring(0,g.length-2)})`},rg=2e4;function t_(o){let l=0;const m=50;let g=o.next(l);for(;!g.done&&l<rg;)l+=m,g=o.next(l);return l>=rg?1/0:l}function u2(o,l=100,m){const g=m({...o,keyframes:[0,l]}),S=Math.min(t_(g),rg);return{type:"keyframes",ease:C=>g.next(S*C).value/l,duration:rc(S)}}const h2=5;function t0(o,l,m){const g=Math.max(l-h2,0);return kx(m-o(g),l-g)}const Jn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ug=.001;function d2({duration:o=Jn.duration,bounce:l=Jn.bounce,velocity:m=Jn.velocity,mass:g=Jn.mass}){let S,C,w=1-l;w=fu(Jn.minDamping,Jn.maxDamping,w),o=fu(Jn.minDuration,Jn.maxDuration,rc(o)),w<1?(S=k=>{const j=k*w,$=j*o,Y=j-m,X=uy(k,w),se=Math.exp(-$);return Ug-Y/X*se},C=k=>{const $=k*w*o,Y=$*m+m,X=Math.pow(w,2)*Math.pow(k,2)*o,se=Math.exp(-$),xe=uy(Math.pow(k,2),w);return(-S(k)+Ug>0?-1:1)*((Y-X)*se)/xe}):(S=k=>{const j=Math.exp(-k*o),$=(k-m)*o+1;return-Ug+j*$},C=k=>{const j=Math.exp(-k*o),$=(m-k)*(o*o);return j*$});const c=5/o,R=p2(S,C,c);if(o=nc(o),isNaN(R))return{stiffness:Jn.stiffness,damping:Jn.damping,duration:o};{const k=Math.pow(R,2)*g;return{stiffness:k,damping:w*2*Math.sqrt(g*k),duration:o}}}const f2=12;function p2(o,l,m){let g=m;for(let S=1;S<f2;S++)g=g-o(g)/l(g);return g}function uy(o,l){return o*Math.sqrt(1-l*l)}const m2=["duration","bounce"],g2=["stiffness","damping","mass"];function $_(o,l){return l.some(m=>o[m]!==void 0)}function y2(o){let l={velocity:Jn.velocity,stiffness:Jn.stiffness,damping:Jn.damping,mass:Jn.mass,isResolvedFromDuration:!1,...o};if(!$_(o,g2)&&$_(o,m2))if(o.visualDuration){const m=o.visualDuration,g=2*Math.PI/(m*1.2),S=g*g,C=2*fu(.05,1,1-(o.bounce||0))*Math.sqrt(S);l={...l,mass:Jn.mass,stiffness:S,damping:C}}else{const m=d2(o);l={...l,...m,mass:Jn.mass},l.isResolvedFromDuration=!0}return l}function ag(o=Jn.visualDuration,l=Jn.bounce){const m=typeof o!="object"?{visualDuration:o,keyframes:[0,1],bounce:l}:o;let{restSpeed:g,restDelta:S}=m;const C=m.keyframes[0],w=m.keyframes[m.keyframes.length-1],c={done:!1,value:C},{stiffness:R,damping:k,mass:j,duration:$,velocity:Y,isResolvedFromDuration:X}=y2({...m,velocity:-rc(m.velocity||0)}),se=Y||0,xe=k/(2*Math.sqrt(R*j)),Re=w-C,ce=rc(Math.sqrt(R/j)),De=Math.abs(Re)<5;g||(g=De?Jn.restSpeed.granular:Jn.restSpeed.default),S||(S=De?Jn.restDelta.granular:Jn.restDelta.default);let Ce;if(xe<1){const Fe=uy(ce,xe);Ce=ct=>{const ht=Math.exp(-xe*ce*ct);return w-ht*((se+xe*ce*Re)/Fe*Math.sin(Fe*ct)+Re*Math.cos(Fe*ct))}}else if(xe===1)Ce=Fe=>w-Math.exp(-ce*Fe)*(Re+(se+ce*Re)*Fe);else{const Fe=ce*Math.sqrt(xe*xe-1);Ce=ct=>{const ht=Math.exp(-xe*ce*ct),et=Math.min(Fe*ct,300);return w-ht*((se+xe*ce*Re)*Math.sinh(et)+Fe*Re*Math.cosh(et))/Fe}}const Ye={calculatedDuration:X&&$||null,next:Fe=>{const ct=Ce(Fe);if(X)c.done=Fe>=$;else{let ht=Fe===0?se:0;xe<1&&(ht=Fe===0?nc(se):t0(Ce,Fe,ct));const et=Math.abs(ht)<=g,ut=Math.abs(w-ct)<=S;c.done=et&&ut}return c.value=c.done?w:ct,c},toString:()=>{const Fe=Math.min(t_(Ye),rg),ct=e0(ht=>Ye.next(Fe*ht).value,Fe,30);return Fe+"ms "+ct},toTransition:()=>{}};return Ye}ag.applyToOptions=o=>{const l=u2(o,100,ag);return o.ease=l.ease,o.duration=nc(l.duration),o.type="keyframes",o};function hy({keyframes:o,velocity:l=0,power:m=.8,timeConstant:g=325,bounceDamping:S=10,bounceStiffness:C=500,modifyTarget:w,min:c,max:R,restDelta:k=.5,restSpeed:j}){const $=o[0],Y={done:!1,value:$},X=et=>c!==void 0&&et<c||R!==void 0&&et>R,se=et=>c===void 0?R:R===void 0||Math.abs(c-et)<Math.abs(R-et)?c:R;let xe=m*l;const Re=$+xe,ce=w===void 0?Re:w(Re);ce!==Re&&(xe=ce-$);const De=et=>-xe*Math.exp(-et/g),Ce=et=>ce+De(et),Ye=et=>{const ut=De(et),lt=Ce(et);Y.done=Math.abs(ut)<=k,Y.value=Y.done?ce:lt};let Fe,ct;const ht=et=>{X(Y.value)&&(Fe=et,ct=ag({keyframes:[Y.value,se(Y.value)],velocity:t0(Ce,et,Y.value),damping:S,stiffness:C,restDelta:k,restSpeed:j}))};return ht(0),{calculatedDuration:null,next:et=>{let ut=!1;return!ct&&Fe===void 0&&(ut=!0,Ye(et),ht(et)),Fe!==void 0&&et>=Fe?ct.next(et-Fe):(!ut&&Ye(et),Y)}}}function _2(o,l,m){const g=[],S=m||pu.mix||Jx,C=o.length-1;for(let w=0;w<C;w++){let c=S(o[w],o[w+1]);if(l){const R=Array.isArray(l)?l[w]||Mo:l;c=Up(R,c)}g.push(c)}return g}function v2(o,l,{clamp:m=!0,ease:g,mixer:S}={}){const C=o.length;if(qy(C===l.length),C===1)return()=>l[0];if(C===2&&l[0]===l[1])return()=>l[1];const w=o[0]===o[1];o[0]>o[C-1]&&(o=[...o].reverse(),l=[...l].reverse());const c=_2(l,g,S),R=c.length,k=j=>{if(w&&j<o[0])return l[0];let $=0;if(R>1)for(;$<o.length-2&&!(j<o[$+1]);$++);const Y=Rp(o[$],o[$+1],j);return c[$](Y)};return m?j=>k(fu(o[0],o[C-1],j)):k}function x2(o,l){const m=o[o.length-1];for(let g=1;g<=l;g++){const S=Rp(0,l,g);o.push(qn(m,1,S))}}function b2(o){const l=[0];return x2(l,o.length-1),l}function w2(o,l){return o.map(m=>m*l)}function T2(o,l){return o.map(()=>l||Gx).splice(0,o.length-1)}function Cp({duration:o=300,keyframes:l,times:m,ease:g="easeInOut"}){const S=kw(g)?g.map(V_):V_(g),C={done:!1,value:l[0]},w=w2(m&&m.length===l.length?m:b2(l),o),c=v2(w,l,{ease:Array.isArray(S)?S:T2(l,S)});return{calculatedDuration:o,next:R=>(C.value=c(R),C.done=R>=o,C)}}const S2=o=>o!==null;function i_(o,{repeat:l,repeatType:m="loop"},g,S=1){const C=o.filter(S2),c=S<0||l&&m!=="loop"&&l%2===1?0:C.length-1;return!c||g===void 0?C[c]:g}const M2={decay:hy,inertia:hy,tween:Cp,keyframes:Cp,spring:ag};function i0(o){typeof o.type=="string"&&(o.type=M2[o.type])}class n_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(l=>{this.resolve=l})}notifyFinished(){this.resolve()}then(l,m){return this.finished.then(l,m)}}const E2=o=>o/100;class r_ extends n_{constructor(l){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:m}=this.options;m&&m.updatedAt!==fs.now()&&this.tick(fs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=l,this.initAnimation(),this.play(),l.autoplay===!1&&this.pause()}initAnimation(){const{options:l}=this;i0(l);const{type:m=Cp,repeat:g=0,repeatDelay:S=0,repeatType:C,velocity:w=0}=l;let{keyframes:c}=l;const R=m||Cp;R!==Cp&&typeof c[0]!="number"&&(this.mixKeyframes=Up(E2,Jx(c[0],c[1])),c=[0,100]);const k=R({...l,keyframes:c});C==="mirror"&&(this.mirroredGenerator=R({...l,keyframes:[...c].reverse(),velocity:-w})),k.calculatedDuration===null&&(k.calculatedDuration=t_(k));const{calculatedDuration:j}=k;this.calculatedDuration=j,this.resolvedDuration=j+S,this.totalDuration=this.resolvedDuration*(g+1)-S,this.generator=k}updateTime(l){const m=Math.round(l-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=m}tick(l,m=!1){const{generator:g,totalDuration:S,mixKeyframes:C,mirroredGenerator:w,resolvedDuration:c,calculatedDuration:R}=this;if(this.startTime===null)return g.next(0);const{delay:k=0,keyframes:j,repeat:$,repeatType:Y,repeatDelay:X,type:se,onUpdate:xe,finalKeyframe:Re}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,l):this.speed<0&&(this.startTime=Math.min(l-S/this.speed,this.startTime)),m?this.currentTime=l:this.updateTime(l);const ce=this.currentTime-k*(this.playbackSpeed>=0?1:-1),De=this.playbackSpeed>=0?ce<0:ce>S;this.currentTime=Math.max(ce,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=S);let Ce=this.currentTime,Ye=g;if($){const et=Math.min(this.currentTime,S)/c;let ut=Math.floor(et),lt=et%1;!lt&&et>=1&&(lt=1),lt===1&&ut--,ut=Math.min(ut,$+1),!!(ut%2)&&(Y==="reverse"?(lt=1-lt,X&&(lt-=X/c)):Y==="mirror"&&(Ye=w)),Ce=fu(0,1,lt)*c}const Fe=De?{done:!1,value:j[0]}:Ye.next(Ce);C&&(Fe.value=C(Fe.value));let{done:ct}=Fe;!De&&R!==null&&(ct=this.playbackSpeed>=0?this.currentTime>=S:this.currentTime<=0);const ht=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ct);return ht&&se!==hy&&(Fe.value=i_(j,this.options,Re,this.speed)),xe&&xe(Fe.value),ht&&this.finish(),Fe}then(l,m){return this.finished.then(l,m)}get duration(){return rc(this.calculatedDuration)}get time(){return rc(this.currentTime)}set time(l){l=nc(l),this.currentTime=l,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=l:this.driver&&(this.startTime=this.driver.now()-l/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(l){this.updateTime(fs.now());const m=this.playbackSpeed!==l;this.playbackSpeed=l,m&&(this.time=rc(this.currentTime))}play(){if(this.isStopped)return;const{driver:l=c2,startTime:m}=this.options;this.driver||(this.driver=l(S=>this.tick(S))),this.options.onPlay?.();const g=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=g):this.holdTime!==null?this.startTime=g-this.holdTime:this.startTime||(this.startTime=m??g),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(l){return this.startTime=0,this.tick(l,!0)}attachTimeline(l){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),l.observe(this)}}function C2(o){for(let l=1;l<o.length;l++)o[l]??(o[l]=o[l-1])}const ud=o=>o*180/Math.PI,dy=o=>{const l=ud(Math.atan2(o[1],o[0]));return fy(l)},A2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:o=>(Math.abs(o[0])+Math.abs(o[3]))/2,rotate:dy,rotateZ:dy,skewX:o=>ud(Math.atan(o[1])),skewY:o=>ud(Math.atan(o[2])),skew:o=>(Math.abs(o[1])+Math.abs(o[2]))/2},fy=o=>(o=o%360,o<0&&(o+=360),o),H_=dy,X_=o=>Math.sqrt(o[0]*o[0]+o[1]*o[1]),Y_=o=>Math.sqrt(o[4]*o[4]+o[5]*o[5]),P2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X_,scaleY:Y_,scale:o=>(X_(o)+Y_(o))/2,rotateX:o=>fy(ud(Math.atan2(o[6],o[5]))),rotateY:o=>fy(ud(Math.atan2(-o[2],o[0]))),rotateZ:H_,rotate:H_,skewX:o=>ud(Math.atan(o[4])),skewY:o=>ud(Math.atan(o[1])),skew:o=>(Math.abs(o[1])+Math.abs(o[4]))/2};function py(o){return o.includes("scale")?1:0}function my(o,l){if(!o||o==="none")return py(l);const m=o.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let g,S;if(m)g=P2,S=m;else{const c=o.match(/^matrix\(([-\d.e\s,]+)\)$/u);g=A2,S=c}if(!S)return py(l);const C=g[l],w=S[1].split(",").map(I2);return typeof C=="function"?C(w):w[C]}const z2=(o,l)=>{const{transform:m="none"}=getComputedStyle(o);return my(m,l)};function I2(o){return parseFloat(o.trim())}const Sf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mf=new Set(Sf),W_=o=>o===Tf||o===ri,D2=new Set(["x","y","z"]),R2=Sf.filter(o=>!D2.has(o));function k2(o){const l=[];return R2.forEach(m=>{const g=o.getValue(m);g!==void 0&&(l.push([m,g.get()]),g.set(m.startsWith("scale")?1:0))}),l}const hd={width:({x:o},{paddingLeft:l="0",paddingRight:m="0"})=>o.max-o.min-parseFloat(l)-parseFloat(m),height:({y:o},{paddingTop:l="0",paddingBottom:m="0"})=>o.max-o.min-parseFloat(l)-parseFloat(m),top:(o,{top:l})=>parseFloat(l),left:(o,{left:l})=>parseFloat(l),bottom:({y:o},{top:l})=>parseFloat(l)+(o.max-o.min),right:({x:o},{left:l})=>parseFloat(l)+(o.max-o.min),x:(o,{transform:l})=>my(l,"x"),y:(o,{transform:l})=>my(l,"y")};hd.translateX=hd.x;hd.translateY=hd.y;const dd=new Set;let gy=!1,yy=!1,_y=!1;function n0(){if(yy){const o=Array.from(dd).filter(g=>g.needsMeasurement),l=new Set(o.map(g=>g.element)),m=new Map;l.forEach(g=>{const S=k2(g);S.length&&(m.set(g,S),g.render())}),o.forEach(g=>g.measureInitialState()),l.forEach(g=>{g.render();const S=m.get(g);S&&S.forEach(([C,w])=>{g.getValue(C)?.set(w)})}),o.forEach(g=>g.measureEndState()),o.forEach(g=>{g.suspendedScrollY!==void 0&&window.scrollTo(0,g.suspendedScrollY)})}yy=!1,gy=!1,dd.forEach(o=>o.complete(_y)),dd.clear()}function r0(){dd.forEach(o=>{o.readKeyframes(),o.needsMeasurement&&(yy=!0)})}function L2(){_y=!0,r0(),n0(),_y=!1}class a_{constructor(l,m,g,S,C,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...l],this.onComplete=m,this.name=g,this.motionValue=S,this.element=C,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(dd.add(this),gy||(gy=!0,jn.read(r0),jn.resolveKeyframes(n0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:l,name:m,element:g,motionValue:S}=this;if(l[0]===null){const C=S?.get(),w=l[l.length-1];if(C!==void 0)l[0]=C;else if(g&&m){const c=g.readValue(m,w);c!=null&&(l[0]=c)}l[0]===void 0&&(l[0]=w),S&&C===void 0&&S.set(l[0])}C2(l)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(l=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,l),dd.delete(this)}cancel(){this.state==="scheduled"&&(dd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const O2=o=>o.startsWith("--");function B2(o,l,m){O2(l)?o.style.setProperty(l,m):o.style[l]=m}const j2=$y(()=>window.ScrollTimeline!==void 0),N2={};function F2(o,l){const m=$y(o);return()=>N2[l]??m()}const a0=F2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mp=([o,l,m,g])=>`cubic-bezier(${o}, ${l}, ${m}, ${g})`,K_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mp([0,.65,.55,1]),circOut:Mp([.55,0,1,.45]),backIn:Mp([.31,.01,.66,-.59]),backOut:Mp([.33,1.53,.69,.99])};function s0(o,l){if(o)return typeof o=="function"?a0()?e0(o,l):"ease-out":Zx(o)?Mp(o):Array.isArray(o)?o.map(m=>s0(m,l)||K_.easeOut):K_[o]}function V2(o,l,m,{delay:g=0,duration:S=300,repeat:C=0,repeatType:w="loop",ease:c="easeOut",times:R}={},k=void 0){const j={[l]:m};R&&(j.offset=R);const $=s0(c,S);Array.isArray($)&&(j.easing=$);const Y={delay:g,duration:S,easing:Array.isArray($)?"linear":$,fill:"both",iterations:C+1,direction:w==="reverse"?"alternate":"normal"};return k&&(Y.pseudoElement=k),o.animate(j,Y)}function o0(o){return typeof o=="function"&&"applyToOptions"in o}function U2({type:o,...l}){return o0(o)&&a0()?o.applyToOptions(l):(l.duration??(l.duration=300),l.ease??(l.ease="easeOut"),l)}class G2 extends n_{constructor(l){if(super(),this.finishedTime=null,this.isStopped=!1,!l)return;const{element:m,name:g,keyframes:S,pseudoElement:C,allowFlatten:w=!1,finalKeyframe:c,onComplete:R}=l;this.isPseudoElement=!!C,this.allowFlatten=w,this.options=l,qy(typeof l.type!="string");const k=U2(l);this.animation=V2(m,g,S,k,C),k.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!C){const j=i_(S,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(j):B2(m,g,j),this.animation.cancel()}R?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:l}=this;l==="idle"||l==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const l=this.animation.effect?.getComputedTiming?.().duration||0;return rc(Number(l))}get time(){return rc(Number(this.animation.currentTime)||0)}set time(l){this.finishedTime=null,this.animation.currentTime=nc(l)}get speed(){return this.animation.playbackRate}set speed(l){l<0&&(this.finishedTime=null),this.animation.playbackRate=l}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(l){this.animation.startTime=l}attachTimeline({timeline:l,observe:m}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,l&&j2()?(this.animation.timeline=l,Mo):m(this)}}const l0={anticipate:Fx,backInOut:Nx,circInOut:Ux};function Z2(o){return o in l0}function q2(o){typeof o.ease=="string"&&Z2(o.ease)&&(o.ease=l0[o.ease])}const Q_=10;class $2 extends G2{constructor(l){q2(l),i0(l),super(l),l.startTime&&(this.startTime=l.startTime),this.options=l}updateMotionValue(l){const{motionValue:m,onUpdate:g,onComplete:S,element:C,...w}=this.options;if(!m)return;if(l!==void 0){m.set(l);return}const c=new r_({...w,autoplay:!1}),R=nc(this.finishedTime??this.time);m.setWithVelocity(c.sample(R-Q_).value,c.sample(R).value,Q_),c.stop()}}const J_=(o,l)=>l==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(oh.test(o)||o==="0")&&!o.startsWith("url("));function H2(o){const l=o[0];if(o.length===1)return!0;for(let m=0;m<o.length;m++)if(o[m]!==l)return!0}function X2(o,l,m,g){const S=o[0];if(S===null)return!1;if(l==="display"||l==="visibility")return!0;const C=o[o.length-1],w=J_(S,l),c=J_(C,l);return!w||!c?!1:H2(o)||(m==="spring"||o0(m))&&g}function vy(o){o.duration=0,o.type}const Y2=new Set(["opacity","clipPath","filter","transform"]),W2=$y(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function K2(o){const{motionValue:l,name:m,repeatDelay:g,repeatType:S,damping:C,type:w}=o;if(!(l?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:R,transformTemplate:k}=l.owner.getProps();return W2()&&m&&Y2.has(m)&&(m!=="transform"||!k)&&!R&&!g&&S!=="mirror"&&C!==0&&w!=="inertia"}const Q2=40;class J2 extends n_{constructor({autoplay:l=!0,delay:m=0,type:g="keyframes",repeat:S=0,repeatDelay:C=0,repeatType:w="loop",keyframes:c,name:R,motionValue:k,element:j,...$}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=fs.now();const Y={autoplay:l,delay:m,type:g,repeat:S,repeatDelay:C,repeatType:w,name:R,motionValue:k,element:j,...$},X=j?.KeyframeResolver||a_;this.keyframeResolver=new X(c,(se,xe,Re)=>this.onKeyframesResolved(se,xe,Y,!Re),R,k,j),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(l,m,g,S){this.keyframeResolver=void 0;const{name:C,type:w,velocity:c,delay:R,isHandoff:k,onUpdate:j}=g;this.resolvedAt=fs.now(),X2(l,C,w,c)||((pu.instantAnimations||!R)&&j?.(i_(l,g,m)),l[0]=l[l.length-1],vy(g),g.repeat=0);const Y={startTime:S?this.resolvedAt?this.resolvedAt-this.createdAt>Q2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:m,...g,keyframes:l},X=!k&&K2(Y)?new $2({...Y,element:Y.motionValue.owner.current}):new r_(Y);X.finished.then(()=>this.notifyFinished()).catch(Mo),this.pendingTimeline&&(this.stopTimeline=X.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=X}get finished(){return this._animation?this.animation.finished:this._finished}then(l,m){return this.finished.finally(l).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),L2()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(l){this.animation.time=l}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(l){this.animation.speed=l}get startTime(){return this.animation.startTime}attachTimeline(l){return this._animation?this.stopTimeline=this.animation.attachTimeline(l):this.pendingTimeline=l,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const eT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tT(o){const l=eT.exec(o);if(!l)return[,];const[,m,g,S]=l;return[`--${m??g}`,S]}function c0(o,l,m=1){const[g,S]=tT(o);if(!g)return;const C=window.getComputedStyle(l).getPropertyValue(g);if(C){const w=C.trim();return Ix(w)?parseFloat(w):w}return Ky(S)?c0(S,l,m+1):S}function s_(o,l){return o?.[l]??o?.default??o}const u0=new Set(["width","height","top","left","right","bottom",...Sf]),iT={test:o=>o==="auto",parse:o=>o},h0=o=>l=>l.test(o),d0=[Tf,ri,ac,rh,Hw,$w,iT],ev=o=>d0.find(h0(o));function nT(o){return typeof o=="number"?o===0:o!==null?o==="none"||o==="0"||Rx(o):!0}const rT=new Set(["brightness","contrast","saturate","opacity"]);function aT(o){const[l,m]=o.slice(0,-1).split("(");if(l==="drop-shadow")return o;const[g]=m.match(Qy)||[];if(!g)return o;const S=m.replace(g,"");let C=rT.has(l)?1:0;return g!==m&&(C*=100),l+"("+C+S+")"}const sT=/\b([a-z-]*)\(.*?\)/gu,xy={...oh,getAnimatableNone:o=>{const l=o.match(sT);return l?l.map(aT).join(" "):o}},tv={...Tf,transform:Math.round},oT={rotate:rh,rotateX:rh,rotateY:rh,rotateZ:rh,scale:Fm,scaleX:Fm,scaleY:Fm,scaleZ:Fm,skew:rh,skewX:rh,skewY:rh,distance:ri,translateX:ri,translateY:ri,translateZ:ri,x:ri,y:ri,z:ri,perspective:ri,transformPerspective:ri,opacity:kp,originX:U_,originY:U_,originZ:ri},o_={borderWidth:ri,borderTopWidth:ri,borderRightWidth:ri,borderBottomWidth:ri,borderLeftWidth:ri,borderRadius:ri,radius:ri,borderTopLeftRadius:ri,borderTopRightRadius:ri,borderBottomRightRadius:ri,borderBottomLeftRadius:ri,width:ri,maxWidth:ri,height:ri,maxHeight:ri,top:ri,right:ri,bottom:ri,left:ri,padding:ri,paddingTop:ri,paddingRight:ri,paddingBottom:ri,paddingLeft:ri,margin:ri,marginTop:ri,marginRight:ri,marginBottom:ri,marginLeft:ri,backgroundPositionX:ri,backgroundPositionY:ri,...oT,zIndex:tv,fillOpacity:kp,strokeOpacity:kp,numOctaves:tv},lT={...o_,color:Pr,backgroundColor:Pr,outlineColor:Pr,fill:Pr,stroke:Pr,borderColor:Pr,borderTopColor:Pr,borderRightColor:Pr,borderBottomColor:Pr,borderLeftColor:Pr,filter:xy,WebkitFilter:xy},f0=o=>lT[o];function p0(o,l){let m=f0(o);return m!==xy&&(m=oh),m.getAnimatableNone?m.getAnimatableNone(l):void 0}const cT=new Set(["auto","none","0"]);function uT(o,l,m){let g=0,S;for(;g<o.length&&!S;){const C=o[g];typeof C=="string"&&!cT.has(C)&&Lp(C).values.length&&(S=o[g]),g++}if(S&&m)for(const C of l)o[C]=p0(m,S)}class hT extends a_{constructor(l,m,g,S,C){super(l,m,g,S,C,!0)}readKeyframes(){const{unresolvedKeyframes:l,element:m,name:g}=this;if(!m||!m.current)return;super.readKeyframes();for(let R=0;R<l.length;R++){let k=l[R];if(typeof k=="string"&&(k=k.trim(),Ky(k))){const j=c0(k,m.current);j!==void 0&&(l[R]=j),R===l.length-1&&(this.finalKeyframe=k)}}if(this.resolveNoneKeyframes(),!u0.has(g)||l.length!==2)return;const[S,C]=l,w=ev(S),c=ev(C);if(w!==c)if(W_(w)&&W_(c))for(let R=0;R<l.length;R++){const k=l[R];typeof k=="string"&&(l[R]=parseFloat(k))}else hd[g]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:l,name:m}=this,g=[];for(let S=0;S<l.length;S++)(l[S]===null||nT(l[S]))&&g.push(S);g.length&&uT(l,g,m)}measureInitialState(){const{element:l,unresolvedKeyframes:m,name:g}=this;if(!l||!l.current)return;g==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hd[g](l.measureViewportBox(),window.getComputedStyle(l.current)),m[0]=this.measuredOrigin;const S=m[m.length-1];S!==void 0&&l.getValue(g,S).jump(S,!1)}measureEndState(){const{element:l,name:m,unresolvedKeyframes:g}=this;if(!l||!l.current)return;const S=l.getValue(m);S&&S.jump(this.measuredOrigin,!1);const C=g.length-1,w=g[C];g[C]=hd[m](l.measureViewportBox(),window.getComputedStyle(l.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,R])=>{l.getValue(c).set(R)}),this.resolveNoneKeyframes()}}function dT(o,l,m){if(o instanceof EventTarget)return[o];if(typeof o=="string"){let g=document;const S=m?.[o]??g.querySelectorAll(o);return S?Array.from(S):[]}return Array.from(o)}const m0=(o,l)=>l&&typeof o=="number"?l.transform(o):o;function g0(o){return Dx(o)&&"offsetHeight"in o}const iv=30,fT=o=>!isNaN(parseFloat(o));class pT{constructor(l,m={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=g=>{const S=fs.now();if(this.updatedAt!==S&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(g),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const C of this.dependents)C.dirty()},this.hasAnimated=!1,this.setCurrent(l),this.owner=m.owner}setCurrent(l){this.current=l,this.updatedAt=fs.now(),this.canTrackVelocity===null&&l!==void 0&&(this.canTrackVelocity=fT(this.current))}setPrevFrameValue(l=this.current){this.prevFrameValue=l,this.prevUpdatedAt=this.updatedAt}onChange(l){return this.on("change",l)}on(l,m){this.events[l]||(this.events[l]=new Hy);const g=this.events[l].add(m);return l==="change"?()=>{g(),jn.read(()=>{this.events.change.getSize()||this.stop()})}:g}clearListeners(){for(const l in this.events)this.events[l].clear()}attach(l,m){this.passiveEffect=l,this.stopPassiveEffect=m}set(l){this.passiveEffect?this.passiveEffect(l,this.updateAndNotify):this.updateAndNotify(l)}setWithVelocity(l,m,g){this.set(m),this.prev=void 0,this.prevFrameValue=l,this.prevUpdatedAt=this.updatedAt-g}jump(l,m=!0){this.updateAndNotify(l),this.prev=l,this.prevUpdatedAt=this.prevFrameValue=void 0,m&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(l){this.dependents||(this.dependents=new Set),this.dependents.add(l)}removeDependent(l){this.dependents&&this.dependents.delete(l)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const l=fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||l-this.updatedAt>iv)return 0;const m=Math.min(this.updatedAt-this.prevUpdatedAt,iv);return kx(parseFloat(this.current)-parseFloat(this.prevFrameValue),m)}start(l){return this.stop(),new Promise(m=>{this.hasAnimated=!0,this.animation=l(m),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xf(o,l){return new pT(o,l)}const{schedule:l_}=qx(queueMicrotask,!1),dl={x:!1,y:!1};function y0(){return dl.x||dl.y}function mT(o){return o==="x"||o==="y"?dl[o]?null:(dl[o]=!0,()=>{dl[o]=!1}):dl.x||dl.y?null:(dl.x=dl.y=!0,()=>{dl.x=dl.y=!1})}function _0(o,l){const m=dT(o),g=new AbortController,S={passive:!0,...l,signal:g.signal};return[m,S,()=>g.abort()]}function nv(o){return!(o.pointerType==="touch"||y0())}function gT(o,l,m={}){const[g,S,C]=_0(o,m),w=c=>{if(!nv(c))return;const{target:R}=c,k=l(R,c);if(typeof k!="function"||!R)return;const j=$=>{nv($)&&(k($),R.removeEventListener("pointerleave",j))};R.addEventListener("pointerleave",j,S)};return g.forEach(c=>{c.addEventListener("pointerenter",w,S)}),C}const v0=(o,l)=>l?o===l?!0:v0(o,l.parentElement):!1,c_=o=>o.pointerType==="mouse"?typeof o.button!="number"||o.button<=0:o.isPrimary!==!1,yT=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _T(o){return yT.has(o.tagName)||o.tabIndex!==-1}const Ym=new WeakSet;function rv(o){return l=>{l.key==="Enter"&&o(l)}}function Gg(o,l){o.dispatchEvent(new PointerEvent("pointer"+l,{isPrimary:!0,bubbles:!0}))}const vT=(o,l)=>{const m=o.currentTarget;if(!m)return;const g=rv(()=>{if(Ym.has(m))return;Gg(m,"down");const S=rv(()=>{Gg(m,"up")}),C=()=>Gg(m,"cancel");m.addEventListener("keyup",S,l),m.addEventListener("blur",C,l)});m.addEventListener("keydown",g,l),m.addEventListener("blur",()=>m.removeEventListener("keydown",g),l)};function av(o){return c_(o)&&!y0()}function xT(o,l,m={}){const[g,S,C]=_0(o,m),w=c=>{const R=c.currentTarget;if(!av(c))return;Ym.add(R);const k=l(R,c),j=(X,se)=>{window.removeEventListener("pointerup",$),window.removeEventListener("pointercancel",Y),Ym.has(R)&&Ym.delete(R),av(X)&&typeof k=="function"&&k(X,{success:se})},$=X=>{j(X,R===window||R===document||m.useGlobalTarget||v0(R,X.target))},Y=X=>{j(X,!1)};window.addEventListener("pointerup",$,S),window.addEventListener("pointercancel",Y,S)};return g.forEach(c=>{(m.useGlobalTarget?window:c).addEventListener("pointerdown",w,S),g0(c)&&(c.addEventListener("focus",k=>vT(k,S)),!_T(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),C}function x0(o){return Dx(o)&&"ownerSVGElement"in o}function bT(o){return x0(o)&&o.tagName==="svg"}const Ca=o=>!!(o&&o.getVelocity),wT=[...d0,Pr,oh],TT=o=>wT.find(h0(o)),u_=Ae.createContext({transformPagePoint:o=>o,isStatic:!1,reducedMotion:"never"});class ST extends Ae.Component{getSnapshotBeforeUpdate(l){const m=this.props.childRef.current;if(m&&l.isPresent&&!this.props.isPresent){const g=m.offsetParent,S=g0(g)&&g.offsetWidth||0,C=this.props.sizeRef.current;C.height=m.offsetHeight||0,C.width=m.offsetWidth||0,C.top=m.offsetTop,C.left=m.offsetLeft,C.right=S-C.width-C.left}return null}componentDidUpdate(){}render(){return this.props.children}}function MT({children:o,isPresent:l,anchorX:m,root:g}){const S=Ae.useId(),C=Ae.useRef(null),w=Ae.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=Ae.useContext(u_);return Ae.useInsertionEffect(()=>{const{width:R,height:k,top:j,left:$,right:Y}=w.current;if(l||!C.current||!R||!k)return;const X=m==="left"?`left: ${$}`:`right: ${Y}`;C.current.dataset.motionPopId=S;const se=document.createElement("style");c&&(se.nonce=c);const xe=g??document.head;return xe.appendChild(se),se.sheet&&se.sheet.insertRule(`
          [data-motion-pop-id="${S}"] {
            position: absolute !important;
            width: ${R}px !important;
            height: ${k}px !important;
            ${X}px !important;
            top: ${j}px !important;
          }
        `),()=>{xe.contains(se)&&xe.removeChild(se)}},[l]),ge.jsx(ST,{isPresent:l,childRef:C,sizeRef:w,children:Ae.cloneElement(o,{ref:C})})}const ET=({children:o,initial:l,isPresent:m,onExitComplete:g,custom:S,presenceAffectsLayout:C,mode:w,anchorX:c,root:R})=>{const k=Vy(CT),j=Ae.useId();let $=!0,Y=Ae.useMemo(()=>($=!1,{id:j,initial:l,isPresent:m,custom:S,onExitComplete:X=>{k.set(X,!0);for(const se of k.values())if(!se)return;g&&g()},register:X=>(k.set(X,!1),()=>k.delete(X))}),[m,k,g]);return C&&$&&(Y={...Y}),Ae.useMemo(()=>{k.forEach((X,se)=>k.set(se,!1))},[m]),Ae.useEffect(()=>{!m&&!k.size&&g&&g()},[m]),w==="popLayout"&&(o=ge.jsx(MT,{isPresent:m,anchorX:c,root:R,children:o})),ge.jsx(pg.Provider,{value:Y,children:o})};function CT(){return new Map}function b0(o=!0){const l=Ae.useContext(pg);if(l===null)return[!0,null];const{isPresent:m,onExitComplete:g,register:S}=l,C=Ae.useId();Ae.useEffect(()=>{if(o)return S(C)},[o]);const w=Ae.useCallback(()=>o&&g&&g(C),[C,g,o]);return!m&&g?[!1,w]:[!0]}const Vm=o=>o.key||"";function sv(o){const l=[];return Ae.Children.forEach(o,m=>{Ae.isValidElement(m)&&l.push(m)}),l}const by=({children:o,custom:l,initial:m=!0,onExitComplete:g,presenceAffectsLayout:S=!0,mode:C="sync",propagate:w=!1,anchorX:c="left",root:R})=>{const[k,j]=b0(w),$=Ae.useMemo(()=>sv(o),[o]),Y=w&&!k?[]:$.map(Vm),X=Ae.useRef(!0),se=Ae.useRef($),xe=Vy(()=>new Map),[Re,ce]=Ae.useState($),[De,Ce]=Ae.useState($);zx(()=>{X.current=!1,se.current=$;for(let ct=0;ct<De.length;ct++){const ht=Vm(De[ct]);Y.includes(ht)?xe.delete(ht):xe.get(ht)!==!0&&xe.set(ht,!1)}},[De,Y.length,Y.join("-")]);const Ye=[];if($!==Re){let ct=[...$];for(let ht=0;ht<De.length;ht++){const et=De[ht],ut=Vm(et);Y.includes(ut)||(ct.splice(ht,0,et),Ye.push(et))}return C==="wait"&&Ye.length&&(ct=Ye),Ce(sv(ct)),ce($),null}const{forceRender:Fe}=Ae.useContext(Fy);return ge.jsx(ge.Fragment,{children:De.map(ct=>{const ht=Vm(ct),et=w&&!k?!1:$===De||Y.includes(ht),ut=()=>{if(xe.has(ht))xe.set(ht,!0);else return;let lt=!0;xe.forEach(Tt=>{Tt||(lt=!1)}),lt&&(Fe?.(),Ce(se.current),w&&j?.(),g&&g())};return ge.jsx(ET,{isPresent:et,initial:!X.current||m?void 0:!1,custom:l,presenceAffectsLayout:S,mode:C,root:R,onExitComplete:et?void 0:ut,anchorX:c,children:ct},ht)})})},w0=Ae.createContext({strict:!1}),ov={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bf={};for(const o in ov)bf[o]={isEnabled:l=>ov[o].some(m=>!!l[m])};function AT(o){for(const l in o)bf[l]={...bf[l],...o[l]}}const PT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sg(o){return o.startsWith("while")||o.startsWith("drag")&&o!=="draggable"||o.startsWith("layout")||o.startsWith("onTap")||o.startsWith("onPan")||o.startsWith("onLayout")||PT.has(o)}let T0=o=>!sg(o);function zT(o){typeof o=="function"&&(T0=l=>l.startsWith("on")?!sg(l):o(l))}try{zT(require("@emotion/is-prop-valid").default)}catch{}function IT(o,l,m){const g={};for(const S in o)S==="values"&&typeof o.values=="object"||(T0(S)||m===!0&&sg(S)||!l&&!sg(S)||o.draggable&&S.startsWith("onDrag"))&&(g[S]=o[S]);return g}const mg=Ae.createContext({});function gg(o){return o!==null&&typeof o=="object"&&typeof o.start=="function"}function Op(o){return typeof o=="string"||Array.isArray(o)}const h_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d_=["initial",...h_];function yg(o){return gg(o.animate)||d_.some(l=>Op(o[l]))}function S0(o){return!!(yg(o)||o.variants)}function DT(o,l){if(yg(o)){const{initial:m,animate:g}=o;return{initial:m===!1||Op(m)?m:void 0,animate:Op(g)?g:void 0}}return o.inherit!==!1?l:{}}function RT(o){const{initial:l,animate:m}=DT(o,Ae.useContext(mg));return Ae.useMemo(()=>({initial:l,animate:m}),[lv(l),lv(m)])}function lv(o){return Array.isArray(o)?o.join(" "):o}const Bp={};function kT(o){for(const l in o)Bp[l]=o[l],Wy(l)&&(Bp[l].isCSSVariable=!0)}function M0(o,{layout:l,layoutId:m}){return Mf.has(o)||o.startsWith("origin")||(l||m!==void 0)&&(!!Bp[o]||o==="opacity")}const LT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OT=Sf.length;function BT(o,l,m){let g="",S=!0;for(let C=0;C<OT;C++){const w=Sf[C],c=o[w];if(c===void 0)continue;let R=!0;if(typeof c=="number"?R=c===(w.startsWith("scale")?1:0):R=parseFloat(c)===0,!R||m){const k=m0(c,o_[w]);if(!R){S=!1;const j=LT[w]||w;g+=`${j}(${k}) `}m&&(l[w]=k)}}return g=g.trim(),m?g=m(l,S?"":g):S&&(g="none"),g}function f_(o,l,m){const{style:g,vars:S,transformOrigin:C}=o;let w=!1,c=!1;for(const R in l){const k=l[R];if(Mf.has(R)){w=!0;continue}else if(Wy(R)){S[R]=k;continue}else{const j=m0(k,o_[R]);R.startsWith("origin")?(c=!0,C[R]=j):g[R]=j}}if(l.transform||(w||m?g.transform=BT(l,o.transform,m):g.transform&&(g.transform="none")),c){const{originX:R="50%",originY:k="50%",originZ:j=0}=C;g.transformOrigin=`${R} ${k} ${j}`}}const p_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E0(o,l,m){for(const g in l)!Ca(l[g])&&!M0(g,m)&&(o[g]=l[g])}function jT({transformTemplate:o},l){return Ae.useMemo(()=>{const m=p_();return f_(m,l,o),Object.assign({},m.vars,m.style)},[l])}function NT(o,l){const m=o.style||{},g={};return E0(g,m,o),Object.assign(g,jT(o,l)),g}function FT(o,l){const m={},g=NT(o,l);return o.drag&&o.dragListener!==!1&&(m.draggable=!1,g.userSelect=g.WebkitUserSelect=g.WebkitTouchCallout="none",g.touchAction=o.drag===!0?"none":`pan-${o.drag==="x"?"y":"x"}`),o.tabIndex===void 0&&(o.onTap||o.onTapStart||o.whileTap)&&(m.tabIndex=0),m.style=g,m}const VT={offset:"stroke-dashoffset",array:"stroke-dasharray"},UT={offset:"strokeDashoffset",array:"strokeDasharray"};function GT(o,l,m=1,g=0,S=!0){o.pathLength=1;const C=S?VT:UT;o[C.offset]=ri.transform(-g);const w=ri.transform(l),c=ri.transform(m);o[C.array]=`${w} ${c}`}function C0(o,{attrX:l,attrY:m,attrScale:g,pathLength:S,pathSpacing:C=1,pathOffset:w=0,...c},R,k,j){if(f_(o,c,k),R){o.style.viewBox&&(o.attrs.viewBox=o.style.viewBox);return}o.attrs=o.style,o.style={};const{attrs:$,style:Y}=o;$.transform&&(Y.transform=$.transform,delete $.transform),(Y.transform||$.transformOrigin)&&(Y.transformOrigin=$.transformOrigin??"50% 50%",delete $.transformOrigin),Y.transform&&(Y.transformBox=j?.transformBox??"fill-box",delete $.transformBox),l!==void 0&&($.x=l),m!==void 0&&($.y=m),g!==void 0&&($.scale=g),S!==void 0&&GT($,S,C,w,!1)}const A0=()=>({...p_(),attrs:{}}),P0=o=>typeof o=="string"&&o.toLowerCase()==="svg";function ZT(o,l,m,g){const S=Ae.useMemo(()=>{const C=A0();return C0(C,l,P0(g),o.transformTemplate,o.style),{...C.attrs,style:{...C.style}}},[l]);if(o.style){const C={};E0(C,o.style,o),S.style={...C,...S.style}}return S}const qT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function m_(o){return typeof o!="string"||o.includes("-")?!1:!!(qT.indexOf(o)>-1||/[A-Z]/u.test(o))}function $T(o,l,m,{latestValues:g},S,C=!1){const c=(m_(o)?ZT:FT)(l,g,S,o),R=IT(l,typeof o=="string",C),k=o!==Ae.Fragment?{...R,...c,ref:m}:{},{children:j}=l,$=Ae.useMemo(()=>Ca(j)?j.get():j,[j]);return Ae.createElement(o,{...k,children:$})}function cv(o){const l=[{},{}];return o?.values.forEach((m,g)=>{l[0][g]=m.get(),l[1][g]=m.getVelocity()}),l}function g_(o,l,m,g){if(typeof l=="function"){const[S,C]=cv(g);l=l(m!==void 0?m:o.custom,S,C)}if(typeof l=="string"&&(l=o.variants&&o.variants[l]),typeof l=="function"){const[S,C]=cv(g);l=l(m!==void 0?m:o.custom,S,C)}return l}function Wm(o){return Ca(o)?o.get():o}function HT({scrapeMotionValuesFromProps:o,createRenderState:l},m,g,S){return{latestValues:XT(m,g,S,o),renderState:l()}}function XT(o,l,m,g){const S={},C=g(o,{});for(const Y in C)S[Y]=Wm(C[Y]);let{initial:w,animate:c}=o;const R=yg(o),k=S0(o);l&&k&&!R&&o.inherit!==!1&&(w===void 0&&(w=l.initial),c===void 0&&(c=l.animate));let j=m?m.initial===!1:!1;j=j||w===!1;const $=j?c:w;if($&&typeof $!="boolean"&&!gg($)){const Y=Array.isArray($)?$:[$];for(let X=0;X<Y.length;X++){const se=g_(o,Y[X]);if(se){const{transitionEnd:xe,transition:Re,...ce}=se;for(const De in ce){let Ce=ce[De];if(Array.isArray(Ce)){const Ye=j?Ce.length-1:0;Ce=Ce[Ye]}Ce!==null&&(S[De]=Ce)}for(const De in xe)S[De]=xe[De]}}}return S}const z0=o=>(l,m)=>{const g=Ae.useContext(mg),S=Ae.useContext(pg),C=()=>HT(o,l,g,S);return m?C():Vy(C)};function y_(o,l,m){const{style:g}=o,S={};for(const C in g)(Ca(g[C])||l.style&&Ca(l.style[C])||M0(C,o)||m?.getValue(C)?.liveStyle!==void 0)&&(S[C]=g[C]);return S}const YT=z0({scrapeMotionValuesFromProps:y_,createRenderState:p_});function I0(o,l,m){const g=y_(o,l,m);for(const S in o)if(Ca(o[S])||Ca(l[S])){const C=Sf.indexOf(S)!==-1?"attr"+S.charAt(0).toUpperCase()+S.substring(1):S;g[C]=o[S]}return g}const WT=z0({scrapeMotionValuesFromProps:I0,createRenderState:A0}),KT=Symbol.for("motionComponentSymbol");function pf(o){return o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}function QT(o,l,m){return Ae.useCallback(g=>{g&&o.onMount&&o.onMount(g),l&&(g?l.mount(g):l.unmount()),m&&(typeof m=="function"?m(g):pf(m)&&(m.current=g))},[l])}const __=o=>o.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JT="framerAppearId",D0="data-"+__(JT),R0=Ae.createContext({});function eS(o,l,m,g,S){const{visualElement:C}=Ae.useContext(mg),w=Ae.useContext(w0),c=Ae.useContext(pg),R=Ae.useContext(u_).reducedMotion,k=Ae.useRef(null);g=g||w.renderer,!k.current&&g&&(k.current=g(o,{visualState:l,parent:C,props:m,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:R}));const j=k.current,$=Ae.useContext(R0);j&&!j.projection&&S&&(j.type==="html"||j.type==="svg")&&tS(k.current,m,S,$);const Y=Ae.useRef(!1);Ae.useInsertionEffect(()=>{j&&Y.current&&j.update(m,c)});const X=m[D0],se=Ae.useRef(!!X&&!window.MotionHandoffIsComplete?.(X)&&window.MotionHasOptimisedAnimation?.(X));return zx(()=>{j&&(Y.current=!0,window.MotionIsMounted=!0,j.updateFeatures(),j.scheduleRenderMicrotask(),se.current&&j.animationState&&j.animationState.animateChanges())}),Ae.useEffect(()=>{j&&(!se.current&&j.animationState&&j.animationState.animateChanges(),se.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(X)}),se.current=!1),j.enteringChildren=void 0)}),j}function tS(o,l,m,g){const{layoutId:S,layout:C,drag:w,dragConstraints:c,layoutScroll:R,layoutRoot:k,layoutCrossfade:j}=l;o.projection=new m(o.latestValues,l["data-framer-portal-id"]?void 0:k0(o.parent)),o.projection.setOptions({layoutId:S,layout:C,alwaysMeasureLayout:!!w||c&&pf(c),visualElement:o,animationType:typeof C=="string"?C:"both",initialPromotionConfig:g,crossfade:j,layoutScroll:R,layoutRoot:k})}function k0(o){if(o)return o.options.allowProjection!==!1?o.projection:k0(o.parent)}function Zg(o,{forwardMotionProps:l=!1}={},m,g){m&&AT(m);const S=m_(o)?WT:YT;function C(c,R){let k;const j={...Ae.useContext(u_),...c,layoutId:iS(c)},{isStatic:$}=j,Y=RT(c),X=S(c,$);if(!$&&Uy){nS();const se=rS(j);k=se.MeasureLayout,Y.visualElement=eS(o,X,j,g,se.ProjectionNode)}return ge.jsxs(mg.Provider,{value:Y,children:[k&&Y.visualElement?ge.jsx(k,{visualElement:Y.visualElement,...j}):null,$T(o,c,QT(X,Y.visualElement,R),X,$,l)]})}C.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const w=Ae.forwardRef(C);return w[KT]=o,w}function iS({layoutId:o}){const l=Ae.useContext(Fy).id;return l&&o!==void 0?l+"-"+o:o}function nS(o,l){Ae.useContext(w0).strict}function rS(o){const{drag:l,layout:m}=bf;if(!l&&!m)return{};const g={...l,...m};return{MeasureLayout:l?.isEnabled(o)||m?.isEnabled(o)?g.MeasureLayout:void 0,ProjectionNode:g.ProjectionNode}}function aS(o,l){if(typeof Proxy>"u")return Zg;const m=new Map,g=(C,w)=>Zg(C,w,o,l),S=(C,w)=>g(C,w);return new Proxy(S,{get:(C,w)=>w==="create"?g:(m.has(w)||m.set(w,Zg(w,void 0,o,l)),m.get(w))})}function L0({top:o,left:l,right:m,bottom:g}){return{x:{min:l,max:m},y:{min:o,max:g}}}function sS({x:o,y:l}){return{top:l.min,right:o.max,bottom:l.max,left:o.min}}function oS(o,l){if(!l)return o;const m=l({x:o.left,y:o.top}),g=l({x:o.right,y:o.bottom});return{top:m.y,left:m.x,bottom:g.y,right:g.x}}function qg(o){return o===void 0||o===1}function wy({scale:o,scaleX:l,scaleY:m}){return!qg(o)||!qg(l)||!qg(m)}function ld(o){return wy(o)||O0(o)||o.z||o.rotate||o.rotateX||o.rotateY||o.skewX||o.skewY}function O0(o){return uv(o.x)||uv(o.y)}function uv(o){return o&&o!=="0%"}function og(o,l,m){const g=o-m,S=l*g;return m+S}function hv(o,l,m,g,S){return S!==void 0&&(o=og(o,S,g)),og(o,m,g)+l}function Ty(o,l=0,m=1,g,S){o.min=hv(o.min,l,m,g,S),o.max=hv(o.max,l,m,g,S)}function B0(o,{x:l,y:m}){Ty(o.x,l.translate,l.scale,l.originPoint),Ty(o.y,m.translate,m.scale,m.originPoint)}const dv=.999999999999,fv=1.0000000000001;function lS(o,l,m,g=!1){const S=m.length;if(!S)return;l.x=l.y=1;let C,w;for(let c=0;c<S;c++){C=m[c],w=C.projectionDelta;const{visualElement:R}=C.options;R&&R.props.style&&R.props.style.display==="contents"||(g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&gf(o,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),w&&(l.x*=w.x.scale,l.y*=w.y.scale,B0(o,w)),g&&ld(C.latestValues)&&gf(o,C.latestValues))}l.x<fv&&l.x>dv&&(l.x=1),l.y<fv&&l.y>dv&&(l.y=1)}function mf(o,l){o.min=o.min+l,o.max=o.max+l}function pv(o,l,m,g,S=.5){const C=qn(o.min,o.max,S);Ty(o,l,m,C,g)}function gf(o,l){pv(o.x,l.x,l.scaleX,l.scale,l.originX),pv(o.y,l.y,l.scaleY,l.scale,l.originY)}function j0(o,l){return L0(oS(o.getBoundingClientRect(),l))}function cS(o,l,m){const g=j0(o,m),{scroll:S}=l;return S&&(mf(g.x,S.offset.x),mf(g.y,S.offset.y)),g}const mv=()=>({translate:0,scale:1,origin:0,originPoint:0}),yf=()=>({x:mv(),y:mv()}),gv=()=>({min:0,max:0}),fr=()=>({x:gv(),y:gv()}),Sy={current:null},N0={current:!1};function uS(){if(N0.current=!0,!!Uy)if(window.matchMedia){const o=window.matchMedia("(prefers-reduced-motion)"),l=()=>Sy.current=o.matches;o.addEventListener("change",l),l()}else Sy.current=!1}const hS=new WeakMap;function dS(o,l,m){for(const g in l){const S=l[g],C=m[g];if(Ca(S))o.addValue(g,S);else if(Ca(C))o.addValue(g,xf(S,{owner:o}));else if(C!==S)if(o.hasValue(g)){const w=o.getValue(g);w.liveStyle===!0?w.jump(S):w.hasAnimated||w.set(S)}else{const w=o.getStaticValue(g);o.addValue(g,xf(w!==void 0?w:S,{owner:o}))}}for(const g in m)l[g]===void 0&&o.removeValue(g);return l}const yv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fS{scrapeMotionValuesFromProps(l,m,g){return{}}constructor({parent:l,props:m,presenceContext:g,reducedMotionConfig:S,blockInitialAnimation:C,visualState:w},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Y=fs.now();this.renderScheduledAt<Y&&(this.renderScheduledAt=Y,jn.render(this.render,!1,!0))};const{latestValues:R,renderState:k}=w;this.latestValues=R,this.baseTarget={...R},this.initialValues=m.initial?{...R}:{},this.renderState=k,this.parent=l,this.props=m,this.presenceContext=g,this.depth=l?l.depth+1:0,this.reducedMotionConfig=S,this.options=c,this.blockInitialAnimation=!!C,this.isControllingVariants=yg(m),this.isVariantNode=S0(m),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(l&&l.current);const{willChange:j,...$}=this.scrapeMotionValuesFromProps(m,{},this);for(const Y in $){const X=$[Y];R[Y]!==void 0&&Ca(X)&&X.set(R[Y])}}mount(l){this.current=l,hS.set(l,this),this.projection&&!this.projection.instance&&this.projection.mount(l),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((m,g)=>this.bindToMotionValue(g,m)),N0.current||uS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sy.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),sh(this.notifyUpdate),sh(this.render),this.valueSubscriptions.forEach(l=>l()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const l in this.events)this.events[l].clear();for(const l in this.features){const m=this.features[l];m&&(m.unmount(),m.isMounted=!1)}this.current=null}addChild(l){this.children.add(l),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(l)}removeChild(l){this.children.delete(l),this.enteringChildren&&this.enteringChildren.delete(l)}bindToMotionValue(l,m){this.valueSubscriptions.has(l)&&this.valueSubscriptions.get(l)();const g=Mf.has(l);g&&this.onBindTransform&&this.onBindTransform();const S=m.on("change",w=>{this.latestValues[l]=w,this.props.onUpdate&&jn.preRender(this.notifyUpdate),g&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let C;window.MotionCheckAppearSync&&(C=window.MotionCheckAppearSync(this,l,m)),this.valueSubscriptions.set(l,()=>{S(),C&&C(),m.owner&&m.stop()})}sortNodePosition(l){return!this.current||!this.sortInstanceNodePosition||this.type!==l.type?0:this.sortInstanceNodePosition(this.current,l.current)}updateFeatures(){let l="animation";for(l in bf){const m=bf[l];if(!m)continue;const{isEnabled:g,Feature:S}=m;if(!this.features[l]&&S&&g(this.props)&&(this.features[l]=new S(this)),this.features[l]){const C=this.features[l];C.isMounted?C.update():(C.mount(),C.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fr()}getStaticValue(l){return this.latestValues[l]}setStaticValue(l,m){this.latestValues[l]=m}update(l,m){(l.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=l,this.prevPresenceContext=this.presenceContext,this.presenceContext=m;for(let g=0;g<yv.length;g++){const S=yv[g];this.propEventSubscriptions[S]&&(this.propEventSubscriptions[S](),delete this.propEventSubscriptions[S]);const C="on"+S,w=l[C];w&&(this.propEventSubscriptions[S]=this.on(S,w))}this.prevMotionValues=dS(this,this.scrapeMotionValuesFromProps(l,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(l){return this.props.variants?this.props.variants[l]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(l){const m=this.getClosestVariantNode();if(m)return m.variantChildren&&m.variantChildren.add(l),()=>m.variantChildren.delete(l)}addValue(l,m){const g=this.values.get(l);m!==g&&(g&&this.removeValue(l),this.bindToMotionValue(l,m),this.values.set(l,m),this.latestValues[l]=m.get())}removeValue(l){this.values.delete(l);const m=this.valueSubscriptions.get(l);m&&(m(),this.valueSubscriptions.delete(l)),delete this.latestValues[l],this.removeValueFromRenderState(l,this.renderState)}hasValue(l){return this.values.has(l)}getValue(l,m){if(this.props.values&&this.props.values[l])return this.props.values[l];let g=this.values.get(l);return g===void 0&&m!==void 0&&(g=xf(m===null?void 0:m,{owner:this}),this.addValue(l,g)),g}readValue(l,m){let g=this.latestValues[l]!==void 0||!this.current?this.latestValues[l]:this.getBaseTargetFromProps(this.props,l)??this.readValueFromInstance(this.current,l,this.options);return g!=null&&(typeof g=="string"&&(Ix(g)||Rx(g))?g=parseFloat(g):!TT(g)&&oh.test(m)&&(g=p0(l,m)),this.setBaseTarget(l,Ca(g)?g.get():g)),Ca(g)?g.get():g}setBaseTarget(l,m){this.baseTarget[l]=m}getBaseTarget(l){const{initial:m}=this.props;let g;if(typeof m=="string"||typeof m=="object"){const C=g_(this.props,m,this.presenceContext?.custom);C&&(g=C[l])}if(m&&g!==void 0)return g;const S=this.getBaseTargetFromProps(this.props,l);return S!==void 0&&!Ca(S)?S:this.initialValues[l]!==void 0&&g===void 0?void 0:this.baseTarget[l]}on(l,m){return this.events[l]||(this.events[l]=new Hy),this.events[l].add(m)}notify(l,...m){this.events[l]&&this.events[l].notify(...m)}scheduleRenderMicrotask(){l_.render(this.render)}}class F0 extends fS{constructor(){super(...arguments),this.KeyframeResolver=hT}sortInstanceNodePosition(l,m){return l.compareDocumentPosition(m)&2?1:-1}getBaseTargetFromProps(l,m){return l.style?l.style[m]:void 0}removeValueFromRenderState(l,{vars:m,style:g}){delete m[l],delete g[l]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:l}=this.props;Ca(l)&&(this.childSubscription=l.on("change",m=>{this.current&&(this.current.textContent=`${m}`)}))}}function V0(o,{style:l,vars:m},g,S){const C=o.style;let w;for(w in l)C[w]=l[w];S?.applyProjectionStyles(C,g);for(w in m)C.setProperty(w,m[w])}function pS(o){return window.getComputedStyle(o)}class mS extends F0{constructor(){super(...arguments),this.type="html",this.renderInstance=V0}readValueFromInstance(l,m){if(Mf.has(m))return this.projection?.isProjecting?py(m):z2(l,m);{const g=pS(l),S=(Wy(m)?g.getPropertyValue(m):g[m])||0;return typeof S=="string"?S.trim():S}}measureInstanceViewportBox(l,{transformPagePoint:m}){return j0(l,m)}build(l,m,g){f_(l,m,g.transformTemplate)}scrapeMotionValuesFromProps(l,m,g){return y_(l,m,g)}}const U0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gS(o,l,m,g){V0(o,l,void 0,g);for(const S in l.attrs)o.setAttribute(U0.has(S)?S:__(S),l.attrs[S])}class yS extends F0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fr}getBaseTargetFromProps(l,m){return l[m]}readValueFromInstance(l,m){if(Mf.has(m)){const g=f0(m);return g&&g.default||0}return m=U0.has(m)?m:__(m),l.getAttribute(m)}scrapeMotionValuesFromProps(l,m,g){return I0(l,m,g)}build(l,m,g){C0(l,m,this.isSVGTag,g.transformTemplate,g.style)}renderInstance(l,m,g,S){gS(l,m,g,S)}mount(l){this.isSVGTag=P0(l.tagName),super.mount(l)}}const _S=(o,l)=>m_(o)?new yS(l):new mS(l,{allowProjection:o!==Ae.Fragment});function _f(o,l,m){const g=o.getProps();return g_(g,l,m!==void 0?m:g.custom,o)}const My=o=>Array.isArray(o);function vS(o,l,m){o.hasValue(l)?o.getValue(l).set(m):o.addValue(l,xf(m))}function xS(o){return My(o)?o[o.length-1]||0:o}function bS(o,l){const m=_f(o,l);let{transitionEnd:g={},transition:S={},...C}=m||{};C={...C,...g};for(const w in C){const c=xS(C[w]);vS(o,w,c)}}function wS(o){return!!(Ca(o)&&o.add)}function Ey(o,l){const m=o.getValue("willChange");if(wS(m))return m.add(l);if(!m&&pu.WillChange){const g=new pu.WillChange("auto");o.addValue("willChange",g),g.add(l)}}function G0(o){return o.props[D0]}const TS=o=>o!==null;function SS(o,{repeat:l,repeatType:m="loop"},g){const S=o.filter(TS),C=l&&m!=="loop"&&l%2===1?0:S.length-1;return S[C]}const MS={type:"spring",stiffness:500,damping:25,restSpeed:10},ES=o=>({type:"spring",stiffness:550,damping:o===0?2*Math.sqrt(550):30,restSpeed:10}),CS={type:"keyframes",duration:.8},AS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PS=(o,{keyframes:l})=>l.length>2?CS:Mf.has(o)?o.startsWith("scale")?ES(l[1]):MS:AS;function zS({when:o,delay:l,delayChildren:m,staggerChildren:g,staggerDirection:S,repeat:C,repeatType:w,repeatDelay:c,from:R,elapsed:k,...j}){return!!Object.keys(j).length}const v_=(o,l,m,g={},S,C)=>w=>{const c=s_(g,o)||{},R=c.delay||g.delay||0;let{elapsed:k=0}=g;k=k-nc(R);const j={keyframes:Array.isArray(m)?m:[null,m],ease:"easeOut",velocity:l.getVelocity(),...c,delay:-k,onUpdate:Y=>{l.set(Y),c.onUpdate&&c.onUpdate(Y)},onComplete:()=>{w(),c.onComplete&&c.onComplete()},name:o,motionValue:l,element:C?void 0:S};zS(c)||Object.assign(j,PS(o,j)),j.duration&&(j.duration=nc(j.duration)),j.repeatDelay&&(j.repeatDelay=nc(j.repeatDelay)),j.from!==void 0&&(j.keyframes[0]=j.from);let $=!1;if((j.type===!1||j.duration===0&&!j.repeatDelay)&&(vy(j),j.delay===0&&($=!0)),(pu.instantAnimations||pu.skipAnimations)&&($=!0,vy(j),j.delay=0),j.allowFlatten=!c.type&&!c.ease,$&&!C&&l.get()!==void 0){const Y=SS(j.keyframes,c);if(Y!==void 0){jn.update(()=>{j.onUpdate(Y),j.onComplete()});return}}return c.isSync?new r_(j):new J2(j)};function IS({protectedKeys:o,needsAnimating:l},m){const g=o.hasOwnProperty(m)&&l[m]!==!0;return l[m]=!1,g}function Z0(o,l,{delay:m=0,transitionOverride:g,type:S}={}){let{transition:C=o.getDefaultTransition(),transitionEnd:w,...c}=l;g&&(C=g);const R=[],k=S&&o.animationState&&o.animationState.getState()[S];for(const j in c){const $=o.getValue(j,o.latestValues[j]??null),Y=c[j];if(Y===void 0||k&&IS(k,j))continue;const X={delay:m,...s_(C||{},j)},se=$.get();if(se!==void 0&&!$.isAnimating&&!Array.isArray(Y)&&Y===se&&!X.velocity)continue;let xe=!1;if(window.MotionHandoffAnimation){const ce=G0(o);if(ce){const De=window.MotionHandoffAnimation(ce,j,jn);De!==null&&(X.startTime=De,xe=!0)}}Ey(o,j),$.start(v_(j,$,Y,o.shouldReduceMotion&&u0.has(j)?{type:!1}:X,o,xe));const Re=$.animation;Re&&R.push(Re)}return w&&Promise.all(R).then(()=>{jn.update(()=>{w&&bS(o,w)})}),R}function q0(o,l,m,g=0,S=1){const C=Array.from(o).sort((k,j)=>k.sortNodePosition(j)).indexOf(l),w=o.size,c=(w-1)*g;return typeof m=="function"?m(C,w):S===1?C*g:c-C*g}function Cy(o,l,m={}){const g=_f(o,l,m.type==="exit"?o.presenceContext?.custom:void 0);let{transition:S=o.getDefaultTransition()||{}}=g||{};m.transitionOverride&&(S=m.transitionOverride);const C=g?()=>Promise.all(Z0(o,g,m)):()=>Promise.resolve(),w=o.variantChildren&&o.variantChildren.size?(R=0)=>{const{delayChildren:k=0,staggerChildren:j,staggerDirection:$}=S;return DS(o,l,R,k,j,$,m)}:()=>Promise.resolve(),{when:c}=S;if(c){const[R,k]=c==="beforeChildren"?[C,w]:[w,C];return R().then(()=>k())}else return Promise.all([C(),w(m.delay)])}function DS(o,l,m=0,g=0,S=0,C=1,w){const c=[];for(const R of o.variantChildren)R.notify("AnimationStart",l),c.push(Cy(R,l,{...w,delay:m+(typeof g=="function"?0:g)+q0(o.variantChildren,R,g,S,C)}).then(()=>R.notify("AnimationComplete",l)));return Promise.all(c)}function RS(o,l,m={}){o.notify("AnimationStart",l);let g;if(Array.isArray(l)){const S=l.map(C=>Cy(o,C,m));g=Promise.all(S)}else if(typeof l=="string")g=Cy(o,l,m);else{const S=typeof l=="function"?_f(o,l,m.custom):l;g=Promise.all(Z0(o,S,m))}return g.then(()=>{o.notify("AnimationComplete",l)})}function $0(o,l){if(!Array.isArray(l))return!1;const m=l.length;if(m!==o.length)return!1;for(let g=0;g<m;g++)if(l[g]!==o[g])return!1;return!0}const kS=d_.length;function H0(o){if(!o)return;if(!o.isControllingVariants){const m=o.parent?H0(o.parent)||{}:{};return o.props.initial!==void 0&&(m.initial=o.props.initial),m}const l={};for(let m=0;m<kS;m++){const g=d_[m],S=o.props[g];(Op(S)||S===!1)&&(l[g]=S)}return l}const LS=[...h_].reverse(),OS=h_.length;function BS(o){return l=>Promise.all(l.map(({animation:m,options:g})=>RS(o,m,g)))}function jS(o){let l=BS(o),m=_v(),g=!0;const S=R=>(k,j)=>{const $=_f(o,j,R==="exit"?o.presenceContext?.custom:void 0);if($){const{transition:Y,transitionEnd:X,...se}=$;k={...k,...se,...X}}return k};function C(R){l=R(o)}function w(R){const{props:k}=o,j=H0(o.parent)||{},$=[],Y=new Set;let X={},se=1/0;for(let Re=0;Re<OS;Re++){const ce=LS[Re],De=m[ce],Ce=k[ce]!==void 0?k[ce]:j[ce],Ye=Op(Ce),Fe=ce===R?De.isActive:null;Fe===!1&&(se=Re);let ct=Ce===j[ce]&&Ce!==k[ce]&&Ye;if(ct&&g&&o.manuallyAnimateOnMount&&(ct=!1),De.protectedKeys={...X},!De.isActive&&Fe===null||!Ce&&!De.prevProp||gg(Ce)||typeof Ce=="boolean")continue;const ht=NS(De.prevProp,Ce);let et=ht||ce===R&&De.isActive&&!ct&&Ye||Re>se&&Ye,ut=!1;const lt=Array.isArray(Ce)?Ce:[Ce];let Tt=lt.reduce(S(ce),{});Fe===!1&&(Tt={});const{prevResolvedValues:Et={}}=De,ai={...Et,...Tt},Li=it=>{et=!0,Y.has(it)&&(ut=!0,Y.delete(it)),De.needsAnimating[it]=!0;const st=o.getValue(it);st&&(st.liveStyle=!1)};for(const it in ai){const st=Tt[it],mt=Et[it];if(X.hasOwnProperty(it))continue;let ye=!1;My(st)&&My(mt)?ye=!$0(st,mt):ye=st!==mt,ye?st!=null?Li(it):Y.add(it):st!==void 0&&Y.has(it)?Li(it):De.protectedKeys[it]=!0}De.prevProp=Ce,De.prevResolvedValues=Tt,De.isActive&&(X={...X,...Tt}),g&&o.blockInitialAnimation&&(et=!1);const ui=ct&&ht;et&&(!ui||ut)&&$.push(...lt.map(it=>{const st={type:ce};if(typeof it=="string"&&g&&!ui&&o.manuallyAnimateOnMount&&o.parent){const{parent:mt}=o,ye=_f(mt,it);if(mt.enteringChildren&&ye){const{delayChildren:Ke}=ye.transition||{};st.delay=q0(mt.enteringChildren,o,Ke)}}return{animation:it,options:st}}))}if(Y.size){const Re={};if(typeof k.initial!="boolean"){const ce=_f(o,Array.isArray(k.initial)?k.initial[0]:k.initial);ce&&ce.transition&&(Re.transition=ce.transition)}Y.forEach(ce=>{const De=o.getBaseTarget(ce),Ce=o.getValue(ce);Ce&&(Ce.liveStyle=!0),Re[ce]=De??null}),$.push({animation:Re})}let xe=!!$.length;return g&&(k.initial===!1||k.initial===k.animate)&&!o.manuallyAnimateOnMount&&(xe=!1),g=!1,xe?l($):Promise.resolve()}function c(R,k){if(m[R].isActive===k)return Promise.resolve();o.variantChildren?.forEach($=>$.animationState?.setActive(R,k)),m[R].isActive=k;const j=w(R);for(const $ in m)m[$].protectedKeys={};return j}return{animateChanges:w,setActive:c,setAnimateFunction:C,getState:()=>m,reset:()=>{m=_v(),g=!0}}}function NS(o,l){return typeof l=="string"?l!==o:Array.isArray(l)?!$0(l,o):!1}function od(o=!1){return{isActive:o,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _v(){return{animate:od(!0),whileInView:od(),whileHover:od(),whileTap:od(),whileDrag:od(),whileFocus:od(),exit:od()}}class ch{constructor(l){this.isMounted=!1,this.node=l}update(){}}class FS extends ch{constructor(l){super(l),l.animationState||(l.animationState=jS(l))}updateAnimationControlsSubscription(){const{animate:l}=this.node.getProps();gg(l)&&(this.unmountControls=l.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:l}=this.node.getProps(),{animate:m}=this.node.prevProps||{};l!==m&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let VS=0;class US extends ch{constructor(){super(...arguments),this.id=VS++}update(){if(!this.node.presenceContext)return;const{isPresent:l,onExitComplete:m}=this.node.presenceContext,{isPresent:g}=this.node.prevPresenceContext||{};if(!this.node.animationState||l===g)return;const S=this.node.animationState.setActive("exit",!l);m&&!l&&S.then(()=>{m(this.id)})}mount(){const{register:l,onExitComplete:m}=this.node.presenceContext||{};m&&m(this.id),l&&(this.unmount=l(this.id))}unmount(){}}const GS={animation:{Feature:FS},exit:{Feature:US}};function jp(o,l,m,g={passive:!0}){return o.addEventListener(l,m,g),()=>o.removeEventListener(l,m)}function qp(o){return{point:{x:o.pageX,y:o.pageY}}}const ZS=o=>l=>c_(l)&&o(l,qp(l));function Ap(o,l,m,g){return jp(o,l,ZS(m),g)}const X0=1e-4,qS=1-X0,$S=1+X0,Y0=.01,HS=0-Y0,XS=0+Y0;function Ha(o){return o.max-o.min}function YS(o,l,m){return Math.abs(o-l)<=m}function vv(o,l,m,g=.5){o.origin=g,o.originPoint=qn(l.min,l.max,o.origin),o.scale=Ha(m)/Ha(l),o.translate=qn(m.min,m.max,o.origin)-o.originPoint,(o.scale>=qS&&o.scale<=$S||isNaN(o.scale))&&(o.scale=1),(o.translate>=HS&&o.translate<=XS||isNaN(o.translate))&&(o.translate=0)}function Pp(o,l,m,g){vv(o.x,l.x,m.x,g?g.originX:void 0),vv(o.y,l.y,m.y,g?g.originY:void 0)}function xv(o,l,m){o.min=m.min+l.min,o.max=o.min+Ha(l)}function WS(o,l,m){xv(o.x,l.x,m.x),xv(o.y,l.y,m.y)}function bv(o,l,m){o.min=l.min-m.min,o.max=o.min+Ha(l)}function zp(o,l,m){bv(o.x,l.x,m.x),bv(o.y,l.y,m.y)}function So(o){return[o("x"),o("y")]}const W0=({current:o})=>o?o.ownerDocument.defaultView:null,wv=(o,l)=>Math.abs(o-l);function KS(o,l){const m=wv(o.x,l.x),g=wv(o.y,l.y);return Math.sqrt(m**2+g**2)}class K0{constructor(l,m,{transformPagePoint:g,contextWindow:S=window,dragSnapToOrigin:C=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Y=Hg(this.lastMoveEventInfo,this.history),X=this.startEvent!==null,se=KS(Y.offset,{x:0,y:0})>=this.distanceThreshold;if(!X&&!se)return;const{point:xe}=Y,{timestamp:Re}=sa;this.history.push({...xe,timestamp:Re});const{onStart:ce,onMove:De}=this.handlers;X||(ce&&ce(this.lastMoveEvent,Y),this.startEvent=this.lastMoveEvent),De&&De(this.lastMoveEvent,Y)},this.handlePointerMove=(Y,X)=>{this.lastMoveEvent=Y,this.lastMoveEventInfo=$g(X,this.transformPagePoint),jn.update(this.updatePoint,!0)},this.handlePointerUp=(Y,X)=>{this.end();const{onEnd:se,onSessionEnd:xe,resumeAnimation:Re}=this.handlers;if(this.dragSnapToOrigin&&Re&&Re(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ce=Hg(Y.type==="pointercancel"?this.lastMoveEventInfo:$g(X,this.transformPagePoint),this.history);this.startEvent&&se&&se(Y,ce),xe&&xe(Y,ce)},!c_(l))return;this.dragSnapToOrigin=C,this.handlers=m,this.transformPagePoint=g,this.distanceThreshold=w,this.contextWindow=S||window;const c=qp(l),R=$g(c,this.transformPagePoint),{point:k}=R,{timestamp:j}=sa;this.history=[{...k,timestamp:j}];const{onSessionStart:$}=m;$&&$(l,Hg(R,this.history)),this.removeListeners=Up(Ap(this.contextWindow,"pointermove",this.handlePointerMove),Ap(this.contextWindow,"pointerup",this.handlePointerUp),Ap(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(l){this.handlers=l}end(){this.removeListeners&&this.removeListeners(),sh(this.updatePoint)}}function $g(o,l){return l?{point:l(o.point)}:o}function Tv(o,l){return{x:o.x-l.x,y:o.y-l.y}}function Hg({point:o},l){return{point:o,delta:Tv(o,Q0(l)),offset:Tv(o,QS(l)),velocity:JS(l,.1)}}function QS(o){return o[0]}function Q0(o){return o[o.length-1]}function JS(o,l){if(o.length<2)return{x:0,y:0};let m=o.length-1,g=null;const S=Q0(o);for(;m>=0&&(g=o[m],!(S.timestamp-g.timestamp>nc(l)));)m--;if(!g)return{x:0,y:0};const C=rc(S.timestamp-g.timestamp);if(C===0)return{x:0,y:0};const w={x:(S.x-g.x)/C,y:(S.y-g.y)/C};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function eM(o,{min:l,max:m},g){return l!==void 0&&o<l?o=g?qn(l,o,g.min):Math.max(o,l):m!==void 0&&o>m&&(o=g?qn(m,o,g.max):Math.min(o,m)),o}function Sv(o,l,m){return{min:l!==void 0?o.min+l:void 0,max:m!==void 0?o.max+m-(o.max-o.min):void 0}}function tM(o,{top:l,left:m,bottom:g,right:S}){return{x:Sv(o.x,m,S),y:Sv(o.y,l,g)}}function Mv(o,l){let m=l.min-o.min,g=l.max-o.max;return l.max-l.min<o.max-o.min&&([m,g]=[g,m]),{min:m,max:g}}function iM(o,l){return{x:Mv(o.x,l.x),y:Mv(o.y,l.y)}}function nM(o,l){let m=.5;const g=Ha(o),S=Ha(l);return S>g?m=Rp(l.min,l.max-g,o.min):g>S&&(m=Rp(o.min,o.max-S,l.min)),fu(0,1,m)}function rM(o,l){const m={};return l.min!==void 0&&(m.min=l.min-o.min),l.max!==void 0&&(m.max=l.max-o.min),m}const Ay=.35;function aM(o=Ay){return o===!1?o=0:o===!0&&(o=Ay),{x:Ev(o,"left","right"),y:Ev(o,"top","bottom")}}function Ev(o,l,m){return{min:Cv(o,l),max:Cv(o,m)}}function Cv(o,l){return typeof o=="number"?o:o[l]||0}const sM=new WeakMap;class oM{constructor(l){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=l}start(l,{snapToCursor:m=!1,distanceThreshold:g}={}){const{presenceContext:S}=this.visualElement;if(S&&S.isPresent===!1)return;const C=$=>{const{dragSnapToOrigin:Y}=this.getProps();Y?this.pauseAnimation():this.stopAnimation(),m&&this.snapToCursor(qp($).point)},w=($,Y)=>{const{drag:X,dragPropagation:se,onDragStart:xe}=this.getProps();if(X&&!se&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mT(X),!this.openDragLock))return;this.latestPointerEvent=$,this.latestPanInfo=Y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),So(ce=>{let De=this.getAxisMotionValue(ce).get()||0;if(ac.test(De)){const{projection:Ce}=this.visualElement;if(Ce&&Ce.layout){const Ye=Ce.layout.layoutBox[ce];Ye&&(De=Ha(Ye)*(parseFloat(De)/100))}}this.originPoint[ce]=De}),xe&&jn.postRender(()=>xe($,Y)),Ey(this.visualElement,"transform");const{animationState:Re}=this.visualElement;Re&&Re.setActive("whileDrag",!0)},c=($,Y)=>{this.latestPointerEvent=$,this.latestPanInfo=Y;const{dragPropagation:X,dragDirectionLock:se,onDirectionLock:xe,onDrag:Re}=this.getProps();if(!X&&!this.openDragLock)return;const{offset:ce}=Y;if(se&&this.currentDirection===null){this.currentDirection=lM(ce),this.currentDirection!==null&&xe&&xe(this.currentDirection);return}this.updateAxis("x",Y.point,ce),this.updateAxis("y",Y.point,ce),this.visualElement.render(),Re&&Re($,Y)},R=($,Y)=>{this.latestPointerEvent=$,this.latestPanInfo=Y,this.stop($,Y),this.latestPointerEvent=null,this.latestPanInfo=null},k=()=>So($=>this.getAnimationState($)==="paused"&&this.getAxisMotionValue($).animation?.play()),{dragSnapToOrigin:j}=this.getProps();this.panSession=new K0(l,{onSessionStart:C,onStart:w,onMove:c,onSessionEnd:R,resumeAnimation:k},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:g,contextWindow:W0(this.visualElement)})}stop(l,m){const g=l||this.latestPointerEvent,S=m||this.latestPanInfo,C=this.isDragging;if(this.cancel(),!C||!S||!g)return;const{velocity:w}=S;this.startAnimation(w);const{onDragEnd:c}=this.getProps();c&&jn.postRender(()=>c(g,S))}cancel(){this.isDragging=!1;const{projection:l,animationState:m}=this.visualElement;l&&(l.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:g}=this.getProps();!g&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),m&&m.setActive("whileDrag",!1)}updateAxis(l,m,g){const{drag:S}=this.getProps();if(!g||!Um(l,S,this.currentDirection))return;const C=this.getAxisMotionValue(l);let w=this.originPoint[l]+g[l];this.constraints&&this.constraints[l]&&(w=eM(w,this.constraints[l],this.elastic[l])),C.set(w)}resolveConstraints(){const{dragConstraints:l,dragElastic:m}=this.getProps(),g=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,S=this.constraints;l&&pf(l)?this.constraints||(this.constraints=this.resolveRefConstraints()):l&&g?this.constraints=tM(g.layoutBox,l):this.constraints=!1,this.elastic=aM(m),S!==this.constraints&&g&&this.constraints&&!this.hasMutatedConstraints&&So(C=>{this.constraints!==!1&&this.getAxisMotionValue(C)&&(this.constraints[C]=rM(g.layoutBox[C],this.constraints[C]))})}resolveRefConstraints(){const{dragConstraints:l,onMeasureDragConstraints:m}=this.getProps();if(!l||!pf(l))return!1;const g=l.current,{projection:S}=this.visualElement;if(!S||!S.layout)return!1;const C=cS(g,S.root,this.visualElement.getTransformPagePoint());let w=iM(S.layout.layoutBox,C);if(m){const c=m(sS(w));this.hasMutatedConstraints=!!c,c&&(w=L0(c))}return w}startAnimation(l){const{drag:m,dragMomentum:g,dragElastic:S,dragTransition:C,dragSnapToOrigin:w,onDragTransitionEnd:c}=this.getProps(),R=this.constraints||{},k=So(j=>{if(!Um(j,m,this.currentDirection))return;let $=R&&R[j]||{};w&&($={min:0,max:0});const Y=S?200:1e6,X=S?40:1e7,se={type:"inertia",velocity:g?l[j]:0,bounceStiffness:Y,bounceDamping:X,timeConstant:750,restDelta:1,restSpeed:10,...C,...$};return this.startAxisValueAnimation(j,se)});return Promise.all(k).then(c)}startAxisValueAnimation(l,m){const g=this.getAxisMotionValue(l);return Ey(this.visualElement,l),g.start(v_(l,g,0,m,this.visualElement,!1))}stopAnimation(){So(l=>this.getAxisMotionValue(l).stop())}pauseAnimation(){So(l=>this.getAxisMotionValue(l).animation?.pause())}getAnimationState(l){return this.getAxisMotionValue(l).animation?.state}getAxisMotionValue(l){const m=`_drag${l.toUpperCase()}`,g=this.visualElement.getProps(),S=g[m];return S||this.visualElement.getValue(l,(g.initial?g.initial[l]:void 0)||0)}snapToCursor(l){So(m=>{const{drag:g}=this.getProps();if(!Um(m,g,this.currentDirection))return;const{projection:S}=this.visualElement,C=this.getAxisMotionValue(m);if(S&&S.layout){const{min:w,max:c}=S.layout.layoutBox[m];C.set(l[m]-qn(w,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:l,dragConstraints:m}=this.getProps(),{projection:g}=this.visualElement;if(!pf(m)||!g||!this.constraints)return;this.stopAnimation();const S={x:0,y:0};So(w=>{const c=this.getAxisMotionValue(w);if(c&&this.constraints!==!1){const R=c.get();S[w]=nM({min:R,max:R},this.constraints[w])}});const{transformTemplate:C}=this.visualElement.getProps();this.visualElement.current.style.transform=C?C({},""):"none",g.root&&g.root.updateScroll(),g.updateLayout(),this.resolveConstraints(),So(w=>{if(!Um(w,l,null))return;const c=this.getAxisMotionValue(w),{min:R,max:k}=this.constraints[w];c.set(qn(R,k,S[w]))})}addListeners(){if(!this.visualElement.current)return;sM.set(this.visualElement,this);const l=this.visualElement.current,m=Ap(l,"pointerdown",R=>{const{drag:k,dragListener:j=!0}=this.getProps();k&&j&&this.start(R)}),g=()=>{const{dragConstraints:R}=this.getProps();pf(R)&&R.current&&(this.constraints=this.resolveRefConstraints())},{projection:S}=this.visualElement,C=S.addEventListener("measure",g);S&&!S.layout&&(S.root&&S.root.updateScroll(),S.updateLayout()),jn.read(g);const w=jp(window,"resize",()=>this.scalePositionWithinConstraints()),c=S.addEventListener("didUpdate",({delta:R,hasLayoutChanged:k})=>{this.isDragging&&k&&(So(j=>{const $=this.getAxisMotionValue(j);$&&(this.originPoint[j]+=R[j].translate,$.set($.get()+R[j].translate))}),this.visualElement.render())});return()=>{w(),m(),C(),c&&c()}}getProps(){const l=this.visualElement.getProps(),{drag:m=!1,dragDirectionLock:g=!1,dragPropagation:S=!1,dragConstraints:C=!1,dragElastic:w=Ay,dragMomentum:c=!0}=l;return{...l,drag:m,dragDirectionLock:g,dragPropagation:S,dragConstraints:C,dragElastic:w,dragMomentum:c}}}function Um(o,l,m){return(l===!0||l===o)&&(m===null||m===o)}function lM(o,l=10){let m=null;return Math.abs(o.y)>l?m="y":Math.abs(o.x)>l&&(m="x"),m}class cM extends ch{constructor(l){super(l),this.removeGroupControls=Mo,this.removeListeners=Mo,this.controls=new oM(l)}mount(){const{dragControls:l}=this.node.getProps();l&&(this.removeGroupControls=l.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mo}unmount(){this.removeGroupControls(),this.removeListeners()}}const Av=o=>(l,m)=>{o&&jn.postRender(()=>o(l,m))};class uM extends ch{constructor(){super(...arguments),this.removePointerDownListener=Mo}onPointerDown(l){this.session=new K0(l,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W0(this.node)})}createPanHandlers(){const{onPanSessionStart:l,onPanStart:m,onPan:g,onPanEnd:S}=this.node.getProps();return{onSessionStart:Av(l),onStart:Av(m),onMove:g,onEnd:(C,w)=>{delete this.session,S&&jn.postRender(()=>S(C,w))}}}mount(){this.removePointerDownListener=Ap(this.node.current,"pointerdown",l=>this.onPointerDown(l))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Km={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pv(o,l){return l.max===l.min?0:o/(l.max-l.min)*100}const Sp={correct:(o,l)=>{if(!l.target)return o;if(typeof o=="string")if(ri.test(o))o=parseFloat(o);else return o;const m=Pv(o,l.target.x),g=Pv(o,l.target.y);return`${m}% ${g}%`}},hM={correct:(o,{treeScale:l,projectionDelta:m})=>{const g=o,S=oh.parse(o);if(S.length>5)return g;const C=oh.createTransformer(o),w=typeof S[0]!="number"?1:0,c=m.x.scale*l.x,R=m.y.scale*l.y;S[0+w]/=c,S[1+w]/=R;const k=qn(c,R,.5);return typeof S[2+w]=="number"&&(S[2+w]/=k),typeof S[3+w]=="number"&&(S[3+w]/=k),C(S)}};let Xg=!1;class dM extends Ae.Component{componentDidMount(){const{visualElement:l,layoutGroup:m,switchLayoutGroup:g,layoutId:S}=this.props,{projection:C}=l;kT(fM),C&&(m.group&&m.group.add(C),g&&g.register&&S&&g.register(C),Xg&&C.root.didUpdate(),C.addEventListener("animationComplete",()=>{this.safeToRemove()}),C.setOptions({...C.options,onExitComplete:()=>this.safeToRemove()})),Km.hasEverUpdated=!0}getSnapshotBeforeUpdate(l){const{layoutDependency:m,visualElement:g,drag:S,isPresent:C}=this.props,{projection:w}=g;return w&&(w.isPresent=C,Xg=!0,S||l.layoutDependency!==m||m===void 0||l.isPresent!==C?w.willUpdate():this.safeToRemove(),l.isPresent!==C&&(C?w.promote():w.relegate()||jn.postRender(()=>{const c=w.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:l}=this.props.visualElement;l&&(l.root.didUpdate(),l_.postRender(()=>{!l.currentAnimation&&l.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:l,layoutGroup:m,switchLayoutGroup:g}=this.props,{projection:S}=l;Xg=!0,S&&(S.scheduleCheckAfterUnmount(),m&&m.group&&m.group.remove(S),g&&g.deregister&&g.deregister(S))}safeToRemove(){const{safeToRemove:l}=this.props;l&&l()}render(){return null}}function J0(o){const[l,m]=b0(),g=Ae.useContext(Fy);return ge.jsx(dM,{...o,layoutGroup:g,switchLayoutGroup:Ae.useContext(R0),isPresent:l,safeToRemove:m})}const fM={borderRadius:{...Sp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sp,borderTopRightRadius:Sp,borderBottomLeftRadius:Sp,borderBottomRightRadius:Sp,boxShadow:hM};function pM(o,l,m){const g=Ca(o)?o:xf(o);return g.start(v_("",g,l,m)),g.animation}const mM=(o,l)=>o.depth-l.depth;class gM{constructor(){this.children=[],this.isDirty=!1}add(l){Gy(this.children,l),this.isDirty=!0}remove(l){Zy(this.children,l),this.isDirty=!0}forEach(l){this.isDirty&&this.children.sort(mM),this.isDirty=!1,this.children.forEach(l)}}function yM(o,l){const m=fs.now(),g=({timestamp:S})=>{const C=S-m;C>=l&&(sh(g),o(C-l))};return jn.setup(g,!0),()=>sh(g)}const eb=["TopLeft","TopRight","BottomLeft","BottomRight"],_M=eb.length,zv=o=>typeof o=="string"?parseFloat(o):o,Iv=o=>typeof o=="number"||ri.test(o);function vM(o,l,m,g,S,C){S?(o.opacity=qn(0,m.opacity??1,xM(g)),o.opacityExit=qn(l.opacity??1,0,bM(g))):C&&(o.opacity=qn(l.opacity??1,m.opacity??1,g));for(let w=0;w<_M;w++){const c=`border${eb[w]}Radius`;let R=Dv(l,c),k=Dv(m,c);if(R===void 0&&k===void 0)continue;R||(R=0),k||(k=0),R===0||k===0||Iv(R)===Iv(k)?(o[c]=Math.max(qn(zv(R),zv(k),g),0),(ac.test(k)||ac.test(R))&&(o[c]+="%")):o[c]=k}(l.rotate||m.rotate)&&(o.rotate=qn(l.rotate||0,m.rotate||0,g))}function Dv(o,l){return o[l]!==void 0?o[l]:o.borderRadius}const xM=tb(0,.5,Vx),bM=tb(.5,.95,Mo);function tb(o,l,m){return g=>g<o?0:g>l?1:m(Rp(o,l,g))}function Rv(o,l){o.min=l.min,o.max=l.max}function To(o,l){Rv(o.x,l.x),Rv(o.y,l.y)}function kv(o,l){o.translate=l.translate,o.scale=l.scale,o.originPoint=l.originPoint,o.origin=l.origin}function Lv(o,l,m,g,S){return o-=l,o=og(o,1/m,g),S!==void 0&&(o=og(o,1/S,g)),o}function wM(o,l=0,m=1,g=.5,S,C=o,w=o){if(ac.test(l)&&(l=parseFloat(l),l=qn(w.min,w.max,l/100)-w.min),typeof l!="number")return;let c=qn(C.min,C.max,g);o===C&&(c-=l),o.min=Lv(o.min,l,m,c,S),o.max=Lv(o.max,l,m,c,S)}function Ov(o,l,[m,g,S],C,w){wM(o,l[m],l[g],l[S],l.scale,C,w)}const TM=["x","scaleX","originX"],SM=["y","scaleY","originY"];function Bv(o,l,m,g){Ov(o.x,l,TM,m?m.x:void 0,g?g.x:void 0),Ov(o.y,l,SM,m?m.y:void 0,g?g.y:void 0)}function jv(o){return o.translate===0&&o.scale===1}function ib(o){return jv(o.x)&&jv(o.y)}function Nv(o,l){return o.min===l.min&&o.max===l.max}function MM(o,l){return Nv(o.x,l.x)&&Nv(o.y,l.y)}function Fv(o,l){return Math.round(o.min)===Math.round(l.min)&&Math.round(o.max)===Math.round(l.max)}function nb(o,l){return Fv(o.x,l.x)&&Fv(o.y,l.y)}function Vv(o){return Ha(o.x)/Ha(o.y)}function Uv(o,l){return o.translate===l.translate&&o.scale===l.scale&&o.originPoint===l.originPoint}class EM{constructor(){this.members=[]}add(l){Gy(this.members,l),l.scheduleRender()}remove(l){if(Zy(this.members,l),l===this.prevLead&&(this.prevLead=void 0),l===this.lead){const m=this.members[this.members.length-1];m&&this.promote(m)}}relegate(l){const m=this.members.findIndex(S=>l===S);if(m===0)return!1;let g;for(let S=m;S>=0;S--){const C=this.members[S];if(C.isPresent!==!1){g=C;break}}return g?(this.promote(g),!0):!1}promote(l,m){const g=this.lead;if(l!==g&&(this.prevLead=g,this.lead=l,l.show(),g)){g.instance&&g.scheduleRender(),l.scheduleRender(),l.resumeFrom=g,m&&(l.resumeFrom.preserveOpacity=!0),g.snapshot&&(l.snapshot=g.snapshot,l.snapshot.latestValues=g.animationValues||g.latestValues),l.root&&l.root.isUpdating&&(l.isLayoutDirty=!0);const{crossfade:S}=l.options;S===!1&&g.hide()}}exitAnimationComplete(){this.members.forEach(l=>{const{options:m,resumingFrom:g}=l;m.onExitComplete&&m.onExitComplete(),g&&g.options.onExitComplete&&g.options.onExitComplete()})}scheduleRender(){this.members.forEach(l=>{l.instance&&l.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CM(o,l,m){let g="";const S=o.x.translate/l.x,C=o.y.translate/l.y,w=m?.z||0;if((S||C||w)&&(g=`translate3d(${S}px, ${C}px, ${w}px) `),(l.x!==1||l.y!==1)&&(g+=`scale(${1/l.x}, ${1/l.y}) `),m){const{transformPerspective:k,rotate:j,rotateX:$,rotateY:Y,skewX:X,skewY:se}=m;k&&(g=`perspective(${k}px) ${g}`),j&&(g+=`rotate(${j}deg) `),$&&(g+=`rotateX(${$}deg) `),Y&&(g+=`rotateY(${Y}deg) `),X&&(g+=`skewX(${X}deg) `),se&&(g+=`skewY(${se}deg) `)}const c=o.x.scale*l.x,R=o.y.scale*l.y;return(c!==1||R!==1)&&(g+=`scale(${c}, ${R})`),g||"none"}const Yg=["","X","Y","Z"],AM=1e3;let PM=0;function Wg(o,l,m,g){const{latestValues:S}=l;S[o]&&(m[o]=S[o],l.setStaticValue(o,0),g&&(g[o]=0))}function rb(o){if(o.hasCheckedOptimisedAppear=!0,o.root===o)return;const{visualElement:l}=o.options;if(!l)return;const m=G0(l);if(window.MotionHasOptimisedAnimation(m,"transform")){const{layout:S,layoutId:C}=o.options;window.MotionCancelOptimisedAnimation(m,"transform",jn,!(S||C))}const{parent:g}=o;g&&!g.hasCheckedOptimisedAppear&&rb(g)}function ab({attachResizeListener:o,defaultParent:l,measureScroll:m,checkIsScrollRoot:g,resetTransform:S}){return class{constructor(w={},c=l?.()){this.id=PM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DM),this.nodes.forEach(OM),this.nodes.forEach(BM),this.nodes.forEach(RM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let R=0;R<this.path.length;R++)this.path[R].shouldResetTransform=!0;this.root===this&&(this.nodes=new gM)}addEventListener(w,c){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new Hy),this.eventHandlers.get(w).add(c)}notifyListeners(w,...c){const R=this.eventHandlers.get(w);R&&R.notify(...c)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=x0(w)&&!bT(w),this.instance=w;const{layoutId:c,layout:R,visualElement:k}=this.options;if(k&&!k.current&&k.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(R||c)&&(this.isLayoutDirty=!0),o){let j,$=0;const Y=()=>this.root.updateBlockedByResize=!1;jn.read(()=>{$=window.innerWidth}),o(w,()=>{const X=window.innerWidth;X!==$&&($=X,this.root.updateBlockedByResize=!0,j&&j(),j=yM(Y,250),Km.hasAnimatedSinceResize&&(Km.hasAnimatedSinceResize=!1,this.nodes.forEach(qv)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&k&&(c||R)&&this.addEventListener("didUpdate",({delta:j,hasLayoutChanged:$,hasRelativeLayoutChanged:Y,layout:X})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const se=this.options.transition||k.getDefaultTransition()||UM,{onLayoutAnimationStart:xe,onLayoutAnimationComplete:Re}=k.getProps(),ce=!this.targetLayout||!nb(this.targetLayout,X),De=!$&&Y;if(this.options.layoutRoot||this.resumeFrom||De||$&&(ce||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Ce={...s_(se,"layout"),onPlay:xe,onComplete:Re};(k.shouldReduceMotion||this.options.layoutRoot)&&(Ce.delay=0,Ce.type=!1),this.startAnimation(Ce),this.setAnimationOrigin(j,De)}else $||qv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=X})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),sh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jM),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const $=this.path[j];$.shouldResetTransform=!0,$.updateScroll("snapshot"),$.options.layoutRoot&&$.willUpdate(!1)}const{layoutId:c,layout:R}=this.options;if(c===void 0&&!R)return;const k=this.getTransformTemplate();this.prevTransformTemplateValue=k?k(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Gv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Zv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(LM),this.nodes.forEach(zM),this.nodes.forEach(IM)):this.nodes.forEach(Zv),this.clearAllSnapshots();const c=fs.now();sa.delta=fu(0,1e3/60,c-sa.timestamp),sa.timestamp=c,sa.isProcessing=!0,jg.update.process(sa),jg.preRender.process(sa),jg.render.process(sa),sa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,l_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kM),this.sharedNodes.forEach(NM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ha(this.snapshot.measuredBox.x)&&!Ha(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let R=0;R<this.path.length;R++)this.path[R].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(c=!1),c&&this.instance){const R=g(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:R,offset:m(this.instance),wasRoot:this.scroll?this.scroll.isRoot:R}}}resetTransform(){if(!S)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ib(this.projectionDelta),R=this.getTransformTemplate(),k=R?R(this.latestValues,""):void 0,j=k!==this.prevTransformTemplateValue;w&&this.instance&&(c||ld(this.latestValues)||j)&&(S(this.instance,k),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const c=this.measurePageBox();let R=this.removeElementScroll(c);return w&&(R=this.removeTransform(R)),GM(R),{animationId:this.root.animationId,measuredBox:c,layoutBox:R,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:w}=this.options;if(!w)return fr();const c=w.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ZM))){const{scroll:k}=this.root;k&&(mf(c.x,k.offset.x),mf(c.y,k.offset.y))}return c}removeElementScroll(w){const c=fr();if(To(c,w),this.scroll?.wasRoot)return c;for(let R=0;R<this.path.length;R++){const k=this.path[R],{scroll:j,options:$}=k;k!==this.root&&j&&$.layoutScroll&&(j.wasRoot&&To(c,w),mf(c.x,j.offset.x),mf(c.y,j.offset.y))}return c}applyTransform(w,c=!1){const R=fr();To(R,w);for(let k=0;k<this.path.length;k++){const j=this.path[k];!c&&j.options.layoutScroll&&j.scroll&&j!==j.root&&gf(R,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),ld(j.latestValues)&&gf(R,j.latestValues)}return ld(this.latestValues)&&gf(R,this.latestValues),R}removeTransform(w){const c=fr();To(c,w);for(let R=0;R<this.path.length;R++){const k=this.path[R];if(!k.instance||!ld(k.latestValues))continue;wy(k.latestValues)&&k.updateSnapshot();const j=fr(),$=k.measurePageBox();To(j,$),Bv(c,k.latestValues,k.snapshot?k.snapshot.layoutBox:void 0,j)}return ld(this.latestValues)&&Bv(c,this.latestValues),c}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const R=!!this.resumingFrom||this!==c;if(!(w||R&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:j,layoutId:$}=this.options;if(!(!this.layout||!(j||$))){if(this.resolvedRelativeTargetAt=sa.timestamp,!this.targetDelta&&!this.relativeTarget){const Y=this.getClosestProjectingParent();Y&&Y.layout&&this.animationProgress!==1?(this.relativeParent=Y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),zp(this.relativeTargetOrigin,this.layout.layoutBox,Y.layout.layoutBox),To(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fr(),this.targetWithTransforms=fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):To(this.target,this.layout.layoutBox),B0(this.target,this.targetDelta)):To(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const Y=this.getClosestProjectingParent();Y&&!!Y.resumingFrom==!!this.resumingFrom&&!Y.options.layoutScroll&&Y.target&&this.animationProgress!==1?(this.relativeParent=Y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),zp(this.relativeTargetOrigin,this.target,Y.target),To(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||wy(this.parent.latestValues)||O0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const w=this.getLead(),c=!!this.resumingFrom||this!==w;let R=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(R=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(R=!1),this.resolvedRelativeTargetAt===sa.timestamp&&(R=!1),R)return;const{layout:k,layoutId:j}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(k||j))return;To(this.layoutCorrected,this.layout.layoutBox);const $=this.treeScale.x,Y=this.treeScale.y;lS(this.layoutCorrected,this.treeScale,this.path,c),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=fr());const{target:X}=w;if(!X){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kv(this.prevProjectionDelta.x,this.projectionDelta.x),kv(this.prevProjectionDelta.y,this.projectionDelta.y)),Pp(this.projectionDelta,this.layoutCorrected,X,this.latestValues),(this.treeScale.x!==$||this.treeScale.y!==Y||!Uv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Uv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",X))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){if(this.options.visualElement?.scheduleRender(),w){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yf(),this.projectionDelta=yf(),this.projectionDeltaWithTransform=yf()}setAnimationOrigin(w,c=!1){const R=this.snapshot,k=R?R.latestValues:{},j={...this.latestValues},$=yf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const Y=fr(),X=R?R.source:void 0,se=this.layout?this.layout.source:void 0,xe=X!==se,Re=this.getStack(),ce=!Re||Re.members.length<=1,De=!!(xe&&!ce&&this.options.crossfade===!0&&!this.path.some(VM));this.animationProgress=0;let Ce;this.mixTargetDelta=Ye=>{const Fe=Ye/1e3;$v($.x,w.x,Fe),$v($.y,w.y,Fe),this.setTargetDelta($),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zp(Y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),FM(this.relativeTarget,this.relativeTargetOrigin,Y,Fe),Ce&&MM(this.relativeTarget,Ce)&&(this.isProjectionDirty=!1),Ce||(Ce=fr()),To(Ce,this.relativeTarget)),xe&&(this.animationValues=j,vM(j,k,this.latestValues,Fe,De,ce)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Fe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(sh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jn.update(()=>{Km.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xf(0)),this.currentAnimation=pM(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),w.onUpdate&&w.onUpdate(c)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:c,target:R,layout:k,latestValues:j}=w;if(!(!c||!R||!k)){if(this!==w&&this.layout&&k&&sb(this.options.animationType,this.layout.layoutBox,k.layoutBox)){R=this.target||fr();const $=Ha(this.layout.layoutBox.x);R.x.min=w.target.x.min,R.x.max=R.x.min+$;const Y=Ha(this.layout.layoutBox.y);R.y.min=w.target.y.min,R.y.max=R.y.min+Y}To(c,R),gf(c,j),Pp(this.projectionDeltaWithTransform,this.layoutCorrected,c,j)}}registerSharedNode(w,c){this.sharedNodes.has(w)||this.sharedNodes.set(w,new EM),this.sharedNodes.get(w).add(c);const k=c.options.initialPromotionConfig;c.promote({transition:k?k.transition:void 0,preserveFollowOpacity:k&&k.shouldPreserveFollowOpacity?k.shouldPreserveFollowOpacity(c):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){const{layoutId:w}=this.options;return w?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:w}=this.options;return w?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:c,preserveFollowOpacity:R}={}){const k=this.getStack();k&&k.promote(this,R),w&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let c=!1;const{latestValues:R}=w;if((R.z||R.rotate||R.rotateX||R.rotateY||R.rotateZ||R.skewX||R.skewY)&&(c=!0),!c)return;const k={};R.z&&Wg("z",w,k,this.animationValues);for(let j=0;j<Yg.length;j++)Wg(`rotate${Yg[j]}`,w,k,this.animationValues),Wg(`skew${Yg[j]}`,w,k,this.animationValues);w.render();for(const j in k)w.setStaticValue(j,k[j]),this.animationValues&&(this.animationValues[j]=k[j]);w.scheduleRender()}applyProjectionStyles(w,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const R=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=Wm(c?.pointerEvents)||"",w.transform=R?R(this.latestValues,""):"none";return}const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Wm(c?.pointerEvents)||""),this.hasProjected&&!ld(this.latestValues)&&(w.transform=R?R({},""):"none",this.hasProjected=!1);return}w.visibility="";const j=k.animationValues||k.latestValues;this.applyTransformsToTarget();let $=CM(this.projectionDeltaWithTransform,this.treeScale,j);R&&($=R(j,$)),w.transform=$;const{x:Y,y:X}=this.projectionDelta;w.transformOrigin=`${Y.origin*100}% ${X.origin*100}% 0`,k.animationValues?w.opacity=k===this?j.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:j.opacityExit:w.opacity=k===this?j.opacity!==void 0?j.opacity:"":j.opacityExit!==void 0?j.opacityExit:0;for(const se in Bp){if(j[se]===void 0)continue;const{correct:xe,applyTo:Re,isCSSVariable:ce}=Bp[se],De=$==="none"?j[se]:xe(j[se],k);if(Re){const Ce=Re.length;for(let Ye=0;Ye<Ce;Ye++)w[Re[Ye]]=De}else ce?this.options.visualElement.renderState.vars[se]=De:w[se]=De}this.options.layoutId&&(w.pointerEvents=k===this?Wm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>w.currentAnimation?.stop()),this.root.nodes.forEach(Gv),this.root.sharedNodes.clear()}}}function zM(o){o.updateLayout()}function IM(o){const l=o.resumeFrom?.snapshot||o.snapshot;if(o.isLead()&&o.layout&&l&&o.hasListeners("didUpdate")){const{layoutBox:m,measuredBox:g}=o.layout,{animationType:S}=o.options,C=l.source!==o.layout.source;S==="size"?So(j=>{const $=C?l.measuredBox[j]:l.layoutBox[j],Y=Ha($);$.min=m[j].min,$.max=$.min+Y}):sb(S,l.layoutBox,m)&&So(j=>{const $=C?l.measuredBox[j]:l.layoutBox[j],Y=Ha(m[j]);$.max=$.min+Y,o.relativeTarget&&!o.currentAnimation&&(o.isProjectionDirty=!0,o.relativeTarget[j].max=o.relativeTarget[j].min+Y)});const w=yf();Pp(w,m,l.layoutBox);const c=yf();C?Pp(c,o.applyTransform(g,!0),l.measuredBox):Pp(c,m,l.layoutBox);const R=!ib(w);let k=!1;if(!o.resumeFrom){const j=o.getClosestProjectingParent();if(j&&!j.resumeFrom){const{snapshot:$,layout:Y}=j;if($&&Y){const X=fr();zp(X,l.layoutBox,$.layoutBox);const se=fr();zp(se,m,Y.layoutBox),nb(X,se)||(k=!0),j.options.layoutRoot&&(o.relativeTarget=se,o.relativeTargetOrigin=X,o.relativeParent=j)}}}o.notifyListeners("didUpdate",{layout:m,snapshot:l,delta:c,layoutDelta:w,hasLayoutChanged:R,hasRelativeLayoutChanged:k})}else if(o.isLead()){const{onExitComplete:m}=o.options;m&&m()}o.options.transition=void 0}function DM(o){o.parent&&(o.isProjecting()||(o.isProjectionDirty=o.parent.isProjectionDirty),o.isSharedProjectionDirty||(o.isSharedProjectionDirty=!!(o.isProjectionDirty||o.parent.isProjectionDirty||o.parent.isSharedProjectionDirty)),o.isTransformDirty||(o.isTransformDirty=o.parent.isTransformDirty))}function RM(o){o.isProjectionDirty=o.isSharedProjectionDirty=o.isTransformDirty=!1}function kM(o){o.clearSnapshot()}function Gv(o){o.clearMeasurements()}function Zv(o){o.isLayoutDirty=!1}function LM(o){const{visualElement:l}=o.options;l&&l.getProps().onBeforeLayoutMeasure&&l.notify("BeforeLayoutMeasure"),o.resetTransform()}function qv(o){o.finishAnimation(),o.targetDelta=o.relativeTarget=o.target=void 0,o.isProjectionDirty=!0}function OM(o){o.resolveTargetDelta()}function BM(o){o.calcProjection()}function jM(o){o.resetSkewAndRotation()}function NM(o){o.removeLeadSnapshot()}function $v(o,l,m){o.translate=qn(l.translate,0,m),o.scale=qn(l.scale,1,m),o.origin=l.origin,o.originPoint=l.originPoint}function Hv(o,l,m,g){o.min=qn(l.min,m.min,g),o.max=qn(l.max,m.max,g)}function FM(o,l,m,g){Hv(o.x,l.x,m.x,g),Hv(o.y,l.y,m.y,g)}function VM(o){return o.animationValues&&o.animationValues.opacityExit!==void 0}const UM={duration:.45,ease:[.4,0,.1,1]},Xv=o=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(o),Yv=Xv("applewebkit/")&&!Xv("chrome/")?Math.round:Mo;function Wv(o){o.min=Yv(o.min),o.max=Yv(o.max)}function GM(o){Wv(o.x),Wv(o.y)}function sb(o,l,m){return o==="position"||o==="preserve-aspect"&&!YS(Vv(l),Vv(m),.2)}function ZM(o){return o!==o.root&&o.scroll?.wasRoot}const qM=ab({attachResizeListener:(o,l)=>jp(o,"resize",l),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kg={current:void 0},ob=ab({measureScroll:o=>({x:o.scrollLeft,y:o.scrollTop}),defaultParent:()=>{if(!Kg.current){const o=new qM({});o.mount(window),o.setOptions({layoutScroll:!0}),Kg.current=o}return Kg.current},resetTransform:(o,l)=>{o.style.transform=l!==void 0?l:"none"},checkIsScrollRoot:o=>window.getComputedStyle(o).position==="fixed"}),$M={pan:{Feature:uM},drag:{Feature:cM,ProjectionNode:ob,MeasureLayout:J0}};function Kv(o,l,m){const{props:g}=o;o.animationState&&g.whileHover&&o.animationState.setActive("whileHover",m==="Start");const S="onHover"+m,C=g[S];C&&jn.postRender(()=>C(l,qp(l)))}class HM extends ch{mount(){const{current:l}=this.node;l&&(this.unmount=gT(l,(m,g)=>(Kv(this.node,g,"Start"),S=>Kv(this.node,S,"End"))))}unmount(){}}class XM extends ch{constructor(){super(...arguments),this.isActive=!1}onFocus(){let l=!1;try{l=this.node.current.matches(":focus-visible")}catch{l=!0}!l||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Up(jp(this.node.current,"focus",()=>this.onFocus()),jp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qv(o,l,m){const{props:g}=o;if(o.current instanceof HTMLButtonElement&&o.current.disabled)return;o.animationState&&g.whileTap&&o.animationState.setActive("whileTap",m==="Start");const S="onTap"+(m==="End"?"":m),C=g[S];C&&jn.postRender(()=>C(l,qp(l)))}class YM extends ch{mount(){const{current:l}=this.node;l&&(this.unmount=xT(l,(m,g)=>(Qv(this.node,g,"Start"),(S,{success:C})=>Qv(this.node,S,C?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Py=new WeakMap,Qg=new WeakMap,WM=o=>{const l=Py.get(o.target);l&&l(o)},KM=o=>{o.forEach(WM)};function QM({root:o,...l}){const m=o||document;Qg.has(m)||Qg.set(m,{});const g=Qg.get(m),S=JSON.stringify(l);return g[S]||(g[S]=new IntersectionObserver(KM,{root:o,...l})),g[S]}function JM(o,l,m){const g=QM(l);return Py.set(o,m),g.observe(o),()=>{Py.delete(o),g.unobserve(o)}}const eE={some:0,all:1};class tE extends ch{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:l={}}=this.node.getProps(),{root:m,margin:g,amount:S="some",once:C}=l,w={root:m?m.current:void 0,rootMargin:g,threshold:typeof S=="number"?S:eE[S]},c=R=>{const{isIntersecting:k}=R;if(this.isInView===k||(this.isInView=k,C&&!k&&this.hasEnteredView))return;k&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",k);const{onViewportEnter:j,onViewportLeave:$}=this.node.getProps(),Y=k?j:$;Y&&Y(R)};return JM(this.node.current,w,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:l,prevProps:m}=this.node;["amount","margin","root"].some(iE(l,m))&&this.startObserver()}unmount(){}}function iE({viewport:o={}},{viewport:l={}}={}){return m=>o[m]!==l[m]}const nE={inView:{Feature:tE},tap:{Feature:YM},focus:{Feature:XM},hover:{Feature:HM}},rE={layout:{ProjectionNode:ob,MeasureLayout:J0}},aE={...GS,...nE,...$M,...rE},cu=aS(aE,_S),sE="/perusahaan/assets/logos121-0zRYt_rf.png";function oE(o){return pl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"},child:[]}]})(o)}const lE=()=>{const[o,l]=Ae.useState(!1),[m,g]=Ae.useState(0),[S,C]=Ae.useState(null),w=[{label:"Boiler Systems",path:"boiler-systems",subItems:[{name:"Fluidized Bed Boiler",path:"fluidized-bed-boiler"},{name:"CFBC",path:"cfbc"},{name:"Chain Grate Boiler",path:"chain-grate-boiler"},{name:"Reciprocrating Grate Boiler",path:"reciprocrating-grate-boiler"},{name:"Gas & Oil Boiler",path:"gas-oil-boiler"},{name:"Thermal Oil Boiler",path:"thermal-oil-boiler"},{name:"Boiler Part",path:"boiler-part"}]},{label:"Energy Solutions",path:"energy-solutions",subItems:[{name:"Power Plant",path:"power-plant"}]},{label:"Projects",path:"projects",subItems:[{name:"Engineering",path:"engineering"},{name:"Construction",path:"construction"}]},{label:"Smart Technology",path:"smart-technology",subItems:[{name:"Automation",path:"automation"},{name:"IoT",path:"iot"}]},{label:"After Sales",path:"after-sales",subItems:[{name:"Maintenance & Services",path:"maintenance-services"},{name:"Spareparts",path:"spareparts"}]},{label:"Company",path:"company",subItems:[{name:"About Us",path:"about"},{name:"Contact",path:"contact"}]}],c=k=>{C(k),g(1)},R=()=>{g(0),C(null)};return ge.jsxs("div",{className:"text-white border-t border-white/30 font-poppins relative",children:[ge.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center px-4 py-1",children:[ge.jsx(hu,{to:"/",children:ge.jsx("img",{src:sE,alt:"Logo",className:"h-10 lg:h-[92px]"})}),ge.jsx("div",{className:"hidden lg:flex gap-7 text-sm font-medium",children:w.map((k,j)=>ge.jsxs("div",{className:"group relative cursor-pointer",children:[ge.jsx("div",{className:"flex flex-col items-center",children:ge.jsxs("span",{className:"flex items-center gap-1 text-[15px] text-white/85 font-[700] leading-[33px] tracking-[0.5px] py-4 transition-colors duration-300 group-hover:text-[#F37021] relative",children:[k.label,ge.jsx(oE,{}),ge.jsx("span",{className:`absolute bottom-2 left-0 w-full h-[2px] bg-[#F37021] \r
                    origin-left scale-x-0 group-hover:scale-x-100 \r
                    transition-transform duration-500 ease-out delay-75`})]})}),ge.jsx("div",{className:"absolute left-0 top-full h-4 w-full"}),ge.jsx("div",{className:`absolute top-full -left-4 w-52 mt-4 bg-white text-black shadow-xl \r
                opacity-0 group-hover:opacity-100 \r
                translate-y-2 group-hover:translate-y-0 \r
                pointer-events-none group-hover:pointer-events-auto\r
                transition-all duration-300 z-50`,children:k.subItems.map(($,Y)=>ge.jsx(hu,{to:`/${k.path}/${$.path}`,className:"block px-4 py-3 hover:bg-[#F37021] transition-colors duration-200 hover:text-white",children:ge.jsx("span",{className:"block text-[12px] transition-transform duration-200 ease-out group/item hover:translate-x-2",children:$.name})},Y))})]},j))}),ge.jsx("div",{className:"lg:hidden",children:ge.jsx("button",{onClick:()=>l(!0),className:"text-black font-bold text-[18px]",children:ge.jsx(Ew,{})})})]}),ge.jsx(by,{children:o&&ge.jsx(cu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>l(!1),className:"fixed inset-0 z-[9998] bg-black/10 backdrop-blur-sm"})}),ge.jsxs(cu.div,{initial:{x:"100%"},animate:{x:o?0:"100%"},transition:{duration:.32},className:"fixed top-0 right-0 h-full w-[80%] bg-[#F3F3F3] text-black z-[9999] overflow-hidden",style:{boxShadow:"-6px 0 20px rgba(0,0,0,0.18)"},children:[ge.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b-[0.1px] border-b-gray-300",children:[m===1?ge.jsx("button",{onClick:R,className:"flex items-center gap-2 text-sm font-semibold",children:ge.jsx(Px,{})}):ge.jsx("div",{className:"w-[20px]"}),ge.jsx("span",{className:"text-[14px] leading-[20px] font-[400] tracking-tight text-[#333333]",children:m===0?"Menu":S}),ge.jsx("button",{onClick:()=>{l(!1),g(0)},className:"text-2xl",children:ge.jsx(Cw,{})})]}),ge.jsx("div",{className:"relative h-full overflow-hidden",children:ge.jsxs(by,{mode:"wait",children:[m===0&&ge.jsx(cu.div,{initial:{x:0,opacity:1},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.36},className:"absolute top-0 left-0 w-full",children:w.map((k,j)=>ge.jsxs("div",{className:"flex items-center justify-between pr-6 ml-6 py-1 border-b-[0.1px] border-b-gray-300 text-sm font-semibold",children:[ge.jsx("span",{className:"flex-1 pr-4 border-r text-[14px] leading-[20px] font-[400] tracking-tight text-[#333333] border-gray-200",children:k.label}),ge.jsx("button",{onClick:()=>c(k.label),className:"ml-4 flex-shrink-0 bg-gray-100 rounded-full w-9 h-9 flex items-center justify-center text-[13px] font-medium shadow-sm",children:k.subItems.length})]},j))},"main"),m===1&&ge.jsx(cu.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{duration:.36},className:"absolute top-0 left-0 w-full",children:w.find(k=>k.label===S)?.subItems.map((k,j)=>ge.jsx(hu,{to:`/${w.find($=>$.label===S)?.path}/${k.path}`,className:"block pr-6 ml-6 py-3 border-b-[0.1px] border-b-gray-300 text-[14px] leading-[20px] font-[400] tracking-tight text-[#333333] border-gray-200",onClick:()=>{l(!1),g(0)},children:k.name},j))},"sub")]})})]})]})},lb=o=>ge.jsxs("div",{className:"fixed top-0 left-0 w-full -mt-1 z-50 bg-white lg:bg-black/90 text-white shadow-md",children:[ge.jsx(Mw,{}),ge.jsx(lE,{})]});function Jv(o){return o!==null&&typeof o=="object"&&"constructor"in o&&o.constructor===Object}function x_(o,l){o===void 0&&(o={}),l===void 0&&(l={});const m=["__proto__","constructor","prototype"];Object.keys(l).filter(g=>m.indexOf(g)<0).forEach(g=>{typeof o[g]>"u"?o[g]=l[g]:Jv(l[g])&&Jv(o[g])&&Object.keys(l[g]).length>0&&x_(o[g],l[g])})}const cb={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function sc(){const o=typeof document<"u"?document:{};return x_(o,cb),o}const cE={document:cb,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(o){return typeof setTimeout>"u"?(o(),null):setTimeout(o,0)},cancelAnimationFrame(o){typeof setTimeout>"u"||clearTimeout(o)}};function Xa(){const o=typeof window<"u"?window:{};return x_(o,cE),o}function uE(o){return o===void 0&&(o=""),o.trim().split(" ").filter(l=>!!l.trim())}function hE(o){const l=o;Object.keys(l).forEach(m=>{try{l[m]=null}catch{}try{delete l[m]}catch{}})}function ub(o,l){return l===void 0&&(l=0),setTimeout(o,l)}function lg(){return Date.now()}function dE(o){const l=Xa();let m;return l.getComputedStyle&&(m=l.getComputedStyle(o,null)),!m&&o.currentStyle&&(m=o.currentStyle),m||(m=o.style),m}function fE(o,l){l===void 0&&(l="x");const m=Xa();let g,S,C;const w=dE(o);return m.WebKitCSSMatrix?(S=w.transform||w.webkitTransform,S.split(",").length>6&&(S=S.split(", ").map(c=>c.replace(",",".")).join(", ")),C=new m.WebKitCSSMatrix(S==="none"?"":S)):(C=w.MozTransform||w.OTransform||w.MsTransform||w.msTransform||w.transform||w.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),g=C.toString().split(",")),l==="x"&&(m.WebKitCSSMatrix?S=C.m41:g.length===16?S=parseFloat(g[12]):S=parseFloat(g[4])),l==="y"&&(m.WebKitCSSMatrix?S=C.m42:g.length===16?S=parseFloat(g[13]):S=parseFloat(g[5])),S||0}function Gm(o){return typeof o=="object"&&o!==null&&o.constructor&&Object.prototype.toString.call(o).slice(8,-1)==="Object"}function pE(o){return typeof window<"u"&&typeof window.HTMLElement<"u"?o instanceof HTMLElement:o&&(o.nodeType===1||o.nodeType===11)}function Vs(){const o=Object(arguments.length<=0?void 0:arguments[0]),l=["__proto__","constructor","prototype"];for(let m=1;m<arguments.length;m+=1){const g=m<0||arguments.length<=m?void 0:arguments[m];if(g!=null&&!pE(g)){const S=Object.keys(Object(g)).filter(C=>l.indexOf(C)<0);for(let C=0,w=S.length;C<w;C+=1){const c=S[C],R=Object.getOwnPropertyDescriptor(g,c);R!==void 0&&R.enumerable&&(Gm(o[c])&&Gm(g[c])?g[c].__swiper__?o[c]=g[c]:Vs(o[c],g[c]):!Gm(o[c])&&Gm(g[c])?(o[c]={},g[c].__swiper__?o[c]=g[c]:Vs(o[c],g[c])):o[c]=g[c])}}}return o}function Zm(o,l,m){o.style.setProperty(l,m)}function hb(o){let{swiper:l,targetPosition:m,side:g}=o;const S=Xa(),C=-l.translate;let w=null,c;const R=l.params.speed;l.wrapperEl.style.scrollSnapType="none",S.cancelAnimationFrame(l.cssModeFrameID);const k=m>C?"next":"prev",j=(Y,X)=>k==="next"&&Y>=X||k==="prev"&&Y<=X,$=()=>{c=new Date().getTime(),w===null&&(w=c);const Y=Math.max(Math.min((c-w)/R,1),0),X=.5-Math.cos(Y*Math.PI)/2;let se=C+X*(m-C);if(j(se,m)&&(se=m),l.wrapperEl.scrollTo({[g]:se}),j(se,m)){l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[g]:se})}),S.cancelAnimationFrame(l.cssModeFrameID);return}l.cssModeFrameID=S.requestAnimationFrame($)};$()}function ic(o,l){l===void 0&&(l="");const m=Xa(),g=[...o.children];return m.HTMLSlotElement&&o instanceof HTMLSlotElement&&g.push(...o.assignedElements()),l?g.filter(S=>S.matches(l)):g}function mE(o,l){const m=[l];for(;m.length>0;){const g=m.shift();if(o===g)return!0;m.push(...g.children,...g.shadowRoot?g.shadowRoot.children:[],...g.assignedElements?g.assignedElements():[])}}function gE(o,l){const m=Xa();let g=l.contains(o);return!g&&m.HTMLSlotElement&&l instanceof HTMLSlotElement&&(g=[...l.assignedElements()].includes(o),g||(g=mE(o,l))),g}function cg(o){try{console.warn(o);return}catch{}}function ug(o,l){l===void 0&&(l=[]);const m=document.createElement(o);return m.classList.add(...Array.isArray(l)?l:uE(l)),m}function yE(o,l){const m=[];for(;o.previousElementSibling;){const g=o.previousElementSibling;l?g.matches(l)&&m.push(g):m.push(g),o=g}return m}function _E(o,l){const m=[];for(;o.nextElementSibling;){const g=o.nextElementSibling;l?g.matches(l)&&m.push(g):m.push(g),o=g}return m}function ah(o,l){return Xa().getComputedStyle(o,null).getPropertyValue(l)}function ex(o){let l=o,m;if(l){for(m=0;(l=l.previousSibling)!==null;)l.nodeType===1&&(m+=1);return m}}function vE(o,l){const m=[];let g=o.parentElement;for(;g;)m.push(g),g=g.parentElement;return m}function tx(o,l,m){const g=Xa();return o[l==="width"?"offsetWidth":"offsetHeight"]+parseFloat(g.getComputedStyle(o,null).getPropertyValue(l==="width"?"margin-right":"margin-top"))+parseFloat(g.getComputedStyle(o,null).getPropertyValue(l==="width"?"margin-left":"margin-bottom"))}function ou(o){return(Array.isArray(o)?o:[o]).filter(l=>!!l)}function ix(o,l){l===void 0&&(l=""),typeof trustedTypes<"u"?o.innerHTML=trustedTypes.createPolicy("html",{createHTML:m=>m}).createHTML(l):o.innerHTML=l}let Jg;function xE(){const o=Xa(),l=sc();return{smoothScroll:l.documentElement&&l.documentElement.style&&"scrollBehavior"in l.documentElement.style,touch:!!("ontouchstart"in o||o.DocumentTouch&&l instanceof o.DocumentTouch)}}function db(){return Jg||(Jg=xE()),Jg}let ey;function bE(o){let{userAgent:l}=o===void 0?{}:o;const m=db(),g=Xa(),S=g.navigator.platform,C=l||g.navigator.userAgent,w={ios:!1,android:!1},c=g.screen.width,R=g.screen.height,k=C.match(/(Android);?[\s\/]+([\d.]+)?/);let j=C.match(/(iPad).*OS\s([\d_]+)/);const $=C.match(/(iPod)(.*OS\s([\d_]+))?/),Y=!j&&C.match(/(iPhone\sOS|iOS)\s([\d_]+)/),X=S==="Win32";let se=S==="MacIntel";const xe=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!j&&se&&m.touch&&xe.indexOf(`${c}x${R}`)>=0&&(j=C.match(/(Version)\/([\d.]+)/),j||(j=[0,1,"13_0_0"]),se=!1),k&&!X&&(w.os="android",w.android=!0),(j||Y||$)&&(w.os="ios",w.ios=!0),w}function fb(o){return o===void 0&&(o={}),ey||(ey=bE(o)),ey}let ty;function wE(){const o=Xa(),l=fb();let m=!1;function g(){const c=o.navigator.userAgent.toLowerCase();return c.indexOf("safari")>=0&&c.indexOf("chrome")<0&&c.indexOf("android")<0}if(g()){const c=String(o.navigator.userAgent);if(c.includes("Version/")){const[R,k]=c.split("Version/")[1].split(" ")[0].split(".").map(j=>Number(j));m=R<16||R===16&&k<2}}const S=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(o.navigator.userAgent),C=g(),w=C||S&&l.ios;return{isSafari:m||C,needPerspectiveFix:m,need3dFix:w,isWebView:S}}function pb(){return ty||(ty=wE()),ty}function TE(o){let{swiper:l,on:m,emit:g}=o;const S=Xa();let C=null,w=null;const c=()=>{!l||l.destroyed||!l.initialized||(g("beforeResize"),g("resize"))},R=()=>{!l||l.destroyed||!l.initialized||(C=new ResizeObserver($=>{w=S.requestAnimationFrame(()=>{const{width:Y,height:X}=l;let se=Y,xe=X;$.forEach(Re=>{let{contentBoxSize:ce,contentRect:De,target:Ce}=Re;Ce&&Ce!==l.el||(se=De?De.width:(ce[0]||ce).inlineSize,xe=De?De.height:(ce[0]||ce).blockSize)}),(se!==Y||xe!==X)&&c()})}),C.observe(l.el))},k=()=>{w&&S.cancelAnimationFrame(w),C&&C.unobserve&&l.el&&(C.unobserve(l.el),C=null)},j=()=>{!l||l.destroyed||!l.initialized||g("orientationchange")};m("init",()=>{if(l.params.resizeObserver&&typeof S.ResizeObserver<"u"){R();return}S.addEventListener("resize",c),S.addEventListener("orientationchange",j)}),m("destroy",()=>{k(),S.removeEventListener("resize",c),S.removeEventListener("orientationchange",j)})}function SE(o){let{swiper:l,extendParams:m,on:g,emit:S}=o;const C=[],w=Xa(),c=function(j,$){$===void 0&&($={});const Y=w.MutationObserver||w.WebkitMutationObserver,X=new Y(se=>{if(l.__preventObserver__)return;if(se.length===1){S("observerUpdate",se[0]);return}const xe=function(){S("observerUpdate",se[0])};w.requestAnimationFrame?w.requestAnimationFrame(xe):w.setTimeout(xe,0)});X.observe(j,{attributes:typeof $.attributes>"u"?!0:$.attributes,childList:l.isElement||(typeof $.childList>"u"?!0:$).childList,characterData:typeof $.characterData>"u"?!0:$.characterData}),C.push(X)},R=()=>{if(l.params.observer){if(l.params.observeParents){const j=vE(l.hostEl);for(let $=0;$<j.length;$+=1)c(j[$])}c(l.hostEl,{childList:l.params.observeSlideChildren}),c(l.wrapperEl,{attributes:!1})}},k=()=>{C.forEach(j=>{j.disconnect()}),C.splice(0,C.length)};m({observer:!1,observeParents:!1,observeSlideChildren:!1}),g("init",R),g("destroy",k)}var ME={on(o,l,m){const g=this;if(!g.eventsListeners||g.destroyed||typeof l!="function")return g;const S=m?"unshift":"push";return o.split(" ").forEach(C=>{g.eventsListeners[C]||(g.eventsListeners[C]=[]),g.eventsListeners[C][S](l)}),g},once(o,l,m){const g=this;if(!g.eventsListeners||g.destroyed||typeof l!="function")return g;function S(){g.off(o,S),S.__emitterProxy&&delete S.__emitterProxy;for(var C=arguments.length,w=new Array(C),c=0;c<C;c++)w[c]=arguments[c];l.apply(g,w)}return S.__emitterProxy=l,g.on(o,S,m)},onAny(o,l){const m=this;if(!m.eventsListeners||m.destroyed||typeof o!="function")return m;const g=l?"unshift":"push";return m.eventsAnyListeners.indexOf(o)<0&&m.eventsAnyListeners[g](o),m},offAny(o){const l=this;if(!l.eventsListeners||l.destroyed||!l.eventsAnyListeners)return l;const m=l.eventsAnyListeners.indexOf(o);return m>=0&&l.eventsAnyListeners.splice(m,1),l},off(o,l){const m=this;return!m.eventsListeners||m.destroyed||!m.eventsListeners||o.split(" ").forEach(g=>{typeof l>"u"?m.eventsListeners[g]=[]:m.eventsListeners[g]&&m.eventsListeners[g].forEach((S,C)=>{(S===l||S.__emitterProxy&&S.__emitterProxy===l)&&m.eventsListeners[g].splice(C,1)})}),m},emit(){const o=this;if(!o.eventsListeners||o.destroyed||!o.eventsListeners)return o;let l,m,g;for(var S=arguments.length,C=new Array(S),w=0;w<S;w++)C[w]=arguments[w];return typeof C[0]=="string"||Array.isArray(C[0])?(l=C[0],m=C.slice(1,C.length),g=o):(l=C[0].events,m=C[0].data,g=C[0].context||o),m.unshift(g),(Array.isArray(l)?l:l.split(" ")).forEach(R=>{o.eventsAnyListeners&&o.eventsAnyListeners.length&&o.eventsAnyListeners.forEach(k=>{k.apply(g,[R,...m])}),o.eventsListeners&&o.eventsListeners[R]&&o.eventsListeners[R].forEach(k=>{k.apply(g,m)})}),o}};function EE(){const o=this;let l,m;const g=o.el;typeof o.params.width<"u"&&o.params.width!==null?l=o.params.width:l=g.clientWidth,typeof o.params.height<"u"&&o.params.height!==null?m=o.params.height:m=g.clientHeight,!(l===0&&o.isHorizontal()||m===0&&o.isVertical())&&(l=l-parseInt(ah(g,"padding-left")||0,10)-parseInt(ah(g,"padding-right")||0,10),m=m-parseInt(ah(g,"padding-top")||0,10)-parseInt(ah(g,"padding-bottom")||0,10),Number.isNaN(l)&&(l=0),Number.isNaN(m)&&(m=0),Object.assign(o,{width:l,height:m,size:o.isHorizontal()?l:m}))}function CE(){const o=this;function l(lt,Tt){return parseFloat(lt.getPropertyValue(o.getDirectionLabel(Tt))||0)}const m=o.params,{wrapperEl:g,slidesEl:S,size:C,rtlTranslate:w,wrongRTL:c}=o,R=o.virtual&&m.virtual.enabled,k=R?o.virtual.slides.length:o.slides.length,j=ic(S,`.${o.params.slideClass}, swiper-slide`),$=R?o.virtual.slides.length:j.length;let Y=[];const X=[],se=[];let xe=m.slidesOffsetBefore;typeof xe=="function"&&(xe=m.slidesOffsetBefore.call(o));let Re=m.slidesOffsetAfter;typeof Re=="function"&&(Re=m.slidesOffsetAfter.call(o));const ce=o.snapGrid.length,De=o.slidesGrid.length;let Ce=m.spaceBetween,Ye=-xe,Fe=0,ct=0;if(typeof C>"u")return;typeof Ce=="string"&&Ce.indexOf("%")>=0?Ce=parseFloat(Ce.replace("%",""))/100*C:typeof Ce=="string"&&(Ce=parseFloat(Ce)),o.virtualSize=-Ce,j.forEach(lt=>{w?lt.style.marginLeft="":lt.style.marginRight="",lt.style.marginBottom="",lt.style.marginTop=""}),m.centeredSlides&&m.cssMode&&(Zm(g,"--swiper-centered-offset-before",""),Zm(g,"--swiper-centered-offset-after",""));const ht=m.grid&&m.grid.rows>1&&o.grid;ht?o.grid.initSlides(j):o.grid&&o.grid.unsetSlides();let et;const ut=m.slidesPerView==="auto"&&m.breakpoints&&Object.keys(m.breakpoints).filter(lt=>typeof m.breakpoints[lt].slidesPerView<"u").length>0;for(let lt=0;lt<$;lt+=1){et=0;let Tt;if(j[lt]&&(Tt=j[lt]),ht&&o.grid.updateSlide(lt,Tt,j),!(j[lt]&&ah(Tt,"display")==="none")){if(m.slidesPerView==="auto"){ut&&(j[lt].style[o.getDirectionLabel("width")]="");const Et=getComputedStyle(Tt),ai=Tt.style.transform,Li=Tt.style.webkitTransform;if(ai&&(Tt.style.transform="none"),Li&&(Tt.style.webkitTransform="none"),m.roundLengths)et=o.isHorizontal()?tx(Tt,"width"):tx(Tt,"height");else{const ui=l(Et,"width"),je=l(Et,"padding-left"),it=l(Et,"padding-right"),st=l(Et,"margin-left"),mt=l(Et,"margin-right"),ye=Et.getPropertyValue("box-sizing");if(ye&&ye==="border-box")et=ui+st+mt;else{const{clientWidth:Ke,offsetWidth:Mt}=Tt;et=ui+je+it+st+mt+(Mt-Ke)}}ai&&(Tt.style.transform=ai),Li&&(Tt.style.webkitTransform=Li),m.roundLengths&&(et=Math.floor(et))}else et=(C-(m.slidesPerView-1)*Ce)/m.slidesPerView,m.roundLengths&&(et=Math.floor(et)),j[lt]&&(j[lt].style[o.getDirectionLabel("width")]=`${et}px`);j[lt]&&(j[lt].swiperSlideSize=et),se.push(et),m.centeredSlides?(Ye=Ye+et/2+Fe/2+Ce,Fe===0&&lt!==0&&(Ye=Ye-C/2-Ce),lt===0&&(Ye=Ye-C/2-Ce),Math.abs(Ye)<1/1e3&&(Ye=0),m.roundLengths&&(Ye=Math.floor(Ye)),ct%m.slidesPerGroup===0&&Y.push(Ye),X.push(Ye)):(m.roundLengths&&(Ye=Math.floor(Ye)),(ct-Math.min(o.params.slidesPerGroupSkip,ct))%o.params.slidesPerGroup===0&&Y.push(Ye),X.push(Ye),Ye=Ye+et+Ce),o.virtualSize+=et+Ce,Fe=et,ct+=1}}if(o.virtualSize=Math.max(o.virtualSize,C)+Re,w&&c&&(m.effect==="slide"||m.effect==="coverflow")&&(g.style.width=`${o.virtualSize+Ce}px`),m.setWrapperSize&&(g.style[o.getDirectionLabel("width")]=`${o.virtualSize+Ce}px`),ht&&o.grid.updateWrapperSize(et,Y),!m.centeredSlides){const lt=[];for(let Tt=0;Tt<Y.length;Tt+=1){let Et=Y[Tt];m.roundLengths&&(Et=Math.floor(Et)),Y[Tt]<=o.virtualSize-C&&lt.push(Et)}Y=lt,Math.floor(o.virtualSize-C)-Math.floor(Y[Y.length-1])>1&&Y.push(o.virtualSize-C)}if(R&&m.loop){const lt=se[0]+Ce;if(m.slidesPerGroup>1){const Tt=Math.ceil((o.virtual.slidesBefore+o.virtual.slidesAfter)/m.slidesPerGroup),Et=lt*m.slidesPerGroup;for(let ai=0;ai<Tt;ai+=1)Y.push(Y[Y.length-1]+Et)}for(let Tt=0;Tt<o.virtual.slidesBefore+o.virtual.slidesAfter;Tt+=1)m.slidesPerGroup===1&&Y.push(Y[Y.length-1]+lt),X.push(X[X.length-1]+lt),o.virtualSize+=lt}if(Y.length===0&&(Y=[0]),Ce!==0){const lt=o.isHorizontal()&&w?"marginLeft":o.getDirectionLabel("marginRight");j.filter((Tt,Et)=>!m.cssMode||m.loop?!0:Et!==j.length-1).forEach(Tt=>{Tt.style[lt]=`${Ce}px`})}if(m.centeredSlides&&m.centeredSlidesBounds){let lt=0;se.forEach(Et=>{lt+=Et+(Ce||0)}),lt-=Ce;const Tt=lt>C?lt-C:0;Y=Y.map(Et=>Et<=0?-xe:Et>Tt?Tt+Re:Et)}if(m.centerInsufficientSlides){let lt=0;se.forEach(Et=>{lt+=Et+(Ce||0)}),lt-=Ce;const Tt=(m.slidesOffsetBefore||0)+(m.slidesOffsetAfter||0);if(lt+Tt<C){const Et=(C-lt-Tt)/2;Y.forEach((ai,Li)=>{Y[Li]=ai-Et}),X.forEach((ai,Li)=>{X[Li]=ai+Et})}}if(Object.assign(o,{slides:j,snapGrid:Y,slidesGrid:X,slidesSizesGrid:se}),m.centeredSlides&&m.cssMode&&!m.centeredSlidesBounds){Zm(g,"--swiper-centered-offset-before",`${-Y[0]}px`),Zm(g,"--swiper-centered-offset-after",`${o.size/2-se[se.length-1]/2}px`);const lt=-o.snapGrid[0],Tt=-o.slidesGrid[0];o.snapGrid=o.snapGrid.map(Et=>Et+lt),o.slidesGrid=o.slidesGrid.map(Et=>Et+Tt)}if($!==k&&o.emit("slidesLengthChange"),Y.length!==ce&&(o.params.watchOverflow&&o.checkOverflow(),o.emit("snapGridLengthChange")),X.length!==De&&o.emit("slidesGridLengthChange"),m.watchSlidesProgress&&o.updateSlidesOffset(),o.emit("slidesUpdated"),!R&&!m.cssMode&&(m.effect==="slide"||m.effect==="fade")){const lt=`${m.containerModifierClass}backface-hidden`,Tt=o.el.classList.contains(lt);$<=m.maxBackfaceHiddenSlides?Tt||o.el.classList.add(lt):Tt&&o.el.classList.remove(lt)}}function AE(o){const l=this,m=[],g=l.virtual&&l.params.virtual.enabled;let S=0,C;typeof o=="number"?l.setTransition(o):o===!0&&l.setTransition(l.params.speed);const w=c=>g?l.slides[l.getSlideIndexByData(c)]:l.slides[c];if(l.params.slidesPerView!=="auto"&&l.params.slidesPerView>1)if(l.params.centeredSlides)(l.visibleSlides||[]).forEach(c=>{m.push(c)});else for(C=0;C<Math.ceil(l.params.slidesPerView);C+=1){const c=l.activeIndex+C;if(c>l.slides.length&&!g)break;m.push(w(c))}else m.push(w(l.activeIndex));for(C=0;C<m.length;C+=1)if(typeof m[C]<"u"){const c=m[C].offsetHeight;S=c>S?c:S}(S||S===0)&&(l.wrapperEl.style.height=`${S}px`)}function PE(){const o=this,l=o.slides,m=o.isElement?o.isHorizontal()?o.wrapperEl.offsetLeft:o.wrapperEl.offsetTop:0;for(let g=0;g<l.length;g+=1)l[g].swiperSlideOffset=(o.isHorizontal()?l[g].offsetLeft:l[g].offsetTop)-m-o.cssOverflowAdjustment()}const nx=(o,l,m)=>{l&&!o.classList.contains(m)?o.classList.add(m):!l&&o.classList.contains(m)&&o.classList.remove(m)};function zE(o){o===void 0&&(o=this&&this.translate||0);const l=this,m=l.params,{slides:g,rtlTranslate:S,snapGrid:C}=l;if(g.length===0)return;typeof g[0].swiperSlideOffset>"u"&&l.updateSlidesOffset();let w=-o;S&&(w=o),l.visibleSlidesIndexes=[],l.visibleSlides=[];let c=m.spaceBetween;typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*l.size:typeof c=="string"&&(c=parseFloat(c));for(let R=0;R<g.length;R+=1){const k=g[R];let j=k.swiperSlideOffset;m.cssMode&&m.centeredSlides&&(j-=g[0].swiperSlideOffset);const $=(w+(m.centeredSlides?l.minTranslate():0)-j)/(k.swiperSlideSize+c),Y=(w-C[0]+(m.centeredSlides?l.minTranslate():0)-j)/(k.swiperSlideSize+c),X=-(w-j),se=X+l.slidesSizesGrid[R],xe=X>=0&&X<=l.size-l.slidesSizesGrid[R],Re=X>=0&&X<l.size-1||se>1&&se<=l.size||X<=0&&se>=l.size;Re&&(l.visibleSlides.push(k),l.visibleSlidesIndexes.push(R)),nx(k,Re,m.slideVisibleClass),nx(k,xe,m.slideFullyVisibleClass),k.progress=S?-$:$,k.originalProgress=S?-Y:Y}}function IE(o){const l=this;if(typeof o>"u"){const j=l.rtlTranslate?-1:1;o=l&&l.translate&&l.translate*j||0}const m=l.params,g=l.maxTranslate()-l.minTranslate();let{progress:S,isBeginning:C,isEnd:w,progressLoop:c}=l;const R=C,k=w;if(g===0)S=0,C=!0,w=!0;else{S=(o-l.minTranslate())/g;const j=Math.abs(o-l.minTranslate())<1,$=Math.abs(o-l.maxTranslate())<1;C=j||S<=0,w=$||S>=1,j&&(S=0),$&&(S=1)}if(m.loop){const j=l.getSlideIndexByData(0),$=l.getSlideIndexByData(l.slides.length-1),Y=l.slidesGrid[j],X=l.slidesGrid[$],se=l.slidesGrid[l.slidesGrid.length-1],xe=Math.abs(o);xe>=Y?c=(xe-Y)/se:c=(xe+se-X)/se,c>1&&(c-=1)}Object.assign(l,{progress:S,progressLoop:c,isBeginning:C,isEnd:w}),(m.watchSlidesProgress||m.centeredSlides&&m.autoHeight)&&l.updateSlidesProgress(o),C&&!R&&l.emit("reachBeginning toEdge"),w&&!k&&l.emit("reachEnd toEdge"),(R&&!C||k&&!w)&&l.emit("fromEdge"),l.emit("progress",S)}const iy=(o,l,m)=>{l&&!o.classList.contains(m)?o.classList.add(m):!l&&o.classList.contains(m)&&o.classList.remove(m)};function DE(){const o=this,{slides:l,params:m,slidesEl:g,activeIndex:S}=o,C=o.virtual&&m.virtual.enabled,w=o.grid&&m.grid&&m.grid.rows>1,c=$=>ic(g,`.${m.slideClass}${$}, swiper-slide${$}`)[0];let R,k,j;if(C)if(m.loop){let $=S-o.virtual.slidesBefore;$<0&&($=o.virtual.slides.length+$),$>=o.virtual.slides.length&&($-=o.virtual.slides.length),R=c(`[data-swiper-slide-index="${$}"]`)}else R=c(`[data-swiper-slide-index="${S}"]`);else w?(R=l.find($=>$.column===S),j=l.find($=>$.column===S+1),k=l.find($=>$.column===S-1)):R=l[S];R&&(w||(j=_E(R,`.${m.slideClass}, swiper-slide`)[0],m.loop&&!j&&(j=l[0]),k=yE(R,`.${m.slideClass}, swiper-slide`)[0],m.loop&&!k===0&&(k=l[l.length-1]))),l.forEach($=>{iy($,$===R,m.slideActiveClass),iy($,$===j,m.slideNextClass),iy($,$===k,m.slidePrevClass)}),o.emitSlidesClasses()}const Qm=(o,l)=>{if(!o||o.destroyed||!o.params)return;const m=()=>o.isElement?"swiper-slide":`.${o.params.slideClass}`,g=l.closest(m());if(g){let S=g.querySelector(`.${o.params.lazyPreloaderClass}`);!S&&o.isElement&&(g.shadowRoot?S=g.shadowRoot.querySelector(`.${o.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{g.shadowRoot&&(S=g.shadowRoot.querySelector(`.${o.params.lazyPreloaderClass}`),S&&S.remove())})),S&&S.remove()}},ny=(o,l)=>{if(!o.slides[l])return;const m=o.slides[l].querySelector('[loading="lazy"]');m&&m.removeAttribute("loading")},zy=o=>{if(!o||o.destroyed||!o.params)return;let l=o.params.lazyPreloadPrevNext;const m=o.slides.length;if(!m||!l||l<0)return;l=Math.min(l,m);const g=o.params.slidesPerView==="auto"?o.slidesPerViewDynamic():Math.ceil(o.params.slidesPerView),S=o.activeIndex;if(o.params.grid&&o.params.grid.rows>1){const w=S,c=[w-l];c.push(...Array.from({length:l}).map((R,k)=>w+g+k)),o.slides.forEach((R,k)=>{c.includes(R.column)&&ny(o,k)});return}const C=S+g-1;if(o.params.rewind||o.params.loop)for(let w=S-l;w<=C+l;w+=1){const c=(w%m+m)%m;(c<S||c>C)&&ny(o,c)}else for(let w=Math.max(S-l,0);w<=Math.min(C+l,m-1);w+=1)w!==S&&(w>C||w<S)&&ny(o,w)};function RE(o){const{slidesGrid:l,params:m}=o,g=o.rtlTranslate?o.translate:-o.translate;let S;for(let C=0;C<l.length;C+=1)typeof l[C+1]<"u"?g>=l[C]&&g<l[C+1]-(l[C+1]-l[C])/2?S=C:g>=l[C]&&g<l[C+1]&&(S=C+1):g>=l[C]&&(S=C);return m.normalizeSlideIndex&&(S<0||typeof S>"u")&&(S=0),S}function kE(o){const l=this,m=l.rtlTranslate?l.translate:-l.translate,{snapGrid:g,params:S,activeIndex:C,realIndex:w,snapIndex:c}=l;let R=o,k;const j=X=>{let se=X-l.virtual.slidesBefore;return se<0&&(se=l.virtual.slides.length+se),se>=l.virtual.slides.length&&(se-=l.virtual.slides.length),se};if(typeof R>"u"&&(R=RE(l)),g.indexOf(m)>=0)k=g.indexOf(m);else{const X=Math.min(S.slidesPerGroupSkip,R);k=X+Math.floor((R-X)/S.slidesPerGroup)}if(k>=g.length&&(k=g.length-1),R===C&&!l.params.loop){k!==c&&(l.snapIndex=k,l.emit("snapIndexChange"));return}if(R===C&&l.params.loop&&l.virtual&&l.params.virtual.enabled){l.realIndex=j(R);return}const $=l.grid&&S.grid&&S.grid.rows>1;let Y;if(l.virtual&&S.virtual.enabled&&S.loop)Y=j(R);else if($){const X=l.slides.find(xe=>xe.column===R);let se=parseInt(X.getAttribute("data-swiper-slide-index"),10);Number.isNaN(se)&&(se=Math.max(l.slides.indexOf(X),0)),Y=Math.floor(se/S.grid.rows)}else if(l.slides[R]){const X=l.slides[R].getAttribute("data-swiper-slide-index");X?Y=parseInt(X,10):Y=R}else Y=R;Object.assign(l,{previousSnapIndex:c,snapIndex:k,previousRealIndex:w,realIndex:Y,previousIndex:C,activeIndex:R}),l.initialized&&zy(l),l.emit("activeIndexChange"),l.emit("snapIndexChange"),(l.initialized||l.params.runCallbacksOnInit)&&(w!==Y&&l.emit("realIndexChange"),l.emit("slideChange"))}function LE(o,l){const m=this,g=m.params;let S=o.closest(`.${g.slideClass}, swiper-slide`);!S&&m.isElement&&l&&l.length>1&&l.includes(o)&&[...l.slice(l.indexOf(o)+1,l.length)].forEach(c=>{!S&&c.matches&&c.matches(`.${g.slideClass}, swiper-slide`)&&(S=c)});let C=!1,w;if(S){for(let c=0;c<m.slides.length;c+=1)if(m.slides[c]===S){C=!0,w=c;break}}if(S&&C)m.clickedSlide=S,m.virtual&&m.params.virtual.enabled?m.clickedIndex=parseInt(S.getAttribute("data-swiper-slide-index"),10):m.clickedIndex=w;else{m.clickedSlide=void 0,m.clickedIndex=void 0;return}g.slideToClickedSlide&&m.clickedIndex!==void 0&&m.clickedIndex!==m.activeIndex&&m.slideToClickedSlide()}var OE={updateSize:EE,updateSlides:CE,updateAutoHeight:AE,updateSlidesOffset:PE,updateSlidesProgress:zE,updateProgress:IE,updateSlidesClasses:DE,updateActiveIndex:kE,updateClickedSlide:LE};function BE(o){o===void 0&&(o=this.isHorizontal()?"x":"y");const l=this,{params:m,rtlTranslate:g,translate:S,wrapperEl:C}=l;if(m.virtualTranslate)return g?-S:S;if(m.cssMode)return S;let w=fE(C,o);return w+=l.cssOverflowAdjustment(),g&&(w=-w),w||0}function jE(o,l){const m=this,{rtlTranslate:g,params:S,wrapperEl:C,progress:w}=m;let c=0,R=0;const k=0;m.isHorizontal()?c=g?-o:o:R=o,S.roundLengths&&(c=Math.floor(c),R=Math.floor(R)),m.previousTranslate=m.translate,m.translate=m.isHorizontal()?c:R,S.cssMode?C[m.isHorizontal()?"scrollLeft":"scrollTop"]=m.isHorizontal()?-c:-R:S.virtualTranslate||(m.isHorizontal()?c-=m.cssOverflowAdjustment():R-=m.cssOverflowAdjustment(),C.style.transform=`translate3d(${c}px, ${R}px, ${k}px)`);let j;const $=m.maxTranslate()-m.minTranslate();$===0?j=0:j=(o-m.minTranslate())/$,j!==w&&m.updateProgress(o),m.emit("setTranslate",m.translate,l)}function NE(){return-this.snapGrid[0]}function FE(){return-this.snapGrid[this.snapGrid.length-1]}function VE(o,l,m,g,S){o===void 0&&(o=0),l===void 0&&(l=this.params.speed),m===void 0&&(m=!0),g===void 0&&(g=!0);const C=this,{params:w,wrapperEl:c}=C;if(C.animating&&w.preventInteractionOnTransition)return!1;const R=C.minTranslate(),k=C.maxTranslate();let j;if(g&&o>R?j=R:g&&o<k?j=k:j=o,C.updateProgress(j),w.cssMode){const $=C.isHorizontal();if(l===0)c[$?"scrollLeft":"scrollTop"]=-j;else{if(!C.support.smoothScroll)return hb({swiper:C,targetPosition:-j,side:$?"left":"top"}),!0;c.scrollTo({[$?"left":"top"]:-j,behavior:"smooth"})}return!0}return l===0?(C.setTransition(0),C.setTranslate(j),m&&(C.emit("beforeTransitionStart",l,S),C.emit("transitionEnd"))):(C.setTransition(l),C.setTranslate(j),m&&(C.emit("beforeTransitionStart",l,S),C.emit("transitionStart")),C.animating||(C.animating=!0,C.onTranslateToWrapperTransitionEnd||(C.onTranslateToWrapperTransitionEnd=function(Y){!C||C.destroyed||Y.target===this&&(C.wrapperEl.removeEventListener("transitionend",C.onTranslateToWrapperTransitionEnd),C.onTranslateToWrapperTransitionEnd=null,delete C.onTranslateToWrapperTransitionEnd,C.animating=!1,m&&C.emit("transitionEnd"))}),C.wrapperEl.addEventListener("transitionend",C.onTranslateToWrapperTransitionEnd))),!0}var UE={getTranslate:BE,setTranslate:jE,minTranslate:NE,maxTranslate:FE,translateTo:VE};function GE(o,l){const m=this;m.params.cssMode||(m.wrapperEl.style.transitionDuration=`${o}ms`,m.wrapperEl.style.transitionDelay=o===0?"0ms":""),m.emit("setTransition",o,l)}function mb(o){let{swiper:l,runCallbacks:m,direction:g,step:S}=o;const{activeIndex:C,previousIndex:w}=l;let c=g;c||(C>w?c="next":C<w?c="prev":c="reset"),l.emit(`transition${S}`),m&&c==="reset"?l.emit(`slideResetTransition${S}`):m&&C!==w&&(l.emit(`slideChangeTransition${S}`),c==="next"?l.emit(`slideNextTransition${S}`):l.emit(`slidePrevTransition${S}`))}function ZE(o,l){o===void 0&&(o=!0);const m=this,{params:g}=m;g.cssMode||(g.autoHeight&&m.updateAutoHeight(),mb({swiper:m,runCallbacks:o,direction:l,step:"Start"}))}function qE(o,l){o===void 0&&(o=!0);const m=this,{params:g}=m;m.animating=!1,!g.cssMode&&(m.setTransition(0),mb({swiper:m,runCallbacks:o,direction:l,step:"End"}))}var $E={setTransition:GE,transitionStart:ZE,transitionEnd:qE};function HE(o,l,m,g,S){o===void 0&&(o=0),m===void 0&&(m=!0),typeof o=="string"&&(o=parseInt(o,10));const C=this;let w=o;w<0&&(w=0);const{params:c,snapGrid:R,slidesGrid:k,previousIndex:j,activeIndex:$,rtlTranslate:Y,wrapperEl:X,enabled:se}=C;if(!se&&!g&&!S||C.destroyed||C.animating&&c.preventInteractionOnTransition)return!1;typeof l>"u"&&(l=C.params.speed);const xe=Math.min(C.params.slidesPerGroupSkip,w);let Re=xe+Math.floor((w-xe)/C.params.slidesPerGroup);Re>=R.length&&(Re=R.length-1);const ce=-R[Re];if(c.normalizeSlideIndex)for(let ht=0;ht<k.length;ht+=1){const et=-Math.floor(ce*100),ut=Math.floor(k[ht]*100),lt=Math.floor(k[ht+1]*100);typeof k[ht+1]<"u"?et>=ut&&et<lt-(lt-ut)/2?w=ht:et>=ut&&et<lt&&(w=ht+1):et>=ut&&(w=ht)}if(C.initialized&&w!==$&&(!C.allowSlideNext&&(Y?ce>C.translate&&ce>C.minTranslate():ce<C.translate&&ce<C.minTranslate())||!C.allowSlidePrev&&ce>C.translate&&ce>C.maxTranslate()&&($||0)!==w))return!1;w!==(j||0)&&m&&C.emit("beforeSlideChangeStart"),C.updateProgress(ce);let De;w>$?De="next":w<$?De="prev":De="reset";const Ce=C.virtual&&C.params.virtual.enabled;if(!(Ce&&S)&&(Y&&-ce===C.translate||!Y&&ce===C.translate))return C.updateActiveIndex(w),c.autoHeight&&C.updateAutoHeight(),C.updateSlidesClasses(),c.effect!=="slide"&&C.setTranslate(ce),De!=="reset"&&(C.transitionStart(m,De),C.transitionEnd(m,De)),!1;if(c.cssMode){const ht=C.isHorizontal(),et=Y?ce:-ce;if(l===0)Ce&&(C.wrapperEl.style.scrollSnapType="none",C._immediateVirtual=!0),Ce&&!C._cssModeVirtualInitialSet&&C.params.initialSlide>0?(C._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{X[ht?"scrollLeft":"scrollTop"]=et})):X[ht?"scrollLeft":"scrollTop"]=et,Ce&&requestAnimationFrame(()=>{C.wrapperEl.style.scrollSnapType="",C._immediateVirtual=!1});else{if(!C.support.smoothScroll)return hb({swiper:C,targetPosition:et,side:ht?"left":"top"}),!0;X.scrollTo({[ht?"left":"top"]:et,behavior:"smooth"})}return!0}const ct=pb().isSafari;return Ce&&!S&&ct&&C.isElement&&C.virtual.update(!1,!1,w),C.setTransition(l),C.setTranslate(ce),C.updateActiveIndex(w),C.updateSlidesClasses(),C.emit("beforeTransitionStart",l,g),C.transitionStart(m,De),l===0?C.transitionEnd(m,De):C.animating||(C.animating=!0,C.onSlideToWrapperTransitionEnd||(C.onSlideToWrapperTransitionEnd=function(et){!C||C.destroyed||et.target===this&&(C.wrapperEl.removeEventListener("transitionend",C.onSlideToWrapperTransitionEnd),C.onSlideToWrapperTransitionEnd=null,delete C.onSlideToWrapperTransitionEnd,C.transitionEnd(m,De))}),C.wrapperEl.addEventListener("transitionend",C.onSlideToWrapperTransitionEnd)),!0}function XE(o,l,m,g){o===void 0&&(o=0),m===void 0&&(m=!0),typeof o=="string"&&(o=parseInt(o,10));const S=this;if(S.destroyed)return;typeof l>"u"&&(l=S.params.speed);const C=S.grid&&S.params.grid&&S.params.grid.rows>1;let w=o;if(S.params.loop)if(S.virtual&&S.params.virtual.enabled)w=w+S.virtual.slidesBefore;else{let c;if(C){const Y=w*S.params.grid.rows;c=S.slides.find(X=>X.getAttribute("data-swiper-slide-index")*1===Y).column}else c=S.getSlideIndexByData(w);const R=C?Math.ceil(S.slides.length/S.params.grid.rows):S.slides.length,{centeredSlides:k}=S.params;let j=S.params.slidesPerView;j==="auto"?j=S.slidesPerViewDynamic():(j=Math.ceil(parseFloat(S.params.slidesPerView,10)),k&&j%2===0&&(j=j+1));let $=R-c<j;if(k&&($=$||c<Math.ceil(j/2)),g&&k&&S.params.slidesPerView!=="auto"&&!C&&($=!1),$){const Y=k?c<S.activeIndex?"prev":"next":c-S.activeIndex-1<S.params.slidesPerView?"next":"prev";S.loopFix({direction:Y,slideTo:!0,activeSlideIndex:Y==="next"?c+1:c-R+1,slideRealIndex:Y==="next"?S.realIndex:void 0})}if(C){const Y=w*S.params.grid.rows;w=S.slides.find(X=>X.getAttribute("data-swiper-slide-index")*1===Y).column}else w=S.getSlideIndexByData(w)}return requestAnimationFrame(()=>{S.slideTo(w,l,m,g)}),S}function YE(o,l,m){l===void 0&&(l=!0);const g=this,{enabled:S,params:C,animating:w}=g;if(!S||g.destroyed)return g;typeof o>"u"&&(o=g.params.speed);let c=C.slidesPerGroup;C.slidesPerView==="auto"&&C.slidesPerGroup===1&&C.slidesPerGroupAuto&&(c=Math.max(g.slidesPerViewDynamic("current",!0),1));const R=g.activeIndex<C.slidesPerGroupSkip?1:c,k=g.virtual&&C.virtual.enabled;if(C.loop){if(w&&!k&&C.loopPreventsSliding)return!1;if(g.loopFix({direction:"next"}),g._clientLeft=g.wrapperEl.clientLeft,g.activeIndex===g.slides.length-1&&C.cssMode)return requestAnimationFrame(()=>{g.slideTo(g.activeIndex+R,o,l,m)}),!0}return C.rewind&&g.isEnd?g.slideTo(0,o,l,m):g.slideTo(g.activeIndex+R,o,l,m)}function WE(o,l,m){l===void 0&&(l=!0);const g=this,{params:S,snapGrid:C,slidesGrid:w,rtlTranslate:c,enabled:R,animating:k}=g;if(!R||g.destroyed)return g;typeof o>"u"&&(o=g.params.speed);const j=g.virtual&&S.virtual.enabled;if(S.loop){if(k&&!j&&S.loopPreventsSliding)return!1;g.loopFix({direction:"prev"}),g._clientLeft=g.wrapperEl.clientLeft}const $=c?g.translate:-g.translate;function Y(De){return De<0?-Math.floor(Math.abs(De)):Math.floor(De)}const X=Y($),se=C.map(De=>Y(De)),xe=S.freeMode&&S.freeMode.enabled;let Re=C[se.indexOf(X)-1];if(typeof Re>"u"&&(S.cssMode||xe)){let De;C.forEach((Ce,Ye)=>{X>=Ce&&(De=Ye)}),typeof De<"u"&&(Re=xe?C[De]:C[De>0?De-1:De])}let ce=0;if(typeof Re<"u"&&(ce=w.indexOf(Re),ce<0&&(ce=g.activeIndex-1),S.slidesPerView==="auto"&&S.slidesPerGroup===1&&S.slidesPerGroupAuto&&(ce=ce-g.slidesPerViewDynamic("previous",!0)+1,ce=Math.max(ce,0))),S.rewind&&g.isBeginning){const De=g.params.virtual&&g.params.virtual.enabled&&g.virtual?g.virtual.slides.length-1:g.slides.length-1;return g.slideTo(De,o,l,m)}else if(S.loop&&g.activeIndex===0&&S.cssMode)return requestAnimationFrame(()=>{g.slideTo(ce,o,l,m)}),!0;return g.slideTo(ce,o,l,m)}function KE(o,l,m){l===void 0&&(l=!0);const g=this;if(!g.destroyed)return typeof o>"u"&&(o=g.params.speed),g.slideTo(g.activeIndex,o,l,m)}function QE(o,l,m,g){l===void 0&&(l=!0),g===void 0&&(g=.5);const S=this;if(S.destroyed)return;typeof o>"u"&&(o=S.params.speed);let C=S.activeIndex;const w=Math.min(S.params.slidesPerGroupSkip,C),c=w+Math.floor((C-w)/S.params.slidesPerGroup),R=S.rtlTranslate?S.translate:-S.translate;if(R>=S.snapGrid[c]){const k=S.snapGrid[c],j=S.snapGrid[c+1];R-k>(j-k)*g&&(C+=S.params.slidesPerGroup)}else{const k=S.snapGrid[c-1],j=S.snapGrid[c];R-k<=(j-k)*g&&(C-=S.params.slidesPerGroup)}return C=Math.max(C,0),C=Math.min(C,S.slidesGrid.length-1),S.slideTo(C,o,l,m)}function JE(){const o=this;if(o.destroyed)return;const{params:l,slidesEl:m}=o,g=l.slidesPerView==="auto"?o.slidesPerViewDynamic():l.slidesPerView;let S=o.getSlideIndexWhenGrid(o.clickedIndex),C;const w=o.isElement?"swiper-slide":`.${l.slideClass}`,c=o.grid&&o.params.grid&&o.params.grid.rows>1;if(l.loop){if(o.animating)return;C=parseInt(o.clickedSlide.getAttribute("data-swiper-slide-index"),10),l.centeredSlides?o.slideToLoop(C):S>(c?(o.slides.length-g)/2-(o.params.grid.rows-1):o.slides.length-g)?(o.loopFix(),S=o.getSlideIndex(ic(m,`${w}[data-swiper-slide-index="${C}"]`)[0]),ub(()=>{o.slideTo(S)})):o.slideTo(S)}else o.slideTo(S)}var eC={slideTo:HE,slideToLoop:XE,slideNext:YE,slidePrev:WE,slideReset:KE,slideToClosest:QE,slideToClickedSlide:JE};function tC(o,l){const m=this,{params:g,slidesEl:S}=m;if(!g.loop||m.virtual&&m.params.virtual.enabled)return;const C=()=>{ic(S,`.${g.slideClass}, swiper-slide`).forEach((X,se)=>{X.setAttribute("data-swiper-slide-index",se)})},w=()=>{const Y=ic(S,`.${g.slideBlankClass}`);Y.forEach(X=>{X.remove()}),Y.length>0&&(m.recalcSlides(),m.updateSlides())},c=m.grid&&g.grid&&g.grid.rows>1;g.loopAddBlankSlides&&(g.slidesPerGroup>1||c)&&w();const R=g.slidesPerGroup*(c?g.grid.rows:1),k=m.slides.length%R!==0,j=c&&m.slides.length%g.grid.rows!==0,$=Y=>{for(let X=0;X<Y;X+=1){const se=m.isElement?ug("swiper-slide",[g.slideBlankClass]):ug("div",[g.slideClass,g.slideBlankClass]);m.slidesEl.append(se)}};if(k){if(g.loopAddBlankSlides){const Y=R-m.slides.length%R;$(Y),m.recalcSlides(),m.updateSlides()}else cg("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");C()}else if(j){if(g.loopAddBlankSlides){const Y=g.grid.rows-m.slides.length%g.grid.rows;$(Y),m.recalcSlides(),m.updateSlides()}else cg("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");C()}else C();m.loopFix({slideRealIndex:o,direction:g.centeredSlides?void 0:"next",initial:l})}function iC(o){let{slideRealIndex:l,slideTo:m=!0,direction:g,setTranslate:S,activeSlideIndex:C,initial:w,byController:c,byMousewheel:R}=o===void 0?{}:o;const k=this;if(!k.params.loop)return;k.emit("beforeLoopFix");const{slides:j,allowSlidePrev:$,allowSlideNext:Y,slidesEl:X,params:se}=k,{centeredSlides:xe,initialSlide:Re}=se;if(k.allowSlidePrev=!0,k.allowSlideNext=!0,k.virtual&&se.virtual.enabled){m&&(!se.centeredSlides&&k.snapIndex===0?k.slideTo(k.virtual.slides.length,0,!1,!0):se.centeredSlides&&k.snapIndex<se.slidesPerView?k.slideTo(k.virtual.slides.length+k.snapIndex,0,!1,!0):k.snapIndex===k.snapGrid.length-1&&k.slideTo(k.virtual.slidesBefore,0,!1,!0)),k.allowSlidePrev=$,k.allowSlideNext=Y,k.emit("loopFix");return}let ce=se.slidesPerView;ce==="auto"?ce=k.slidesPerViewDynamic():(ce=Math.ceil(parseFloat(se.slidesPerView,10)),xe&&ce%2===0&&(ce=ce+1));const De=se.slidesPerGroupAuto?ce:se.slidesPerGroup;let Ce=xe?Math.max(De,Math.ceil(ce/2)):De;Ce%De!==0&&(Ce+=De-Ce%De),Ce+=se.loopAdditionalSlides,k.loopedSlides=Ce;const Ye=k.grid&&se.grid&&se.grid.rows>1;j.length<ce+Ce||k.params.effect==="cards"&&j.length<ce+Ce*2?cg("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):Ye&&se.grid.fill==="row"&&cg("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const Fe=[],ct=[],ht=Ye?Math.ceil(j.length/se.grid.rows):j.length,et=w&&ht-Re<ce&&!xe;let ut=et?Re:k.activeIndex;typeof C>"u"?C=k.getSlideIndex(j.find(je=>je.classList.contains(se.slideActiveClass))):ut=C;const lt=g==="next"||!g,Tt=g==="prev"||!g;let Et=0,ai=0;const ui=(Ye?j[C].column:C)+(xe&&typeof S>"u"?-ce/2+.5:0);if(ui<Ce){Et=Math.max(Ce-ui,De);for(let je=0;je<Ce-ui;je+=1){const it=je-Math.floor(je/ht)*ht;if(Ye){const st=ht-it-1;for(let mt=j.length-1;mt>=0;mt-=1)j[mt].column===st&&Fe.push(mt)}else Fe.push(ht-it-1)}}else if(ui+ce>ht-Ce){ai=Math.max(ui-(ht-Ce*2),De),et&&(ai=Math.max(ai,ce-ht+Re+1));for(let je=0;je<ai;je+=1){const it=je-Math.floor(je/ht)*ht;Ye?j.forEach((st,mt)=>{st.column===it&&ct.push(mt)}):ct.push(it)}}if(k.__preventObserver__=!0,requestAnimationFrame(()=>{k.__preventObserver__=!1}),k.params.effect==="cards"&&j.length<ce+Ce*2&&(ct.includes(C)&&ct.splice(ct.indexOf(C),1),Fe.includes(C)&&Fe.splice(Fe.indexOf(C),1)),Tt&&Fe.forEach(je=>{j[je].swiperLoopMoveDOM=!0,X.prepend(j[je]),j[je].swiperLoopMoveDOM=!1}),lt&&ct.forEach(je=>{j[je].swiperLoopMoveDOM=!0,X.append(j[je]),j[je].swiperLoopMoveDOM=!1}),k.recalcSlides(),se.slidesPerView==="auto"?k.updateSlides():Ye&&(Fe.length>0&&Tt||ct.length>0&&lt)&&k.slides.forEach((je,it)=>{k.grid.updateSlide(it,je,k.slides)}),se.watchSlidesProgress&&k.updateSlidesOffset(),m){if(Fe.length>0&&Tt){if(typeof l>"u"){const je=k.slidesGrid[ut],st=k.slidesGrid[ut+Et]-je;R?k.setTranslate(k.translate-st):(k.slideTo(ut+Math.ceil(Et),0,!1,!0),S&&(k.touchEventsData.startTranslate=k.touchEventsData.startTranslate-st,k.touchEventsData.currentTranslate=k.touchEventsData.currentTranslate-st))}else if(S){const je=Ye?Fe.length/se.grid.rows:Fe.length;k.slideTo(k.activeIndex+je,0,!1,!0),k.touchEventsData.currentTranslate=k.translate}}else if(ct.length>0&&lt)if(typeof l>"u"){const je=k.slidesGrid[ut],st=k.slidesGrid[ut-ai]-je;R?k.setTranslate(k.translate-st):(k.slideTo(ut-ai,0,!1,!0),S&&(k.touchEventsData.startTranslate=k.touchEventsData.startTranslate-st,k.touchEventsData.currentTranslate=k.touchEventsData.currentTranslate-st))}else{const je=Ye?ct.length/se.grid.rows:ct.length;k.slideTo(k.activeIndex-je,0,!1,!0)}}if(k.allowSlidePrev=$,k.allowSlideNext=Y,k.controller&&k.controller.control&&!c){const je={slideRealIndex:l,direction:g,setTranslate:S,activeSlideIndex:C,byController:!0};Array.isArray(k.controller.control)?k.controller.control.forEach(it=>{!it.destroyed&&it.params.loop&&it.loopFix({...je,slideTo:it.params.slidesPerView===se.slidesPerView?m:!1})}):k.controller.control instanceof k.constructor&&k.controller.control.params.loop&&k.controller.control.loopFix({...je,slideTo:k.controller.control.params.slidesPerView===se.slidesPerView?m:!1})}k.emit("loopFix")}function nC(){const o=this,{params:l,slidesEl:m}=o;if(!l.loop||!m||o.virtual&&o.params.virtual.enabled)return;o.recalcSlides();const g=[];o.slides.forEach(S=>{const C=typeof S.swiperSlideIndex>"u"?S.getAttribute("data-swiper-slide-index")*1:S.swiperSlideIndex;g[C]=S}),o.slides.forEach(S=>{S.removeAttribute("data-swiper-slide-index")}),g.forEach(S=>{m.append(S)}),o.recalcSlides(),o.slideTo(o.realIndex,0)}var rC={loopCreate:tC,loopFix:iC,loopDestroy:nC};function aC(o){const l=this;if(!l.params.simulateTouch||l.params.watchOverflow&&l.isLocked||l.params.cssMode)return;const m=l.params.touchEventsTarget==="container"?l.el:l.wrapperEl;l.isElement&&(l.__preventObserver__=!0),m.style.cursor="move",m.style.cursor=o?"grabbing":"grab",l.isElement&&requestAnimationFrame(()=>{l.__preventObserver__=!1})}function sC(){const o=this;o.params.watchOverflow&&o.isLocked||o.params.cssMode||(o.isElement&&(o.__preventObserver__=!0),o[o.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",o.isElement&&requestAnimationFrame(()=>{o.__preventObserver__=!1}))}var oC={setGrabCursor:aC,unsetGrabCursor:sC};function lC(o,l){l===void 0&&(l=this);function m(g){if(!g||g===sc()||g===Xa())return null;g.assignedSlot&&(g=g.assignedSlot);const S=g.closest(o);return!S&&!g.getRootNode?null:S||m(g.getRootNode().host)}return m(l)}function rx(o,l,m){const g=Xa(),{params:S}=o,C=S.edgeSwipeDetection,w=S.edgeSwipeThreshold;return C&&(m<=w||m>=g.innerWidth-w)?C==="prevent"?(l.preventDefault(),!0):!1:!0}function cC(o){const l=this,m=sc();let g=o;g.originalEvent&&(g=g.originalEvent);const S=l.touchEventsData;if(g.type==="pointerdown"){if(S.pointerId!==null&&S.pointerId!==g.pointerId)return;S.pointerId=g.pointerId}else g.type==="touchstart"&&g.targetTouches.length===1&&(S.touchId=g.targetTouches[0].identifier);if(g.type==="touchstart"){rx(l,g,g.targetTouches[0].pageX);return}const{params:C,touches:w,enabled:c}=l;if(!c||!C.simulateTouch&&g.pointerType==="mouse"||l.animating&&C.preventInteractionOnTransition)return;!l.animating&&C.cssMode&&C.loop&&l.loopFix();let R=g.target;if(C.touchEventsTarget==="wrapper"&&!gE(R,l.wrapperEl)||"which"in g&&g.which===3||"button"in g&&g.button>0||S.isTouched&&S.isMoved)return;const k=!!C.noSwipingClass&&C.noSwipingClass!=="",j=g.composedPath?g.composedPath():g.path;k&&g.target&&g.target.shadowRoot&&j&&(R=j[0]);const $=C.noSwipingSelector?C.noSwipingSelector:`.${C.noSwipingClass}`,Y=!!(g.target&&g.target.shadowRoot);if(C.noSwiping&&(Y?lC($,R):R.closest($))){l.allowClick=!0;return}if(C.swipeHandler&&!R.closest(C.swipeHandler))return;w.currentX=g.pageX,w.currentY=g.pageY;const X=w.currentX,se=w.currentY;if(!rx(l,g,X))return;Object.assign(S,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),w.startX=X,w.startY=se,S.touchStartTime=lg(),l.allowClick=!0,l.updateSize(),l.swipeDirection=void 0,C.threshold>0&&(S.allowThresholdMove=!1);let xe=!0;R.matches(S.focusableElements)&&(xe=!1,R.nodeName==="SELECT"&&(S.isTouched=!1)),m.activeElement&&m.activeElement.matches(S.focusableElements)&&m.activeElement!==R&&(g.pointerType==="mouse"||g.pointerType!=="mouse"&&!R.matches(S.focusableElements))&&m.activeElement.blur();const Re=xe&&l.allowTouchMove&&C.touchStartPreventDefault;(C.touchStartForcePreventDefault||Re)&&!R.isContentEditable&&g.preventDefault(),C.freeMode&&C.freeMode.enabled&&l.freeMode&&l.animating&&!C.cssMode&&l.freeMode.onTouchStart(),l.emit("touchStart",g)}function uC(o){const l=sc(),m=this,g=m.touchEventsData,{params:S,touches:C,rtlTranslate:w,enabled:c}=m;if(!c||!S.simulateTouch&&o.pointerType==="mouse")return;let R=o;if(R.originalEvent&&(R=R.originalEvent),R.type==="pointermove"&&(g.touchId!==null||R.pointerId!==g.pointerId))return;let k;if(R.type==="touchmove"){if(k=[...R.changedTouches].find(Fe=>Fe.identifier===g.touchId),!k||k.identifier!==g.touchId)return}else k=R;if(!g.isTouched){g.startMoving&&g.isScrolling&&m.emit("touchMoveOpposite",R);return}const j=k.pageX,$=k.pageY;if(R.preventedByNestedSwiper){C.startX=j,C.startY=$;return}if(!m.allowTouchMove){R.target.matches(g.focusableElements)||(m.allowClick=!1),g.isTouched&&(Object.assign(C,{startX:j,startY:$,currentX:j,currentY:$}),g.touchStartTime=lg());return}if(S.touchReleaseOnEdges&&!S.loop)if(m.isVertical()){if($<C.startY&&m.translate<=m.maxTranslate()||$>C.startY&&m.translate>=m.minTranslate()){g.isTouched=!1,g.isMoved=!1;return}}else{if(w&&(j>C.startX&&-m.translate<=m.maxTranslate()||j<C.startX&&-m.translate>=m.minTranslate()))return;if(!w&&(j<C.startX&&m.translate<=m.maxTranslate()||j>C.startX&&m.translate>=m.minTranslate()))return}if(l.activeElement&&l.activeElement.matches(g.focusableElements)&&l.activeElement!==R.target&&R.pointerType!=="mouse"&&l.activeElement.blur(),l.activeElement&&R.target===l.activeElement&&R.target.matches(g.focusableElements)){g.isMoved=!0,m.allowClick=!1;return}g.allowTouchCallbacks&&m.emit("touchMove",R),C.previousX=C.currentX,C.previousY=C.currentY,C.currentX=j,C.currentY=$;const Y=C.currentX-C.startX,X=C.currentY-C.startY;if(m.params.threshold&&Math.sqrt(Y**2+X**2)<m.params.threshold)return;if(typeof g.isScrolling>"u"){let Fe;m.isHorizontal()&&C.currentY===C.startY||m.isVertical()&&C.currentX===C.startX?g.isScrolling=!1:Y*Y+X*X>=25&&(Fe=Math.atan2(Math.abs(X),Math.abs(Y))*180/Math.PI,g.isScrolling=m.isHorizontal()?Fe>S.touchAngle:90-Fe>S.touchAngle)}if(g.isScrolling&&m.emit("touchMoveOpposite",R),typeof g.startMoving>"u"&&(C.currentX!==C.startX||C.currentY!==C.startY)&&(g.startMoving=!0),g.isScrolling||R.type==="touchmove"&&g.preventTouchMoveFromPointerMove){g.isTouched=!1;return}if(!g.startMoving)return;m.allowClick=!1,!S.cssMode&&R.cancelable&&R.preventDefault(),S.touchMoveStopPropagation&&!S.nested&&R.stopPropagation();let se=m.isHorizontal()?Y:X,xe=m.isHorizontal()?C.currentX-C.previousX:C.currentY-C.previousY;S.oneWayMovement&&(se=Math.abs(se)*(w?1:-1),xe=Math.abs(xe)*(w?1:-1)),C.diff=se,se*=S.touchRatio,w&&(se=-se,xe=-xe);const Re=m.touchesDirection;m.swipeDirection=se>0?"prev":"next",m.touchesDirection=xe>0?"prev":"next";const ce=m.params.loop&&!S.cssMode,De=m.touchesDirection==="next"&&m.allowSlideNext||m.touchesDirection==="prev"&&m.allowSlidePrev;if(!g.isMoved){if(ce&&De&&m.loopFix({direction:m.swipeDirection}),g.startTranslate=m.getTranslate(),m.setTransition(0),m.animating){const Fe=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});m.wrapperEl.dispatchEvent(Fe)}g.allowMomentumBounce=!1,S.grabCursor&&(m.allowSlideNext===!0||m.allowSlidePrev===!0)&&m.setGrabCursor(!0),m.emit("sliderFirstMove",R)}if(new Date().getTime(),S._loopSwapReset!==!1&&g.isMoved&&g.allowThresholdMove&&Re!==m.touchesDirection&&ce&&De&&Math.abs(se)>=1){Object.assign(C,{startX:j,startY:$,currentX:j,currentY:$,startTranslate:g.currentTranslate}),g.loopSwapReset=!0,g.startTranslate=g.currentTranslate;return}m.emit("sliderMove",R),g.isMoved=!0,g.currentTranslate=se+g.startTranslate;let Ce=!0,Ye=S.resistanceRatio;if(S.touchReleaseOnEdges&&(Ye=0),se>0?(ce&&De&&g.allowThresholdMove&&g.currentTranslate>(S.centeredSlides?m.minTranslate()-m.slidesSizesGrid[m.activeIndex+1]-(S.slidesPerView!=="auto"&&m.slides.length-S.slidesPerView>=2?m.slidesSizesGrid[m.activeIndex+1]+m.params.spaceBetween:0)-m.params.spaceBetween:m.minTranslate())&&m.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),g.currentTranslate>m.minTranslate()&&(Ce=!1,S.resistance&&(g.currentTranslate=m.minTranslate()-1+(-m.minTranslate()+g.startTranslate+se)**Ye))):se<0&&(ce&&De&&g.allowThresholdMove&&g.currentTranslate<(S.centeredSlides?m.maxTranslate()+m.slidesSizesGrid[m.slidesSizesGrid.length-1]+m.params.spaceBetween+(S.slidesPerView!=="auto"&&m.slides.length-S.slidesPerView>=2?m.slidesSizesGrid[m.slidesSizesGrid.length-1]+m.params.spaceBetween:0):m.maxTranslate())&&m.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:m.slides.length-(S.slidesPerView==="auto"?m.slidesPerViewDynamic():Math.ceil(parseFloat(S.slidesPerView,10)))}),g.currentTranslate<m.maxTranslate()&&(Ce=!1,S.resistance&&(g.currentTranslate=m.maxTranslate()+1-(m.maxTranslate()-g.startTranslate-se)**Ye))),Ce&&(R.preventedByNestedSwiper=!0),!m.allowSlideNext&&m.swipeDirection==="next"&&g.currentTranslate<g.startTranslate&&(g.currentTranslate=g.startTranslate),!m.allowSlidePrev&&m.swipeDirection==="prev"&&g.currentTranslate>g.startTranslate&&(g.currentTranslate=g.startTranslate),!m.allowSlidePrev&&!m.allowSlideNext&&(g.currentTranslate=g.startTranslate),S.threshold>0)if(Math.abs(se)>S.threshold||g.allowThresholdMove){if(!g.allowThresholdMove){g.allowThresholdMove=!0,C.startX=C.currentX,C.startY=C.currentY,g.currentTranslate=g.startTranslate,C.diff=m.isHorizontal()?C.currentX-C.startX:C.currentY-C.startY;return}}else{g.currentTranslate=g.startTranslate;return}!S.followFinger||S.cssMode||((S.freeMode&&S.freeMode.enabled&&m.freeMode||S.watchSlidesProgress)&&(m.updateActiveIndex(),m.updateSlidesClasses()),S.freeMode&&S.freeMode.enabled&&m.freeMode&&m.freeMode.onTouchMove(),m.updateProgress(g.currentTranslate),m.setTranslate(g.currentTranslate))}function hC(o){const l=this,m=l.touchEventsData;let g=o;g.originalEvent&&(g=g.originalEvent);let S;if(g.type==="touchend"||g.type==="touchcancel"){if(S=[...g.changedTouches].find(Fe=>Fe.identifier===m.touchId),!S||S.identifier!==m.touchId)return}else{if(m.touchId!==null||g.pointerId!==m.pointerId)return;S=g}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(g.type)&&!(["pointercancel","contextmenu"].includes(g.type)&&(l.browser.isSafari||l.browser.isWebView)))return;m.pointerId=null,m.touchId=null;const{params:w,touches:c,rtlTranslate:R,slidesGrid:k,enabled:j}=l;if(!j||!w.simulateTouch&&g.pointerType==="mouse")return;if(m.allowTouchCallbacks&&l.emit("touchEnd",g),m.allowTouchCallbacks=!1,!m.isTouched){m.isMoved&&w.grabCursor&&l.setGrabCursor(!1),m.isMoved=!1,m.startMoving=!1;return}w.grabCursor&&m.isMoved&&m.isTouched&&(l.allowSlideNext===!0||l.allowSlidePrev===!0)&&l.setGrabCursor(!1);const $=lg(),Y=$-m.touchStartTime;if(l.allowClick){const Fe=g.path||g.composedPath&&g.composedPath();l.updateClickedSlide(Fe&&Fe[0]||g.target,Fe),l.emit("tap click",g),Y<300&&$-m.lastClickTime<300&&l.emit("doubleTap doubleClick",g)}if(m.lastClickTime=lg(),ub(()=>{l.destroyed||(l.allowClick=!0)}),!m.isTouched||!m.isMoved||!l.swipeDirection||c.diff===0&&!m.loopSwapReset||m.currentTranslate===m.startTranslate&&!m.loopSwapReset){m.isTouched=!1,m.isMoved=!1,m.startMoving=!1;return}m.isTouched=!1,m.isMoved=!1,m.startMoving=!1;let X;if(w.followFinger?X=R?l.translate:-l.translate:X=-m.currentTranslate,w.cssMode)return;if(w.freeMode&&w.freeMode.enabled){l.freeMode.onTouchEnd({currentPos:X});return}const se=X>=-l.maxTranslate()&&!l.params.loop;let xe=0,Re=l.slidesSizesGrid[0];for(let Fe=0;Fe<k.length;Fe+=Fe<w.slidesPerGroupSkip?1:w.slidesPerGroup){const ct=Fe<w.slidesPerGroupSkip-1?1:w.slidesPerGroup;typeof k[Fe+ct]<"u"?(se||X>=k[Fe]&&X<k[Fe+ct])&&(xe=Fe,Re=k[Fe+ct]-k[Fe]):(se||X>=k[Fe])&&(xe=Fe,Re=k[k.length-1]-k[k.length-2])}let ce=null,De=null;w.rewind&&(l.isBeginning?De=w.virtual&&w.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1:l.isEnd&&(ce=0));const Ce=(X-k[xe])/Re,Ye=xe<w.slidesPerGroupSkip-1?1:w.slidesPerGroup;if(Y>w.longSwipesMs){if(!w.longSwipes){l.slideTo(l.activeIndex);return}l.swipeDirection==="next"&&(Ce>=w.longSwipesRatio?l.slideTo(w.rewind&&l.isEnd?ce:xe+Ye):l.slideTo(xe)),l.swipeDirection==="prev"&&(Ce>1-w.longSwipesRatio?l.slideTo(xe+Ye):De!==null&&Ce<0&&Math.abs(Ce)>w.longSwipesRatio?l.slideTo(De):l.slideTo(xe))}else{if(!w.shortSwipes){l.slideTo(l.activeIndex);return}l.navigation&&(g.target===l.navigation.nextEl||g.target===l.navigation.prevEl)?g.target===l.navigation.nextEl?l.slideTo(xe+Ye):l.slideTo(xe):(l.swipeDirection==="next"&&l.slideTo(ce!==null?ce:xe+Ye),l.swipeDirection==="prev"&&l.slideTo(De!==null?De:xe))}}function ax(){const o=this,{params:l,el:m}=o;if(m&&m.offsetWidth===0)return;l.breakpoints&&o.setBreakpoint();const{allowSlideNext:g,allowSlidePrev:S,snapGrid:C}=o,w=o.virtual&&o.params.virtual.enabled;o.allowSlideNext=!0,o.allowSlidePrev=!0,o.updateSize(),o.updateSlides(),o.updateSlidesClasses();const c=w&&l.loop;(l.slidesPerView==="auto"||l.slidesPerView>1)&&o.isEnd&&!o.isBeginning&&!o.params.centeredSlides&&!c?o.slideTo(o.slides.length-1,0,!1,!0):o.params.loop&&!w?o.slideToLoop(o.realIndex,0,!1,!0):o.slideTo(o.activeIndex,0,!1,!0),o.autoplay&&o.autoplay.running&&o.autoplay.paused&&(clearTimeout(o.autoplay.resizeTimeout),o.autoplay.resizeTimeout=setTimeout(()=>{o.autoplay&&o.autoplay.running&&o.autoplay.paused&&o.autoplay.resume()},500)),o.allowSlidePrev=S,o.allowSlideNext=g,o.params.watchOverflow&&C!==o.snapGrid&&o.checkOverflow()}function dC(o){const l=this;l.enabled&&(l.allowClick||(l.params.preventClicks&&o.preventDefault(),l.params.preventClicksPropagation&&l.animating&&(o.stopPropagation(),o.stopImmediatePropagation())))}function fC(){const o=this,{wrapperEl:l,rtlTranslate:m,enabled:g}=o;if(!g)return;o.previousTranslate=o.translate,o.isHorizontal()?o.translate=-l.scrollLeft:o.translate=-l.scrollTop,o.translate===0&&(o.translate=0),o.updateActiveIndex(),o.updateSlidesClasses();let S;const C=o.maxTranslate()-o.minTranslate();C===0?S=0:S=(o.translate-o.minTranslate())/C,S!==o.progress&&o.updateProgress(m?-o.translate:o.translate),o.emit("setTranslate",o.translate,!1)}function pC(o){const l=this;Qm(l,o.target),!(l.params.cssMode||l.params.slidesPerView!=="auto"&&!l.params.autoHeight)&&l.update()}function mC(){const o=this;o.documentTouchHandlerProceeded||(o.documentTouchHandlerProceeded=!0,o.params.touchReleaseOnEdges&&(o.el.style.touchAction="auto"))}const gb=(o,l)=>{const m=sc(),{params:g,el:S,wrapperEl:C,device:w}=o,c=!!g.nested,R=l==="on"?"addEventListener":"removeEventListener",k=l;!S||typeof S=="string"||(m[R]("touchstart",o.onDocumentTouchStart,{passive:!1,capture:c}),S[R]("touchstart",o.onTouchStart,{passive:!1}),S[R]("pointerdown",o.onTouchStart,{passive:!1}),m[R]("touchmove",o.onTouchMove,{passive:!1,capture:c}),m[R]("pointermove",o.onTouchMove,{passive:!1,capture:c}),m[R]("touchend",o.onTouchEnd,{passive:!0}),m[R]("pointerup",o.onTouchEnd,{passive:!0}),m[R]("pointercancel",o.onTouchEnd,{passive:!0}),m[R]("touchcancel",o.onTouchEnd,{passive:!0}),m[R]("pointerout",o.onTouchEnd,{passive:!0}),m[R]("pointerleave",o.onTouchEnd,{passive:!0}),m[R]("contextmenu",o.onTouchEnd,{passive:!0}),(g.preventClicks||g.preventClicksPropagation)&&S[R]("click",o.onClick,!0),g.cssMode&&C[R]("scroll",o.onScroll),g.updateOnWindowResize?o[k](w.ios||w.android?"resize orientationchange observerUpdate":"resize observerUpdate",ax,!0):o[k]("observerUpdate",ax,!0),S[R]("load",o.onLoad,{capture:!0}))};function gC(){const o=this,{params:l}=o;o.onTouchStart=cC.bind(o),o.onTouchMove=uC.bind(o),o.onTouchEnd=hC.bind(o),o.onDocumentTouchStart=mC.bind(o),l.cssMode&&(o.onScroll=fC.bind(o)),o.onClick=dC.bind(o),o.onLoad=pC.bind(o),gb(o,"on")}function yC(){gb(this,"off")}var _C={attachEvents:gC,detachEvents:yC};const sx=(o,l)=>o.grid&&l.grid&&l.grid.rows>1;function vC(){const o=this,{realIndex:l,initialized:m,params:g,el:S}=o,C=g.breakpoints;if(!C||C&&Object.keys(C).length===0)return;const w=sc(),c=g.breakpointsBase==="window"||!g.breakpointsBase?g.breakpointsBase:"container",R=["window","container"].includes(g.breakpointsBase)||!g.breakpointsBase?o.el:w.querySelector(g.breakpointsBase),k=o.getBreakpoint(C,c,R);if(!k||o.currentBreakpoint===k)return;const $=(k in C?C[k]:void 0)||o.originalParams,Y=sx(o,g),X=sx(o,$),se=o.params.grabCursor,xe=$.grabCursor,Re=g.enabled;Y&&!X?(S.classList.remove(`${g.containerModifierClass}grid`,`${g.containerModifierClass}grid-column`),o.emitContainerClasses()):!Y&&X&&(S.classList.add(`${g.containerModifierClass}grid`),($.grid.fill&&$.grid.fill==="column"||!$.grid.fill&&g.grid.fill==="column")&&S.classList.add(`${g.containerModifierClass}grid-column`),o.emitContainerClasses()),se&&!xe?o.unsetGrabCursor():!se&&xe&&o.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(ct=>{if(typeof $[ct]>"u")return;const ht=g[ct]&&g[ct].enabled,et=$[ct]&&$[ct].enabled;ht&&!et&&o[ct].disable(),!ht&&et&&o[ct].enable()});const ce=$.direction&&$.direction!==g.direction,De=g.loop&&($.slidesPerView!==g.slidesPerView||ce),Ce=g.loop;ce&&m&&o.changeDirection(),Vs(o.params,$);const Ye=o.params.enabled,Fe=o.params.loop;Object.assign(o,{allowTouchMove:o.params.allowTouchMove,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev}),Re&&!Ye?o.disable():!Re&&Ye&&o.enable(),o.currentBreakpoint=k,o.emit("_beforeBreakpoint",$),m&&(De?(o.loopDestroy(),o.loopCreate(l),o.updateSlides()):!Ce&&Fe?(o.loopCreate(l),o.updateSlides()):Ce&&!Fe&&o.loopDestroy()),o.emit("breakpoint",$)}function xC(o,l,m){if(l===void 0&&(l="window"),!o||l==="container"&&!m)return;let g=!1;const S=Xa(),C=l==="window"?S.innerHeight:m.clientHeight,w=Object.keys(o).map(c=>{if(typeof c=="string"&&c.indexOf("@")===0){const R=parseFloat(c.substr(1));return{value:C*R,point:c}}return{value:c,point:c}});w.sort((c,R)=>parseInt(c.value,10)-parseInt(R.value,10));for(let c=0;c<w.length;c+=1){const{point:R,value:k}=w[c];l==="window"?S.matchMedia(`(min-width: ${k}px)`).matches&&(g=R):k<=m.clientWidth&&(g=R)}return g||"max"}var bC={setBreakpoint:vC,getBreakpoint:xC};function wC(o,l){const m=[];return o.forEach(g=>{typeof g=="object"?Object.keys(g).forEach(S=>{g[S]&&m.push(l+S)}):typeof g=="string"&&m.push(l+g)}),m}function TC(){const o=this,{classNames:l,params:m,rtl:g,el:S,device:C}=o,w=wC(["initialized",m.direction,{"free-mode":o.params.freeMode&&m.freeMode.enabled},{autoheight:m.autoHeight},{rtl:g},{grid:m.grid&&m.grid.rows>1},{"grid-column":m.grid&&m.grid.rows>1&&m.grid.fill==="column"},{android:C.android},{ios:C.ios},{"css-mode":m.cssMode},{centered:m.cssMode&&m.centeredSlides},{"watch-progress":m.watchSlidesProgress}],m.containerModifierClass);l.push(...w),S.classList.add(...l),o.emitContainerClasses()}function SC(){const o=this,{el:l,classNames:m}=o;!l||typeof l=="string"||(l.classList.remove(...m),o.emitContainerClasses())}var MC={addClasses:TC,removeClasses:SC};function EC(){const o=this,{isLocked:l,params:m}=o,{slidesOffsetBefore:g}=m;if(g){const S=o.slides.length-1,C=o.slidesGrid[S]+o.slidesSizesGrid[S]+g*2;o.isLocked=o.size>C}else o.isLocked=o.snapGrid.length===1;m.allowSlideNext===!0&&(o.allowSlideNext=!o.isLocked),m.allowSlidePrev===!0&&(o.allowSlidePrev=!o.isLocked),l&&l!==o.isLocked&&(o.isEnd=!1),l!==o.isLocked&&o.emit(o.isLocked?"lock":"unlock")}var CC={checkOverflow:EC},Iy={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function AC(o,l){return function(g){g===void 0&&(g={});const S=Object.keys(g)[0],C=g[S];if(typeof C!="object"||C===null){Vs(l,g);return}if(o[S]===!0&&(o[S]={enabled:!0}),S==="navigation"&&o[S]&&o[S].enabled&&!o[S].prevEl&&!o[S].nextEl&&(o[S].auto=!0),["pagination","scrollbar"].indexOf(S)>=0&&o[S]&&o[S].enabled&&!o[S].el&&(o[S].auto=!0),!(S in o&&"enabled"in C)){Vs(l,g);return}typeof o[S]=="object"&&!("enabled"in o[S])&&(o[S].enabled=!0),o[S]||(o[S]={enabled:!1}),Vs(l,g)}}const ry={eventsEmitter:ME,update:OE,translate:UE,transition:$E,slide:eC,loop:rC,grabCursor:oC,events:_C,breakpoints:bC,checkOverflow:CC,classes:MC},ay={};let b_=class lu{constructor(){let l,m;for(var g=arguments.length,S=new Array(g),C=0;C<g;C++)S[C]=arguments[C];S.length===1&&S[0].constructor&&Object.prototype.toString.call(S[0]).slice(8,-1)==="Object"?m=S[0]:[l,m]=S,m||(m={}),m=Vs({},m),l&&!m.el&&(m.el=l);const w=sc();if(m.el&&typeof m.el=="string"&&w.querySelectorAll(m.el).length>1){const j=[];return w.querySelectorAll(m.el).forEach($=>{const Y=Vs({},m,{el:$});j.push(new lu(Y))}),j}const c=this;c.__swiper__=!0,c.support=db(),c.device=fb({userAgent:m.userAgent}),c.browser=pb(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],m.modules&&Array.isArray(m.modules)&&c.modules.push(...m.modules);const R={};c.modules.forEach(j=>{j({params:m,swiper:c,extendParams:AC(m,R),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})});const k=Vs({},Iy,R);return c.params=Vs({},k,ay,m),c.originalParams=Vs({},c.params),c.passedParams=Vs({},m),c.params&&c.params.on&&Object.keys(c.params.on).forEach(j=>{c.on(j,c.params.on[j])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),Object.assign(c,{enabled:c.params.enabled,el:l,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return c.params.direction==="horizontal"},isVertical(){return c.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}getDirectionLabel(l){return this.isHorizontal()?l:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[l]}getSlideIndex(l){const{slidesEl:m,params:g}=this,S=ic(m,`.${g.slideClass}, swiper-slide`),C=ex(S[0]);return ex(l)-C}getSlideIndexByData(l){return this.getSlideIndex(this.slides.find(m=>m.getAttribute("data-swiper-slide-index")*1===l))}getSlideIndexWhenGrid(l){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?l=Math.floor(l/this.params.grid.rows):this.params.grid.fill==="row"&&(l=l%Math.ceil(this.slides.length/this.params.grid.rows))),l}recalcSlides(){const l=this,{slidesEl:m,params:g}=l;l.slides=ic(m,`.${g.slideClass}, swiper-slide`)}enable(){const l=this;l.enabled||(l.enabled=!0,l.params.grabCursor&&l.setGrabCursor(),l.emit("enable"))}disable(){const l=this;l.enabled&&(l.enabled=!1,l.params.grabCursor&&l.unsetGrabCursor(),l.emit("disable"))}setProgress(l,m){const g=this;l=Math.min(Math.max(l,0),1);const S=g.minTranslate(),w=(g.maxTranslate()-S)*l+S;g.translateTo(w,typeof m>"u"?0:m),g.updateActiveIndex(),g.updateSlidesClasses()}emitContainerClasses(){const l=this;if(!l.params._emitClasses||!l.el)return;const m=l.el.className.split(" ").filter(g=>g.indexOf("swiper")===0||g.indexOf(l.params.containerModifierClass)===0);l.emit("_containerClasses",m.join(" "))}getSlideClasses(l){const m=this;return m.destroyed?"":l.className.split(" ").filter(g=>g.indexOf("swiper-slide")===0||g.indexOf(m.params.slideClass)===0).join(" ")}emitSlidesClasses(){const l=this;if(!l.params._emitClasses||!l.el)return;const m=[];l.slides.forEach(g=>{const S=l.getSlideClasses(g);m.push({slideEl:g,classNames:S}),l.emit("_slideClass",g,S)}),l.emit("_slideClasses",m)}slidesPerViewDynamic(l,m){l===void 0&&(l="current"),m===void 0&&(m=!1);const g=this,{params:S,slides:C,slidesGrid:w,slidesSizesGrid:c,size:R,activeIndex:k}=g;let j=1;if(typeof S.slidesPerView=="number")return S.slidesPerView;if(S.centeredSlides){let $=C[k]?Math.ceil(C[k].swiperSlideSize):0,Y;for(let X=k+1;X<C.length;X+=1)C[X]&&!Y&&($+=Math.ceil(C[X].swiperSlideSize),j+=1,$>R&&(Y=!0));for(let X=k-1;X>=0;X-=1)C[X]&&!Y&&($+=C[X].swiperSlideSize,j+=1,$>R&&(Y=!0))}else if(l==="current")for(let $=k+1;$<C.length;$+=1)(m?w[$]+c[$]-w[k]<R:w[$]-w[k]<R)&&(j+=1);else for(let $=k-1;$>=0;$-=1)w[k]-w[$]<R&&(j+=1);return j}update(){const l=this;if(!l||l.destroyed)return;const{snapGrid:m,params:g}=l;g.breakpoints&&l.setBreakpoint(),[...l.el.querySelectorAll('[loading="lazy"]')].forEach(w=>{w.complete&&Qm(l,w)}),l.updateSize(),l.updateSlides(),l.updateProgress(),l.updateSlidesClasses();function S(){const w=l.rtlTranslate?l.translate*-1:l.translate,c=Math.min(Math.max(w,l.maxTranslate()),l.minTranslate());l.setTranslate(c),l.updateActiveIndex(),l.updateSlidesClasses()}let C;if(g.freeMode&&g.freeMode.enabled&&!g.cssMode)S(),g.autoHeight&&l.updateAutoHeight();else{if((g.slidesPerView==="auto"||g.slidesPerView>1)&&l.isEnd&&!g.centeredSlides){const w=l.virtual&&g.virtual.enabled?l.virtual.slides:l.slides;C=l.slideTo(w.length-1,0,!1,!0)}else C=l.slideTo(l.activeIndex,0,!1,!0);C||S()}g.watchOverflow&&m!==l.snapGrid&&l.checkOverflow(),l.emit("update")}changeDirection(l,m){m===void 0&&(m=!0);const g=this,S=g.params.direction;return l||(l=S==="horizontal"?"vertical":"horizontal"),l===S||l!=="horizontal"&&l!=="vertical"||(g.el.classList.remove(`${g.params.containerModifierClass}${S}`),g.el.classList.add(`${g.params.containerModifierClass}${l}`),g.emitContainerClasses(),g.params.direction=l,g.slides.forEach(C=>{l==="vertical"?C.style.width="":C.style.height=""}),g.emit("changeDirection"),m&&g.update()),g}changeLanguageDirection(l){const m=this;m.rtl&&l==="rtl"||!m.rtl&&l==="ltr"||(m.rtl=l==="rtl",m.rtlTranslate=m.params.direction==="horizontal"&&m.rtl,m.rtl?(m.el.classList.add(`${m.params.containerModifierClass}rtl`),m.el.dir="rtl"):(m.el.classList.remove(`${m.params.containerModifierClass}rtl`),m.el.dir="ltr"),m.update())}mount(l){const m=this;if(m.mounted)return!0;let g=l||m.params.el;if(typeof g=="string"&&(g=document.querySelector(g)),!g)return!1;g.swiper=m,g.parentNode&&g.parentNode.host&&g.parentNode.host.nodeName===m.params.swiperElementNodeName.toUpperCase()&&(m.isElement=!0);const S=()=>`.${(m.params.wrapperClass||"").trim().split(" ").join(".")}`;let w=g&&g.shadowRoot&&g.shadowRoot.querySelector?g.shadowRoot.querySelector(S()):ic(g,S())[0];return!w&&m.params.createElements&&(w=ug("div",m.params.wrapperClass),g.append(w),ic(g,`.${m.params.slideClass}`).forEach(c=>{w.append(c)})),Object.assign(m,{el:g,wrapperEl:w,slidesEl:m.isElement&&!g.parentNode.host.slideSlots?g.parentNode.host:w,hostEl:m.isElement?g.parentNode.host:g,mounted:!0,rtl:g.dir.toLowerCase()==="rtl"||ah(g,"direction")==="rtl",rtlTranslate:m.params.direction==="horizontal"&&(g.dir.toLowerCase()==="rtl"||ah(g,"direction")==="rtl"),wrongRTL:ah(w,"display")==="-webkit-box"}),!0}init(l){const m=this;if(m.initialized||m.mount(l)===!1)return m;m.emit("beforeInit"),m.params.breakpoints&&m.setBreakpoint(),m.addClasses(),m.updateSize(),m.updateSlides(),m.params.watchOverflow&&m.checkOverflow(),m.params.grabCursor&&m.enabled&&m.setGrabCursor(),m.params.loop&&m.virtual&&m.params.virtual.enabled?m.slideTo(m.params.initialSlide+m.virtual.slidesBefore,0,m.params.runCallbacksOnInit,!1,!0):m.slideTo(m.params.initialSlide,0,m.params.runCallbacksOnInit,!1,!0),m.params.loop&&m.loopCreate(void 0,!0),m.attachEvents();const S=[...m.el.querySelectorAll('[loading="lazy"]')];return m.isElement&&S.push(...m.hostEl.querySelectorAll('[loading="lazy"]')),S.forEach(C=>{C.complete?Qm(m,C):C.addEventListener("load",w=>{Qm(m,w.target)})}),zy(m),m.initialized=!0,zy(m),m.emit("init"),m.emit("afterInit"),m}destroy(l,m){l===void 0&&(l=!0),m===void 0&&(m=!0);const g=this,{params:S,el:C,wrapperEl:w,slides:c}=g;return typeof g.params>"u"||g.destroyed||(g.emit("beforeDestroy"),g.initialized=!1,g.detachEvents(),S.loop&&g.loopDestroy(),m&&(g.removeClasses(),C&&typeof C!="string"&&C.removeAttribute("style"),w&&w.removeAttribute("style"),c&&c.length&&c.forEach(R=>{R.classList.remove(S.slideVisibleClass,S.slideFullyVisibleClass,S.slideActiveClass,S.slideNextClass,S.slidePrevClass),R.removeAttribute("style"),R.removeAttribute("data-swiper-slide-index")})),g.emit("destroy"),Object.keys(g.eventsListeners).forEach(R=>{g.off(R)}),l!==!1&&(g.el&&typeof g.el!="string"&&(g.el.swiper=null),hE(g)),g.destroyed=!0),null}static extendDefaults(l){Vs(ay,l)}static get extendedDefaults(){return ay}static get defaults(){return Iy}static installModule(l){lu.prototype.__modules__||(lu.prototype.__modules__=[]);const m=lu.prototype.__modules__;typeof l=="function"&&m.indexOf(l)<0&&m.push(l)}static use(l){return Array.isArray(l)?(l.forEach(m=>lu.installModule(m)),lu):(lu.installModule(l),lu)}};Object.keys(ry).forEach(o=>{Object.keys(ry[o]).forEach(l=>{b_.prototype[l]=ry[o][l]})});b_.use([TE,SE]);const yb=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function fd(o){return typeof o=="object"&&o!==null&&o.constructor&&Object.prototype.toString.call(o).slice(8,-1)==="Object"&&!o.__swiper__}function vf(o,l){const m=["__proto__","constructor","prototype"];Object.keys(l).filter(g=>m.indexOf(g)<0).forEach(g=>{typeof o[g]>"u"?o[g]=l[g]:fd(l[g])&&fd(o[g])&&Object.keys(l[g]).length>0?l[g].__swiper__?o[g]=l[g]:vf(o[g],l[g]):o[g]=l[g]})}function _b(o){return o===void 0&&(o={}),o.navigation&&typeof o.navigation.nextEl>"u"&&typeof o.navigation.prevEl>"u"}function vb(o){return o===void 0&&(o={}),o.pagination&&typeof o.pagination.el>"u"}function xb(o){return o===void 0&&(o={}),o.scrollbar&&typeof o.scrollbar.el>"u"}function bb(o){o===void 0&&(o="");const l=o.split(" ").map(g=>g.trim()).filter(g=>!!g),m=[];return l.forEach(g=>{m.indexOf(g)<0&&m.push(g)}),m.join(" ")}function PC(o){return o===void 0&&(o=""),o?o.includes("swiper-wrapper")?o:`swiper-wrapper ${o}`:"swiper-wrapper"}function zC(o){let{swiper:l,slides:m,passedParams:g,changedParams:S,nextEl:C,prevEl:w,scrollbarEl:c,paginationEl:R}=o;const k=S.filter(ut=>ut!=="children"&&ut!=="direction"&&ut!=="wrapperClass"),{params:j,pagination:$,navigation:Y,scrollbar:X,virtual:se,thumbs:xe}=l;let Re,ce,De,Ce,Ye,Fe,ct,ht;S.includes("thumbs")&&g.thumbs&&g.thumbs.swiper&&!g.thumbs.swiper.destroyed&&j.thumbs&&(!j.thumbs.swiper||j.thumbs.swiper.destroyed)&&(Re=!0),S.includes("controller")&&g.controller&&g.controller.control&&j.controller&&!j.controller.control&&(ce=!0),S.includes("pagination")&&g.pagination&&(g.pagination.el||R)&&(j.pagination||j.pagination===!1)&&$&&!$.el&&(De=!0),S.includes("scrollbar")&&g.scrollbar&&(g.scrollbar.el||c)&&(j.scrollbar||j.scrollbar===!1)&&X&&!X.el&&(Ce=!0),S.includes("navigation")&&g.navigation&&(g.navigation.prevEl||w)&&(g.navigation.nextEl||C)&&(j.navigation||j.navigation===!1)&&Y&&!Y.prevEl&&!Y.nextEl&&(Ye=!0);const et=ut=>{l[ut]&&(l[ut].destroy(),ut==="navigation"?(l.isElement&&(l[ut].prevEl.remove(),l[ut].nextEl.remove()),j[ut].prevEl=void 0,j[ut].nextEl=void 0,l[ut].prevEl=void 0,l[ut].nextEl=void 0):(l.isElement&&l[ut].el.remove(),j[ut].el=void 0,l[ut].el=void 0))};S.includes("loop")&&l.isElement&&(j.loop&&!g.loop?Fe=!0:!j.loop&&g.loop?ct=!0:ht=!0),k.forEach(ut=>{if(fd(j[ut])&&fd(g[ut]))Object.assign(j[ut],g[ut]),(ut==="navigation"||ut==="pagination"||ut==="scrollbar")&&"enabled"in g[ut]&&!g[ut].enabled&&et(ut);else{const lt=g[ut];(lt===!0||lt===!1)&&(ut==="navigation"||ut==="pagination"||ut==="scrollbar")?lt===!1&&et(ut):j[ut]=g[ut]}}),k.includes("controller")&&!ce&&l.controller&&l.controller.control&&j.controller&&j.controller.control&&(l.controller.control=j.controller.control),S.includes("children")&&m&&se&&j.virtual.enabled?(se.slides=m,se.update(!0)):S.includes("virtual")&&se&&j.virtual.enabled&&(m&&(se.slides=m),se.update(!0)),S.includes("children")&&m&&j.loop&&(ht=!0),Re&&xe.init()&&xe.update(!0),ce&&(l.controller.control=j.controller.control),De&&(l.isElement&&(!R||typeof R=="string")&&(R=document.createElement("div"),R.classList.add("swiper-pagination"),R.part.add("pagination"),l.el.appendChild(R)),R&&(j.pagination.el=R),$.init(),$.render(),$.update()),Ce&&(l.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-scrollbar"),c.part.add("scrollbar"),l.el.appendChild(c)),c&&(j.scrollbar.el=c),X.init(),X.updateSize(),X.setTranslate()),Ye&&(l.isElement&&((!C||typeof C=="string")&&(C=document.createElement("div"),C.classList.add("swiper-button-next"),ix(C,l.hostEl.constructor.nextButtonSvg),C.part.add("button-next"),l.el.appendChild(C)),(!w||typeof w=="string")&&(w=document.createElement("div"),w.classList.add("swiper-button-prev"),ix(w,l.hostEl.constructor.prevButtonSvg),w.part.add("button-prev"),l.el.appendChild(w))),C&&(j.navigation.nextEl=C),w&&(j.navigation.prevEl=w),Y.init(),Y.update()),S.includes("allowSlideNext")&&(l.allowSlideNext=g.allowSlideNext),S.includes("allowSlidePrev")&&(l.allowSlidePrev=g.allowSlidePrev),S.includes("direction")&&l.changeDirection(g.direction,!1),(Fe||ht)&&l.loopDestroy(),(ct||ht)&&l.loopCreate(),l.update()}function IC(o,l){o===void 0&&(o={}),l===void 0&&(l=!0);const m={on:{}},g={},S={};vf(m,Iy),m._emitClasses=!0,m.init=!1;const C={},w=yb.map(R=>R.replace(/_/,"")),c=Object.assign({},o);return Object.keys(c).forEach(R=>{typeof o[R]>"u"||(w.indexOf(R)>=0?fd(o[R])?(m[R]={},S[R]={},vf(m[R],o[R]),vf(S[R],o[R])):(m[R]=o[R],S[R]=o[R]):R.search(/on[A-Z]/)===0&&typeof o[R]=="function"?l?g[`${R[2].toLowerCase()}${R.substr(3)}`]=o[R]:m.on[`${R[2].toLowerCase()}${R.substr(3)}`]=o[R]:C[R]=o[R])}),["navigation","pagination","scrollbar"].forEach(R=>{m[R]===!0&&(m[R]={}),m[R]===!1&&delete m[R]}),{params:m,passedParams:S,rest:C,events:g}}function DC(o,l){let{el:m,nextEl:g,prevEl:S,paginationEl:C,scrollbarEl:w,swiper:c}=o;_b(l)&&g&&S&&(c.params.navigation.nextEl=g,c.originalParams.navigation.nextEl=g,c.params.navigation.prevEl=S,c.originalParams.navigation.prevEl=S),vb(l)&&C&&(c.params.pagination.el=C,c.originalParams.pagination.el=C),xb(l)&&w&&(c.params.scrollbar.el=w,c.originalParams.scrollbar.el=w),c.init(m)}function RC(o,l,m,g,S){const C=[];if(!l)return C;const w=R=>{C.indexOf(R)<0&&C.push(R)};if(m&&g){const R=g.map(S),k=m.map(S);R.join("")!==k.join("")&&w("children"),g.length!==m.length&&w("children")}return yb.filter(R=>R[0]==="_").map(R=>R.replace(/_/,"")).forEach(R=>{if(R in o&&R in l)if(fd(o[R])&&fd(l[R])){const k=Object.keys(o[R]),j=Object.keys(l[R]);k.length!==j.length?w(R):(k.forEach($=>{o[R][$]!==l[R][$]&&w(R)}),j.forEach($=>{o[R][$]!==l[R][$]&&w(R)}))}else o[R]!==l[R]&&w(R)}),C}const kC=o=>{!o||o.destroyed||!o.params.virtual||o.params.virtual&&!o.params.virtual.enabled||(o.updateSlides(),o.updateProgress(),o.updateSlidesClasses(),o.emit("_virtualUpdated"),o.parallax&&o.params.parallax&&o.params.parallax.enabled&&o.parallax.setTranslate())};function hg(){return hg=Object.assign?Object.assign.bind():function(o){for(var l=1;l<arguments.length;l++){var m=arguments[l];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(o[g]=m[g])}return o},hg.apply(this,arguments)}function wb(o){return o.type&&o.type.displayName&&o.type.displayName.includes("SwiperSlide")}function Tb(o){const l=[];return pn.Children.toArray(o).forEach(m=>{wb(m)?l.push(m):m.props&&m.props.children&&Tb(m.props.children).forEach(g=>l.push(g))}),l}function LC(o){const l=[],m={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return pn.Children.toArray(o).forEach(g=>{if(wb(g))l.push(g);else if(g.props&&g.props.slot&&m[g.props.slot])m[g.props.slot].push(g);else if(g.props&&g.props.children){const S=Tb(g.props.children);S.length>0?S.forEach(C=>l.push(C)):m["container-end"].push(g)}else m["container-end"].push(g)}),{slides:l,slots:m}}function OC(o,l,m){if(!m)return null;const g=j=>{let $=j;return j<0?$=l.length+j:$>=l.length&&($=$-l.length),$},S=o.isHorizontal()?{[o.rtlTranslate?"right":"left"]:`${m.offset}px`}:{top:`${m.offset}px`},{from:C,to:w}=m,c=o.params.loop?-l.length:0,R=o.params.loop?l.length*2:l.length,k=[];for(let j=c;j<R;j+=1)j>=C&&j<=w&&k.push(l[g(j)]);return k.map((j,$)=>pn.cloneElement(j,{swiper:o,style:S,key:j.props.virtualIndex||j.key||`slide-${$}`}))}function Ip(o,l){return typeof window>"u"?Ae.useEffect(o,l):Ae.useLayoutEffect(o,l)}const ox=Ae.createContext(null),BC=Ae.createContext(null),Sb=Ae.forwardRef(function(o,l){let{className:m,tag:g="div",wrapperTag:S="div",children:C,onSwiper:w,...c}=o===void 0?{}:o,R=!1;const[k,j]=Ae.useState("swiper"),[$,Y]=Ae.useState(null),[X,se]=Ae.useState(!1),xe=Ae.useRef(!1),Re=Ae.useRef(null),ce=Ae.useRef(null),De=Ae.useRef(null),Ce=Ae.useRef(null),Ye=Ae.useRef(null),Fe=Ae.useRef(null),ct=Ae.useRef(null),ht=Ae.useRef(null),{params:et,passedParams:ut,rest:lt,events:Tt}=IC(c),{slides:Et,slots:ai}=LC(C),Li=()=>{se(!X)};Object.assign(et.on,{_containerClasses(mt,ye){j(ye)}});const ui=()=>{Object.assign(et.on,Tt),R=!0;const mt={...et};if(delete mt.wrapperClass,ce.current=new b_(mt),ce.current.virtual&&ce.current.params.virtual.enabled){ce.current.virtual.slides=Et;const ye={cache:!1,slides:Et,renderExternal:Y,renderExternalUpdate:!1};vf(ce.current.params.virtual,ye),vf(ce.current.originalParams.virtual,ye)}};Re.current||ui(),ce.current&&ce.current.on("_beforeBreakpoint",Li);const je=()=>{R||!Tt||!ce.current||Object.keys(Tt).forEach(mt=>{ce.current.on(mt,Tt[mt])})},it=()=>{!Tt||!ce.current||Object.keys(Tt).forEach(mt=>{ce.current.off(mt,Tt[mt])})};Ae.useEffect(()=>()=>{ce.current&&ce.current.off("_beforeBreakpoint",Li)}),Ae.useEffect(()=>{!xe.current&&ce.current&&(ce.current.emitSlidesClasses(),xe.current=!0)}),Ip(()=>{if(l&&(l.current=Re.current),!!Re.current)return ce.current.destroyed&&ui(),DC({el:Re.current,nextEl:Ye.current,prevEl:Fe.current,paginationEl:ct.current,scrollbarEl:ht.current,swiper:ce.current},et),w&&!ce.current.destroyed&&w(ce.current),()=>{ce.current&&!ce.current.destroyed&&ce.current.destroy(!0,!1)}},[]),Ip(()=>{je();const mt=RC(ut,De.current,Et,Ce.current,ye=>ye.key);return De.current=ut,Ce.current=Et,mt.length&&ce.current&&!ce.current.destroyed&&zC({swiper:ce.current,slides:Et,passedParams:ut,changedParams:mt,nextEl:Ye.current,prevEl:Fe.current,scrollbarEl:ht.current,paginationEl:ct.current}),()=>{it()}}),Ip(()=>{kC(ce.current)},[$]);function st(){return et.virtual?OC(ce.current,Et,$):Et.map((mt,ye)=>pn.cloneElement(mt,{swiper:ce.current,swiperSlideIndex:ye}))}return pn.createElement(g,hg({ref:Re,className:bb(`${k}${m?` ${m}`:""}`)},lt),pn.createElement(BC.Provider,{value:ce.current},ai["container-start"],pn.createElement(S,{className:PC(et.wrapperClass)},ai["wrapper-start"],st(),ai["wrapper-end"]),_b(et)&&pn.createElement(pn.Fragment,null,pn.createElement("div",{ref:Fe,className:"swiper-button-prev"}),pn.createElement("div",{ref:Ye,className:"swiper-button-next"})),xb(et)&&pn.createElement("div",{ref:ht,className:"swiper-scrollbar"}),vb(et)&&pn.createElement("div",{ref:ct,className:"swiper-pagination"}),ai["container-end"]))});Sb.displayName="Swiper";const Mb=Ae.forwardRef(function(o,l){let{tag:m="div",children:g,className:S="",swiper:C,zoom:w,lazy:c,virtualIndex:R,swiperSlideIndex:k,...j}=o===void 0?{}:o;const $=Ae.useRef(null),[Y,X]=Ae.useState("swiper-slide"),[se,xe]=Ae.useState(!1);function Re(Ye,Fe,ct){Fe===$.current&&X(ct)}Ip(()=>{if(typeof k<"u"&&($.current.swiperSlideIndex=k),l&&(l.current=$.current),!(!$.current||!C)){if(C.destroyed){Y!=="swiper-slide"&&X("swiper-slide");return}return C.on("_slideClass",Re),()=>{C&&C.off("_slideClass",Re)}}}),Ip(()=>{C&&$.current&&!C.destroyed&&X(C.getSlideClasses($.current))},[C]);const ce={isActive:Y.indexOf("swiper-slide-active")>=0,isVisible:Y.indexOf("swiper-slide-visible")>=0,isPrev:Y.indexOf("swiper-slide-prev")>=0,isNext:Y.indexOf("swiper-slide-next")>=0},De=()=>typeof g=="function"?g(ce):g,Ce=()=>{xe(!0)};return pn.createElement(m,hg({ref:$,className:bb(`${Y}${S?` ${S}`:""}`),"data-swiper-slide-index":R,onLoad:Ce},j),w&&pn.createElement(ox.Provider,{value:ce},pn.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof w=="number"?w:void 0},De(),c&&!se&&pn.createElement("div",{className:"swiper-lazy-preloader"}))),!w&&pn.createElement(ox.Provider,{value:ce},De(),c&&!se&&pn.createElement("div",{className:"swiper-lazy-preloader"})))});Mb.displayName="SwiperSlide";function jC(o,l,m,g){return o.params.createElements&&Object.keys(g).forEach(S=>{if(!m[S]&&m.auto===!0){let C=ic(o.el,`.${g[S]}`)[0];C||(C=ug("div",g[S]),C.className=g[S],o.el.append(C)),m[S]=C,l[S]=C}}),m}function NC(o){let{swiper:l,extendParams:m,on:g,emit:S}=o;m({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,prevEl:null};function C(se){let xe;return se&&typeof se=="string"&&l.isElement&&(xe=l.el.querySelector(se)||l.hostEl.querySelector(se),xe)?xe:(se&&(typeof se=="string"&&(xe=[...document.querySelectorAll(se)]),l.params.uniqueNavElements&&typeof se=="string"&&xe&&xe.length>1&&l.el.querySelectorAll(se).length===1?xe=l.el.querySelector(se):xe&&xe.length===1&&(xe=xe[0])),se&&!xe?se:xe)}function w(se,xe){const Re=l.params.navigation;se=ou(se),se.forEach(ce=>{ce&&(ce.classList[xe?"add":"remove"](...Re.disabledClass.split(" ")),ce.tagName==="BUTTON"&&(ce.disabled=xe),l.params.watchOverflow&&l.enabled&&ce.classList[l.isLocked?"add":"remove"](Re.lockClass))})}function c(){const{nextEl:se,prevEl:xe}=l.navigation;if(l.params.loop){w(xe,!1),w(se,!1);return}w(xe,l.isBeginning&&!l.params.rewind),w(se,l.isEnd&&!l.params.rewind)}function R(se){se.preventDefault(),!(l.isBeginning&&!l.params.loop&&!l.params.rewind)&&(l.slidePrev(),S("navigationPrev"))}function k(se){se.preventDefault(),!(l.isEnd&&!l.params.loop&&!l.params.rewind)&&(l.slideNext(),S("navigationNext"))}function j(){const se=l.params.navigation;if(l.params.navigation=jC(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(se.nextEl||se.prevEl))return;let xe=C(se.nextEl),Re=C(se.prevEl);Object.assign(l.navigation,{nextEl:xe,prevEl:Re}),xe=ou(xe),Re=ou(Re);const ce=(De,Ce)=>{De&&De.addEventListener("click",Ce==="next"?k:R),!l.enabled&&De&&De.classList.add(...se.lockClass.split(" "))};xe.forEach(De=>ce(De,"next")),Re.forEach(De=>ce(De,"prev"))}function $(){let{nextEl:se,prevEl:xe}=l.navigation;se=ou(se),xe=ou(xe);const Re=(ce,De)=>{ce.removeEventListener("click",De==="next"?k:R),ce.classList.remove(...l.params.navigation.disabledClass.split(" "))};se.forEach(ce=>Re(ce,"next")),xe.forEach(ce=>Re(ce,"prev"))}g("init",()=>{l.params.navigation.enabled===!1?X():(j(),c())}),g("toEdge fromEdge lock unlock",()=>{c()}),g("destroy",()=>{$()}),g("enable disable",()=>{let{nextEl:se,prevEl:xe}=l.navigation;if(se=ou(se),xe=ou(xe),l.enabled){c();return}[...se,...xe].filter(Re=>!!Re).forEach(Re=>Re.classList.add(l.params.navigation.lockClass))}),g("click",(se,xe)=>{let{nextEl:Re,prevEl:ce}=l.navigation;Re=ou(Re),ce=ou(ce);const De=xe.target;let Ce=ce.includes(De)||Re.includes(De);if(l.isElement&&!Ce){const Ye=xe.path||xe.composedPath&&xe.composedPath();Ye&&(Ce=Ye.find(Fe=>Re.includes(Fe)||ce.includes(Fe)))}if(l.params.navigation.hideOnClick&&!Ce){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===De||l.pagination.el.contains(De)))return;let Ye;Re.length?Ye=Re[0].classList.contains(l.params.navigation.hiddenClass):ce.length&&(Ye=ce[0].classList.contains(l.params.navigation.hiddenClass)),S(Ye===!0?"navigationShow":"navigationHide"),[...Re,...ce].filter(Fe=>!!Fe).forEach(Fe=>Fe.classList.toggle(l.params.navigation.hiddenClass))}});const Y=()=>{l.el.classList.remove(...l.params.navigation.navigationDisabledClass.split(" ")),j(),c()},X=()=>{l.el.classList.add(...l.params.navigation.navigationDisabledClass.split(" ")),$()};Object.assign(l.navigation,{enable:Y,disable:X,update:c,init:j,destroy:$})}function FC(o){let{swiper:l,extendParams:m,on:g,emit:S,params:C}=o;l.autoplay={running:!1,paused:!1,timeLeft:0},m({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let w,c,R=C&&C.autoplay?C.autoplay.delay:3e3,k=C&&C.autoplay?C.autoplay.delay:3e3,j,$=new Date().getTime(),Y,X,se,xe,Re,ce,De;function Ce(st){!l||l.destroyed||!l.wrapperEl||st.target===l.wrapperEl&&(l.wrapperEl.removeEventListener("transitionend",Ce),!(De||st.detail&&st.detail.bySwiperTouchMove)&&lt())}const Ye=()=>{if(l.destroyed||!l.autoplay.running)return;l.autoplay.paused?Y=!0:Y&&(k=j,Y=!1);const st=l.autoplay.paused?j:$+k-new Date().getTime();l.autoplay.timeLeft=st,S("autoplayTimeLeft",st,st/R),c=requestAnimationFrame(()=>{Ye()})},Fe=()=>{let st;return l.virtual&&l.params.virtual.enabled?st=l.slides.find(ye=>ye.classList.contains("swiper-slide-active")):st=l.slides[l.activeIndex],st?parseInt(st.getAttribute("data-swiper-autoplay"),10):void 0},ct=st=>{if(l.destroyed||!l.autoplay.running)return;cancelAnimationFrame(c),Ye();let mt=typeof st>"u"?l.params.autoplay.delay:st;R=l.params.autoplay.delay,k=l.params.autoplay.delay;const ye=Fe();!Number.isNaN(ye)&&ye>0&&typeof st>"u"&&(mt=ye,R=ye,k=ye),j=mt;const Ke=l.params.speed,Mt=()=>{!l||l.destroyed||(l.params.autoplay.reverseDirection?!l.isBeginning||l.params.loop||l.params.rewind?(l.slidePrev(Ke,!0,!0),S("autoplay")):l.params.autoplay.stopOnLastSlide||(l.slideTo(l.slides.length-1,Ke,!0,!0),S("autoplay")):!l.isEnd||l.params.loop||l.params.rewind?(l.slideNext(Ke,!0,!0),S("autoplay")):l.params.autoplay.stopOnLastSlide||(l.slideTo(0,Ke,!0,!0),S("autoplay")),l.params.cssMode&&($=new Date().getTime(),requestAnimationFrame(()=>{ct()})))};return mt>0?(clearTimeout(w),w=setTimeout(()=>{Mt()},mt)):requestAnimationFrame(()=>{Mt()}),mt},ht=()=>{$=new Date().getTime(),l.autoplay.running=!0,ct(),S("autoplayStart")},et=()=>{l.autoplay.running=!1,clearTimeout(w),cancelAnimationFrame(c),S("autoplayStop")},ut=(st,mt)=>{if(l.destroyed||!l.autoplay.running)return;clearTimeout(w),st||(ce=!0);const ye=()=>{S("autoplayPause"),l.params.autoplay.waitForTransition?l.wrapperEl.addEventListener("transitionend",Ce):lt()};if(l.autoplay.paused=!0,mt){Re&&(j=l.params.autoplay.delay),Re=!1,ye();return}j=(j||l.params.autoplay.delay)-(new Date().getTime()-$),!(l.isEnd&&j<0&&!l.params.loop)&&(j<0&&(j=0),ye())},lt=()=>{l.isEnd&&j<0&&!l.params.loop||l.destroyed||!l.autoplay.running||($=new Date().getTime(),ce?(ce=!1,ct(j)):ct(),l.autoplay.paused=!1,S("autoplayResume"))},Tt=()=>{if(l.destroyed||!l.autoplay.running)return;const st=sc();st.visibilityState==="hidden"&&(ce=!0,ut(!0)),st.visibilityState==="visible"&&lt()},Et=st=>{st.pointerType==="mouse"&&(ce=!0,De=!0,!(l.animating||l.autoplay.paused)&&ut(!0))},ai=st=>{st.pointerType==="mouse"&&(De=!1,l.autoplay.paused&&lt())},Li=()=>{l.params.autoplay.pauseOnMouseEnter&&(l.el.addEventListener("pointerenter",Et),l.el.addEventListener("pointerleave",ai))},ui=()=>{l.el&&typeof l.el!="string"&&(l.el.removeEventListener("pointerenter",Et),l.el.removeEventListener("pointerleave",ai))},je=()=>{sc().addEventListener("visibilitychange",Tt)},it=()=>{sc().removeEventListener("visibilitychange",Tt)};g("init",()=>{l.params.autoplay.enabled&&(Li(),je(),ht())}),g("destroy",()=>{ui(),it(),l.autoplay.running&&et()}),g("_freeModeStaticRelease",()=>{(se||ce)&&lt()}),g("_freeModeNoMomentumRelease",()=>{l.params.autoplay.disableOnInteraction?et():ut(!0,!0)}),g("beforeTransitionStart",(st,mt,ye)=>{l.destroyed||!l.autoplay.running||(ye||!l.params.autoplay.disableOnInteraction?ut(!0,!0):et())}),g("sliderFirstMove",()=>{if(!(l.destroyed||!l.autoplay.running)){if(l.params.autoplay.disableOnInteraction){et();return}X=!0,se=!1,ce=!1,xe=setTimeout(()=>{ce=!0,se=!0,ut(!0)},200)}}),g("touchEnd",()=>{if(!(l.destroyed||!l.autoplay.running||!X)){if(clearTimeout(xe),clearTimeout(w),l.params.autoplay.disableOnInteraction){se=!1,X=!1;return}se&&l.params.cssMode&&lt(),se=!1,X=!1}}),g("slideChange",()=>{l.destroyed||!l.autoplay.running||(Re=!0)}),Object.assign(l.autoplay,{start:ht,stop:et,pause:ut,resume:lt})}const w_="/perusahaan/assets/bg1-BxUoSTI-.jpeg",VC="/perusahaan/assets/bg2-C8jlZqqW.jpeg",UC="/perusahaan/assets/bg3-B-hs8tUv.jpeg",GC=[{title:`PERFORMANCE
UNDER PRESSURE`,subtitle:`IB&M specializes in complete repair and maintenance
of industrial boilers and auxiliary equipment.`,image:w_},{title:`RELIABLE
INDUSTRIAL SOLUTIONS`,subtitle:`Turnkey installation and modernization of boiler systems
for maximum uptime.`,image:VC},{title:`EXPERTISE IN
BOILER TECHNOLOGY`,subtitle:`Decades of experience in boiler repair, maintenance,
and installation across various industries.`,image:UC}],ZC=()=>{const[o,l]=Ae.useState(0);return ge.jsxs("div",{className:"relative w-full h-[35vh] lg:h-screen overflow-hidden font-dm group",children:[ge.jsx("button",{className:"custom-prev absolute left-4 top-1/2 -translate-y-1/2 z-20 text-white cursor-pointer text-[12px] leading-[40px] md:text-2xl p-4 -mx-4 mt-8 bg-black/20 hover:bg-white hover:text-gray-700 transition-opacity duration-300 opacity-0 group-hover:opacity-100",children:ge.jsx(Px,{})}),ge.jsx("button",{className:"custom-next absolute right-4 top-1/2 -translate-y-1/2 z-20 text-white cursor-pointer text-[12px] leading-[40px] md:text-2xl p-4 -mx-4 mt-8 bg-black/20 hover:bg-white hover:text-gray-700 transition-opacity duration-300 opacity-0 group-hover:opacity-100",children:ge.jsx(bw,{})}),ge.jsx(Sb,{direction:"vertical",loop:!0,modules:[NC,FC],autoplay:{delay:1e4,disableOnInteraction:!1},navigation:{nextEl:".custom-next",prevEl:".custom-prev"},allowTouchMove:!1,simulateTouch:!1,onSlideChange:m=>l(m.realIndex),className:"w-full h-full mt-6 md:mt-0",children:GC.map((m,g)=>ge.jsx(Mb,{children:ge.jsxs("div",{className:"relative h-[35vh] lg:h-screen bg-cover bg-center flex items-center justify-start",style:{backgroundImage:`url(${m.image})`},children:[ge.jsx("div",{className:"absolute inset-0 bg-black/10"}),ge.jsx("div",{className:"absolute left-0 top-0 h-full w-[80%] md:w-[90%] bg-gradient-to-r from-black/90 to-transparent"}),ge.jsx("div",{className:"relative z-10 w-full",children:ge.jsx("div",{className:"max-w-7xl mx-auto pl-12 px-4",children:ge.jsxs("div",{className:"max-w-4xl md:pl-12",children:[ge.jsx(cu.h1,{initial:{opacity:0,x:-40},animate:{opacity:1,x:0},transition:{delay:.2,duration:.4},className:"text-[16px] lg:text-[61px] tracking-normal leading-[20px] lg:leading-[76px] font-bold text-white whitespace-pre-line",children:m.title}),ge.jsx(cu.p,{initial:{opacity:0,x:-40},animate:{opacity:1,x:0},transition:{delay:.3,duration:.4},className:"mt-2 lg:mt-6 text-[6px] lg:text-[23px] leading-[6px] lg:leading-[23px] font-[300] text-white/90 whitespace-pre-line",children:m.subtitle}),ge.jsx(cu.button,{initial:{opacity:0,x:-40},animate:{opacity:1,x:0},transition:{delay:.4,duration:.4},className:"mt-4 lg:mt-12 text-[#F37021] text-[4px] lg:text-[15px] font-bold px-3 py-1 lg:px-6 lg:py-2 hover:text-gray-700 transition duration-500 cursor-pointer hover:bg-white border-[1px] border-[#333333] rounded-sm",children:"LEARN MORE"})]},o)})})]})},g))})]})},qC="/perusahaan/assets/microwatt-logo-B1y9PWK_.png",Eb=()=>{const o=[{type:"link",text:"By phone: ",linkText:"1-855-753-2645",href:"tel:18557532645"}],l=["GENERAL CONTRACTOR","MECHANICAL CONTRACTOR","ELECTRICAL CONTRACTOR"],m=["Rajeg, Indonesia","Karawaci, Indonesia"],g=[{src:qC,alt:"MicroWatt Logo"}];return ge.jsxs(ge.Fragment,{children:[ge.jsx("footer",{className:"bg-footer text-white/70 px-3 lg:px-6 py-10 md:py-20 font-dm",children:ge.jsxs("div",{className:"max-w-6xl mx-auto px-1 md:px-6 grid md:grid-cols-4 gap-10 text-sm",children:[ge.jsxs("div",{children:[ge.jsx("h2",{className:"text-[20px] leading-[35px] tracking-wide font-[400] mb-2",children:"CONTACT AEI TODAY"}),ge.jsx("div",{className:"h-[1px] w-8 bg-white mb-4 md:mb-8"}),ge.jsx("p",{className:"text-[14px] leading-[25px] font-[400] tracking-wide mb-2",children:"We are the leaders in innovative steam plant solutions. Contact the AEI boiler experts."}),ge.jsx("ul",{className:"space-y-1",children:o.map((S,C)=>ge.jsxs("li",{className:"flex items-center gap-2",children:[ge.jsx(Bg,{className:"text-white flex-shrink-0"}),S.type==="link"?ge.jsxs(ge.Fragment,{children:[S.text,ge.jsx("a",{href:S.href,className:"text-gray-300 hover:underline",children:S.linkText})]}):S.text]},C))})]}),ge.jsxs("div",{children:[ge.jsx("h2",{className:"text-[20px] leading-[35px] tracking-wide font-[400] mb-2",children:"ONE CALL DOES IT ALL"}),ge.jsx("div",{className:"h-[1px] w-8 bg-white mb-4 md:mb-8"}),ge.jsx("p",{className:"text-[14px] leading-[25px] font-[400] tracking-wide mb-2",children:"AEI is proud to provide end-to-end boiler service and repair as a fully licensed."}),ge.jsx("ul",{className:"space-y-1",children:l.map((S,C)=>ge.jsxs("li",{className:"flex items-center gap-2",children:[ge.jsx(Bg,{className:"text-white"}),ge.jsx("span",{children:S})]},C))})]}),ge.jsxs("div",{children:[ge.jsx("h2",{className:"text-[20px] leading-[35px] tracking-wide font-[400] mb-2",children:"MULTIPLE LOCATIONS"}),ge.jsx("div",{className:"h-[1px] w-8 bg-white mb-4 md:mb-8"}),ge.jsx("p",{className:"text-[14px] leading-[25px] font-[400] tracking-wide mb-2",children:"AEI has 2 service locations:"}),ge.jsx("ul",{className:"space-y-1",children:m.map((S,C)=>ge.jsxs("li",{className:"flex items-center gap-2",children:[ge.jsx(Bg,{className:"text-white flex-shrink-0"}),ge.jsx("span",{children:S})]},C))})]}),ge.jsxs("div",{children:[ge.jsx("h2",{className:"text-[20px] leading-[35px] tracking-wide font-[400] mb-2",children:"TRUSTED EXPERIENCE"}),ge.jsx("div",{className:"h-[1px] w-8 bg-white mb-4 md:mb-8"}),ge.jsx("div",{className:"flex gap-2 items-center flex-wrap mt-4",children:g.map((S,C)=>ge.jsx("img",{src:S.src,alt:S.alt,className:"h-24"},C))})]})]})}),ge.jsx("div",{className:"h-auto py-6 bg-footer2 font-montserrat justify-center flex text-center",children:ge.jsx("div",{className:"max-w-7xl mx-auto px-24",children:ge.jsx("p",{className:"text-[14px] leading[25px] tracking-wide font-[400] text-white opacity-60",children:"Copyright 2025 by Anugrah Energi Indonesia. All rights reserved."})})})]})},Dy="/perusahaan/assets/gaoi3a-C_VJKY_r.jpg",$C="/perusahaan/assets/pp1-BeS_968H.jpg",HC="/perusahaan/assets/servmec3-CFIcBt9M.jpg",Cb="/perusahaan/assets/au6-W9Iwb20V.jpg",Ab=()=>{const o=[{image:Dy,title:"Boiler",description:"Efficient, reliable boiler solutions for industry.",link:"/boiler"},{image:$C,title:"Energy",description:"Sustainable power systems for a better future.",link:"/auto"},{image:HC,title:"Infra",description:"Smart engineering for lasting infrastructure.",link:"/build"},{image:Cb,title:"Smart",description:"Automation and IoT to boost performance.",link:"/service"}];return ge.jsx("div",{className:"flex justify-center text-[#333333] font-montserrat",children:ge.jsxs("div",{className:"max-w-6xl mx-2 lg:mx-auto mt-10 lg:mt-18 px-2 lg:px-10 text-center",children:[ge.jsx("h2",{className:"mx-auto max-w-[20rem] lg:max-w-3xl text-[30px] lg:text-[36px] leading-[35px] tracking-[1px] font-[400] mb-4",children:"YOUR SINGLE SOURCE SOLUTION"}),ge.jsx("p",{className:"max-w-[550px] mx-auto text-[12px] lg:text-[14px] leading-[25.2px] text-[#333333]/80 tracking-[0.5px] font-[400]",children:"As a leader in steam plant solutions, AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment."}),ge.jsx("div",{className:"h-[3px] w-14 bg-[#F37021] mx-auto mt-5 lg:mt-7 mb-4 md:mb-8"}),ge.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-14 gap-y-8 my-14",children:o.map((l,m)=>ge.jsxs(hu,{to:l.link,className:"group bg-[#F8F8F8] hover:bg-[#F37021] transition-all duration-300 overflow-hidden cursor-pointer",children:[ge.jsx("img",{src:l.image,alt:l.title,className:"w-full h-80 lg:h-56 object-cover"}),ge.jsxs("div",{className:"py-12 lg:py-10 px-4 lg:px-10 text-center",children:[ge.jsx("h3",{className:"text-[28px] font-[400] tracking-[2.8px] leading-[34px] mb-2 text-[#333333] uppercase",children:l.title}),ge.jsx("p",{className:"text-[14px] px-2 md:px-0 leading-[25.2px] tracking-[0.5px] opacity-80 text-[#333333]/90 group-hover:text-white",children:l.description})]})]},m))})]})})};var Jm={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.2/LICENSE.txt
 */var XC=Jm.exports,lx;function YC(){return lx||(lx=1,function(o,l){(function(m,g){o.exports=g()})(XC,function(){var m={},g={};function S(w,c,R){if(g[w]=R,w==="index"){var k="var sharedModule = {}; ("+g.shared+")(sharedModule); ("+g.worker+")(sharedModule);",j={};return g.shared(j),g.index(m,j),typeof window<"u"&&m.setWorkerUrl(window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))),m}}S("shared",["exports"],function(w){function c(r,t,n,u){return new(n||(n=Promise))(function(f,x){function b(D){try{A(u.next(D))}catch(O){x(O)}}function M(D){try{A(u.throw(D))}catch(O){x(O)}}function A(D){var O;D.done?f(D.value):(O=D.value,O instanceof n?O:new n(function(N){N(O)})).then(b,M)}A((u=u.apply(r,t||[])).next())})}function R(r,t){this.x=r,this.y=t}function k(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var j,$;typeof SuppressedError=="function"&&SuppressedError,R.prototype={clone(){return new R(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,t){return this.clone()._rotateAround(r,t)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){const t=r.x-this.x,n=r.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult(r){const t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){const r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){const t=Math.cos(r),n=Math.sin(r),u=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=u,this},_rotateAround(r,t){const n=Math.cos(r),u=Math.sin(r),f=t.y+u*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:R},R.convert=function(r){if(r instanceof R)return r;if(Array.isArray(r))return new R(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new R(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};var Y=function(){if($)return j;function r(t,n,u,f){this.cx=3*t,this.bx=3*(u-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=u,this.p2y=f}return $=1,j=r,r.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var u=t,f=0;f<8;f++){var x=this.sampleCurveX(u)-t;if(Math.abs(x)<n)return u;var b=this.sampleCurveDerivativeX(u);if(Math.abs(b)<1e-6)break;u-=x/b}var M=0,A=1;for(u=t,f=0;f<20&&(x=this.sampleCurveX(u),!(Math.abs(x-t)<n));f++)t>x?M=u:A=u,u=.5*(A-M)+M;return u},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},j}(),X=k(Y);let se,xe;function Re(){return se==null&&(se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),se}function ce(){if(xe==null&&(xe=!1,Re())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let u=0;u<25;u++){const f=4*u;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(u%5,Math.floor(u/5),1,1)}const n=t.getImageData(0,0,5,5).data;for(let u=0;u<100;u++)if(u%4!=3&&n[u]!==u){xe=!0;break}}}return xe||!1}var De=1e-6,Ce=typeof Float32Array<"u"?Float32Array:Array;function Ye(){var r=new Ce(9);return Ce!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Fe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ct(){var r=new Ce(3);return Ce!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function ht(r){return Math.hypot(r[0],r[1],r[2])}function et(r,t,n){var u=new Ce(3);return u[0]=r,u[1]=t,u[2]=n,u}function ut(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function lt(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r}function Tt(r,t,n){var u=t[0],f=t[1],x=t[2],b=n[0],M=n[1],A=n[2];return r[0]=f*A-x*M,r[1]=x*b-u*A,r[2]=u*M-f*b,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Et,ai=ht;function Li(r,t,n){var u=t[0],f=t[1],x=t[2],b=t[3];return r[0]=n[0]*u+n[4]*f+n[8]*x+n[12]*b,r[1]=n[1]*u+n[5]*f+n[9]*x+n[13]*b,r[2]=n[2]*u+n[6]*f+n[10]*x+n[14]*b,r[3]=n[3]*u+n[7]*f+n[11]*x+n[15]*b,r}function ui(){var r=new Ce(4);return Ce!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function je(r,t,n,u){var f=.5*Math.PI/180;t*=f,n*=f,u*=f;var x=Math.sin(t),b=Math.cos(t),M=Math.sin(n),A=Math.cos(n),D=Math.sin(u),O=Math.cos(u);return r[0]=x*A*O-b*M*D,r[1]=b*M*O+x*A*D,r[2]=b*A*D-x*M*O,r[3]=b*A*O+x*M*D,r}function it(){var r=new Ce(2);return Ce!=Float32Array&&(r[0]=0,r[1]=0),r}function st(r,t){var n=new Ce(2);return n[0]=r,n[1]=t,n}ct(),Et=new Ce(4),Ce!=Float32Array&&(Et[0]=0,Et[1]=0,Et[2]=0,Et[3]=0),ct(),et(1,0,0),et(0,1,0),ui(),ui(),Ye(),it();const mt=8192;function ye(r,t,n){return t*(mt/(r.tileSize*Math.pow(2,n-r.tileID.overscaledZ)))}function Ke(r,t){return(r%t+t)%t}function Mt(r,t,n){return r*(1-n)+t*n}function St(r){if(r<=0)return 0;if(r>=1)return 1;const t=r*r,n=t*r;return 4*(r<.5?n:3*(r-t)+n-.75)}function Bt(r,t,n,u){const f=new X(r,t,n,u);return x=>f.solve(x)}const hi=Bt(.25,.1,.25,1);function Nt(r,t,n){return Math.min(n,Math.max(t,r))}function Hn(r,t,n){const u=n-t,f=((r-t)%u+u)%u+t;return f===t?n:f}function gi(r,...t){for(const n of t)for(const u in n)r[u]=n[u];return r}let Xn=1;function Us(r,t,n){const u={};for(const f in r)u[f]=t.call(this,r[f],f,r);return u}function ps(r,t,n){const u={};for(const f in r)t.call(this,r[f],f,r)&&(u[f]=r[f]);return u}function zr(r){return Array.isArray(r)?r.map(zr):typeof r=="object"&&r?Us(r,zr):r}const en={};function ln(r){en[r]||(typeof console<"u"&&console.warn(r),en[r]=!0)}function Aa(r,t,n){return(n.y-r.y)*(t.x-r.x)>(t.y-r.y)*(n.x-r.x)}function Ya(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let pr=null;function Wa(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Eo(r,t,n,u,f){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(r,{timestamp:0});try{const b=x?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const M=b.startsWith("BGR"),A=new Uint8ClampedArray(u*f*4);if(yield x.copyTo(A,function(D,O,N,U,q){const H=4*Math.max(-O,0),Q=(Math.max(0,N)-N)*U*4+H,ie=4*U,oe=Math.max(0,O),Me=Math.max(0,N);return{rect:{x:oe,y:Me,width:Math.min(D.width,O+U)-oe,height:Math.min(D.height,N+q)-Me},layout:[{offset:Q,stride:ie}]}}(r,t,n,u,f)),M)for(let D=0;D<A.length;D+=4){const O=A[D];A[D]=A[D+2],A[D+2]=O}return A}finally{x.close()}})}let za,Gs;function ms(r,t,n,u){return r.addEventListener(t,n,u),{unsubscribe:()=>{r.removeEventListener(t,n,u)}}}function Co(r){return r*Math.PI/180}function Zs(r){return r/Math.PI*180}const oa={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},In={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Hr="AbortError";function Te(){return new Error(Hr)}const K={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function J(r){return K.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const te="global-dispatcher";class de extends Error{constructor(t,n,u,f){super(`AJAXError: ${n} (${t}): ${u}`),this.status=t,this.statusText=n,this.url=u,this.body=f}}const we=()=>Ya(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Se=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const u=J(r.url);if(u)return u(r,t);if(Ya(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:te},t)}if(!(/^file:/.test(n=r.url)||/^file:/.test(we())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,f){return c(this,void 0,void 0,function*(){const x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:we(),signal:f.signal});let b,M;u.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(D){throw new de(0,D.message,u.url,new Blob)}if(!b.ok){const D=yield b.blob();throw new de(b.status,b.statusText,u.url,D)}M=u.type==="arrayBuffer"||u.type==="image"?b.arrayBuffer():u.type==="json"?b.json():b.text();const A=yield M;if(f.signal.aborted)throw Te();return{data:A,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(r,t);if(Ya(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:te},t)}var n;return function(u,f){return new Promise((x,b)=>{var M;const A=new XMLHttpRequest;A.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(A.responseType="arraybuffer");for(const D in u.headers)A.setRequestHeader(D,u.headers[D]);u.type==="json"&&(A.responseType="text",!((M=u.headers)===null||M===void 0)&&M.Accept||A.setRequestHeader("Accept","application/json")),A.withCredentials=u.credentials==="include",A.onerror=()=>{b(new Error(A.statusText))},A.onload=()=>{if(!f.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let D=A.response;if(u.type==="json")try{D=JSON.parse(A.response)}catch(O){return void b(O)}x({data:D,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{const D=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});b(new de(A.status,A.statusText,u.url,D))}},f.signal.addEventListener("abort",()=>{A.abort(),b(Te())}),A.send(u.body)})}(r,t)};function Ne(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const t=new URL(r),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function Pe(r,t,n){n[r]&&n[r].indexOf(t)!==-1||(n[r]=n[r]||[],n[r].push(t))}function Xe(r,t,n){if(n&&n[r]){const u=n[r].indexOf(t);u!==-1&&n[r].splice(u,1)}}class ot{constructor(t,n={}){gi(this,n),this.type=t}}class Qe extends ot{constructor(t,n={}){super("error",gi({error:t},n))}}class Pt{on(t,n){return this._listeners=this._listeners||{},Pe(t,n,this._listeners),{unsubscribe:()=>{this.off(t,n)}}}off(t,n){return Xe(t,n,this._listeners),Xe(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},Pe(t,n,this._oneTimeListeners),this):new Promise(u=>this.once(t,u))}fire(t,n){typeof t=="string"&&(t=new ot(t,n||{}));const u=t.type;if(this.listens(u)){t.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const M of f)M.call(this,t);const x=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const M of x)Xe(u,M,this._oneTimeListeners),M.call(this,t);const b=this._eventedParent;b&&(gi(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof Qe&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Zt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function si(r,t){const n={};for(const u in r)u!=="ref"&&(n[u]=r[u]);return Zt.forEach(u=>{u in t&&(n[u]=t[u])}),n}function Rt(r,t){if(Array.isArray(r)){if(!Array.isArray(t)||r.length!==t.length)return!1;for(let n=0;n<r.length;n++)if(!Rt(r[n],t[n]))return!1;return!0}if(typeof r=="object"&&r!==null&&t!==null){if(typeof t!="object"||Object.keys(r).length!==Object.keys(t).length)return!1;for(const n in r)if(!Rt(r[n],t[n]))return!1;return!0}return r===t}function Yt(r,t){r.push(t)}function Ii(r,t,n){Yt(n,{command:"addSource",args:[r,t[r]]})}function Dn(r,t,n){Yt(t,{command:"removeSource",args:[r]}),n[r]=!0}function Nn(r,t,n,u){Dn(r,n,u),Ii(r,t,n)}function Oi(r,t,n){let u;for(u in r[n])if(Object.prototype.hasOwnProperty.call(r[n],u)&&u!=="data"&&!Rt(r[n][u],t[n][u]))return!1;for(u in t[n])if(Object.prototype.hasOwnProperty.call(t[n],u)&&u!=="data"&&!Rt(r[n][u],t[n][u]))return!1;return!0}function Vt(r,t,n,u,f,x){r=r||{},t=t||{};for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&(Rt(r[b],t[b])||n.push({command:x,args:[u,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(r,b)&&(Rt(r[b],t[b])||n.push({command:x,args:[u,b,t[b],f]}))}function qt(r){return r.id}function Xi(r,t){return r[t.id]=t,r}class dt{constructor(t,n,u,f){this.message=(t?`${t}: `:"")+u,f&&(this.identifier=f),n!=null&&n.__line__&&(this.line=n.__line__)}}function mr(r,...t){for(const n of t)for(const u in n)r[u]=n[u];return r}class cn extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class gs{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[u,f]of n)this.bindings[u]=f}concat(t){return new gs(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ka={kind:"null"},bt={kind:"number"},Qt={kind:"string"},Ht={kind:"boolean"},En={kind:"color"},la={kind:"projectionDefinition"},Yi={kind:"object"},Jt={kind:"value"},cc={kind:"collator"},Ur={kind:"formatted"},ys={kind:"padding"},Qa={kind:"colorArray"},Ao={kind:"numberArray"},un={kind:"resolvedImage"},mu={kind:"variableAnchorOffsetCollection"};function er(r,t){return{kind:"array",itemType:r,N:t}}function Ti(r){if(r.kind==="array"){const t=Ti(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const Ja=[Ka,bt,Qt,Ht,En,la,Ur,Yi,er(Jt),ys,Ao,Qa,un,mu];function Po(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Po(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const n of Ja)if(!Po(n,t))return null}}return`Expected ${Ti(r)} but found ${Ti(t)} instead.`}function gu(r,t){return t.some(n=>n.kind===r.kind)}function Xr(r,t){return t.some(n=>n==="null"?r===null:n==="array"?Array.isArray(r):n==="object"?r&&!Array.isArray(r)&&typeof r=="object":n===typeof r)}function es(r,t){return r.kind==="array"&&t.kind==="array"?r.itemType.kind===t.itemType.kind&&typeof r.N=="number":r.kind===t.kind}const uc=.96422,md=.82521,uh=4/29,tr=6/29,hh=3*tr*tr,Ef=tr*tr*tr,yu=Math.PI/180,gd=180/Math.PI;function ml(r){return(r%=360)<0&&(r+=360),r}function gl([r,t,n,u]){let f,x;const b=hc((.2225045*(r=Gr(r))+.7168786*(t=Gr(t))+.0606169*(n=Gr(n)))/1);r===t&&t===n?f=x=b:(f=hc((.4360747*r+.3850649*t+.1430804*n)/uc),x=hc((.0139322*r+.0971045*t+.7141733*n)/md));const M=116*b-16;return[M<0?0:M,500*(f-b),200*(b-x),u]}function Gr(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function hc(r){return r>Ef?Math.pow(r,1/3):r/hh+uh}function zo([r,t,n,u]){let f=(r+16)/116,x=isNaN(t)?f:f+t/500,b=isNaN(n)?f:f-n/200;return f=1*qs(f),x=uc*qs(x),b=md*qs(b),[dc(3.1338561*x-1.6168667*f-.4906146*b),dc(-.9787684*x+1.9161415*f+.033454*b),dc(.0719453*x-.2289914*f+1.4052427*b),u]}function dc(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function qs(r){return r>tr?r*r*r:hh*(r-uh)}const yd=Object.hasOwn||function(r,t){return Object.prototype.hasOwnProperty.call(r,t)};function Io(r,t){return yd(r,t)?r[t]:void 0}function ts(r){return parseInt(r.padEnd(2,r),16)/255}function Ia(r,t){return oi(t?r/100:r,0,1)}function oi(r,t,n){return Math.min(Math.max(t,r),n)}function $s(r){return!r.some(Number.isNaN)}const is={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function _s(r,t,n){return r+n*(t-r)}function Do(r,t,n){return r.map((u,f)=>_s(u,t[f],n))}class ni{constructor(t,n,u,f=1,x=!0){this.r=t,this.g=n,this.b=u,this.a=f,x||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,n,u,f]))}static parse(t){if(t instanceof ni)return t;if(typeof t!="string")return;const n=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Io(is,u);if(f){const[b,M,A]=f;return[b/255,M/255,A/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const b=u.length<6?1:2;let M=1;return[ts(u.slice(M,M+=b)),ts(u.slice(M,M+=b)),ts(u.slice(M,M+=b)),ts(u.slice(M,M+b)||"ff")]}if(u.startsWith("rgb")){const b=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[M,A,D,O,N,U,q,H,Q,ie,oe,Me]=b,pe=[O||" ",q||" ",ie].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const ve=[D,U,Q].join(""),Be=ve==="%%%"?100:ve===""?255:0;if(Be){const $e=[oi(+A/Be,0,1),oi(+N/Be,0,1),oi(+H/Be,0,1),oe?Ia(+oe,Me):1];if($s($e))return $e}}return}}const x=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,M,A,D,O,N,U,q,H]=x,Q=[A||" ",O||" ",U].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const ie=[+M,oi(+D,0,100),oi(+N,0,100),q?Ia(+q,H):1];if($s(ie))return function([oe,Me,pe,ve]){function Be($e){const nt=($e+oe/30)%12,vt=Me*Math.min(pe,1-pe);return pe-vt*Math.max(-1,Math.min(nt-3,9-nt,1))}return oe=ml(oe),Me/=100,pe/=100,[Be(0),Be(8),Be(4),ve]}(ie)}}}(t);return n?new ni(...n,!1):void 0}get rgb(){const{r:t,g:n,b:u,a:f}=this,x=f||1/0;return this.overwriteGetter("rgb",[t/x,n/x,u/x,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[n,u,f,x]=gl(t),b=Math.sqrt(u*u+f*f);return[Math.round(1e4*b)?ml(Math.atan2(f,u)*gd):NaN,b,n,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",gl(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,u,f]=this.rgb;return`rgba(${[t,n,u].map(x=>Math.round(255*x)).join(",")},${f})`}static interpolate(t,n,u,f="rgb"){switch(f){case"rgb":{const[x,b,M,A]=Do(t.rgb,n.rgb,u);return new ni(x,b,M,A,!1)}case"hcl":{const[x,b,M,A]=t.hcl,[D,O,N,U]=n.hcl;let q,H;if(isNaN(x)||isNaN(D))isNaN(x)?isNaN(D)?q=NaN:(q=D,M!==1&&M!==0||(H=O)):(q=x,N!==1&&N!==0||(H=b));else{let pe=D-x;D>x&&pe>180?pe-=360:D<x&&x-D>180&&(pe+=360),q=x+u*pe}const[Q,ie,oe,Me]=function([pe,ve,Be,$e]){return pe=isNaN(pe)?0:pe*yu,zo([Be,Math.cos(pe)*ve,Math.sin(pe)*ve,$e])}([q,H??_s(b,O,u),_s(M,N,u),_s(A,U,u)]);return new ni(Q,ie,oe,Me,!1)}case"lab":{const[x,b,M,A]=zo(Do(t.lab,n.lab,u));return new ni(x,b,M,A,!1)}}}}ni.black=new ni(0,0,0,1),ni.white=new ni(1,1,1,1),ni.transparent=new ni(0,0,0,0),ni.red=new ni(1,0,0,1);class vs{constructor(t,n,u){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const yl=["bottom","center","top"];class xs{constructor(t,n,u,f,x,b){this.text=t,this.image=n,this.scale=u,this.fontStack=f,this.textColor=x,this.verticalAlign=b}}class Rn{constructor(t){this.sections=t}static fromString(t){return new Rn([new xs(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Rn?t:Rn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Fn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Fn)return t;if(typeof t=="number")return new Fn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Fn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,u){return new Fn(Do(t.values,n.values,u))}}class ir{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ir)return t;if(typeof t=="number")return new ir([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new ir(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,u){return new ir(Do(t.values,n.values,u))}}class Cn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Cn)return t;if(typeof t=="string"){const u=ni.parse(t);return u?new Cn([u]):void 0}if(!Array.isArray(t))return;const n=[];for(const u of t){if(typeof u!="string")return;const f=ni.parse(u);if(!f)return;n.push(f)}return new Cn(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,u,f="rgb"){const x=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let b=0;b<t.values.length;b++)x.push(ni.interpolate(t.values[b],n.values[b],u,f));return new Cn(x)}}class bi extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const ns=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class nr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof nr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let n=0;n<t.length;n+=2){const u=t[n],f=t[n+1];if(typeof u!="string"||!ns.has(u)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new nr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,u){const f=t.values,x=n.values;if(f.length!==x.length)throw new bi(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const b=[];for(let M=0;M<f.length;M+=2){if(f[M]!==x[M])throw new bi(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${f[M]}, to[${M}]: ${x[M]}`);b.push(f[M]);const[A,D]=f[M+1],[O,N]=x[M+1];b.push([_s(A,O,u),_s(D,N,u)])}return new nr(b)}}class rr{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new rr({name:t,available:!1}):null}}class hn{constructor(t,n,u){this.from=t,this.to=n,this.transition=u}static interpolate(t,n,u){return new hn(t,n,u)}static parse(t){return t instanceof hn?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new hn(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new hn(t.from,t.to,t.transition):typeof t=="string"?new hn(t,t,1):void 0}}function Bi(r,t,n,u){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[r,t,n,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[r,t,n,u]:[r,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rs(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof hn||r instanceof ni||r instanceof vs||r instanceof Rn||r instanceof Fn||r instanceof ir||r instanceof Cn||r instanceof nr||r instanceof rr)return!0;if(Array.isArray(r)){for(const t of r)if(!rs(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!rs(r[t]))return!1;return!0}return!1}function Ft(r){if(r===null)return Ka;if(typeof r=="string")return Qt;if(typeof r=="boolean")return Ht;if(typeof r=="number")return bt;if(r instanceof ni)return En;if(r instanceof hn)return la;if(r instanceof vs)return cc;if(r instanceof Rn)return Ur;if(r instanceof Fn)return ys;if(r instanceof ir)return Ao;if(r instanceof Cn)return Qa;if(r instanceof nr)return mu;if(r instanceof rr)return un;if(Array.isArray(r)){const t=r.length;let n;for(const u of r){const f=Ft(u);if(n){if(n===f)continue;n=Jt;break}n=f}return er(n||Jt,t)}return Yi}function $t(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof ni||r instanceof hn||r instanceof Rn||r instanceof Fn||r instanceof ir||r instanceof Cn||r instanceof nr||r instanceof rr?r.toString():JSON.stringify(r)}class ca{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!rs(t[1]))return n.error("invalid value");const u=t[1];let f=Ft(u);const x=n.expectedType;return f.kind!=="array"||f.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(f=x),new ca(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const di={string:Qt,number:bt,boolean:Ht,object:Yi};class Ui{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let u,f=1;const x=t[0];if(x==="array"){let M,A;if(t.length>2){const D=t[1];if(typeof D!="string"||!(D in di)||D==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);M=di[D],f++}else M=Jt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);A=t[2],f++}u=er(M,A)}else{if(!di[x])throw new Error(`Types doesn't contain name = ${x}`);u=di[x]}const b=[];for(;f<t.length;f++){const M=n.parse(t[f],f,Jt);if(!M)return null;b.push(M)}return new Ui(u,b)}evaluate(t){for(let n=0;n<this.args.length;n++){const u=this.args[n].evaluate(t);if(!Po(this.type,Ft(u)))return u;if(n===this.args.length-1)throw new bi(`Expected value to be of type ${Ti(this.type)}, but found ${Ti(Ft(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const gr={"to-boolean":Ht,"to-color":En,"to-number":bt,"to-string":Qt};class Yr{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const u=t[0];if(!gr[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return n.error("Expected one argument.");const f=gr[u],x=[];for(let b=1;b<t.length;b++){const M=n.parse(t[b],b,Jt);if(!M)return null;x.push(M)}return new Yr(f,x)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,u;for(const f of this.args){if(n=f.evaluate(t),u=null,n instanceof ni)return n;if(typeof n=="string"){const x=t.parseColor(n);if(x)return x}else if(Array.isArray(n)&&(u=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Bi(n[0],n[1],n[2],n[3]),!u))return new ni(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new bi(u||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const u of this.args){n=u.evaluate(t);const f=Fn.parse(n);if(f)return f}throw new bi(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const u of this.args){n=u.evaluate(t);const f=ir.parse(n);if(f)return f}throw new bi(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const u of this.args){n=u.evaluate(t);const f=Cn.parse(n);if(f)return f}throw new bi(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const u of this.args){n=u.evaluate(t);const f=nr.parse(n);if(f)return f}throw new bi(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const u of this.args){if(n=u.evaluate(t),n===null)return 0;const f=Number(n);if(!isNaN(f))return f}throw new bi(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Rn.fromString($t(this.args[0].evaluate(t)));case"resolvedImage":return rr.fromString($t(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return $t(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Hs=["Unknown","Point","LineString","Polygon"];class dh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=ni.parse(t),this._parseColorCache.set(t,n)),n}}class Xs{constructor(t,n,u=[],f,x=new gs,b=[]){this.registry=t,this.path=u,this.key=u.map(M=>`[${M}]`).join(""),this.scope=x,this.errors=b,this.expectedType=f,this._isConstant=n}parse(t,n,u,f,x={}){return n?this.concat(n,u,f)._parse(t,x):this._parse(t,x)}_parse(t,n){function u(f,x,b){return b==="assert"?new Ui(x,[f]):b==="coerce"?new Yr(x,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[f];if(x){let b=x.parse(t,this);if(!b)return null;if(this.expectedType){const M=this.expectedType,A=b.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||A.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(A.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(A.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(A.kind)||M.kind==="colorArray"&&["value","string","array"].includes(A.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(A.kind))b=u(b,M,n.typeAnnotation||"coerce");else if(this.checkSubtype(M,A))return null}else b=u(b,M,n.typeAnnotation||"assert")}if(!(b instanceof ca)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const M=new dh;try{b=new ca(b.type,b.evaluate(M))}catch(A){return this.error(A.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,u){const f=typeof t=="number"?this.path.concat(t):this.path,x=u?this.scope.concat(u):this.scope;return new Xs(this.registry,this._isConstant,f,n||null,x,this.errors)}error(t,...n){const u=`${this.key}${n.map(f=>`[${f}]`).join("")}`;this.errors.push(new cn(u,t))}checkSubtype(t,n){const u=Po(t,n);return u&&this.error(u),u}}class Ro{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let x=1;x<t.length-1;x+=2){const b=t[x];if(typeof b!="string")return n.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return n.error("Variable names must contain only alphanumeric characters or '_'.",x);const M=n.parse(t[x+1],x+1);if(!M)return null;u.push([b,M])}const f=n.parse(t[t.length-1],t.length-1,n.expectedType,u);return f?new Ro(u,f):null}outputDefined(){return this.result.outputDefined()}}class Ys{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const u=t[1];return n.scope.has(u)?new Ys(u,n.scope.get(u)):n.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ko{constructor(t,n,u){this.type=t,this.index=n,this.input=u}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=n.parse(t[1],1,bt),f=n.parse(t[2],2,er(n.expectedType||Jt));return u&&f?new ko(f.type.itemType,u,f):null}evaluate(t){const n=this.index.evaluate(t),u=this.input.evaluate(t);if(n<0)throw new bi(`Array index out of bounds: ${n} < 0.`);if(n>=u.length)throw new bi(`Array index out of bounds: ${n} > ${u.length-1}.`);if(n!==Math.floor(n))throw new bi(`Array index must be an integer, but found ${n} instead.`);return u[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class fc{constructor(t,n){this.type=Ht,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=n.parse(t[1],1,Jt),f=n.parse(t[2],2,Jt);return u&&f?gu(u.type,[Ht,Qt,bt,Ka,Jt])?new fc(u,f):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(u.type)} instead`):null}evaluate(t){const n=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!Xr(n,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Ft(n))} instead.`);if(!Xr(u,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Ti(Ft(u))} instead.`);return u.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Da{constructor(t,n,u){this.type=bt,this.needle=t,this.haystack=n,this.fromIndex=u}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=n.parse(t[1],1,Jt),f=n.parse(t[2],2,Jt);if(!u||!f)return null;if(!gu(u.type,[Ht,Qt,bt,Ka,Jt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(u.type)} instead`);if(t.length===4){const x=n.parse(t[3],3,bt);return x?new Da(u,f,x):null}return new Da(u,f)}evaluate(t){const n=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!Xr(n,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Ft(n))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),Xr(u,["string"])){const x=u.indexOf(n,f);return x===-1?-1:[...u.slice(0,x)].length}if(Xr(u,["array"]))return u.indexOf(n,f);throw new bi(`Expected second argument to be of type array or string, but found ${Ti(Ft(u))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Yn{constructor(t,n,u,f,x,b){this.inputType=t,this.type=n,this.input=u,this.cases=f,this.outputs=x,this.otherwise=b}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let u,f;n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);const x={},b=[];for(let D=2;D<t.length-1;D+=2){let O=t[D];const N=t[D+1];Array.isArray(O)||(O=[O]);const U=n.concat(D);if(O.length===0)return U.error("Expected at least one branch label.");for(const H of O){if(typeof H!="number"&&typeof H!="string")return U.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return U.error("Numeric branch labels must be integer values.");if(u){if(U.checkSubtype(u,Ft(H)))return null}else u=Ft(H);if(x[String(H)]!==void 0)return U.error("Branch labels must be unique.");x[String(H)]=b.length}const q=n.parse(N,D,f);if(!q)return null;f=f||q.type,b.push(q)}const M=n.parse(t[1],1,Jt);if(!M)return null;const A=n.parse(t[t.length-1],t.length-1,f);return A?M.type.kind!=="value"&&n.concat(1).checkSubtype(u,M.type)?null:new Yn(u,f,M,x,b,A):null}evaluate(t){const n=this.input.evaluate(t);return(Ft(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class _l{constructor(t,n,u){this.type=t,this.branches=n,this.otherwise=u}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let u;n.expectedType&&n.expectedType.kind!=="value"&&(u=n.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const M=n.parse(t[b],b,Ht);if(!M)return null;const A=n.parse(t[b+1],b+1,u);if(!A)return null;f.push([M,A]),u=u||A.type}const x=n.parse(t[t.length-1],t.length-1,u);if(!x)return null;if(!u)throw new Error("Can't infer output type");return new _l(u,f,x)}evaluate(t){for(const[n,u]of this.branches)if(n.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,u]of this.branches)t(n),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class Lo{constructor(t,n,u,f){this.type=t,this.input=n,this.beginIndex=u,this.endIndex=f}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=n.parse(t[1],1,Jt),f=n.parse(t[2],2,bt);if(!u||!f)return null;if(!gu(u.type,[er(Jt),Qt,Jt]))return n.error(`Expected first argument to be of type array or string, but found ${Ti(u.type)} instead`);if(t.length===4){const x=n.parse(t[3],3,bt);return x?new Lo(u.type,u,f,x):null}return new Lo(u.type,u,f)}evaluate(t){const n=this.input.evaluate(t),u=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),Xr(n,["string"]))return[...n].slice(u,f).join("");if(Xr(n,["array"]))return n.slice(u,f);throw new bi(`Expected first argument to be of type array or string, but found ${Ti(Ft(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Oo(r,t){const n=r.length-1;let u,f,x=0,b=n,M=0;for(;x<=b;)if(M=Math.floor((x+b)/2),u=r[M],f=r[M+1],u<=t){if(M===n||t<f)return M;x=M+1}else{if(!(u>t))throw new bi("Input is not a number.");b=M-1}return 0}class mn{constructor(t,n,u){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[f,x]of u)this.labels.push(f),this.outputs.push(x)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");const u=n.parse(t[1],1,bt);if(!u)return null;const f=[];let x=null;n.expectedType&&n.expectedType.kind!=="value"&&(x=n.expectedType);for(let b=1;b<t.length;b+=2){const M=b===1?-1/0:t[b],A=t[b+1],D=b,O=b+1;if(typeof M!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(f.length&&f[f.length-1][0]>=M)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const N=n.parse(A,O,x);if(!N)return null;x=x||N.type,f.push([M,N])}return new mn(x,u,f)}evaluate(t){const n=this.labels,u=this.outputs;if(n.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return u[0].evaluate(t);const x=n.length;return f>=n[x-1]?u[x-1].evaluate(t):u[Oo(n,f)].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function _d(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pc,fh,vd=function(){if(fh)return pc;function r(t,n,u,f){this.cx=3*t,this.bx=3*(u-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=u,this.p2y=f}return fh=1,pc=r,r.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var u=t,f=0;f<8;f++){var x=this.sampleCurveX(u)-t;if(Math.abs(x)<n)return u;var b=this.sampleCurveDerivativeX(u);if(Math.abs(b)<1e-6)break;u-=x/b}var M=0,A=1;for(u=t,f=0;f<20&&(x=this.sampleCurveX(u),!(Math.abs(x-t)<n));f++)t>x?M=u:A=u,u=.5*(A-M)+M;return u},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},pc}(),vl=_d(vd);class ar{constructor(t,n,u,f,x){this.type=t,this.operator=n,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[b,M]of x)this.labels.push(b),this.outputs.push(M)}static interpolationFactor(t,n,u,f){let x=0;if(t.name==="exponential")x=mc(n,t.base,u,f);else if(t.name==="linear")x=mc(n,1,u,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;x=new vl(b[0],b[1],b[2],b[3]).solve(mc(n,1,u,f))}return x}static parse(t,n){let[u,f,x,...b]=t;if(!Array.isArray(f)||f.length===0)return n.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const D=f[1];if(typeof D!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:D}}else{if(f[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const D=f.slice(1);if(D.length!==4||D.some(O=>typeof O!="number"||O<0||O>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:D}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(x=n.parse(x,2,bt),!x)return null;const M=[];let A=null;u!=="interpolate-hcl"&&u!=="interpolate-lab"||n.expectedType==Qa?n.expectedType&&n.expectedType.kind!=="value"&&(A=n.expectedType):A=En;for(let D=0;D<b.length;D+=2){const O=b[D],N=b[D+1],U=D+3,q=D+4;if(typeof O!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(M.length&&M[M.length-1][0]>=O)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const H=n.parse(N,q,A);if(!H)return null;A=A||H.type,M.push([O,H])}return es(A,bt)||es(A,la)||es(A,En)||es(A,ys)||es(A,Ao)||es(A,Qa)||es(A,mu)||es(A,er(bt))?new ar(A,u,f,x,M):n.error(`Type ${Ti(A)} is not interpolatable.`)}evaluate(t){const n=this.labels,u=this.outputs;if(n.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return u[0].evaluate(t);const x=n.length;if(f>=n[x-1])return u[x-1].evaluate(t);const b=Oo(n,f),M=ar.interpolationFactor(this.interpolation,f,n[b],n[b+1]),A=u[b].evaluate(t),D=u[b+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return _s(A,D,M);case"color":return ni.interpolate(A,D,M);case"padding":return Fn.interpolate(A,D,M);case"colorArray":return Cn.interpolate(A,D,M);case"numberArray":return ir.interpolate(A,D,M);case"variableAnchorOffsetCollection":return nr.interpolate(A,D,M);case"array":return Do(A,D,M);case"projectionDefinition":return hn.interpolate(A,D,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return ni.interpolate(A,D,M,"hcl");case"colorArray":return Cn.interpolate(A,D,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ni.interpolate(A,D,M,"lab");case"colorArray":return Cn.interpolate(A,D,M,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function mc(r,t,n,u){const f=u-n,x=r-n;return f===0?0:t===1?x/f:(Math.pow(t,x)-1)/(Math.pow(t,f)-1)}const as={color:ni.interpolate,number:_s,padding:Fn.interpolate,numberArray:ir.interpolate,colorArray:Cn.interpolate,variableAnchorOffsetCollection:nr.interpolate,array:Do};class Bo{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let u=null;const f=n.expectedType;f&&f.kind!=="value"&&(u=f);const x=[];for(const M of t.slice(1)){const A=n.parse(M,1+x.length,u,void 0,{typeAnnotation:"omit"});if(!A)return null;u=u||A.type,x.push(A)}if(!u)throw new Error("No output type");const b=f&&x.some(M=>Po(f,M.type));return new Bo(b?Jt:u,x)}evaluate(t){let n,u=null,f=0;for(const x of this.args)if(f++,u=x.evaluate(t),u&&u instanceof rr&&!u.available&&(n||(n=u.name),u=null,f===this.args.length&&(u=n)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function gc(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yc(r,t,n,u){return u.compare(t,n)===0}function yr(r,t,n){const u=r!=="=="&&r!=="!=";return class Pb{constructor(x,b,M){this.type=Ht,this.lhs=x,this.rhs=b,this.collator=M,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const M=x[0];let A=b.parse(x[1],1,Jt);if(!A)return null;if(!gc(M,A.type))return b.concat(1).error(`"${M}" comparisons are not supported for type '${Ti(A.type)}'.`);let D=b.parse(x[2],2,Jt);if(!D)return null;if(!gc(M,D.type))return b.concat(2).error(`"${M}" comparisons are not supported for type '${Ti(D.type)}'.`);if(A.type.kind!==D.type.kind&&A.type.kind!=="value"&&D.type.kind!=="value")return b.error(`Cannot compare types '${Ti(A.type)}' and '${Ti(D.type)}'.`);u&&(A.type.kind==="value"&&D.type.kind!=="value"?A=new Ui(D.type,[A]):A.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ui(A.type,[D])));let O=null;if(x.length===4){if(A.type.kind!=="string"&&D.type.kind!=="string"&&A.type.kind!=="value"&&D.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(O=b.parse(x[3],3,cc),!O)return null}return new Pb(A,D,O)}evaluate(x){const b=this.lhs.evaluate(x),M=this.rhs.evaluate(x);if(u&&this.hasUntypedArgument){const A=Ft(b),D=Ft(M);if(A.kind!==D.kind||A.kind!=="string"&&A.kind!=="number")throw new bi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${A.kind}, ${D.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const A=Ft(b),D=Ft(M);if(A.kind!=="string"||D.kind!=="string")return t(x,b,M)}return this.collator?n(x,b,M,this.collator.evaluate(x)):t(x,b,M)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const ph=yr("==",function(r,t,n){return t===n},yc),_u=yr("!=",function(r,t,n){return t!==n},function(r,t,n,u){return!yc(0,t,n,u)}),Cf=yr("<",function(r,t,n){return t<n},function(r,t,n,u){return u.compare(t,n)<0}),mh=yr(">",function(r,t,n){return t>n},function(r,t,n,u){return u.compare(t,n)>0}),Af=yr("<=",function(r,t,n){return t<=n},function(r,t,n,u){return u.compare(t,n)<=0}),Pf=yr(">=",function(r,t,n){return t>=n},function(r,t,n,u){return u.compare(t,n)>=0});class vu{constructor(t,n,u){this.type=cc,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return n.error("Collator options argument must be an object.");const f=n.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Ht);if(!f)return null;const x=n.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Ht);if(!x)return null;let b=null;return u.locale&&(b=n.parse(u.locale,1,Qt),!b)?null:new vu(f,x,b)}evaluate(t){return new vs(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class gh{constructor(t,n,u,f,x){this.type=Qt,this.number=t,this.locale=n,this.currency=u,this.minFractionDigits=f,this.maxFractionDigits=x}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const u=n.parse(t[1],1,bt);if(!u)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return n.error("NumberFormat options argument must be an object.");let x=null;if(f.locale&&(x=n.parse(f.locale,1,Qt),!x))return null;let b=null;if(f.currency&&(b=n.parse(f.currency,1,Qt),!b))return null;let M=null;if(f["min-fraction-digits"]&&(M=n.parse(f["min-fraction-digits"],1,bt),!M))return null;let A=null;return f["max-fraction-digits"]&&(A=n.parse(f["max-fraction-digits"],1,bt),!A)?null:new gh(u,x,b,M,A)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class jo{constructor(t){this.type=Ur,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return n.error("First argument must be an image or text section.");const f=[];let x=!1;for(let b=1;b<=t.length-1;++b){const M=t[b];if(x&&typeof M=="object"&&!Array.isArray(M)){x=!1;let A=null;if(M["font-scale"]&&(A=n.parse(M["font-scale"],1,bt),!A))return null;let D=null;if(M["text-font"]&&(D=n.parse(M["text-font"],1,er(Qt)),!D))return null;let O=null;if(M["text-color"]&&(O=n.parse(M["text-color"],1,En),!O))return null;let N=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!yl.includes(M["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(N=n.parse(M["vertical-align"],1,Qt),!N)return null}const U=f[f.length-1];U.scale=A,U.font=D,U.textColor=O,U.verticalAlign=N}else{const A=n.parse(t[b],1,Jt);if(!A)return null;const D=A.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,f.push({content:A,scale:null,font:null,textColor:null,verticalAlign:null})}}return new jo(f)}evaluate(t){return new Rn(this.sections.map(n=>{const u=n.content.evaluate(t);return Ft(u)===un?new xs("",u,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new xs($t(u),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class yh{constructor(t){this.type=un,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const u=n.parse(t[1],1,Qt);return u?new yh(u):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),u=rr.fromString(n);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(n)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class xl{constructor(t){this.type=bt,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=n.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Ti(u.type)} instead.`):new xl(u):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new bi(`Expected value to be of type string or array, but found ${Ti(Ft(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Ir=8192;function zf(r,t){const n=(180+r[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(n*f*Ir),Math.round(u*f*Ir)]}function _c(r,t){const n=Math.pow(2,t.z);return[(f=(r[0]/Ir+t.x)/n,360*f-180),(u=(r[1]/Ir+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,f}function bl(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function wl(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function xd(r,t,n){const u=r[0]-t[0],f=r[1]-t[1],x=r[0]-n[0],b=r[1]-n[1];return u*b-x*f==0&&u*x<=0&&f*b<=0}function vc(r,t,n,u){return(f=[u[0]-n[0],u[1]-n[1]])[0]*(x=[t[0]-r[0],t[1]-r[1]])[1]-f[1]*x[0]!=0&&!(!vh(r,t,n,u)||!vh(n,u,r,t));var f,x}function Tl(r,t,n){for(const u of n)for(let f=0;f<u.length-1;++f)if(vc(r,t,u[f],u[f+1]))return!0;return!1}function No(r,t,n=!1){let u=!1;for(const M of t)for(let A=0;A<M.length-1;A++){if(xd(r,M[A],M[A+1]))return n;(x=M[A])[1]>(f=r)[1]!=(b=M[A+1])[1]>f[1]&&f[0]<(b[0]-x[0])*(f[1]-x[1])/(b[1]-x[1])+x[0]&&(u=!u)}var f,x,b;return u}function bd(r,t){for(const n of t)if(No(r,n))return!0;return!1}function _h(r,t){for(const n of r)if(!No(n,t))return!1;for(let n=0;n<r.length-1;++n)if(Tl(r[n],r[n+1],t))return!1;return!0}function wd(r,t){for(const n of t)if(_h(r,n))return!0;return!1}function vh(r,t,n,u){const f=u[0]-n[0],x=u[1]-n[1],b=(r[0]-n[0])*x-f*(r[1]-n[1]),M=(t[0]-n[0])*x-f*(t[1]-n[1]);return b>0&&M<0||b<0&&M>0}function Fo(r,t,n){const u=[];for(let f=0;f<r.length;f++){const x=[];for(let b=0;b<r[f].length;b++){const M=zf(r[f][b],n);bl(t,M),x.push(M)}u.push(x)}return u}function Sl(r,t,n){const u=[];for(let f=0;f<r.length;f++){const x=Fo(r[f],t,n);u.push(x)}return u}function xu(r,t,n,u){if(r[0]<n[0]||r[0]>n[2]){const f=.5*u;let x=r[0]-n[0]>f?-u:n[0]-r[0]>f?u:0;x===0&&(x=r[0]-n[2]>f?-u:n[2]-r[0]>f?u:0),r[0]+=x}bl(t,r)}function xc(r,t,n,u){const f=Math.pow(2,u.z)*Ir,x=[u.x*Ir,u.y*Ir],b=[];for(const M of r)for(const A of M){const D=[A.x+x[0],A.y+x[1]];xu(D,t,n,f),b.push(D)}return b}function xh(r,t,n,u){const f=Math.pow(2,u.z)*Ir,x=[u.x*Ir,u.y*Ir],b=[];for(const A of r){const D=[];for(const O of A){const N=[O.x+x[0],O.y+x[1]];bl(t,N),D.push(N)}b.push(D)}if(t[2]-t[0]<=f/2){(M=t)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const A of b)for(const D of A)xu(D,t,n,f)}var M;return b}class Ws{constructor(t,n){this.type=Ht,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(rs(t[1])){const u=t[1];if(u.type==="FeatureCollection"){const f=[];for(const x of u.features){const{type:b,coordinates:M}=x.geometry;b==="Polygon"&&f.push(M),b==="MultiPolygon"&&f.push(...M)}if(f.length)return new Ws(u,{type:"MultiPolygon",coordinates:f})}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Ws(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Ws(u,u)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,u){const f=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(u.type==="Polygon"){const M=Fo(u.coordinates,x,b),A=xc(n.geometry(),f,x,b);if(!wl(f,x))return!1;for(const D of A)if(!No(D,M))return!1}if(u.type==="MultiPolygon"){const M=Sl(u.coordinates,x,b),A=xc(n.geometry(),f,x,b);if(!wl(f,x))return!1;for(const D of A)if(!bd(D,M))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,u){const f=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(u.type==="Polygon"){const M=Fo(u.coordinates,x,b),A=xh(n.geometry(),f,x,b);if(!wl(f,x))return!1;for(const D of A)if(!_h(D,M))return!1}if(u.type==="MultiPolygon"){const M=Sl(u.coordinates,x,b),A=xh(n.geometry(),f,x,b);if(!wl(f,x))return!1;for(const D of A)if(!wd(D,M))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bc=class{constructor(r=[],t=(n,u)=>n<u?-1:n>u?1:0){if(this.data=r,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:t,compare:n}=this,u=t[r];for(;r>0;){const f=r-1>>1,x=t[f];if(n(u,x)>=0)break;t[r]=x,r=f}t[r]=u}_down(r){const{data:t,compare:n}=this,u=this.length>>1,f=t[r];for(;r<u;){let x=1+(r<<1);const b=x+1;if(b<this.length&&n(t[b],t[x])<0&&(x=b),n(t[x],f)>=0)break;t[r]=t[x],r=x}t[r]=f}};function wc(r,t,n=0,u=r.length-1,f=Td){for(;u>n;){if(u-n>600){const A=u-n+1,D=t-n+1,O=Math.log(A),N=.5*Math.exp(2*O/3),U=.5*Math.sqrt(O*N*(A-N)/A)*(D-A/2<0?-1:1);wc(r,t,Math.max(n,Math.floor(t-D*N/A+U)),Math.min(u,Math.floor(t+(A-D)*N/A+U)),f)}const x=r[t];let b=n,M=u;for(Ml(r,n,t),f(r[u],x)>0&&Ml(r,n,u);b<M;){for(Ml(r,b,M),b++,M--;f(r[b],x)<0;)b++;for(;f(r[M],x)>0;)M--}f(r[n],x)===0?Ml(r,n,M):(M++,Ml(r,M,u)),M<=t&&(n=M+1),t<=M&&(u=M-1)}}function Ml(r,t,n){const u=r[t];r[t]=r[n],r[n]=u}function Td(r,t){return r<t?-1:r>t?1:0}function El(r,t){if(r.length<=1)return[r];const n=[];let u,f;for(const x of r){const b=If(x);b!==0&&(x.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(u&&n.push(u),u=[x]):u.push(x))}if(u&&n.push(u),t>1)for(let x=0;x<n.length;x++)n[x].length<=t||(wc(n[x],t,1,n[x].length-1,Sd),n[x]=n[x].slice(0,t));return n}function Sd(r,t){return t.area-r.area}function If(r){let t=0;for(let n,u,f=0,x=r.length,b=x-1;f<x;b=f++)n=r[f],u=r[b],t+=(u.x-n.x)*(n.y+u.y);return t}const Md=1/298.257223563,Ed=Md*(2-Md),bh=Math.PI/180;class Dr{constructor(t){const n=6378.137*bh*1e3,u=Math.cos(t*bh),f=1/(1-Ed*(1-u*u)),x=Math.sqrt(f);this.kx=n*x*u,this.ky=n*x*f*(1-Ed)}distance(t,n){const u=this.wrap(t[0]-n[0])*this.kx,f=(t[1]-n[1])*this.ky;return Math.sqrt(u*u+f*f)}pointOnLine(t,n){let u,f,x,b,M=1/0;for(let A=0;A<t.length-1;A++){let D=t[A][0],O=t[A][1],N=this.wrap(t[A+1][0]-D)*this.kx,U=(t[A+1][1]-O)*this.ky,q=0;N===0&&U===0||(q=(this.wrap(n[0]-D)*this.kx*N+(n[1]-O)*this.ky*U)/(N*N+U*U),q>1?(D=t[A+1][0],O=t[A+1][1]):q>0&&(D+=N/this.kx*q,O+=U/this.ky*q)),N=this.wrap(n[0]-D)*this.kx,U=(n[1]-O)*this.ky;const H=N*N+U*U;H<M&&(M=H,u=D,f=O,x=A,b=q)}return{point:[u,f],index:x,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Cl(r,t){return t[0]-r[0]}function Tc(r){return r[1]-r[0]+1}function ss(r,t){return r[1]>=r[0]&&r[1]<t}function yi(r,t){if(r[0]>r[1])return[null,null];const n=Tc(r);if(t){if(n===2)return[r,null];const f=Math.floor(n/2);return[[r[0],r[0]+f],[r[0]+f,r[1]]]}if(n===1)return[r,null];const u=Math.floor(n/2)-1;return[[r[0],r[0]+u],[r[0]+u+1,r[1]]]}function bu(r,t){if(!ss(t,r.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let u=t[0];u<=t[1];++u)bl(n,r[u]);return n}function Sc(r){const t=[1/0,1/0,-1/0,-1/0];for(const n of r)for(const u of n)bl(t,u);return t}function Cd(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function Ks(r,t,n){if(!Cd(r)||!Cd(t))return NaN;let u=0,f=0;return r[2]<t[0]&&(u=t[0]-r[2]),r[0]>t[2]&&(u=r[0]-t[2]),r[1]>t[3]&&(f=r[1]-t[3]),r[3]<t[1]&&(f=t[1]-r[3]),n.distance([0,0],[u,f])}function bs(r,t,n){const u=n.pointOnLine(t,r);return n.distance(r,u.point)}function Vo(r,t,n,u,f){const x=Math.min(bs(r,[n,u],f),bs(t,[n,u],f)),b=Math.min(bs(n,[r,t],f),bs(u,[r,t],f));return Math.min(x,b)}function wh(r,t,n,u,f){if(!ss(t,r.length)||!ss(u,n.length))return 1/0;let x=1/0;for(let b=t[0];b<t[1];++b){const M=r[b],A=r[b+1];for(let D=u[0];D<u[1];++D){const O=n[D],N=n[D+1];if(vc(M,A,O,N))return 0;x=Math.min(x,Vo(M,A,O,N,f))}}return x}function Ad(r,t,n,u,f){if(!ss(t,r.length)||!ss(u,n.length))return NaN;let x=1/0;for(let b=t[0];b<=t[1];++b)for(let M=u[0];M<=u[1];++M)if(x=Math.min(x,f.distance(r[b],n[M])),x===0)return x;return x}function Uo(r,t,n){if(No(r,t,!0))return 0;let u=1/0;for(const f of t){const x=f[0],b=f[f.length-1];if(x!==b&&(u=Math.min(u,bs(r,[b,x],n)),u===0))return u;const M=n.pointOnLine(f,r);if(u=Math.min(u,n.distance(r,M.point)),u===0)return u}return u}function Al(r,t,n,u){if(!ss(t,r.length))return NaN;for(let x=t[0];x<=t[1];++x)if(No(r[x],n,!0))return 0;let f=1/0;for(let x=t[0];x<t[1];++x){const b=r[x],M=r[x+1];for(const A of n)for(let D=0,O=A.length,N=O-1;D<O;N=D++){const U=A[N],q=A[D];if(vc(b,M,U,q))return 0;f=Math.min(f,Vo(b,M,U,q,u))}}return f}function wu(r,t){for(const n of r)for(const u of n)if(No(u,t,!0))return!0;return!1}function Pd(r,t,n,u=1/0){const f=Sc(r),x=Sc(t);if(u!==1/0&&Ks(f,x,n)>=u)return u;if(wl(f,x)){if(wu(r,t))return 0}else if(wu(t,r))return 0;let b=1/0;for(const M of r)for(let A=0,D=M.length,O=D-1;A<D;O=A++){const N=M[O],U=M[A];for(const q of t)for(let H=0,Q=q.length,ie=Q-1;H<Q;ie=H++){const oe=q[ie],Me=q[H];if(vc(N,U,oe,Me))return 0;b=Math.min(b,Vo(N,U,oe,Me,n))}}return b}function Qs(r,t,n,u,f,x){if(!x)return;const b=Ks(bu(u,x),f,n);b<t&&r.push([b,x,[0,0]])}function Mc(r,t,n,u,f,x,b){if(!x||!b)return;const M=Ks(bu(u,x),bu(f,b),n);M<t&&r.push([M,x,b])}function Ec(r,t,n,u,f=1/0){let x=Math.min(u.distance(r[0],n[0][0]),f);if(x===0)return x;const b=new bc([[0,[0,r.length-1],[0,0]]],Cl),M=Sc(n);for(;b.length>0;){const A=b.pop();if(A[0]>=x)continue;const D=A[1],O=t?50:100;if(Tc(D)<=O){if(!ss(D,r.length))return NaN;if(t){const N=Al(r,D,n,u);if(isNaN(N)||N===0)return N;x=Math.min(x,N)}else for(let N=D[0];N<=D[1];++N){const U=Uo(r[N],n,u);if(x=Math.min(x,U),x===0)return 0}}else{const N=yi(D,t);Qs(b,x,u,r,M,N[0]),Qs(b,x,u,r,M,N[1])}}return x}function Cc(r,t,n,u,f,x=1/0){let b=Math.min(x,f.distance(r[0],n[0]));if(b===0)return b;const M=new bc([[0,[0,r.length-1],[0,n.length-1]]],Cl);for(;M.length>0;){const A=M.pop();if(A[0]>=b)continue;const D=A[1],O=A[2],N=t?50:100,U=u?50:100;if(Tc(D)<=N&&Tc(O)<=U){if(!ss(D,r.length)&&ss(O,n.length))return NaN;let q;if(t&&u)q=wh(r,D,n,O,f),b=Math.min(b,q);else if(t&&!u){const H=r.slice(D[0],D[1]+1);for(let Q=O[0];Q<=O[1];++Q)if(q=bs(n[Q],H,f),b=Math.min(b,q),b===0)return b}else if(!t&&u){const H=n.slice(O[0],O[1]+1);for(let Q=D[0];Q<=D[1];++Q)if(q=bs(r[Q],H,f),b=Math.min(b,q),b===0)return b}else q=Ad(r,D,n,O,f),b=Math.min(b,q)}else{const q=yi(D,t),H=yi(O,u);Mc(M,b,f,r,n,q[0],H[0]),Mc(M,b,f,r,n,q[0],H[1]),Mc(M,b,f,r,n,q[1],H[0]),Mc(M,b,f,r,n,q[1],H[1])}}return b}function Th(r){return r.type==="MultiPolygon"?r.coordinates.map(t=>({type:"Polygon",coordinates:t})):r.type==="MultiLineString"?r.coordinates.map(t=>({type:"LineString",coordinates:t})):r.type==="MultiPoint"?r.coordinates.map(t=>({type:"Point",coordinates:t})):[r]}class Go{constructor(t,n){this.type=bt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(rs(t[1])){const u=t[1];if(u.type==="FeatureCollection")return new Go(u,u.features.map(f=>Th(f.geometry)).flat());if(u.type==="Feature")return new Go(u,Th(u.geometry));if("type"in u&&"coordinates"in u)return new Go(u,Th(u))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,u){const f=n.geometry(),x=f.flat().map(A=>_c([A.x,A.y],n.canonical));if(f.length===0)return NaN;const b=new Dr(x[0][1]);let M=1/0;for(const A of u){switch(A.type){case"Point":M=Math.min(M,Cc(x,!1,[A.coordinates],!1,b,M));break;case"LineString":M=Math.min(M,Cc(x,!1,A.coordinates,!0,b,M));break;case"Polygon":M=Math.min(M,Ec(x,!1,A.coordinates,b,M))}if(M===0)return M}return M}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,u){const f=n.geometry(),x=f.flat().map(A=>_c([A.x,A.y],n.canonical));if(f.length===0)return NaN;const b=new Dr(x[0][1]);let M=1/0;for(const A of u){switch(A.type){case"Point":M=Math.min(M,Cc(x,!0,[A.coordinates],!1,b,M));break;case"LineString":M=Math.min(M,Cc(x,!0,A.coordinates,!0,b,M));break;case"Polygon":M=Math.min(M,Ec(x,!0,A.coordinates,b,M))}if(M===0)return M}return M}(t,this.geometries);if(t.geometryType()==="Polygon")return function(n,u){const f=n.geometry();if(f.length===0||f[0].length===0)return NaN;const x=El(f,0).map(A=>A.map(D=>D.map(O=>_c([O.x,O.y],n.canonical)))),b=new Dr(x[0][0][0][1]);let M=1/0;for(const A of u)for(const D of x){switch(A.type){case"Point":M=Math.min(M,Ec([A.coordinates],!1,D,b,M));break;case"LineString":M=Math.min(M,Ec(A.coordinates,!0,D,b,M));break;case"Polygon":M=Math.min(M,Pd(D,A.coordinates,b,M))}if(M===0)return M}return M}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ac{constructor(t){this.type=Jt,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=t[1];return u==null?n.error("Global state property must be defined."):typeof u!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Ac(u)}evaluate(t){var n;const u=(n=t.globals)===null||n===void 0?void 0:n.globalState;return u&&Object.keys(u).length!==0?Io(u,this.key):null}eachChild(){}outputDefined(){return!1}}const Zo={"==":ph,"!=":_u,">":mh,"<":Cf,">=":Pf,"<=":Af,array:Ui,at:ko,boolean:Ui,case:_l,coalesce:Bo,collator:vu,format:jo,image:yh,in:fc,"index-of":Da,interpolate:ar,"interpolate-hcl":ar,"interpolate-lab":ar,length:xl,let:Ro,literal:ca,match:Yn,number:Ui,"number-format":gh,object:Ui,slice:Lo,step:mn,string:Ui,"to-boolean":Yr,"to-color":Yr,"to-number":Yr,"to-string":Yr,var:Ys,within:Ws,distance:Go,"global-state":Ac};class Wr{constructor(t,n,u,f){this.name=t,this.type=n,this._evaluate=u,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const u=t[0],f=Wr.definitions[u];if(!f)return n.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,M=b.filter(([D])=>!Array.isArray(D)||D.length===t.length-1);let A=null;for(const[D,O]of M){A=new Xs(n.registry,Rr,n.path,null,n.scope);const N=[];let U=!1;for(let q=1;q<t.length;q++){const H=t[q],Q=Array.isArray(D)?D[q-1]:D.type,ie=A.parse(H,1+N.length,Q);if(!ie){U=!0;break}N.push(ie)}if(!U)if(Array.isArray(D)&&D.length!==N.length)A.error(`Expected ${D.length} arguments, but found ${N.length} instead.`);else{for(let q=0;q<N.length;q++){const H=Array.isArray(D)?D[q]:D.type,Q=N[q];A.concat(q+1).checkSubtype(H,Q.type)}if(A.errors.length===0)return new Wr(u,x,O,N)}}if(M.length===1)n.errors.push(...A.errors);else{const D=(M.length?M:b).map(([N])=>{return U=N,Array.isArray(U)?`(${U.map(Ti).join(", ")})`:`(${Ti(U.type)}...)`;var U}).join(" | "),O=[];for(let N=1;N<t.length;N++){const U=n.parse(t[N],1+O.length);if(!U)return null;O.push(Ti(U.type))}n.error(`Expected arguments of type ${D}, but found (${O.join(", ")}) instead.`)}return null}static register(t,n){Wr.definitions=n;for(const u in n)t[u]=Wr}}function Tu(r,[t,n,u,f]){t=t.evaluate(r),n=n.evaluate(r),u=u.evaluate(r);const x=f?f.evaluate(r):1,b=Bi(t,n,u,x);if(b)throw new bi(b);return new ni(t/255,n/255,u/255,x,!1)}function ua(r,t){return r in t}function Su(r,t){const n=t[r];return n===void 0?null:n}function Wn(r){return{type:r}}function Rr(r){if(r instanceof Ys)return Rr(r.boundExpression);if(r instanceof Wr&&r.name==="error"||r instanceof vu||r instanceof Ws||r instanceof Go||r instanceof Ac)return!1;const t=r instanceof Yr||r instanceof Ui;let n=!0;return r.eachChild(u=>{n=t?n&&Rr(u):n&&u instanceof ca}),!!n&&ws(r)&&$o(r,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ws(r){if(r instanceof Wr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Ws||r instanceof Go)return!1;let t=!0;return r.eachChild(n=>{t&&!ws(n)&&(t=!1)}),t}function qo(r){if(r instanceof Wr&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(n=>{t&&!qo(n)&&(t=!1)}),t}function $o(r,t){if(r instanceof Wr&&t.indexOf(r.name)>=0)return!1;let n=!0;return r.eachChild(u=>{n&&!$o(u,t)&&(n=!1)}),n}function Pc(r){return{result:"success",value:r}}function Js(r){return{result:"error",value:r}}function Kr(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Sh(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Pl(r){return!!r.expression&&r.expression.interpolated}function ii(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function zc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Ft(r)===Yi}function Qr(r){return r}function Mu(r,t){const n=r.stops&&typeof r.stops[0][0]=="object",u=n||!(n||r.property!==void 0),f=r.type||(Pl(t)?"exponential":"interval"),x=function(O){switch(O.type){case"color":return ni.parse;case"padding":return Fn.parse;case"numberArray":return ir.parse;case"colorArray":return Cn.parse;default:return null}}(t);if(x&&((r=mr({},r)).stops&&(r.stops=r.stops.map(O=>[O[0],x(O[1])])),r.default=x(r.default?r.default:t.default)),r.colorSpace&&(b=r.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var b;const M=function(O){switch(O){case"exponential":return eo;case"interval":return Eu;case"categorical":return Mh;case"identity":return Eh;default:throw new Error(`Unknown function type "${O}"`)}}(f);let A,D;if(f==="categorical"){A=Object.create(null);for(const O of r.stops)A[O[0]]=O[1];D=typeof r.stops[0][0]}if(n){const O={},N=[];for(let H=0;H<r.stops.length;H++){const Q=r.stops[H],ie=Q[0].zoom;O[ie]===void 0&&(O[ie]={zoom:ie,type:r.type,property:r.property,default:r.default,stops:[]},N.push(ie)),O[ie].stops.push([Q[0].value,Q[1]])}const U=[];for(const H of N)U.push([O[H].zoom,Mu(O[H],t)]);const q={name:"linear"};return{kind:"composite",interpolationType:q,interpolationFactor:ar.interpolationFactor.bind(void 0,q),zoomStops:U.map(H=>H[0]),evaluate:({zoom:H},Q)=>eo({stops:U,base:r.base},t,H).evaluate(H,Q)}}if(u){const O=f==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:ar.interpolationFactor.bind(void 0,O),zoomStops:r.stops.map(N=>N[0]),evaluate:({zoom:N})=>M(r,t,N,A,D)}}return{kind:"source",evaluate(O,N){const U=N&&N.properties?N.properties[r.property]:void 0;return U===void 0?_r(r.default,t.default):M(r,t,U,A,D)}}}function _r(r,t,n){return r!==void 0?r:t!==void 0?t:n!==void 0?n:void 0}function Mh(r,t,n,u,f){return _r(typeof n===f?u[n]:void 0,r.default,t.default)}function Eu(r,t,n){if(ii(n)!=="number")return _r(r.default,t.default);const u=r.stops.length;if(u===1||n<=r.stops[0][0])return r.stops[0][1];if(n>=r.stops[u-1][0])return r.stops[u-1][1];const f=Oo(r.stops.map(x=>x[0]),n);return r.stops[f][1]}function eo(r,t,n){const u=r.base!==void 0?r.base:1;if(ii(n)!=="number")return _r(r.default,t.default);const f=r.stops.length;if(f===1||n<=r.stops[0][0])return r.stops[0][1];if(n>=r.stops[f-1][0])return r.stops[f-1][1];const x=Oo(r.stops.map(O=>O[0]),n),b=function(O,N,U,q){const H=q-U,Q=O-U;return H===0?0:N===1?Q/H:(Math.pow(N,Q)-1)/(Math.pow(N,H)-1)}(n,u,r.stops[x][0],r.stops[x+1][0]),M=r.stops[x][1],A=r.stops[x+1][1],D=as[t.type]||Qr;return typeof M.evaluate=="function"?{evaluate(...O){const N=M.evaluate.apply(void 0,O),U=A.evaluate.apply(void 0,O);if(N!==void 0&&U!==void 0)return D(N,U,b,r.colorSpace)}}:D(M,A,b,r.colorSpace)}function Eh(r,t,n){switch(t.type){case"color":n=ni.parse(n);break;case"formatted":n=Rn.fromString(n.toString());break;case"resolvedImage":n=rr.fromString(n.toString());break;case"padding":n=Fn.parse(n);break;case"colorArray":n=Cn.parse(n);break;case"numberArray":n=ir.parse(n);break;default:ii(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0)}return _r(n,r.default,t.default)}Wr.register(Zo,{error:[{kind:"error"},[Qt],(r,[t])=>{throw new bi(t.evaluate(r))}],typeof:[Qt,[Jt],(r,[t])=>Ti(Ft(t.evaluate(r)))],"to-rgba":[er(bt,4),[En],(r,[t])=>{const[n,u,f,x]=t.evaluate(r).rgb;return[255*n,255*u,255*f,x]}],rgb:[En,[bt,bt,bt],Tu],rgba:[En,[bt,bt,bt,bt],Tu],has:{type:Ht,overloads:[[[Qt],(r,[t])=>ua(t.evaluate(r),r.properties())],[[Qt,Yi],(r,[t,n])=>ua(t.evaluate(r),n.evaluate(r))]]},get:{type:Jt,overloads:[[[Qt],(r,[t])=>Su(t.evaluate(r),r.properties())],[[Qt,Yi],(r,[t,n])=>Su(t.evaluate(r),n.evaluate(r))]]},"feature-state":[Jt,[Qt],(r,[t])=>Su(t.evaluate(r),r.featureState||{})],properties:[Yi,[],r=>r.properties()],"geometry-type":[Qt,[],r=>r.geometryType()],id:[Jt,[],r=>r.id()],zoom:[bt,[],r=>r.globals.zoom],"heatmap-density":[bt,[],r=>r.globals.heatmapDensity||0],elevation:[bt,[],r=>r.globals.elevation||0],"line-progress":[bt,[],r=>r.globals.lineProgress||0],accumulated:[Jt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[bt,Wn(bt),(r,t)=>{let n=0;for(const u of t)n+=u.evaluate(r);return n}],"*":[bt,Wn(bt),(r,t)=>{let n=1;for(const u of t)n*=u.evaluate(r);return n}],"-":{type:bt,overloads:[[[bt,bt],(r,[t,n])=>t.evaluate(r)-n.evaluate(r)],[[bt],(r,[t])=>-t.evaluate(r)]]},"/":[bt,[bt,bt],(r,[t,n])=>t.evaluate(r)/n.evaluate(r)],"%":[bt,[bt,bt],(r,[t,n])=>t.evaluate(r)%n.evaluate(r)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(r,[t,n])=>Math.pow(t.evaluate(r),n.evaluate(r))],sqrt:[bt,[bt],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[bt,[bt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[bt,[bt],(r,[t])=>Math.log(t.evaluate(r))],log2:[bt,[bt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[bt,[bt],(r,[t])=>Math.sin(t.evaluate(r))],cos:[bt,[bt],(r,[t])=>Math.cos(t.evaluate(r))],tan:[bt,[bt],(r,[t])=>Math.tan(t.evaluate(r))],asin:[bt,[bt],(r,[t])=>Math.asin(t.evaluate(r))],acos:[bt,[bt],(r,[t])=>Math.acos(t.evaluate(r))],atan:[bt,[bt],(r,[t])=>Math.atan(t.evaluate(r))],min:[bt,Wn(bt),(r,t)=>Math.min(...t.map(n=>n.evaluate(r)))],max:[bt,Wn(bt),(r,t)=>Math.max(...t.map(n=>n.evaluate(r)))],abs:[bt,[bt],(r,[t])=>Math.abs(t.evaluate(r))],round:[bt,[bt],(r,[t])=>{const n=t.evaluate(r);return n<0?-Math.round(-n):Math.round(n)}],floor:[bt,[bt],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[bt,[bt],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Ht,[Qt,Jt],(r,[t,n])=>r.properties()[t.value]===n.value],"filter-id-==":[Ht,[Jt],(r,[t])=>r.id()===t.value],"filter-type-==":[Ht,[Qt],(r,[t])=>r.geometryType()===t.value],"filter-<":[Ht,[Qt,Jt],(r,[t,n])=>{const u=r.properties()[t.value],f=n.value;return typeof u==typeof f&&u<f}],"filter-id-<":[Ht,[Jt],(r,[t])=>{const n=r.id(),u=t.value;return typeof n==typeof u&&n<u}],"filter->":[Ht,[Qt,Jt],(r,[t,n])=>{const u=r.properties()[t.value],f=n.value;return typeof u==typeof f&&u>f}],"filter-id->":[Ht,[Jt],(r,[t])=>{const n=r.id(),u=t.value;return typeof n==typeof u&&n>u}],"filter-<=":[Ht,[Qt,Jt],(r,[t,n])=>{const u=r.properties()[t.value],f=n.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[Ht,[Jt],(r,[t])=>{const n=r.id(),u=t.value;return typeof n==typeof u&&n<=u}],"filter->=":[Ht,[Qt,Jt],(r,[t,n])=>{const u=r.properties()[t.value],f=n.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[Ht,[Jt],(r,[t])=>{const n=r.id(),u=t.value;return typeof n==typeof u&&n>=u}],"filter-has":[Ht,[Jt],(r,[t])=>t.value in r.properties()],"filter-has-id":[Ht,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ht,[er(Qt)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ht,[er(Jt)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Ht,[Qt,er(Jt)],(r,[t,n])=>n.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Ht,[Qt,er(Jt)],(r,[t,n])=>function(u,f,x,b){for(;x<=b;){const M=x+b>>1;if(f[M]===u)return!0;f[M]>u?b=M-1:x=M+1}return!1}(r.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Ht,overloads:[[[Ht,Ht],(r,[t,n])=>t.evaluate(r)&&n.evaluate(r)],[Wn(Ht),(r,t)=>{for(const n of t)if(!n.evaluate(r))return!1;return!0}]]},any:{type:Ht,overloads:[[[Ht,Ht],(r,[t,n])=>t.evaluate(r)||n.evaluate(r)],[Wn(Ht),(r,t)=>{for(const n of t)if(n.evaluate(r))return!0;return!1}]]},"!":[Ht,[Ht],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Ht,[Qt],(r,[t])=>{const n=r.globals&&r.globals.isSupportedScript;return!n||n(t.evaluate(r))}],upcase:[Qt,[Qt],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Qt,[Qt],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Qt,Wn(Jt),(r,t)=>t.map(n=>$t(n.evaluate(r))).join("")],"resolved-locale":[Qt,[cc],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Ic{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new dh,this._defaultValue=n?function(u){if(u.type==="color"&&zc(u.default))return new ni(0,0,0,0);switch(u.type){case"color":return ni.parse(u.default)||null;case"padding":return Fn.parse(u.default)||null;case"numberArray":return ir.parse(u.default)||null;case"colorArray":return Cn.parse(u.default)||null;case"variableAnchorOffsetCollection":return nr.parse(u.default)||null;case"projectionDefinition":return hn.parse(u.default)||null;default:return u.default===void 0?null:u.default}}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,u,f,x,b){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=u,this._evaluator.canonical=f,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,n,u,f,x,b){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new bi(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Ts(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Zo}function os(r,t){const n=new Xs(Zo,Rr,[],t?function(f){const x={color:En,string:Qt,number:bt,enum:Qt,boolean:Ht,formatted:Ur,padding:ys,numberArray:Ao,colorArray:Qa,projectionDefinition:la,resolvedImage:un,variableAnchorOffsetCollection:mu};return f.type==="array"?er(x[f.value]||Jt,f.length):x[f.type]}(t):void 0),u=n.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Pc(new Ic(u,t)):Js(n.errors)}class to{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!qo(n.expression),this.globalStateRefs=ea(n.expression)}evaluateWithoutErrorHandling(t,n,u,f,x,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,u,f,x,b)}evaluate(t,n,u,f,x,b){return this._styleExpression.evaluate(t,n,u,f,x,b)}}class zl{constructor(t,n,u,f){this.kind=t,this.zoomStops=u,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!qo(n.expression),this.globalStateRefs=ea(n.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,n,u,f,x,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,u,f,x,b)}evaluate(t,n,u,f,x,b){return this._styleExpression.evaluate(t,n,u,f,x,b)}interpolationFactor(t,n,u){return this.interpolationType?ar.interpolationFactor(this.interpolationType,t,n,u):0}}function Jr(r,t){const n=os(r,t);if(n.result==="error")return n;const u=n.value.expression,f=ws(u);if(!f&&!Kr(t))return Js([new cn("","data expressions not supported")]);const x=$o(u,["zoom"]);if(!x&&!Sh(t))return Js([new cn("","zoom expressions not supported")]);const b=Ra(u);return b||x?b instanceof cn?Js([b]):b instanceof ar&&!Pl(t)?Js([new cn("",'"interpolate" expressions cannot be used with this property')]):Pc(b?new zl(f?"camera":"composite",n.value,b.labels,b instanceof ar?b.interpolation:void 0):new to(f?"constant":"source",n.value)):Js([new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vr{constructor(t,n){this._parameters=t,this._specification=n,mr(this,Mu(this._parameters,this._specification))}static deserialize(t){return new vr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ra(r){let t=null;if(r instanceof Ro)t=Ra(r.result);else if(r instanceof Bo){for(const n of r.args)if(t=Ra(n),t)break}else(r instanceof mn||r instanceof ar)&&r.input instanceof Wr&&r.input.name==="zoom"&&(t=r);return t instanceof cn||r.eachChild(n=>{const u=Ra(n);u instanceof cn?t=u:!t&&u?t=new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ea(r,t=new Set){return r instanceof Ac&&t.add(r.key),r.eachChild(n=>{ea(n,t)}),t}function ha(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!ha(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Ss={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function io(r){if(r==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ha(r)||(r=An(r));const t=os(r,Ss);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,u,f)=>t.value.evaluate(n,u,{},f),needGeometry:Il(r),getGlobalStateRefs:()=>ea(t.value.expression)}}function Dc(r,t){return r<t?-1:r>t?1:0}function Il(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let t=1;t<r.length;t++)if(Il(r[t]))return!0;return!1}function An(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?tn(r[1],r[2],"=="):t==="!="?ta(tn(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?tn(r[1],r[2],t):t==="any"?(n=r.slice(1),["any"].concat(n.map(An))):t==="all"?["all"].concat(r.slice(1).map(An)):t==="none"?["all"].concat(r.slice(1).map(An).map(ta)):t==="in"?wi(r[1],r.slice(2)):t==="!in"?ta(wi(r[1],r.slice(2))):t==="has"?no(r[1]):t!=="!has"||ta(no(r[1]));var n}function tn(r,t,n){switch(r){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,r,t]}}function wi(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Dc)]]:["filter-in-small",r,["literal",t]]}}function no(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ta(r){return["!",r]}function Rc(r){const t=typeof r;if(t==="number"||t==="boolean"||t==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let f="[";for(const x of r)f+=`${Rc(x)},`;return`${f}]`}const n=Object.keys(r).sort();let u="{";for(let f=0;f<n.length;f++)u+=`${JSON.stringify(n[f])}:${Rc(r[n[f]])},`;return`${u}}`}function Ho(r){let t="";for(const n of Zt)t+=`/${Rc(r[n])}`;return t}function Cu(r){const t=r.value;return t?[new dt(r.key,t,"constants have been deprecated as of v8")]:[]}function nn(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Zr(r){if(Array.isArray(r))return r.map(Zr);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const n in r)t[n]=Zr(r[n]);return t}return nn(r)}function xr(r){const t=r.key,n=r.value,u=r.valueSpec||{},f=r.objectElementValidators||{},x=r.style,b=r.styleSpec,M=r.validateSpec;let A=[];const D=ii(n);if(D!=="object")return[new dt(t,n,`object expected, ${D} found`)];for(const O in n){const N=O.split(".")[0],U=Io(u,N)||u["*"];let q;if(Io(f,N))q=f[N];else if(Io(u,N))q=M;else if(f["*"])q=f["*"];else{if(!u["*"]){A.push(new dt(t,n[O],`unknown property "${O}"`));continue}q=M}A=A.concat(q({key:(t&&`${t}.`)+O,value:n[O],valueSpec:U,style:x,styleSpec:b,object:n,objectKey:O,validateSpec:M},n))}for(const O in u)f[O]||u[O].required&&u[O].default===void 0&&n[O]===void 0&&A.push(new dt(t,n,`missing required property "${O}"`));return A}function kc(r){const t=r.value,n=r.valueSpec,u=r.style,f=r.styleSpec,x=r.key,b=r.arrayElementValidator||r.validateSpec;if(ii(t)!=="array")return[new dt(x,t,`array expected, ${ii(t)} found`)];if(n.length&&t.length!==n.length)return[new dt(x,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new dt(x,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let M={type:n.value,values:n.values};f.$version<7&&(M.function=n.function),ii(n.value)==="object"&&(M=n.value);let A=[];for(let D=0;D<t.length;D++)A=A.concat(b({array:t,arrayIndex:D,value:t[D],valueSpec:M,validateSpec:r.validateSpec,style:u,styleSpec:f,key:`${x}[${D}]`}));return A}function Ms(r){const t=r.key,n=r.value,u=r.valueSpec;let f=ii(n);return f==="number"&&n!=n&&(f="NaN"),f!=="number"?[new dt(t,n,`number expected, ${f} found`)]:"minimum"in u&&n<u.minimum?[new dt(t,n,`${n} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&n>u.maximum?[new dt(t,n,`${n} is greater than the maximum value ${u.maximum}`)]:[]}function Au(r){const t=r.valueSpec,n=nn(r.value.type);let u,f,x,b={};const M=n!=="categorical"&&r.value.property===void 0,A=!M,D=ii(r.value.stops)==="array"&&ii(r.value.stops[0])==="array"&&ii(r.value.stops[0][0])==="object",O=xr({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(q){if(n==="identity")return[new dt(q.key,q.value,'identity function may not have a "stops" property')];let H=[];const Q=q.value;return H=H.concat(kc({key:q.key,value:Q,valueSpec:q.valueSpec,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,arrayElementValidator:N})),ii(Q)==="array"&&Q.length===0&&H.push(new dt(q.key,Q,"array must have at least one stop")),H},default:function(q){return q.validateSpec({key:q.key,value:q.value,valueSpec:t,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec})}}});return n==="identity"&&M&&O.push(new dt(r.key,r.value,'missing required property "property"')),n==="identity"||r.value.stops||O.push(new dt(r.key,r.value,'missing required property "stops"')),n==="exponential"&&r.valueSpec.expression&&!Pl(r.valueSpec)&&O.push(new dt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(A&&!Kr(r.valueSpec)?O.push(new dt(r.key,r.value,"property functions not supported")):M&&!Sh(r.valueSpec)&&O.push(new dt(r.key,r.value,"zoom functions not supported"))),n!=="categorical"&&!D||r.value.property!==void 0||O.push(new dt(r.key,r.value,'"property" property is required')),O;function N(q){let H=[];const Q=q.value,ie=q.key;if(ii(Q)!=="array")return[new dt(ie,Q,`array expected, ${ii(Q)} found`)];if(Q.length!==2)return[new dt(ie,Q,`array length 2 expected, length ${Q.length} found`)];if(D){if(ii(Q[0])!=="object")return[new dt(ie,Q,`object expected, ${ii(Q[0])} found`)];if(Q[0].zoom===void 0)return[new dt(ie,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new dt(ie,Q,"object stop key must have value")];if(x&&x>nn(Q[0].zoom))return[new dt(ie,Q[0].zoom,"stop zoom values must appear in ascending order")];nn(Q[0].zoom)!==x&&(x=nn(Q[0].zoom),f=void 0,b={}),H=H.concat(xr({key:`${ie}[0]`,value:Q[0],valueSpec:{zoom:{}},validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,objectElementValidators:{zoom:Ms,value:U}}))}else H=H.concat(U({key:`${ie}[0]`,value:Q[0],validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec},Q));return Ts(Zr(Q[1]))?H.concat([new dt(`${ie}[1]`,Q[1],"expressions are not allowed in function stops.")]):H.concat(q.validateSpec({key:`${ie}[1]`,value:Q[1],valueSpec:t,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec}))}function U(q,H){const Q=ii(q.value),ie=nn(q.value),oe=q.value!==null?q.value:H;if(u){if(Q!==u)return[new dt(q.key,oe,`${Q} stop domain type must match previous stop domain type ${u}`)]}else u=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new dt(q.key,oe,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&n!=="categorical"){let Me=`number expected, ${Q} found`;return Kr(t)&&n===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dt(q.key,oe,Me)]}return n!=="categorical"||Q!=="number"||isFinite(ie)&&Math.floor(ie)===ie?n!=="categorical"&&Q==="number"&&f!==void 0&&ie<f?[new dt(q.key,oe,"stop domain values must appear in ascending order")]:(f=ie,n==="categorical"&&ie in b?[new dt(q.key,oe,"stop domain values must be unique")]:(b[ie]=!0,[])):[new dt(q.key,oe,`integer expected, found ${ie}`)]}}function ia(r){const t=(r.expressionContext==="property"?Jr:os)(Zr(r.value),r.valueSpec);if(t.result==="error")return t.value.map(u=>new dt(`${r.key}${u.key}`,r.value,u.message));const n=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!n.outputDefined())return[new dt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!qo(n))return[new dt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!qo(n))return[new dt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!$o(n,["zoom","feature-state"]))return[new dt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!ws(n))return[new dt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function da(r){const t=r.key,n=r.value,u=ii(n);return u!=="string"?[new dt(t,n,`color expected, ${u} found`)]:ni.parse(String(n))?[]:[new dt(t,n,`color expected, "${n}" found`)]}function br(r){const t=r.key,n=r.value,u=r.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(nn(n))===-1&&f.push(new dt(t,n,`expected one of [${u.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(u.values).indexOf(nn(n))===-1&&f.push(new dt(t,n,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(n)} found`)),f}function ka(r){return ha(Zr(r.value))?ia(mr({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pu(r)}function Pu(r){const t=r.value,n=r.key;if(ii(t)!=="array")return[new dt(n,t,`array expected, ${ii(t)} found`)];const u=r.styleSpec;let f,x=[];if(t.length<1)return[new dt(n,t,"filter array must have at least 1 element")];switch(x=x.concat(br({key:`${n}[0]`,value:t[0],valueSpec:u.filter_operator,style:r.style,styleSpec:r.styleSpec})),nn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&nn(t[1])==="$type"&&x.push(new dt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&x.push(new dt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=ii(t[1]),f!=="string"&&x.push(new dt(`${n}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=ii(t[b]),nn(t[1])==="$type"?x=x.concat(br({key:`${n}[${b}]`,value:t[b],valueSpec:u.geometry_type,style:r.style,styleSpec:r.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&x.push(new dt(`${n}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)x=x.concat(Pu({key:`${n}[${b}]`,value:t[b],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":f=ii(t[1]),t.length!==2?x.push(new dt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&x.push(new dt(`${n}[1]`,t[1],`string expected, ${f} found`))}return x}function zu(r,t){const n=r.key,u=r.validateSpec,f=r.style,x=r.styleSpec,b=r.value,M=r.objectKey,A=x[`${t}_${r.layerType}`];if(!A)return[];const D=M.match(/^(.*)-transition$/);if(t==="paint"&&D&&A[D[1]]&&A[D[1]].transition)return u({key:n,value:b,valueSpec:x.transition,style:f,styleSpec:x});const O=r.valueSpec||A[M];if(!O)return[new dt(n,b,`unknown property "${M}"`)];let N;if(ii(b)==="string"&&Kr(O)&&!O.tokens&&(N=/^{([^}]+)}$/.exec(b)))return[new dt(n,b,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const U=[];return r.layerType==="symbol"&&(M==="text-field"&&f&&!f.glyphs&&U.push(new dt(n,b,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&zc(Zr(b))&&nn(b.type)==="identity"&&U.push(new dt(n,b,'"text-font" does not support identity functions'))),U.concat(u({key:r.key,value:b,valueSpec:O,style:f,styleSpec:x,expressionContext:"property",propertyType:t,propertyKey:M}))}function Dl(r){return zu(r,"paint")}function Lc(r){return zu(r,"layout")}function ro(r){let t=[];const n=r.value,u=r.key,f=r.style,x=r.styleSpec;if(ii(n)!=="object")return[new dt(u,n,`object expected, ${ii(n)} found`)];n.type||n.ref||t.push(new dt(u,n,'either "type" or "ref" is required'));let b=nn(n.type);const M=nn(n.ref);if(n.id){const A=nn(n.id);for(let D=0;D<r.arrayIndex;D++){const O=f.layers[D];nn(O.id)===A&&t.push(new dt(u,n.id,`duplicate layer id "${n.id}", previously used at line ${O.id.__line__}`))}}if("ref"in n){let A;["type","source","source-layer","filter","layout"].forEach(D=>{D in n&&t.push(new dt(u,n[D],`"${D}" is prohibited for ref layers`))}),f.layers.forEach(D=>{nn(D.id)===M&&(A=D)}),A?A.ref?t.push(new dt(u,n.ref,"ref cannot reference another ref layer")):b=nn(A.type):t.push(new dt(u,n.ref,`ref layer "${M}" not found`))}else if(b!=="background")if(n.source){const A=f.sources&&f.sources[n.source],D=A&&nn(A.type);A?D==="vector"&&b==="raster"?t.push(new dt(u,n.source,`layer "${n.id}" requires a raster source`)):D!=="raster-dem"&&b==="hillshade"||D!=="raster-dem"&&b==="color-relief"?t.push(new dt(u,n.source,`layer "${n.id}" requires a raster-dem source`)):D==="raster"&&b!=="raster"?t.push(new dt(u,n.source,`layer "${n.id}" requires a vector source`)):D!=="vector"||n["source-layer"]?D==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?t.push(new dt(u,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!n.paint||!n.paint["line-gradient"]||D==="geojson"&&A.lineMetrics||t.push(new dt(u,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new dt(u,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new dt(u,n.source,`source "${n.source}" not found`))}else t.push(new dt(u,n,'missing required property "source"'));return t=t.concat(xr({key:u,value:n,valueSpec:x.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${u}.type`,value:n.type,valueSpec:x.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:n,objectKey:"type"}),filter:ka,layout:A=>xr({layer:n,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>Lc(mr({layerType:b},D))}}),paint:A=>xr({layer:n,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>Dl(mr({layerType:b},D))}})}})),t}function Gi(r){const t=r.value,n=r.key,u=ii(t);return u!=="string"?[new dt(n,t,`string expected, ${u} found`)]:[]}const Es={promoteId:function({key:r,value:t}){if(ii(t)==="string")return Gi({key:r,value:t});{const n=[];for(const u in t)n.push(...Gi({key:`${r}.${u}`,value:t[u]}));return n}}};function kr(r){const t=r.value,n=r.key,u=r.styleSpec,f=r.style,x=r.validateSpec;if(!t.type)return[new dt(n,t,'"type" is required')];const b=nn(t.type);let M;switch(b){case"vector":case"raster":return M=xr({key:n,value:t,valueSpec:u[`source_${b.replace("-","_")}`],style:r.style,styleSpec:u,objectElementValidators:Es,validateSpec:x}),M;case"raster-dem":return M=function(A){var D;const O=(D=A.sourceName)!==null&&D!==void 0?D:"",N=A.value,U=A.styleSpec,q=U.source_raster_dem,H=A.style;let Q=[];const ie=ii(N);if(N===void 0)return Q;if(ie!=="object")return Q.push(new dt("source_raster_dem",N,`object expected, ${ie} found`)),Q;const oe=nn(N.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],pe=A.value.encoding?`"${A.value.encoding}"`:"Default";for(const ve in N)!oe&&Me.includes(ve)?Q.push(new dt(ve,N[ve],`In "${O}": "${ve}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):q[ve]?Q=Q.concat(A.validateSpec({key:ve,value:N[ve],valueSpec:q[ve],validateSpec:A.validateSpec,style:H,styleSpec:U})):Q.push(new dt(ve,N[ve],`unknown property "${ve}"`));return Q}({sourceName:n,value:t,style:r.style,styleSpec:u,validateSpec:x}),M;case"geojson":if(M=xr({key:n,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,validateSpec:x,objectElementValidators:Es}),t.cluster)for(const A in t.clusterProperties){const[D,O]=t.clusterProperties[A],N=typeof D=="string"?[D,["accumulated"],["get",A]]:D;M.push(...ia({key:`${n}.${A}.map`,value:O,expressionContext:"cluster-map"})),M.push(...ia({key:`${n}.${A}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return M;case"video":return xr({key:n,value:t,valueSpec:u.source_video,style:f,validateSpec:x,styleSpec:u});case"image":return xr({key:n,value:t,valueSpec:u.source_image,style:f,validateSpec:x,styleSpec:u});case"canvas":return[new dt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return br({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Rl(r){const t=r.value,n=r.styleSpec,u=n.light,f=r.style;let x=[];const b=ii(t);if(t===void 0)return x;if(b!=="object")return x=x.concat([new dt("light",t,`object expected, ${b} found`)]),x;for(const M in t){const A=M.match(/^(.*)-transition$/);x=x.concat(A&&u[A[1]]&&u[A[1]].transition?r.validateSpec({key:M,value:t[M],valueSpec:n.transition,validateSpec:r.validateSpec,style:f,styleSpec:n}):u[M]?r.validateSpec({key:M,value:t[M],valueSpec:u[M],validateSpec:r.validateSpec,style:f,styleSpec:n}):[new dt(M,t[M],`unknown property "${M}"`)])}return x}function Ch(r){const t=r.value,n=r.styleSpec,u=n.sky,f=r.style,x=ii(t);if(t===void 0)return[];if(x!=="object")return[new dt("sky",t,`object expected, ${x} found`)];let b=[];for(const M in t)b=b.concat(u[M]?r.validateSpec({key:M,value:t[M],valueSpec:u[M],style:f,styleSpec:n}):[new dt(M,t[M],`unknown property "${M}"`)]);return b}function zd(r){const t=r.value,n=r.styleSpec,u=n.terrain,f=r.style;let x=[];const b=ii(t);if(t===void 0)return x;if(b!=="object")return x=x.concat([new dt("terrain",t,`object expected, ${b} found`)]),x;for(const M in t)x=x.concat(u[M]?r.validateSpec({key:M,value:t[M],valueSpec:u[M],validateSpec:r.validateSpec,style:f,styleSpec:n}):[new dt(M,t[M],`unknown property "${M}"`)]);return x}function kn(r){let t=[];const n=r.value,u=r.key;if(Array.isArray(n)){const f=[],x=[];for(const b in n)n[b].id&&f.includes(n[b].id)&&t.push(new dt(u,n,`all the sprites' ids must be unique, but ${n[b].id} is duplicated`)),f.push(n[b].id),n[b].url&&x.includes(n[b].url)&&t.push(new dt(u,n,`all the sprites' URLs must be unique, but ${n[b].url} is duplicated`)),x.push(n[b].url),t=t.concat(xr({key:`${u}[${b}]`,value:n[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return t}return Gi({key:u,value:n})}function ao(r){return t=r.value,t&&t.constructor===Object?[]:[new dt(r.key,r.value,`object expected, ${ii(r.value)} found`)];var t}const Xo={"*":()=>[],array:kc,boolean:function(r){const t=r.value,n=r.key,u=ii(t);return u!=="boolean"?[new dt(n,t,`boolean expected, ${u} found`)]:[]},number:Ms,color:da,constants:Cu,enum:br,filter:ka,function:Au,layer:ro,object:xr,source:kr,light:Rl,sky:Ch,terrain:zd,projection:function(r){const t=r.value,n=r.styleSpec,u=n.projection,f=r.style,x=ii(t);if(t===void 0)return[];if(x!=="object")return[new dt("projection",t,`object expected, ${x} found`)];let b=[];for(const M in t)b=b.concat(u[M]?r.validateSpec({key:M,value:t[M],valueSpec:u[M],style:f,styleSpec:n}):[new dt(M,t[M],`unknown property "${M}"`)]);return b},projectionDefinition:function(r){const t=r.key;let n=r.value;n=n instanceof String?n.valueOf():n;const u=ii(n);return u!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(n)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(n)?["array","string"].includes(u)?[]:[new dt(t,n,`projection expected, invalid type "${u}" found`)]:[new dt(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:Gi,formatted:function(r){return Gi(r).length===0?[]:ia(r)},resolvedImage:function(r){return Gi(r).length===0?[]:ia(r)},padding:function(r){const t=r.key,n=r.value;if(ii(n)==="array"){if(n.length<1||n.length>4)return[new dt(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const u={type:"number"};let f=[];for(let x=0;x<n.length;x++)f=f.concat(r.validateSpec({key:`${t}[${x}]`,value:n[x],validateSpec:r.validateSpec,valueSpec:u}));return f}return Ms({key:t,value:n,valueSpec:{}})},numberArray:function(r){const t=r.key,n=r.value;if(ii(n)==="array"){const u={type:"number"};if(n.length<1)return[new dt(t,n,"array length at least 1 expected, length 0 found")];let f=[];for(let x=0;x<n.length;x++)f=f.concat(r.validateSpec({key:`${t}[${x}]`,value:n[x],validateSpec:r.validateSpec,valueSpec:u}));return f}return Ms({key:t,value:n,valueSpec:{}})},colorArray:function(r){const t=r.key,n=r.value;if(ii(n)==="array"){if(n.length<1)return[new dt(t,n,"array length at least 1 expected, length 0 found")];let u=[];for(let f=0;f<n.length;f++)u=u.concat(da({key:`${t}[${f}]`,value:n[f]}));return u}return da({key:t,value:n})},variableAnchorOffsetCollection:function(r){const t=r.key,n=r.value,u=ii(n),f=r.styleSpec;if(u!=="array"||n.length<1||n.length%2!=0)return[new dt(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<n.length;b+=2)x=x.concat(br({key:`${t}[${b}]`,value:n[b],valueSpec:f.layout_symbol["text-anchor"]})),x=x.concat(kc({key:`${t}[${b+1}]`,value:n[b+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:f}));return x},sprite:kn,state:ao};function ls(r){const t=r.value,n=r.valueSpec,u=r.styleSpec;return r.validateSpec=ls,n.expression&&zc(nn(t))?Au(r):n.expression&&Ts(Zr(t))?ia(r):n.type&&Xo[n.type]?Xo[n.type](r):xr(mr({},r,{valueSpec:n.type?u[n.type]:n}))}function Iu(r){const t=r.value,n=r.key,u=Gi(r);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new dt(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new dt(n,t,'"glyphs" url must include a "{range}" token'))),u}function Vn(r,t=ze){let n=[];return n=n.concat(ls({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,validateSpec:ls,objectElementValidators:{glyphs:Iu,"*":()=>[]}})),r.constants&&(n=n.concat(Cu({key:"constants",value:r.constants}))),kl(n)}function wr(r){return function(t){return r({...t,validateSpec:ls})}}function kl(r){return[].concat(r).sort((t,n)=>t.line-n.line)}function fa(r){return function(...t){return kl(r.apply(this,t))}}Vn.source=fa(wr(kr)),Vn.sprite=fa(wr(kn)),Vn.glyphs=fa(wr(Iu)),Vn.light=fa(wr(Rl)),Vn.sky=fa(wr(Ch)),Vn.terrain=fa(wr(zd)),Vn.state=fa(wr(ao)),Vn.layer=fa(wr(ro)),Vn.filter=fa(wr(ka)),Vn.paintProperty=fa(wr(Dl)),Vn.layoutProperty=fa(wr(Lc));const Ll=Vn,Id=Ll.light,La=Ll.sky,Ah=Ll.paintProperty,Du=Ll.layoutProperty;function Ol(r,t){let n=!1;if(t&&t.length)for(const u of t)r.fire(new Qe(new Error(u.message))),n=!0;return n}class Cs{constructor(t,n,u){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(n=b[1])+2*(u=b[2]);for(let A=0;A<this.d*this.d;A++){const D=b[3+A],O=b[3+A+1];f.push(D===O?null:b.subarray(D,O))}const M=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],M),this.bboxes=b.subarray(M),this.insert=this._insertReadonly}else{this.d=n+2*u;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=t,this.padding=u,this.scale=n/t,this.uid=0;const x=u/n*t;this.min=-x,this.max=t+x}insert(t,n,u,f,x){this._forEachCell(n,u,f,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,n,u,f,x,b){this.cells[x].push(b)}query(t,n,u,f,x){const b=this.min,M=this.max;if(t<=b&&n<=b&&M<=u&&M<=f&&!x)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(t,n,u,f,this._queryCell,A,{},x),A}}_queryCell(t,n,u,f,x,b,M,A){const D=this.cells[x];if(D!==null){const O=this.keys,N=this.bboxes;for(let U=0;U<D.length;U++){const q=D[U];if(M[q]===void 0){const H=4*q;(A?A(N[H+0],N[H+1],N[H+2],N[H+3]):t<=N[H+2]&&n<=N[H+3]&&u>=N[H+0]&&f>=N[H+1])?(M[q]=!0,b.push(O[q])):M[q]=!1}}}}_forEachCell(t,n,u,f,x,b,M,A){const D=this._convertToCellCoord(t),O=this._convertToCellCoord(n),N=this._convertToCellCoord(u),U=this._convertToCellCoord(f);for(let q=D;q<=N;q++)for(let H=O;H<=U;H++){const Q=this.d*H+q;if((!A||A(this._convertFromCellCoord(q),this._convertFromCellCoord(H),this._convertFromCellCoord(q+1),this._convertFromCellCoord(H+1)))&&x.call(this,t,n,u,f,Q,b,M,A))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,n=3+this.cells.length+1+1;let u=0;for(let b=0;b<this.cells.length;b++)u+=this.cells[b].length;const f=new Int32Array(n+u+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let x=n;for(let b=0;b<t.length;b++){const M=t[b];f[3+b]=x,f.set(M,x),x+=M.length}return f[3+t.length]=x,f.set(this.keys,x),x+=this.keys.length,f[3+t.length+1]=x,f.set(this.bboxes,x),x+=this.bboxes.length,f.buffer}static serialize(t,n){const u=t.toArrayBuffer();return n&&n.push(u),{buffer:u}}static deserialize(t){return new Cs(t.buffer)}}const pa={};function wt(r,t,n={}){if(pa[r])throw new Error(`${r} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),pa[r]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}wt("Object",Object),wt("Set",Set),wt("TransferableGridIndex",Cs),wt("Color",ni),wt("Error",Error),wt("AJAXError",de),wt("ResolvedImage",rr),wt("StylePropertyFunction",vr),wt("StyleExpression",Ic,{omit:["_evaluator"]}),wt("ZoomDependentExpression",zl),wt("ZoomConstantExpression",to),wt("CompoundExpression",Wr,{omit:["_evaluate"]});for(const r in Zo)Zo[r]._classRegistryKey||wt(`Expression_${r}`,Zo[r]);function Oc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Bc(r){return r.$name||r.constructor._classRegistryKey}function Bl(r){return!function(t){if(t===null||typeof t!="object")return!1;const n=Bc(t);return!(!n||n==="Object")}(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||Oc(r)||Wa(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function Yo(r,t){if(Bl(r))return(Oc(r)||Wa(r))&&t&&t.push(r),ArrayBuffer.isView(r)&&t&&t.push(r.buffer),r instanceof ImageData&&t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const x=[];for(const b of r)x.push(Yo(b,t));return x}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);const n=Bc(r);if(!n)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!pa[n])throw new Error(`${n} is not registered.`);const{klass:u}=pa[n],f=u.serialize?u.serialize(r,t):{};if(u.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in r){if(!r.hasOwnProperty(x)||pa[n].omit.indexOf(x)>=0)continue;const b=r[x];f[x]=pa[n].shallow.indexOf(x)>=0?b:Yo(b,t)}r instanceof Error&&(f.message=r.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(f.$name=n),f}function Oa(r){if(Bl(r))return r;if(Array.isArray(r))return r.map(Oa);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);const t=Bc(r)||"Object";if(!pa[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=pa[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(r);const u=Object.create(n.prototype);for(const f of Object.keys(r)){if(f==="$name")continue;const x=r[f];u[f]=pa[t].shallow.indexOf(f)>=0?x:Oa(x)}return u}class jc{constructor(){this.first=!0}update(t,n){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=n),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const ci={"Latin-1 Supplement":r=>r>=128&&r<=255,"Hangul Jamo":r=>r>=4352&&r<=4607,Khmer:r=>r>=6016&&r<=6143,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Kanbun:r=>r>=12688&&r<=12703,"CJK Strokes":r=>r>=12736&&r<=12783,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Hangul Syllables":r=>r>=44032&&r<=55215,"Private Use Area":r=>r>=57344&&r<=63743,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Ba(r){for(const t of r)if(Nc(t.charCodeAt(0)))return!0;return!1}function Ph(r){for(const t of r)if(!As(t.charCodeAt(0)))return!1;return!0}function jl(r){const t=r.map(n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}}).filter(n=>n);return new RegExp(t.join("|"),"u")}const so=jl(["Arab","Dupl","Mong","Ougr","Syrc"]);function As(r){return!so.test(String.fromCodePoint(r))}const Wo=jl(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Nc(r){return!(r!==746&&r!==747&&(r<4352||!(ci["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ci["CJK Compatibility"](r)||ci["CJK Strokes"](r)||!(!ci["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ci["Enclosed CJK Letters and Months"](r)||ci["Ideographic Description Characters"](r)||ci.Kanbun(r)||ci.Katakana(r)&&r!==12540||!(!ci["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ci["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ci["Vertical Forms"](r)||ci["Yijing Hexagram Symbols"](r)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(r))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(r))||Wo.test(String.fromCodePoint(r)))))}function Ru(r){return!(Nc(r)||function(t){return!!(ci["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||ci["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||ci["Letterlike Symbols"](t)||ci["Number Forms"](t)||ci["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||ci["Control Pictures"](t)&&t!==9251||ci["Optical Character Recognition"](t)||ci["Enclosed Alphanumerics"](t)||ci["Geometric Shapes"](t)||ci["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ci["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ci["CJK Symbols and Punctuation"](t)||ci.Katakana(t)||ci["Private Use Area"](t)||ci["CJK Compatibility Forms"](t)||ci["Small Form Variants"](t)||ci["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}const Nl=jl(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ko(r){return Nl.test(String.fromCodePoint(r))}function zh(r,t){return!(!t&&Ko(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ci.Khmer(r))}function Ih(r){for(const t of r)if(Ko(t.charCodeAt(0)))return!0;return!1}const Tr=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){if(Tr.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(r,t){return c(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(r.pluginStatus!=="loading")return this.setState(r),r;const n=r.pluginURL,u=new Promise(x=>{this.loadScriptResolve=x});t(n);const f=new Promise(x=>setTimeout(()=>x(),this.TIMEOUT));if(yield Promise.race([u,f]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:n};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)})}};class ji{constructor(t,n){this.zoom=t,n?(this.now=n.now||0,this.fadeDuration=n.fadeDuration||0,this.zoomHistory=n.zoomHistory||new jc,this.transition=n.transition||{},this.globalState=n.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jc,this.transition={},this.globalState={})}isSupportedScript(t){return function(n,u){for(const f of n)if(!zh(f.charCodeAt(0),u))return!1;return!0}(t,Tr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,n=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*n}}}class Qo{constructor(t,n){this.property=t,this.value=n,this.expression=function(u,f){if(zc(u))return new vr(u,f);if(Ts(u)){const x=Jr(u,f);if(x.result==="error")throw new Error(x.value.map(b=>`${b.key}: ${b.message}`).join(", "));return x.value}{let x=u;return f.type==="color"&&typeof u=="string"?x=ni.parse(u):f.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?f.type!=="numberArray"||typeof u!="number"&&!Array.isArray(u)?f.type!=="colorArray"||typeof u!="string"&&!Array.isArray(u)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(u)?x=nr.parse(u):f.type==="projectionDefinition"&&typeof u=="string"&&(x=hn.parse(u)):x=Cn.parse(u):x=ir.parse(u):x=Fn.parse(u),{globalStateRefs:new Set,kind:"constant",evaluate:()=>x}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,n,u){return this.property.possiblyEvaluate(this,t,n,u)}}class Fc{constructor(t){this.property=t,this.value=new Qo(t,void 0)}transitioned(t,n){return new cs(this.property,this.value,n,gi({},t.transition,this.transition),t.now)}untransitioned(){return new cs(this.property,this.value,null,{},0)}}class ku{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return zr(this._values[t].value.value)}setValue(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Fc(this._values[t].property)),this._values[t].value=new Qo(this._values[t].property,n===null?void 0:zr(n))}getTransition(t){return zr(this._values[t].transition)}setTransition(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Fc(this._values[t].property)),this._values[t].transition=zr(n)||void 0}serialize(){const t={};for(const n of Object.keys(this._values)){const u=this.getValue(n);u!==void 0&&(t[n]=u);const f=this.getTransition(n);f!==void 0&&(t[`${n}-transition`]=f)}return t}transitioned(t,n){const u=new li(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(t,n._values[f]);return u}untransitioned(){const t=new li(this._properties);for(const n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class cs{constructor(t,n,u,f,x){this.property=t,this.value=n,this.begin=x+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(t,n,u){const f=t.now||0,x=this.value.possiblyEvaluate(t,n,u),b=this.prior;if(b){if(f>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(f<this.begin)return b.possiblyEvaluate(t,n,u);{const M=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,n,u),x,St(M))}}return x}}class li{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,u){const f=new Jo(this._properties);for(const x of Object.keys(this._values))f._values[x]=this._values[x].possiblyEvaluate(t,n,u);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Di{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return zr(this._values[t].value)}setValue(t,n){this._values[t]=new Qo(this._values[t].property,n===null?void 0:zr(n))}serialize(){const t={};for(const n of Object.keys(this._values)){const u=this.getValue(n);u!==void 0&&(t[n]=u)}return t}possiblyEvaluate(t,n,u){const f=new Jo(this._properties);for(const x of Object.keys(this._values))f._values[x]=this._values[x].possiblyEvaluate(t,n,u);return f}}class Ri{constructor(t,n,u){this.property=t,this.value=n,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,u,f){return this.property.evaluate(this.value,this.parameters,t,n,u,f)}}class Jo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Ct{constructor(t){this.specification=t}possiblyEvaluate(t,n){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(n)}interpolate(t,n,u){const f=as[this.specification.type];return f?f(t,n,u):t}}class kt{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,u,f){return new Ri(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},u,f)}:t.expression,n)}interpolate(t,n,u){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new Ri(this,{kind:"constant",value:void 0},t.parameters);const f=as[this.specification.type];if(f){const x=f(t.value.value,n.value.value,u);return new Ri(this,{kind:"constant",value:x},t.parameters)}return t}evaluate(t,n,u,f,x,b){return t.kind==="constant"?t.value:t.evaluate(n,u,f,x,b)}}class el extends kt{possiblyEvaluate(t,n,u,f){if(t.value===void 0)return new Ri(this,{kind:"constant",value:void 0},n);if(t.expression.kind==="constant"){const x=t.expression.evaluate(n,null,{},u,f),b=t.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,M=this._calculate(b,b,b,n);return new Ri(this,{kind:"constant",value:M},n)}if(t.expression.kind==="camera"){const x=this._calculate(t.expression.evaluate({zoom:n.zoom-1}),t.expression.evaluate({zoom:n.zoom}),t.expression.evaluate({zoom:n.zoom+1}),n);return new Ri(this,{kind:"constant",value:x},n)}return new Ri(this,t.expression,n)}evaluate(t,n,u,f,x,b){if(t.kind==="source"){const M=t.evaluate(n,u,f,x,b);return this._calculate(M,M,M,n)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(n.zoom)-1},u,f),t.evaluate({zoom:Math.floor(n.zoom)},u,f),t.evaluate({zoom:Math.floor(n.zoom)+1},u,f),n):t.value}_calculate(t,n,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:u,to:n}}interpolate(t){return t}}class ma{constructor(t){this.specification=t}possiblyEvaluate(t,n,u,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const x=t.expression.evaluate(n,null,{},u,f);return this._calculate(x,x,x,n)}return this._calculate(t.expression.evaluate(new ji(Math.floor(n.zoom-1),n)),t.expression.evaluate(new ji(Math.floor(n.zoom),n)),t.expression.evaluate(new ji(Math.floor(n.zoom+1),n)),n)}}_calculate(t,n,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:u,to:n}}interpolate(t){return t}}class Ps{constructor(t){this.specification=t}possiblyEvaluate(t,n,u,f){return!!t.expression.evaluate(n,null,{},u,f)}interpolate(){return!1}}class Lr{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in t){const u=t[n];u.specification.overridable&&this.overridableProperties.push(n);const f=this.defaultPropertyValues[n]=new Qo(u,void 0),x=this.defaultTransitionablePropertyValues[n]=new Fc(u);this.defaultTransitioningPropertyValues[n]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=f.possiblyEvaluate({})}}}wt("DataDrivenProperty",kt),wt("DataConstantProperty",Ct),wt("CrossFadedDataDrivenProperty",el),wt("CrossFadedProperty",ma),wt("ColorRampProperty",Ps);const gn="-transition";class qr extends Pt{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=io(t.filter)),n.layout&&(this._unevaluatedLayout=new Di(n.layout)),n.paint)){this._transitionablePaint=new ku(n.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jo(n.paint)}}setFilter(t){this.filter=t,this._featureFilter=io(t)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const n in this._unevaluatedLayout._values){const u=this._unevaluatedLayout._values[n];for(const f of u.getGlobalStateRefs())t.add(f)}for(const n of this._featureFilter.getGlobalStateRefs())t.add(n);return t}setLayoutProperty(t,n,u={}){n!=null&&this._validate(Du,`layers.${this.id}.layout.${t}`,t,n,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return t.endsWith(gn)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,u={}){if(n!=null&&this._validate(Ah,`layers.${this.id}.paint.${t}`,t,n,u))return!1;if(t.endsWith(gn))return this._transitionablePaint.setTransition(t.slice(0,-11),n||void 0),!1;{const f=this._transitionablePaint._values[t],x=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),M=f.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);const A=this._transitionablePaint._values[t].value;return A.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(t,M,A)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,n,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ps(t,(n,u)=>!(n===void 0||u==="layout"&&!Object.keys(n).length||u==="paint"&&!Object.keys(n).length))}_validate(t,n,u,f,x={}){return(!x||x.validate!==!1)&&Ol(this,t.call(Ll,{key:n,layerType:this.type,objectKey:u,value:f,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const n=this.paint.get(t);if(n instanceof Ri&&Kr(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const Dh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Fl{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ei{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function yn(r,t=1){let n=0,u=0;return{members:r.map(f=>{const x=Dh[f.type].BYTES_PER_ELEMENT,b=n=Vl(n,Math.max(t,x)),M=f.components||1;return u=Math.max(u,x),n+=x*M,{name:f.name,type:f.type,components:M,offset:b}}),size:Vl(n,Math.max(u,t)),alignment:t}}function Vl(r,t){return Math.ceil(r/t)*t}class oo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){const u=this.length;return this.resize(u+1),this.emplace(u,t,n)}emplace(t,n,u){const f=2*t;return this.int16[f+0]=n,this.int16[f+1]=u,t}}oo.prototype.bytesPerElement=4,wt("StructArrayLayout2i4",oo);class lo extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,u)}emplace(t,n,u,f){const x=3*t;return this.int16[x+0]=n,this.int16[x+1]=u,this.int16[x+2]=f,t}}lo.prototype.bytesPerElement=6,wt("StructArrayLayout3i6",lo);class Sr extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,u,f)}emplace(t,n,u,f,x){const b=4*t;return this.int16[b+0]=n,this.int16[b+1]=u,this.int16[b+2]=f,this.int16[b+3]=x,t}}Sr.prototype.bytesPerElement=8,wt("StructArrayLayout4i8",Sr);class Wi extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,t,n,u,f,x,b)}emplace(t,n,u,f,x,b,M){const A=6*t;return this.int16[A+0]=n,this.int16[A+1]=u,this.int16[A+2]=f,this.int16[A+3]=x,this.int16[A+4]=b,this.int16[A+5]=M,t}}Wi.prototype.bytesPerElement=12,wt("StructArrayLayout2i4i12",Wi);class zs extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,t,n,u,f,x,b)}emplace(t,n,u,f,x,b,M){const A=4*t,D=8*t;return this.int16[A+0]=n,this.int16[A+1]=u,this.uint8[D+4]=f,this.uint8[D+5]=x,this.uint8[D+6]=b,this.uint8[D+7]=M,t}}zs.prototype.bytesPerElement=8,wt("StructArrayLayout2i4ub8",zs);class Is extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){const u=this.length;return this.resize(u+1),this.emplace(u,t,n)}emplace(t,n,u){const f=2*t;return this.float32[f+0]=n,this.float32[f+1]=u,t}}Is.prototype.bytesPerElement=8,wt("StructArrayLayout2f8",Is);class tl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b,M,A,D,O){const N=this.length;return this.resize(N+1),this.emplace(N,t,n,u,f,x,b,M,A,D,O)}emplace(t,n,u,f,x,b,M,A,D,O,N){const U=10*t;return this.uint16[U+0]=n,this.uint16[U+1]=u,this.uint16[U+2]=f,this.uint16[U+3]=x,this.uint16[U+4]=b,this.uint16[U+5]=M,this.uint16[U+6]=A,this.uint16[U+7]=D,this.uint16[U+8]=O,this.uint16[U+9]=N,t}}tl.prototype.bytesPerElement=20,wt("StructArrayLayout10ui20",tl);class Ds extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b,M,A,D,O,N,U){const q=this.length;return this.resize(q+1),this.emplace(q,t,n,u,f,x,b,M,A,D,O,N,U)}emplace(t,n,u,f,x,b,M,A,D,O,N,U,q){const H=12*t;return this.int16[H+0]=n,this.int16[H+1]=u,this.int16[H+2]=f,this.int16[H+3]=x,this.uint16[H+4]=b,this.uint16[H+5]=M,this.uint16[H+6]=A,this.uint16[H+7]=D,this.int16[H+8]=O,this.int16[H+9]=N,this.int16[H+10]=U,this.int16[H+11]=q,t}}Ds.prototype.bytesPerElement=24,wt("StructArrayLayout4i4ui4i24",Ds);class ja extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,u)}emplace(t,n,u,f){const x=3*t;return this.float32[x+0]=n,this.float32[x+1]=u,this.float32[x+2]=f,t}}ja.prototype.bytesPerElement=12,wt("StructArrayLayout3f12",ja);class Ul extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}Ul.prototype.bytesPerElement=4,wt("StructArrayLayout1ul4",Ul);class Gl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b,M,A,D){const O=this.length;return this.resize(O+1),this.emplace(O,t,n,u,f,x,b,M,A,D)}emplace(t,n,u,f,x,b,M,A,D,O){const N=10*t,U=5*t;return this.int16[N+0]=n,this.int16[N+1]=u,this.int16[N+2]=f,this.int16[N+3]=x,this.int16[N+4]=b,this.int16[N+5]=M,this.uint32[U+3]=A,this.uint16[N+8]=D,this.uint16[N+9]=O,t}}Gl.prototype.bytesPerElement=20,wt("StructArrayLayout6i1ul2ui20",Gl);class Vc extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,t,n,u,f,x,b)}emplace(t,n,u,f,x,b,M){const A=6*t;return this.int16[A+0]=n,this.int16[A+1]=u,this.int16[A+2]=f,this.int16[A+3]=x,this.int16[A+4]=b,this.int16[A+5]=M,t}}Vc.prototype.bytesPerElement=12,wt("StructArrayLayout2i2i2i12",Vc);class y extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,n,u,f,x)}emplace(t,n,u,f,x,b){const M=4*t,A=8*t;return this.float32[M+0]=n,this.float32[M+1]=u,this.float32[M+2]=f,this.int16[A+6]=x,this.int16[A+7]=b,t}}y.prototype.bytesPerElement=16,wt("StructArrayLayout2f1f2i16",y);class e extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,t,n,u,f,x,b)}emplace(t,n,u,f,x,b,M){const A=16*t,D=4*t,O=8*t;return this.uint8[A+0]=n,this.uint8[A+1]=u,this.float32[D+1]=f,this.float32[D+2]=x,this.int16[O+6]=b,this.int16[O+7]=M,t}}e.prototype.bytesPerElement=16,wt("StructArrayLayout2ub2f2i16",e);class a extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,u)}emplace(t,n,u,f){const x=3*t;return this.uint16[x+0]=n,this.uint16[x+1]=u,this.uint16[x+2]=f,t}}a.prototype.bytesPerElement=6,wt("StructArrayLayout3ui6",a);class h extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe){const Me=this.length;return this.resize(Me+1),this.emplace(Me,t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe)}emplace(t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe,Me){const pe=24*t,ve=12*t,Be=48*t;return this.int16[pe+0]=n,this.int16[pe+1]=u,this.uint16[pe+2]=f,this.uint16[pe+3]=x,this.uint32[ve+2]=b,this.uint32[ve+3]=M,this.uint32[ve+4]=A,this.uint16[pe+10]=D,this.uint16[pe+11]=O,this.uint16[pe+12]=N,this.float32[ve+7]=U,this.float32[ve+8]=q,this.uint8[Be+36]=H,this.uint8[Be+37]=Q,this.uint8[Be+38]=ie,this.uint32[ve+10]=oe,this.int16[pe+22]=Me,t}}h.prototype.bytesPerElement=48,wt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",h);class p extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe,Me,pe,ve,Be,$e,nt,vt,pt,yt,It,xt){const _t=this.length;return this.resize(_t+1),this.emplace(_t,t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe,Me,pe,ve,Be,$e,nt,vt,pt,yt,It,xt)}emplace(t,n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe,Me,pe,ve,Be,$e,nt,vt,pt,yt,It,xt,_t){const We=32*t,jt=16*t;return this.int16[We+0]=n,this.int16[We+1]=u,this.int16[We+2]=f,this.int16[We+3]=x,this.int16[We+4]=b,this.int16[We+5]=M,this.int16[We+6]=A,this.int16[We+7]=D,this.uint16[We+8]=O,this.uint16[We+9]=N,this.uint16[We+10]=U,this.uint16[We+11]=q,this.uint16[We+12]=H,this.uint16[We+13]=Q,this.uint16[We+14]=ie,this.uint16[We+15]=oe,this.uint16[We+16]=Me,this.uint16[We+17]=pe,this.uint16[We+18]=ve,this.uint16[We+19]=Be,this.uint16[We+20]=$e,this.uint16[We+21]=nt,this.uint16[We+22]=vt,this.uint32[jt+12]=pt,this.float32[jt+13]=yt,this.float32[jt+14]=It,this.uint16[We+30]=xt,this.uint16[We+31]=_t,t}}p.prototype.bytesPerElement=64,wt("StructArrayLayout8i15ui1ul2f2ui64",p);class _ extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}_.prototype.bytesPerElement=4,wt("StructArrayLayout1f4",_);class T extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,u)}emplace(t,n,u,f){const x=3*t;return this.uint16[6*t+0]=n,this.float32[x+1]=u,this.float32[x+2]=f,t}}T.prototype.bytesPerElement=12,wt("StructArrayLayout1ui2f12",T);class P extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,u)}emplace(t,n,u,f){const x=4*t;return this.uint32[2*t+0]=n,this.uint16[x+2]=u,this.uint16[x+3]=f,t}}P.prototype.bytesPerElement=8,wt("StructArrayLayout1ul2ui8",P);class z extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){const u=this.length;return this.resize(u+1),this.emplace(u,t,n)}emplace(t,n,u){const f=2*t;return this.uint16[f+0]=n,this.uint16[f+1]=u,t}}z.prototype.bytesPerElement=4,wt("StructArrayLayout2ui4",z);class L extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}L.prototype.bytesPerElement=2,wt("StructArrayLayout1ui2",L);class B extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,u,f){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,u,f)}emplace(t,n,u,f,x){const b=4*t;return this.float32[b+0]=n,this.float32[b+1]=u,this.float32[b+2]=f,this.float32[b+3]=x,t}}B.prototype.bytesPerElement=16,wt("StructArrayLayout4f16",B);class V extends Fl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}V.prototype.size=20;class F extends Gl{get(t){return new V(this,t)}}wt("CollisionBoxArray",F);class G extends Fl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}G.prototype.size=48;class W extends h{get(t){return new G(this,t)}}wt("PlacedSymbolArray",W);class re extends Fl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}re.prototype.size=64;class ne extends p{get(t){return new re(this,t)}}wt("SymbolInstanceArray",ne);class ae extends _{getoffsetX(t){return this.float32[1*t+0]}}wt("GlyphOffsetArray",ae);class le extends lo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}wt("SymbolLineVertexArray",le);class fe extends Fl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}fe.prototype.size=12;class ue extends T{get(t){return new fe(this,t)}}wt("TextAnchorOffsetArray",ue);class me extends Fl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}me.prototype.size=8;class be extends P{get(t){return new me(this,t)}}wt("FeatureIndexArray",be);class he extends oo{}class Ee extends oo{}class Ze extends oo{}class Le extends Wi{}class Oe extends zs{}class Ue extends Is{}class ft extends tl{}class gt extends Ds{}class tt extends ja{}class zt extends Ul{}class ei extends Vc{}class _i extends e{}class Ci extends a{}class Si extends z{}const rn=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ki}=rn;class Wt{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,n,u,f){const x=this.segments[this.segments.length-1];return t>Wt.MAX_VERTEX_ARRAY_LENGTH&&ln(`Max vertices per segment is ${Wt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Wt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+t>Wt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==f?this.createNewSegment(n,u,f):x}createNewSegment(t,n,u){const f={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return u!==void 0&&(f.sortKey=u),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(t,n,u){return this.prepareSegment(0,t,n,u)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,u,f){return new Wt([{vertexOffset:t,primitiveOffset:n,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}function Ai(r,t){return 256*(r=Nt(Math.floor(r),0,255))+Nt(Math.floor(t),0,255)}Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wt("SegmentVector",Wt);const _n=yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ln,Un,Or,Na={exports:{}},Rs={exports:{}},ga={exports:{}},co=function(){if(Or)return Na.exports;Or=1;var r=(Ln||(Ln=1,Rs.exports=function(n,u){var f,x,b,M,A,D,O,N;for(x=n.length-(f=3&n.length),b=u,A=3432918353,D=461845907,N=0;N<x;)O=255&n.charCodeAt(N)|(255&n.charCodeAt(++N))<<8|(255&n.charCodeAt(++N))<<16|(255&n.charCodeAt(++N))<<24,++N,b=27492+(65535&(M=5*(65535&(b=(b^=O=(65535&(O=(O=(65535&O)*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(O=0,f){case 3:O^=(255&n.charCodeAt(N+2))<<16;case 2:O^=(255&n.charCodeAt(N+1))<<8;case 1:b^=O=(65535&(O=(O=(65535&(O^=255&n.charCodeAt(N)))*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295}return b^=n.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Rs.exports),t=(Un||(Un=1,ga.exports=function(n,u){for(var f,x=n.length,b=u^x,M=0;x>=4;)f=1540483477*(65535&(f=255&n.charCodeAt(M)|(255&n.charCodeAt(++M))<<8|(255&n.charCodeAt(++M))<<16|(255&n.charCodeAt(++M))<<24))+((1540483477*(f>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),x-=4,++M;switch(x){case 3:b^=(255&n.charCodeAt(M+2))<<16;case 2:b^=(255&n.charCodeAt(M+1))<<8;case 1:b=1540483477*(65535&(b^=255&n.charCodeAt(M)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),ga.exports);return Na.exports=r,Na.exports.murmur3=r,Na.exports.murmur2=t,Na.exports}(),ks=k(co);class uo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,u,f){this.ids.push(ho(t)),this.positions.push(n,u,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=ho(t);let u=0,f=this.ids.length-1;for(;u<f;){const b=u+f>>1;this.ids[b]>=n?f=b:u=b+1}const x=[];for(;this.ids[u]===n;)x.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return x}static serialize(t,n){const u=new Float64Array(t.ids),f=new Uint32Array(t.positions);return sr(u,f,0,u.length-1),n&&n.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(t){const n=new uo;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function ho(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ks(String(r))}function sr(r,t,n,u){for(;n<u;){const f=r[n+u>>1];let x=n-1,b=u+1;for(;;){do x++;while(r[x]<f);do b--;while(r[b]>f);if(x>=b)break;ya(r,x,b),ya(t,3*x,3*b),ya(t,3*x+1,3*b+1),ya(t,3*x+2,3*b+2)}b-n<u-b?(sr(r,t,n,b),n=b+1):(sr(r,t,b+1,u),u=b)}}function ya(r,t,n){const u=r[t];r[t]=r[n],r[n]=u}wt("FeaturePositionMap",uo);class Mr{constructor(t,n){this.gl=t.gl,this.location=n}}class fo extends Mr{constructor(t,n){super(t,n),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Qi extends Mr{constructor(t,n){super(t,n),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class dn extends Mr{constructor(t,n){super(t,n),this.current=ni.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Br=new Float32Array(16);function an(r){return[Ai(255*r.r,255*r.g),Ai(255*r.b,255*r.a)]}class po{constructor(t,n,u){this.value=t,this.uniformNames=n.map(f=>`u_${f}`),this.type=u}setUniform(t,n,u){t.set(u.constantOr(this.value))}getBinding(t,n,u){return this.type==="color"?new dn(t,n):new fo(t,n)}}class il{constructor(t,n){this.uniformNames=n.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=t.tlbr}setUniform(t,n,u,f){const x=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&t.set(x)}getBinding(t,n,u){return u.substr(0,9)==="u_pattern"?new Qi(t,n):new fo(t,n)}}class us{constructor(t,n,u,f){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=n.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,n,u,f,x){const b=this.paintVertexArray.length,M=this.expression.evaluate(new ji(0),n,{},f,[],x);this.paintVertexArray.resize(t),this._setPaintValue(b,t,M)}updatePaintArray(t,n,u,f){const x=this.expression.evaluate({zoom:0},u,f);this._setPaintValue(t,n,x)}_setPaintValue(t,n,u){if(this.type==="color"){const f=an(u);for(let x=t;x<n;x++)this.paintVertexArray.emplace(x,f[0],f[1])}else{for(let f=t;f<n;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Er{constructor(t,n,u,f,x,b){this.expression=t,this.uniformNames=n.map(M=>`u_${M}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=n.map(M=>({name:`a_${M}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,n,u,f,x){const b=this.expression.evaluate(new ji(this.zoom),n,{},f,[],x),M=this.expression.evaluate(new ji(this.zoom+1),n,{},f,[],x),A=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(A,t,b,M)}updatePaintArray(t,n,u,f){const x=this.expression.evaluate({zoom:this.zoom},u,f),b=this.expression.evaluate({zoom:this.zoom+1},u,f);this._setPaintValue(t,n,x,b)}_setPaintValue(t,n,u,f){if(this.type==="color"){const x=an(u),b=an(f);for(let M=t;M<n;M++)this.paintVertexArray.emplace(M,x[0],x[1],b[0],b[1])}else{for(let x=t;x<n;x++)this.paintVertexArray.emplace(x,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n){const u=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,f=Nt(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,n,u){return new fo(t,n)}}class Ls{constructor(t,n,u,f,x,b){this.expression=t,this.type=n,this.useIntegerZoom=u,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(t,n,u){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,n.patterns&&n.patterns[this.layerId],u)}updatePaintArray(t,n,u,f,x){this._setPaintValues(t,n,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(t,n,u,f){if(!f||!u)return;const{min:x,mid:b,max:M}=u,A=f[x],D=f[b],O=f[M];if(A&&D&&O)for(let N=t;N<n;N++)this.zoomInPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],D.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],D.pixelRatio,O.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,_n.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,_n.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class na{constructor(t,n,u){this.binders={},this._buffers=[];const f=[];for(const x in t.paint._values){if(!u(x))continue;const b=t.paint.get(x);if(!(b instanceof Ri&&Kr(b.property.specification)))continue;const M=Os(x,t.type),A=b.value,D=b.property.specification.type,O=b.property.useIntegerZoom,N=b.property.specification["property-type"],U=N==="cross-faded"||N==="cross-faded-data-driven";if(A.kind==="constant")this.binders[x]=U?new il(A.value,M):new po(A.value,M,D),f.push(`/u_${x}`);else if(A.kind==="source"||U){const q=Lu(x,D,"source");this.binders[x]=U?new Ls(A,D,O,n,q,t.id):new us(A,M,D,q),f.push(`/a_${x}`)}else{const q=Lu(x,D,"composite");this.binders[x]=new Er(A,M,D,O,n,q),f.push(`/z_${x}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const n=this.binders[t];return n instanceof us||n instanceof Er?n.maxValue:0}populatePaintArrays(t,n,u,f,x){for(const b in this.binders){const M=this.binders[b];(M instanceof us||M instanceof Er||M instanceof Ls)&&M.populatePaintArray(t,n,u,f,x)}}setConstantPatternPositions(t,n){for(const u in this.binders){const f=this.binders[u];f instanceof il&&f.setConstantPatternPositions(t,n)}}updatePaintArrays(t,n,u,f,x){let b=!1;for(const M in t){const A=n.getPositions(M);for(const D of A){const O=u.feature(D.index);for(const N in this.binders){const U=this.binders[N];if((U instanceof us||U instanceof Er||U instanceof Ls)&&U.expression.isStateDependent===!0){const q=f.paint.get(N);U.expression=q.value,U.updatePaintArray(D.start,D.end,O,t[M],x),b=!0}}}}return b}defines(){const t=[];for(const n in this.binders){const u=this.binders[n];(u instanceof po||u instanceof il)&&t.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const n in this.binders){const u=this.binders[n];if(u instanceof us||u instanceof Er)for(let f=0;f<u.paintVertexAttributes.length;f++)t.push(u.paintVertexAttributes[f].name);else if(u instanceof Ls)for(let f=0;f<_n.members.length;f++)t.push(_n.members[f].name)}return t}getBinderUniforms(){const t=[];for(const n in this.binders){const u=this.binders[n];if(u instanceof po||u instanceof il||u instanceof Er)for(const f of u.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,n){const u=[];for(const f in this.binders){const x=this.binders[f];if(x instanceof po||x instanceof il||x instanceof Er){for(const b of x.uniformNames)if(n[b]){const M=x.getBinding(t,n[b],b);u.push({name:b,property:f,binding:M})}}}return u}setUniforms(t,n,u,f){for(const{name:x,property:b,binding:M}of n)this.binders[b].setUniform(M,f,u.get(b),x)}updatePaintBuffers(t){this._buffers=[];for(const n in this.binders){const u=this.binders[n];if(t&&u instanceof Ls){const f=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(u instanceof us||u instanceof Er)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const n in this.binders){const u=this.binders[n];(u instanceof us||u instanceof Er||u instanceof Ls)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const n=this.binders[t];(n instanceof us||n instanceof Er||n instanceof Ls)&&n.destroy()}}}class vn{constructor(t,n,u=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new na(f,n,u);this.needsUpload=!1,this._featureMap=new uo,this._bufferOffset=0}populatePaintArrays(t,n,u,f,x,b){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(t,n,f,x,b);n.id!==void 0&&this._featureMap.add(n.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,u,f){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(t,this._featureMap,n,x,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Os(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function Lu(r,t,n){const u={color:{source:Is,composite:B},number:{source:_,composite:Is}},f=function(x){return{"line-pattern":{source:ft,composite:ft},"fill-pattern":{source:ft,composite:ft},"fill-extrusion-pattern":{source:ft,composite:ft}}[x]}(r);return f&&f[n]||u[t][n]}wt("ConstantBinder",po),wt("CrossFadedConstantBinder",il),wt("SourceExpressionBinder",us),wt("CrossFadedCompositeBinder",Ls),wt("CompositeExpressionBinder",Er),wt("ProgramConfiguration",na,{omit:["_buffers"]}),wt("ProgramConfigurationSet",vn);const Fa=Math.pow(2,14)-1,_a=-Fa-1;function Zi(r){const t=mt/r.extent,n=r.loadGeometry();for(let u=0;u<n.length;u++){const f=n[u];for(let x=0;x<f.length;x++){const b=f[x],M=Math.round(b.x*t),A=Math.round(b.y*t);b.x=Nt(M,_a,Fa),b.y=Nt(A,_a,Fa),(M<b.x||M>b.x+1||A<b.y||A>b.y+1)&&ln("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function va(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Zi(r):[]}}const Dd=-32768;function Df(r,t,n,u,f){r.emplaceBack(Dd+8*t+u,Dd+8*n+f)}class Rd{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ee,this.indexArray=new Ci,this.segments=new Wt,this.programConfigurations=new vn(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,u){const f=this.layers[0],x=[];let b=null,M=!1,A=f.type==="heatmap";if(f.type==="circle"){const O=f;b=O.layout.get("circle-sort-key"),M=!b.isConstant(),A=A||O.paint.get("circle-pitch-alignment")==="map"}const D=A?n.subdivisionGranularity.circle:1;for(const{feature:O,id:N,index:U,sourceLayerIndex:q}of t){const H=this.layers[0]._featureFilter.needGeometry,Q=va(O,H);if(!this.layers[0]._featureFilter.filter(new ji(this.zoom,{globalState:this.globalState}),Q,u))continue;const ie=M?b.evaluate(Q,{},u):void 0,oe={id:N,properties:O.properties,type:O.type,sourceLayerIndex:q,index:U,geometry:H?Q.geometry:Zi(O),patterns:{},sortKey:ie};x.push(oe)}M&&x.sort((O,N)=>O.sortKey-N.sortKey);for(const O of x){const{geometry:N,index:U,sourceLayerIndex:q}=O,H=t[U].feature;this.addFeature(O,N,U,u,D),n.featureIndex.insert(H,N,U,q,this.index)}}update(t,n,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ki),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,u,f,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const M=b.length;for(const A of n)for(const D of A){const O=D.x,N=D.y;if(O<0||O>=mt||N<0||N>=mt)continue;const U=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,t.sortKey),q=U.vertexLength;for(let H=0;H<M;H++)for(let Q=0;Q<M;Q++)Df(this.layoutVertexArray,O,N,b[Q],b[H]);for(let H=0;H<M-1;H++)for(let Q=0;Q<M-1;Q++){const ie=q+H*M+Q,oe=q+(H+1)*M+Q;this.indexArray.emplaceBack(ie,oe+1,ie+1),this.indexArray.emplaceBack(ie,oe,oe+1)}U.vertexLength+=M*M,U.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},f)}}function Rf(r,t){for(let n=0;n<r.length;n++)if(Gc(t,r[n]))return!0;for(let n=0;n<t.length;n++)if(Gc(r,t[n]))return!0;return!!kd(r,t)}function Uc(r,t,n){return!!Gc(r,t)||!!Ou(t,r,n)}function Rh(r,t){if(r.length===1)return Ld(t,r[0]);for(let n=0;n<t.length;n++){const u=t[n];for(let f=0;f<u.length;f++)if(Gc(r,u[f]))return!0}for(let n=0;n<r.length;n++)if(Ld(t,r[n]))return!0;for(let n=0;n<t.length;n++)if(kd(r,t[n]))return!0;return!1}function $p(r,t,n){if(r.length>1){if(kd(r,t))return!0;for(let u=0;u<t.length;u++)if(Ou(t[u],r,n))return!0}for(let u=0;u<r.length;u++)if(Ou(r[u],t,n))return!0;return!1}function kd(r,t){if(r.length===0||t.length===0)return!1;for(let n=0;n<r.length-1;n++){const u=r[n],f=r[n+1];for(let x=0;x<t.length-1;x++)if(Hp(u,f,t[x],t[x+1]))return!0}return!1}function Hp(r,t,n,u){return Aa(r,n,u)!==Aa(t,n,u)&&Aa(r,t,n)!==Aa(r,t,u)}function Ou(r,t,n){const u=n*n;if(t.length===1)return r.distSqr(t[0])<u;for(let f=1;f<t.length;f++)if(kf(r,t[f-1],t[f])<u)return!0;return!1}function kf(r,t,n){const u=t.distSqr(n);if(u===0)return r.distSqr(t);const f=((r.x-t.x)*(n.x-t.x)+(r.y-t.y)*(n.y-t.y))/u;return r.distSqr(f<0?t:f>1?n:n.sub(t)._mult(f)._add(t))}function Ld(r,t){let n,u,f,x=!1;for(let b=0;b<r.length;b++){n=r[b];for(let M=0,A=n.length-1;M<n.length;A=M++)u=n[M],f=n[A],u.y>t.y!=f.y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(x=!x)}return x}function Gc(r,t){let n=!1;for(let u=0,f=r.length-1;u<r.length;f=u++){const x=r[u],b=r[f];x.y>t.y!=b.y>t.y&&t.x<(b.x-x.x)*(t.y-x.y)/(b.y-x.y)+x.x&&(n=!n)}return n}function Xp(r,t,n){const u=n[0],f=n[2];if(r.x<u.x&&t.x<u.x||r.x>f.x&&t.x>f.x||r.y<u.y&&t.y<u.y||r.y>f.y&&t.y>f.y)return!1;const x=Aa(r,t,n[0]);return x!==Aa(r,t,n[1])||x!==Aa(r,t,n[2])||x!==Aa(r,t,n[3])}function kh(r,t,n){const u=t.paint.get(r).value;return u.kind==="constant"?u.value:n.programConfigurations.get(t.id).getMaxValue(r)}function Lh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Gn(r,t,n,u,f){if(!t[0]&&!t[1])return r;const x=R.convert(t)._mult(f);n==="viewport"&&x._rotate(-u);const b=[];for(let M=0;M<r.length;M++)b.push(r[M].sub(x));return b}let Cr,Lf;wt("CircleBucket",Rd,{omit:["layers"]});var Yp={get paint(){return Lf=Lf||new Lr({"circle-radius":new kt(ze.paint_circle["circle-radius"]),"circle-color":new kt(ze.paint_circle["circle-color"]),"circle-blur":new kt(ze.paint_circle["circle-blur"]),"circle-opacity":new kt(ze.paint_circle["circle-opacity"]),"circle-translate":new Ct(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Ct(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ct(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ct(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return Cr=Cr||new Lr({"circle-sort-key":new kt(ze.layout_circle["circle-sort-key"])})}};class Wp extends qr{constructor(t){super(t,Yp)}createBucket(t){return new Rd(t)}queryRadius(t){const n=t;return kh("circle-radius",this,n)+kh("circle-stroke-width",this,n)+Lh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:u,geometry:f,transform:x,pixelsToTileUnits:b,unwrappedTileID:M,getElevation:A}){const D=Gn(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),O=this.paint.get("circle-radius").evaluate(n,u)+this.paint.get("circle-stroke-width").evaluate(n,u),N=this.paint.get("circle-pitch-alignment")==="map",U=N?D:function(H,Q,ie,oe){return H.map(Me=>Of(Me,Q,ie,oe))}(D,x,M,A),q=N?O*b:O;for(const H of f)for(const Q of H){const ie=N?Q:Of(Q,x,M,A);let oe=q;const Me=x.projectTileCoordinates(Q.x,Q.y,M,A).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?oe*=Me/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(oe*=x.cameraToCenterDistance/Me),Uc(U,ie,oe))return!0}return!1}}function Of(r,t,n,u){const f=t.projectTileCoordinates(r.x,r.y,n,u).point;return new R((.5*f.x+.5)*t.width,(.5*-f.y+.5)*t.height)}class Bf extends Rd{}let Oh;wt("HeatmapBucket",Bf,{omit:["layers"]});var jf={get paint(){return Oh=Oh||new Lr({"heatmap-radius":new kt(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ct(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ps(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ct(ze.paint_heatmap["heatmap-opacity"])})}};function Od(r,{width:t,height:n},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*n*u)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*n*u}`)}else f=new Uint8Array(t*n*u);return r.width=t,r.height=n,r.data=f,r}function Nf(r,{width:t,height:n},u){if(t===r.width&&n===r.height)return;const f=Od({},{width:t,height:n},u);Bd(r,f,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,n)},u),r.width=t,r.height=n,r.data=f.data}function Bd(r,t,n,u,f,x){if(f.width===0||f.height===0)return t;if(f.width>r.width||f.height>r.height||n.x>r.width-f.width||n.y>r.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=r.data,M=t.data;if(b===M)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<f.height;A++){const D=((n.y+A)*r.width+n.x)*x,O=((u.y+A)*t.width+u.x)*x;for(let N=0;N<f.width*x;N++)M[O+N]=b[D+N]}return t}class Zc{constructor(t,n){Od(this,t,1,n)}resize(t){Nf(this,t,1)}clone(){return new Zc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,u,f,x){Bd(t,n,u,f,x,1)}}class jr{constructor(t,n){Od(this,t,4,n)}resize(t){Nf(this,t,4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new jr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,u,f,x){Bd(t,n,u,f,x,4)}setPixel(t,n,u){const f=4*(t*this.width+n);this.data[f+0]=Math.round(255*u.r/u.a),this.data[f+1]=Math.round(255*u.g/u.a),this.data[f+2]=Math.round(255*u.b/u.a),this.data[f+3]=Math.round(255*u.a)}}function jd(r){const t={},n=r.resolution||256,u=r.clips?r.clips.length:1,f=r.image||new jr({width:n,height:u});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const x=(b,M,A)=>{t[r.evaluationKey]=A;const D=r.expression.evaluate(t);f.setPixel(b/4/n,M/4,D)};if(r.clips)for(let b=0,M=0;b<u;++b,M+=4*n)for(let A=0,D=0;A<n;A++,D+=4){const O=A/(n-1),{start:N,end:U}=r.clips[b];x(M,D,N*(1-O)+U*O)}else for(let b=0,M=0;b<n;b++,M+=4)x(0,M,b/(n-1));return f}wt("AlphaImage",Zc),wt("RGBAImage",jr);const Nd="big-fb";class Ff extends qr{createBucket(t){return new Bf(t)}constructor(t){super(t,jf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Nd)&&this.heatmapFbos.delete(Nd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Bh;var Vf={get paint(){return Bh=Bh||new Lr({"hillshade-illumination-direction":new Ct(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Ct(ze.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Ct(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ct(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ct(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ct(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ct(ze.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Ct(ze.paint_hillshade["hillshade-method"])})}};class Kp extends qr{constructor(t){super(t,Vf),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,u=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values;const x=Math.max(t.length,n.length,u.length,f.length);t=t.concat(Array(x-t.length).fill(t.at(-1))),n=n.concat(Array(x-n.length).fill(n.at(-1))),u=u.concat(Array(x-u.length).fill(u.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1)));const b=n.map(Co);return{directionRadians:t.map(Co),altitudeRadians:b,shadowColor:f,highlightColor:u}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Fd;var Qp={get paint(){return Fd=Fd||new Lr({"color-relief-opacity":new Ct(ze["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ps(ze["paint_color-relief"]["color-relief-color"])})}};class Bs{constructor(t,n,u,f){this.context=t,this.format=u,this.texture=t.gl.createTexture(),this.update(n,f)}update(t,n,u){const{width:f,height:x}=t,b=!(this.size&&this.size[0]===f&&this.size[1]===x||u),{context:M}=this,{gl:A}=M;if(this.useMipmap=!!(n&&n.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!n||n.premultiply!==!1)),b)this.size=[f,x],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Wa(t)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,t):A.texImage2D(A.TEXTURE_2D,0,this.format,f,x,0,this.format,A.UNSIGNED_BYTE,t.data);else{const{x:D,y:O}=u||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Wa(t)?A.texSubImage2D(A.TEXTURE_2D,0,D,O,A.RGBA,A.UNSIGNED_BYTE,t):A.texSubImage2D(A.TEXTURE_2D,0,D,O,f,x,A.RGBA,A.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D),M.pixelStoreUnpackFlipY.setDefault(),M.pixelStoreUnpack.setDefault(),M.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,n,u){const{context:f}=this,{gl:x}=f;x.bindTexture(x.TEXTURE_2D,this.texture),u!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=x.LINEAR),t!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,t),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,u||t),this.filter=t),n!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Vd{constructor(t,n,u,f=1,x=1,b=1,M=0){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void ln(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const A=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=x,this.blueFactor=b,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<A;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(A,D)]=this.data[this._idx(A-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,A)]=this.data[this._idx(D,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<A;D++)for(let O=0;O<A;O++){const N=this.get(D,O);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(t,n){const u=new Uint8Array(this.data.buffer),f=4*this._idx(t,n);return this.unpack(u[f],u[f+1],u[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}unpack(t,n,u){return t*this.redFactor+n*this.greenFactor+u*this.blueFactor-this.baseShift}pack(t){return Jp(t,this.getUnpackVector())}getPixels(){return new jr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,n,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=n*this.dim,x=n*this.dim+this.dim,b=u*this.dim,M=u*this.dim+this.dim;switch(n){case-1:f=x-1;break;case 1:x=f+1}switch(u){case-1:b=M-1;break;case 1:M=b+1}const A=-n*this.dim,D=-u*this.dim;for(let O=b;O<M;O++)for(let N=f;N<x;N++)this.data[this._idx(N,O)]=t.data[this._idx(N+A,O+D)]}}function Jp(r,t){const n=t[0],u=t[1],f=t[2],x=t[3],b=Math.min(n,u,f),M=Math.round((r+x)/b);return{r:Math.floor(M*b/n)%256,g:Math.floor(M*b/u)%256,b:Math.floor(M*b/f)%256}}wt("DEMData",Vd);class em extends qr{constructor(t){super(t,Qp)}_createColorRamp(t){const n={elevationStops:[],colorStops:[]},u=this._transitionablePaint._values["color-relief-color"].value.expression;if(u instanceof to&&u._styleExpression.expression instanceof ar){this.colorRampExpression=u;const b=u._styleExpression.expression;n.elevationStops=b.labels,n.colorStops=[];for(const M of n.elevationStops)n.colorStops.push(b.evaluate({globals:{elevation:M}}))}if(n.elevationStops.length<1&&(n.elevationStops=[0],n.colorStops=[ni.transparent]),n.elevationStops.length<2&&(n.elevationStops.push(n.elevationStops[0]+1),n.colorStops.push(n.colorStops[0])),n.elevationStops.length<=t)return n;const f={elevationStops:[],colorStops:[]},x=(n.elevationStops.length-1)/(t-1);for(let b=0;b<n.elevationStops.length-.5;b+=x)f.elevationStops.push(n.elevationStops[Math.round(b)]),f.colorStops.push(n.colorStops[Math.round(b)]);return ln(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),f}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,n,u){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const f=this._createColorRamp(n),x=new jr({width:f.colorStops.length,height:1}),b=new jr({width:f.colorStops.length,height:1});for(let M=0;M<f.elevationStops.length;M++){const A=Jp(f.elevationStops[M],u);b.setPixel(0,M,new ni(A.r/255,A.g/255,A.b/255,1)),x.setPixel(0,M,f.colorStops[M])}return this.colorRampTextures={elevationTexture:new Bs(t,b,t.gl.RGBA),colorTexture:new Bs(t,x,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const nl=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:tm}=nl;function Bu(r,t,n){const u=n.patternDependencies;let f=!1;for(const x of t){const b=x.paint.get(`${r}-pattern`);b.isConstant()||(f=!0);const M=b.constantOr(null);M&&(f=!0,u[M.to]=!0,u[M.from]=!0)}return f}function qc(r,t,n,u,f){const x=f.patternDependencies;for(const b of t){const M=b.paint.get(`${r}-pattern`).value;if(M.kind!=="constant"){let A=M.evaluate({zoom:u-1},n,{},f.availableImages),D=M.evaluate({zoom:u},n,{},f.availableImages),O=M.evaluate({zoom:u+1},n,{},f.availableImages);A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,x[A]=!0,x[D]=!0,x[O]=!0,n.patterns[b.id]={min:A,mid:D,max:O}}}return n}function xn(r,t,n,u,f){let x;if(f===function(b,M,A,D){let O=0;for(let N=M,U=A-D;N<A;N+=D)O+=(b[U]-b[N])*(b[N+1]+b[U+1]),U=N;return O}(r,t,n,u)>0)for(let b=t;b<n;b+=u)x=am(b/u|0,r[b],r[b+1],x);else for(let b=n-u;b>=t;b-=u)x=am(b/u|0,r[b],r[b+1],x);return x&&Xc(x,x.next)&&(Fu(x),x=x.next),x}function $c(r,t){if(!r)return r;t||(t=r);let n,u=r;do if(n=!1,u.steiner||!Xc(u,u.next)&&sn(u.prev,u,u.next)!==0)u=u.next;else{if(Fu(u),u=t=u.prev,u===u.next)break;n=!0}while(n||u!==t);return t}function jh(r,t,n,u,f,x,b){if(!r)return;!b&&x&&function(A,D,O,N){let U=A;do U.z===0&&(U.z=Ud(U.x,U.y,D,O,N)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==A);U.prevZ.nextZ=null,U.prevZ=null,function(q){let H,Q=1;do{let ie,oe=q;q=null;let Me=null;for(H=0;oe;){H++;let pe=oe,ve=0;for(let $e=0;$e<Q&&(ve++,pe=pe.nextZ,pe);$e++);let Be=Q;for(;ve>0||Be>0&&pe;)ve!==0&&(Be===0||!pe||oe.z<=pe.z)?(ie=oe,oe=oe.nextZ,ve--):(ie=pe,pe=pe.nextZ,Be--),Me?Me.nextZ=ie:q=ie,ie.prevZ=Me,Me=ie;oe=pe}Me.nextZ=null,Q*=2}while(H>1)}(U)}(r,u,f,x);let M=r;for(;r.prev!==r.next;){const A=r.prev,D=r.next;if(x?Nh(r,u,f,x):im(r))t.push(A.i,r.i,D.i),Fu(r),r=D.next,M=D.next;else if((r=D)===M){b?b===1?jh(r=Zl($c(r),t),t,n,u,f,x,2):b===2&&nm(r,t,n,u,f,x):jh($c(r),t,n,u,f,x,1);break}}}function im(r){const t=r.prev,n=r,u=r.next;if(sn(t,n,u)>=0)return!1;const f=t.x,x=n.x,b=u.x,M=t.y,A=n.y,D=u.y,O=Math.min(f,x,b),N=Math.min(M,A,D),U=Math.max(f,x,b),q=Math.max(M,A,D);let H=u.next;for(;H!==t;){if(H.x>=O&&H.x<=U&&H.y>=N&&H.y<=q&&Hc(f,M,x,A,b,D,H.x,H.y)&&sn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function Nh(r,t,n,u){const f=r.prev,x=r,b=r.next;if(sn(f,x,b)>=0)return!1;const M=f.x,A=x.x,D=b.x,O=f.y,N=x.y,U=b.y,q=Math.min(M,A,D),H=Math.min(O,N,U),Q=Math.max(M,A,D),ie=Math.max(O,N,U),oe=Ud(q,H,t,n,u),Me=Ud(Q,ie,t,n,u);let pe=r.prevZ,ve=r.nextZ;for(;pe&&pe.z>=oe&&ve&&ve.z<=Me;){if(pe.x>=q&&pe.x<=Q&&pe.y>=H&&pe.y<=ie&&pe!==f&&pe!==b&&Hc(M,O,A,N,D,U,pe.x,pe.y)&&sn(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ve.x>=q&&ve.x<=Q&&ve.y>=H&&ve.y<=ie&&ve!==f&&ve!==b&&Hc(M,O,A,N,D,U,ve.x,ve.y)&&sn(ve.prev,ve,ve.next)>=0))return!1;ve=ve.nextZ}for(;pe&&pe.z>=oe;){if(pe.x>=q&&pe.x<=Q&&pe.y>=H&&pe.y<=ie&&pe!==f&&pe!==b&&Hc(M,O,A,N,D,U,pe.x,pe.y)&&sn(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ve&&ve.z<=Me;){if(ve.x>=q&&ve.x<=Q&&ve.y>=H&&ve.y<=ie&&ve!==f&&ve!==b&&Hc(M,O,A,N,D,U,ve.x,ve.y)&&sn(ve.prev,ve,ve.next)>=0)return!1;ve=ve.nextZ}return!0}function Zl(r,t){let n=r;do{const u=n.prev,f=n.next.next;!Xc(u,f)&&go(u,n,n.next,f)&&Nu(u,f)&&Nu(f,u)&&(t.push(u.i,n.i,f.i),Fu(n),Fu(n.next),n=r=f),n=n.next}while(n!==r);return $c(n)}function nm(r,t,n,u,f,x){let b=r;do{let M=b.next.next;for(;M!==b.prev;){if(b.i!==M.i&&Zf(b,M)){let A=or(b,M);return b=$c(b,b.next),A=$c(A,A.next),jh(b,t,n,u,f,x,0),void jh(A,t,n,u,f,x,0)}M=M.next}b=b.next}while(b!==r)}function rm(r,t){let n=r.x-t.x;return n===0&&(n=r.y-t.y,n===0)&&(n=(r.next.y-r.y)/(r.next.x-r.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function Fh(r,t){const n=function(f,x){let b=x;const M=f.x,A=f.y;let D,O=-1/0;if(Xc(f,b))return b;do{if(Xc(f,b.next))return b.next;if(A<=b.y&&A>=b.next.y&&b.next.y!==b.y){const Q=b.x+(A-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(Q<=M&&Q>O&&(O=Q,D=b.x<b.next.x?b:b.next,Q===M))return D}b=b.next}while(b!==x);if(!D)return null;const N=D,U=D.x,q=D.y;let H=1/0;b=D;do{if(M>=b.x&&b.x>=U&&M!==b.x&&Gf(A<q?M:O,A,U,q,A<q?O:M,A,b.x,b.y)){const Q=Math.abs(A-b.y)/(M-b.x);Nu(b,f)&&(Q<H||Q===H&&(b.x>D.x||b.x===D.x&&mo(D,b)))&&(D=b,H=Q)}b=b.next}while(b!==N);return D}(r,t);if(!n)return t;const u=or(n,r);return $c(u,u.next),$c(n,n.next)}function mo(r,t){return sn(r.prev,r,t.prev)<0&&sn(t.next,r,r.next)<0}function Ud(r,t,n,u,f){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-n)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Uf(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function Gf(r,t,n,u,f,x,b,M){return(f-b)*(t-M)>=(r-b)*(x-M)&&(r-b)*(u-M)>=(n-b)*(t-M)&&(n-b)*(x-M)>=(f-b)*(u-M)}function Hc(r,t,n,u,f,x,b,M){return!(r===b&&t===M)&&Gf(r,t,n,u,f,x,b,M)}function Zf(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(n,u){let f=n;do{if(f.i!==n.i&&f.next.i!==n.i&&f.i!==u.i&&f.next.i!==u.i&&go(f,f.next,n,u))return!0;f=f.next}while(f!==n);return!1}(r,t)&&(Nu(r,t)&&Nu(t,r)&&function(n,u){let f=n,x=!1;const b=(n.x+u.x)/2,M=(n.y+u.y)/2;do f.y>M!=f.next.y>M&&f.next.y!==f.y&&b<(f.next.x-f.x)*(M-f.y)/(f.next.y-f.y)+f.x&&(x=!x),f=f.next;while(f!==n);return x}(r,t)&&(sn(r.prev,r,t.prev)||sn(r,t.prev,t))||Xc(r,t)&&sn(r.prev,r,r.next)>0&&sn(t.prev,t,t.next)>0)}function sn(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function Xc(r,t){return r.x===t.x&&r.y===t.y}function go(r,t,n,u){const f=ju(sn(r,t,n)),x=ju(sn(r,t,u)),b=ju(sn(n,u,r)),M=ju(sn(n,u,t));return f!==x&&b!==M||!(f!==0||!bn(r,n,t))||!(x!==0||!bn(r,u,t))||!(b!==0||!bn(n,r,u))||!(M!==0||!bn(n,t,u))}function bn(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function ju(r){return r>0?1:r<0?-1:0}function Nu(r,t){return sn(r.prev,r,r.next)<0?sn(r,t,r.next)>=0&&sn(r,r.prev,t)>=0:sn(r,t,r.prev)<0||sn(r,r.next,t)<0}function or(r,t){const n=Gd(r.i,r.x,r.y),u=Gd(t.i,t.x,t.y),f=r.next,x=t.prev;return r.next=t,t.prev=r,n.next=f,f.prev=n,u.next=n,n.prev=u,x.next=u,u.prev=x,u}function am(r,t,n,u){const f=Gd(r,t,n);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function Fu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Gd(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Vi{constructor(t,n){if(n>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=n}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class Nr{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}Nr.noSubdivision=new Nr({fill:new Vi(0,0),line:new Vi(0,0),tile:new Vi(0,0),stencil:new Vi(0,0),circle:1}),wt("SubdivisionGranularityExpression",Vi),wt("SubdivisionGranularitySetting",Nr);const xa=-32768,Vu=32767;class sm{constructor(t,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=mt/t,this._canonical=n}_getKey(t,n){return(t+=32768)<<16|n+32768}_vertexToIndex(t,n){if(t<-32768||n<-32768||t>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const u=0|Math.round(t),f=0|Math.round(n),x=this._getKey(u,f);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(u,f),b}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(f,x){const b=[];for(let M=0;M<x.length;M+=3){const A=x[M],D=x[M+1],O=x[M+2],N=f[2*A],U=f[2*A+1];(f[2*D]-N)*(f[2*O+1]-U)-(f[2*D+1]-U)*(f[2*O]-N)>0?(b.push(A),b.push(O),b.push(D)):(b.push(A),b.push(D),b.push(O))}return b}(this._vertexBuffer,t);const n=[],u=t.length;for(let f=0;f<u;f+=3){const x=[t[f+0],t[f+1],t[f+2]],b=[this._vertexBuffer[2*t[f+0]+0],this._vertexBuffer[2*t[f+0]+1],this._vertexBuffer[2*t[f+1]+0],this._vertexBuffer[2*t[f+1]+1],this._vertexBuffer[2*t[f+2]+0],this._vertexBuffer[2*t[f+2]+1]];let M=1/0,A=1/0,D=-1/0,O=-1/0;for(let Q=0;Q<3;Q++){const ie=b[2*Q],oe=b[2*Q+1];M=Math.min(M,ie),D=Math.max(D,ie),A=Math.min(A,oe),O=Math.max(O,oe)}if(M===D||A===O)continue;const N=Math.floor(M/this._granularityCellSize),U=Math.ceil(D/this._granularityCellSize),q=Math.floor(A/this._granularityCellSize),H=Math.ceil(O/this._granularityCellSize);if(N!==U||q!==H)for(let Q=q;Q<H;Q++){const ie=this._scanlineGenerateVertexRingForCellRow(Q,b,x);Va(this._vertexBuffer,ie,n)}else n.push(...x)}return n}_scanlineGenerateVertexRingForCellRow(t,n,u){const f=t*this._granularityCellSize,x=f+this._granularityCellSize,b=[];for(let M=0;M<3;M++){const A=n[2*M],D=n[2*M+1],O=n[2*(M+1)%6],N=n[(2*(M+1)+1)%6],U=n[2*(M+2)%6],q=n[(2*(M+2)+1)%6],H=O-A,Q=N-D,ie=H===0,oe=Q===0,Me=(f-D)/Q,pe=(x-D)/Q,ve=Math.min(Me,pe),Be=Math.max(Me,pe);if(!oe&&(ve>=1||Be<=0)||oe&&(D<f||D>x)){N>=f&&N<=x&&b.push(u[(M+1)%3]);continue}!oe&&ve>0&&b.push(this._vertexToIndex(A+H*ve,D+Q*ve));const $e=A+H*Math.max(ve,0),nt=A+H*Math.min(Be,1);ie||this._generateIntraEdgeVertices(b,A,D,O,N,$e,nt),!oe&&Be<1&&b.push(this._vertexToIndex(A+H*Be,D+Q*Be)),(oe||N>=f&&N<=x)&&b.push(u[(M+1)%3]),!oe&&(N<=f||N>=x)&&this._generateInterEdgeVertices(b,A,D,O,N,U,q,nt,f,x)}return b}_generateIntraEdgeVertices(t,n,u,f,x,b,M){const A=f-n,D=x-u,O=D===0,N=O?Math.min(n,f):Math.min(b,M),U=O?Math.max(n,f):Math.max(b,M),q=Math.floor(N/this._granularityCellSize)+1,H=Math.ceil(U/this._granularityCellSize)-1;if(O?n<f:b<M)for(let Q=q;Q<=H;Q++){const ie=Q*this._granularityCellSize;t.push(this._vertexToIndex(ie,u+D*(ie-n)/A))}else for(let Q=H;Q>=q;Q--){const ie=Q*this._granularityCellSize;t.push(this._vertexToIndex(ie,u+D*(ie-n)/A))}}_generateInterEdgeVertices(t,n,u,f,x,b,M,A,D,O){const N=x-u,U=b-f,q=M-x,H=(D-x)/q,Q=(O-x)/q,ie=Math.min(H,Q),oe=Math.max(H,Q),Me=f+U*ie;let pe=Math.floor(Math.min(Me,A)/this._granularityCellSize)+1,ve=Math.ceil(Math.max(Me,A)/this._granularityCellSize)-1,Be=A<Me;const $e=q===0;if($e&&(M===D||M===O))return;if($e||ie>=1||oe<=0){const vt=u-M,pt=b+(n-b)*Math.min((D-M)/vt,(O-M)/vt);pe=Math.floor(Math.min(pt,A)/this._granularityCellSize)+1,ve=Math.ceil(Math.max(pt,A)/this._granularityCellSize)-1,Be=A<pt}const nt=N>0?O:D;if(Be)for(let vt=pe;vt<=ve;vt++)t.push(this._vertexToIndex(vt*this._granularityCellSize,nt));else for(let vt=ve;vt>=pe;vt--)t.push(this._vertexToIndex(vt*this._granularityCellSize,nt))}_generateOutline(t){const n=[];for(const u of t){const f=rl(u,this._granularity,!0),x=this._pointArrayToIndices(f),b=[];for(let M=1;M<x.length;M++)b.push(x[M-1]),b.push(x[M]);n.push(b)}return n}_handlePoles(t){let n=!1,u=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(u=!0)),(n||u)&&this._fillPoles(t,n,u)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let n=0;n<t.length;n+=2){const u=t[n+1];u===xa&&(t[n+1]=-32767),u===Vu&&(t[n+1]=32766)}}_generatePoleQuad(t,n,u,f,x,b){f>x!=(b===xa)?(t.push(n),t.push(u),t.push(this._vertexToIndex(f,b)),t.push(u),t.push(this._vertexToIndex(x,b)),t.push(this._vertexToIndex(f,b))):(t.push(u),t.push(n),t.push(this._vertexToIndex(f,b)),t.push(this._vertexToIndex(x,b)),t.push(u),t.push(this._vertexToIndex(f,b)))}_fillPoles(t,n,u){const f=this._vertexBuffer,x=mt,b=t.length;for(let M=2;M<b;M+=3){const A=t[M-2],D=t[M-1],O=t[M],N=f[2*A],U=f[2*A+1],q=f[2*D],H=f[2*D+1],Q=f[2*O],ie=f[2*O+1];n&&(U===0&&H===0&&this._generatePoleQuad(t,A,D,N,q,xa),H===0&&ie===0&&this._generatePoleQuad(t,D,O,q,Q,xa),ie===0&&U===0&&this._generatePoleQuad(t,O,A,Q,N,xa)),u&&(U===x&&H===x&&this._generatePoleQuad(t,A,D,N,q,Vu),H===x&&ie===x&&this._generatePoleQuad(t,D,O,q,Q,Vu),ie===x&&U===x&&this._generatePoleQuad(t,O,A,Q,N,Vu))}}_initializeVertices(t){for(let n=0;n<t.length;n+=2)this._vertexToIndex(t[n],t[n+1])}subdividePolygonInternal(t,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:u,holeIndices:f}=function(M){const A=[],D=[];for(const O of M)if(O.length!==0){O!==M[0]&&A.push(D.length/2);for(let N=0;N<O.length;N++)D.push(O[N].x),D.push(O[N].y)}return{flattened:D,holeIndices:A}}(t);let x;this._initializeVertices(u);try{const M=function(D,O,N=2){const U=O&&O.length,q=U?O[0]*N:D.length;let H=xn(D,0,q,N,!0);const Q=[];if(!H||H.next===H.prev)return Q;let ie,oe,Me;if(U&&(H=function(pe,ve,Be,$e){const nt=[];for(let vt=0,pt=ve.length;vt<pt;vt++){const yt=xn(pe,ve[vt]*$e,vt<pt-1?ve[vt+1]*$e:pe.length,$e,!1);yt===yt.next&&(yt.steiner=!0),nt.push(Uf(yt))}nt.sort(rm);for(let vt=0;vt<nt.length;vt++)Be=Fh(nt[vt],Be);return Be}(D,O,H,N)),D.length>80*N){ie=D[0],oe=D[1];let pe=ie,ve=oe;for(let Be=N;Be<q;Be+=N){const $e=D[Be],nt=D[Be+1];$e<ie&&(ie=$e),nt<oe&&(oe=nt),$e>pe&&(pe=$e),nt>ve&&(ve=nt)}Me=Math.max(pe-ie,ve-oe),Me=Me!==0?32767/Me:0}return jh(H,Q,N,ie,oe,Me,0),Q}(u,f),A=this._convertIndices(u,M);x=this._subdivideTrianglesScanline(A)}catch(M){console.error(M)}let b=[];return n&&(b=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(t,n){const u=[];for(let f=0;f<n.length;f++)u.push(this._vertexToIndex(t[2*n[f]],t[2*n[f]+1]));return u}_pointArrayToIndices(t){const n=[];for(let u=0;u<t.length;u++){const f=t[u];n.push(this._vertexToIndex(f.x,f.y))}return n}}function om(r,t,n,u=!0){return new sm(n,t).subdividePolygonInternal(r,u)}function rl(r,t,n=!1){if(!r||r.length<1)return[];if(r.length<2)return[];const u=r[0],f=r[r.length-1],x=n&&(u.x!==f.x||u.y!==f.y);if(t<2)return x?[...r,r[0]]:[...r];const b=Math.floor(mt/t),M=[];M.push(new R(r[0].x,r[0].y));const A=r.length,D=x?A:A-1;for(let O=0;O<D;O++){const N=r[O],U=O<A-1?r[O+1]:r[0],q=N.x,H=N.y,Q=U.x,ie=U.y,oe=q!==Q,Me=H!==ie;if(!oe&&!Me)continue;const pe=Q-q,ve=ie-H,Be=Math.abs(pe),$e=Math.abs(ve);let nt=q,vt=H;for(;;){const yt=pe>0?(Math.floor(nt/b)+1)*b:(Math.ceil(nt/b)-1)*b,It=ve>0?(Math.floor(vt/b)+1)*b:(Math.ceil(vt/b)-1)*b,xt=Math.abs(nt-yt),_t=Math.abs(vt-It),We=Math.abs(nt-Q),jt=Math.abs(vt-ie),Ut=oe?xt/Be:Number.POSITIVE_INFINITY,Lt=Me?_t/$e:Number.POSITIVE_INFINITY;if((We<=xt||!oe)&&(jt<=_t||!Me))break;if(Ut<Lt&&oe||!Me){nt=yt,vt+=ve*Ut;const At=new R(nt,Math.round(vt));M[M.length-1].x===At.x&&M[M.length-1].y===At.y||M.push(At)}else{nt+=pe*Lt,vt=It;const At=new R(Math.round(nt),vt);M[M.length-1].x===At.x&&M[M.length-1].y===At.y||M.push(At)}}const pt=new R(Q,ie);M[M.length-1].x===pt.x&&M[M.length-1].y===pt.y||M.push(pt)}return M}function Va(r,t,n){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let u=0,f=r[2*t[0]];for(let A=1;A<t.length;A++){const D=r[2*t[A]];D<f&&(f=D,u=A)}const x=t.length;let b=u,M=(b+1)%x;for(;;){const A=b-1>=0?b-1:x-1,D=(M+1)%x,O=r[2*t[A]],N=r[2*t[D]],U=r[2*t[b]],q=r[2*t[b]+1],H=r[2*t[M]+1];let Q=!1;if(O<N)Q=!0;else if(O>N)Q=!1;else{const ie=H-q,oe=-(r[2*t[M]]-U),Me=q<H?1:-1;((O-U)*ie+(r[2*t[A]+1]-q)*oe)*Me>((N-U)*ie+(r[2*t[D]+1]-q)*oe)*Me&&(Q=!0)}if(Q){const ie=t[A],oe=t[b],Me=t[M];ie!==oe&&ie!==Me&&oe!==Me&&n.push(Me,oe,ie),b--,b<0&&(b=x-1)}else{const ie=t[D],oe=t[b],Me=t[M];ie!==oe&&ie!==Me&&oe!==Me&&n.push(Me,oe,ie),M++,M>=x&&(M=0)}if(A===D)break}}function hs(r,t,n,u,f,x,b,M,A){const D=f.length/2,O=b&&M&&A;if(D<Wt.MAX_VERTEX_ARRAY_LENGTH){const N=t.prepareSegment(D,n,u),U=N.vertexLength;for(let Q=0;Q<x.length;Q+=3)u.emplaceBack(U+x[Q],U+x[Q+1],U+x[Q+2]);let q,H;N.vertexLength+=D,N.primitiveLength+=x.length/3,O&&(H=b.prepareSegment(D,n,M),q=H.vertexLength,H.vertexLength+=D);for(let Q=0;Q<f.length;Q+=2)r(f[Q],f[Q+1]);if(O)for(let Q=0;Q<A.length;Q++){const ie=A[Q];for(let oe=1;oe<ie.length;oe+=2)M.emplaceBack(q+ie[oe-1],q+ie[oe]);H.primitiveLength+=ie.length/2}}else(function(N,U,q,H,Q,ie){const oe=[];for(let $e=0;$e<H.length/2;$e++)oe.push(-1);const Me={count:0};let pe=0,ve=N.getOrCreateLatestSegment(U,q),Be=ve.vertexLength;for(let $e=2;$e<Q.length;$e+=3){const nt=Q[$e-2],vt=Q[$e-1],pt=Q[$e];let yt=oe[nt]<pe,It=oe[vt]<pe,xt=oe[pt]<pe;ve.vertexLength+((yt?1:0)+(It?1:0)+(xt?1:0))>Wt.MAX_VERTEX_ARRAY_LENGTH&&(ve=N.createNewSegment(U,q),pe=Me.count,yt=!0,It=!0,xt=!0,Be=0);const _t=Uu(oe,H,ie,Me,nt,yt,ve),We=Uu(oe,H,ie,Me,vt,It,ve),jt=Uu(oe,H,ie,Me,pt,xt,ve);q.emplaceBack(Be+_t-pe,Be+We-pe,Be+jt-pe),ve.primitiveLength++}})(t,n,u,f,x,r),O&&function(N,U,q,H,Q,ie){const oe=[];for(let $e=0;$e<H.length/2;$e++)oe.push(-1);const Me={count:0};let pe=0,ve=N.getOrCreateLatestSegment(U,q),Be=ve.vertexLength;for(let $e=0;$e<Q.length;$e++){const nt=Q[$e];for(let vt=1;vt<Q[$e].length;vt+=2){const pt=nt[vt-1],yt=nt[vt];let It=oe[pt]<pe,xt=oe[yt]<pe;ve.vertexLength+((It?1:0)+(xt?1:0))>Wt.MAX_VERTEX_ARRAY_LENGTH&&(ve=N.createNewSegment(U,q),pe=Me.count,It=!0,xt=!0,Be=0);const _t=Uu(oe,H,ie,Me,pt,It,ve),We=Uu(oe,H,ie,Me,yt,xt,ve);q.emplaceBack(Be+_t-pe,Be+We-pe),ve.primitiveLength++}}}(b,n,M,f,A,r),t.forceNewSegmentOnNextPrepare(),b?.forceNewSegmentOnNextPrepare()}function Uu(r,t,n,u,f,x,b){if(x){const M=u.count;return n(t[2*f],t[2*f+1]),r[f]=u.count,u.count++,b.vertexLength++,M}return r[f]}class ra{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ze,this.indexArray=new Ci,this.indexArray2=new Si,this.programConfigurations=new vn(t.layers,t.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,u){this.hasPattern=Bu("fill",this.layers,n);const f=this.layers[0].layout.get("fill-sort-key"),x=!f.isConstant(),b=[];for(const{feature:M,id:A,index:D,sourceLayerIndex:O}of t){const N=this.layers[0]._featureFilter.needGeometry,U=va(M,N);if(!this.layers[0]._featureFilter.filter(new ji(this.zoom,{globalState:this.globalState}),U,u))continue;const q=x?f.evaluate(U,{},u,n.availableImages):void 0,H={id:A,properties:M.properties,type:M.type,sourceLayerIndex:O,index:D,geometry:N?U.geometry:Zi(M),patterns:{},sortKey:q};b.push(H)}x&&b.sort((M,A)=>M.sortKey-A.sortKey);for(const M of b){const{geometry:A,index:D,sourceLayerIndex:O}=M;if(this.hasPattern){const N=qc("fill",this.layers,M,this.zoom,n);this.patternFeatures.push(N)}else this.addFeature(M,A,D,u,{},n.subdivisionGranularity);n.featureIndex.insert(t[D].feature,A,D,O,this.index)}}update(t,n,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,u)}addFeatures(t,n,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,u,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,tm),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,u,f,x,b){for(const M of El(n,500)){const A=om(M,f,b.fill.getGranularityForZoomLevel(f.z)),D=this.layoutVertexArray;hs((O,N)=>{D.emplaceBack(O,N)},this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles,this.segments2,this.indexArray2,A.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,f)}}let qf,al;wt("FillBucket",ra,{omit:["layers","patternFeatures"]});var Yc={get paint(){return al=al||new Lr({"fill-antialias":new Ct(ze.paint_fill["fill-antialias"]),"fill-opacity":new kt(ze.paint_fill["fill-opacity"]),"fill-color":new kt(ze.paint_fill["fill-color"]),"fill-outline-color":new kt(ze.paint_fill["fill-outline-color"]),"fill-translate":new Ct(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Ct(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new el(ze.paint_fill["fill-pattern"])})},get layout(){return qf=qf||new Lr({"fill-sort-key":new kt(ze.layout_fill["fill-sort-key"])})}};class ql extends qr{constructor(t){super(t,Yc)}recalculate(t,n){super.recalculate(t,n);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ra(t)}queryRadius(){return Lh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:n,transform:u,pixelsToTileUnits:f}){return Rh(Gn(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-u.bearingInRadians,f),n)}isTileClipped(){return!0}}const $f=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Hf=yn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yo}=$f;class Wc{constructor(t,n,u,f,x){this.properties={},this.extent=u,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=f,this._values=x,t.readFields(Gu,this,n)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const n=t.readVarint()+t.pos,u=[];let f,x=1,b=0,M=0,A=0;for(;t.pos<n;){if(b<=0){const D=t.readVarint();x=7&D,b=D>>3}if(b--,x===1||x===2)M+=t.readSVarint(),A+=t.readSVarint(),x===1&&(f&&u.push(f),f=[]),f&&f.push(new R(M,A));else{if(x!==7)throw new Error(`unknown command ${x}`);f&&f.push(f[0].clone())}}return f&&u.push(f),u}bbox(){const t=this._pbf;t.pos=this._geometry;const n=t.readVarint()+t.pos;let u=1,f=0,x=0,b=0,M=1/0,A=-1/0,D=1/0,O=-1/0;for(;t.pos<n;){if(f<=0){const N=t.readVarint();u=7&N,f=N>>3}if(f--,u===1||u===2)x+=t.readSVarint(),b+=t.readSVarint(),x<M&&(M=x),x>A&&(A=x),b<D&&(D=b),b>O&&(O=b);else if(u!==7)throw new Error(`unknown command ${u}`)}return[M,D,A,O]}toGeoJSON(t,n,u){const f=this.extent*Math.pow(2,u),x=this.extent*t,b=this.extent*n,M=this.loadGeometry();function A(U){return[360*(U.x+x)/f-180,360/Math.PI*Math.atan(Math.exp((1-2*(U.y+b)/f)*Math.PI))-90]}function D(U){return U.map(A)}let O;if(this.type===1){const U=[];for(const H of M)U.push(H[0]);const q=D(U);O=U.length===1?{type:"Point",coordinates:q[0]}:{type:"MultiPoint",coordinates:q}}else if(this.type===2){const U=M.map(D);O=U.length===1?{type:"LineString",coordinates:U[0]}:{type:"MultiLineString",coordinates:U}}else{if(this.type!==3)throw new Error("unknown feature type");{const U=function(H){const Q=H.length;if(Q<=1)return[H];const ie=[];let oe,Me;for(let pe=0;pe<Q;pe++){const ve=Vh(H[pe]);ve!==0&&(Me===void 0&&(Me=ve<0),Me===ve<0?(oe&&ie.push(oe),oe=[H[pe]]):oe&&oe.push(H[pe]))}return oe&&ie.push(oe),ie}(M),q=[];for(const H of U)q.push(H.map(D));O=q.length===1?{type:"Polygon",coordinates:q[0]}:{type:"MultiPolygon",coordinates:q}}}const N={type:"Feature",geometry:O,properties:this.properties};return this.id!=null&&(N.id=this.id),N}}function Gu(r,t,n){r===1?t.id=n.readVarint():r===2?function(u,f){const x=u.readVarint()+u.pos;for(;u.pos<x;){const b=f._keys[u.readVarint()],M=f._values[u.readVarint()];f.properties[b]=M}}(n,t):r===3?t.type=n.readVarint():r===4&&(t._geometry=n.pos)}function Vh(r){let t=0;for(let n,u,f=0,x=r.length,b=x-1;f<x;b=f++)n=r[f],u=r[b],t+=(u.x-n.x)*(n.y+u.y);return t}Wc.types=["Unknown","Point","LineString","Polygon"];class Zu{constructor(t,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(qu,this,n),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const n=this._pbf.readVarint()+this._pbf.pos;return new Wc(this._pbf,n,this.extent,this._keys,this._values)}}function qu(r,t,n){r===15?t.version=n.readVarint():r===1?t.name=n.readString():r===5?t.extent=n.readVarint():r===2?t._features.push(n.pos):r===3?t._keys.push(n.readString()):r===4&&t._values.push(function(u){let f=null;const x=u.readVarint()+u.pos;for(;u.pos<x;){const b=u.readVarint()>>3;f=b===1?u.readString():b===2?u.readFloat():b===3?u.readDouble():b===4?u.readVarint64():b===5?u.readVarint():b===6?u.readSVarint():b===7?u.readBoolean():null}if(f==null)throw new Error("unknown feature value");return f}(n))}class Xf{constructor(t,n){this.layers=t.readFields(lm,{},n)}}function lm(r,t,n){if(r===3){const u=new Zu(n,n.readVarint()+n.pos);u.length&&(t[u.name]=u)}}const Kc=Math.pow(2,13);function $u(r,t,n,u,f,x,b,M){r.emplaceBack(t,n,2*Math.floor(u*Kc)+b,f*Kc*2,x*Kc*2,Math.round(M))}class Hu{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Le,this.centroidVertexArray=new he,this.indexArray=new Ci,this.programConfigurations=new vn(t.layers,t.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,u){this.features=[],this.hasPattern=Bu("fill-extrusion",this.layers,n);for(const{feature:f,id:x,index:b,sourceLayerIndex:M}of t){const A=this.layers[0]._featureFilter.needGeometry,D=va(f,A);if(!this.layers[0]._featureFilter.filter(new ji(this.zoom,{globalState:this.globalState}),D,u))continue;const O={id:x,sourceLayerIndex:M,index:b,geometry:A?D.geometry:Zi(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(qc("fill-extrusion",this.layers,O,this.zoom,n)):this.addFeature(O,O.geometry,b,u,{},n.subdivisionGranularity),n.featureIndex.insert(f,O.geometry,b,M,this.index,!0)}}addFeatures(t,n,u){for(const f of this.features){const{geometry:x}=f;this.addFeature(f,x,f.index,n,u,t.subdivisionGranularity)}}update(t,n,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yo),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Hf.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,n,u,f,x,b){for(const M of El(n,500)){const A={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(A,f,t,M,b);const O=this.layoutVertexArray.length-D,N=Math.floor(A.x/A.sampleCount),U=Math.floor(A.y/A.sampleCount);for(let q=0;q<O;q++)this.centroidVertexArray.emplaceBack(N,U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,f)}processPolygon(t,n,u,f,x){if(f.length<1||um(f[0]))return;for(const N of f)N.length!==0&&cm(t,N);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=x.fill.getGranularityForZoomLevel(n.z),A=Wc.types[u.type]==="Polygon";for(const N of f){if(N.length===0||um(N))continue;const U=rl(N,M,A);this._generateSideFaces(U,b)}if(!A)return;const D=om(f,n,M,!1),O=this.layoutVertexArray;hs((N,U)=>{$u(O,N,U,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(t,n){let u=0;for(let f=1;f<t.length;f++){const x=t[f],b=t[f-1];if(_g(x,b))continue;n.segment.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=x.sub(b)._perp()._unit(),A=b.dist(x);u+A>32768&&(u=0),$u(this.layoutVertexArray,x.x,x.y,M.x,M.y,0,0,u),$u(this.layoutVertexArray,x.x,x.y,M.x,M.y,0,1,u),u+=A,$u(this.layoutVertexArray,b.x,b.y,M.x,M.y,0,0,u),$u(this.layoutVertexArray,b.x,b.y,M.x,M.y,0,1,u);const D=n.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function cm(r,t){for(let n=0;n<t.length;n++){const u=t[n];n===t.length-1&&t[0].x===u.x&&t[0].y===u.y||(r.x+=u.x,r.y+=u.y,r.sampleCount++)}}function _g(r,t){return r.x===t.x&&(r.x<0||r.x>mt)||r.y===t.y&&(r.y<0||r.y>mt)}function um(r){return r.every(t=>t.x<0)||r.every(t=>t.x>mt)||r.every(t=>t.y<0)||r.every(t=>t.y>mt)}let Ni;wt("FillExtrusionBucket",Hu,{omit:["layers","features"]});var on={get paint(){return Ni=Ni||new Lr({"fill-extrusion-opacity":new Ct(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ct(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ct(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new el(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ct(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vi extends qr{constructor(t){super(t,on)}createBucket(t){return new Hu(t)}queryRadius(){return Lh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:u,geometry:f,transform:x,pixelsToTileUnits:b,pixelPosMatrix:M}){const A=Gn(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),D=this.paint.get("fill-extrusion-height").evaluate(n,u),O=this.paint.get("fill-extrusion-base").evaluate(n,u),N=function(q,H){const Q=[];for(const ie of q){const oe=[ie.x,ie.y,0,1];Li(oe,oe,H),Q.push(new R(oe[0]/oe[3],oe[1]/oe[3]))}return Q}(A,M),U=function(q,H,Q,ie){const oe=[],Me=[],pe=ie[8]*H,ve=ie[9]*H,Be=ie[10]*H,$e=ie[11]*H,nt=ie[8]*Q,vt=ie[9]*Q,pt=ie[10]*Q,yt=ie[11]*Q;for(const It of q){const xt=[],_t=[];for(const We of It){const jt=We.x,Ut=We.y,Lt=ie[0]*jt+ie[4]*Ut+ie[12],At=ie[1]*jt+ie[5]*Ut+ie[13],ti=ie[2]*jt+ie[6]*Ut+ie[14],Pi=ie[3]*jt+ie[7]*Ut+ie[15],$i=ti+Be,On=Pi+$e,Vr=Lt+nt,Bn=At+vt,cr=ti+pt,Ji=Pi+yt,wn=new R((Lt+pe)/On,(At+ve)/On);wn.z=$i/On,xt.push(wn);const ur=new R(Vr/Ji,Bn/Ji);ur.z=cr/Ji,_t.push(ur)}oe.push(xt),Me.push(_t)}return[oe,Me]}(f,O,D,M);return function(q,H,Q){let ie=1/0;Rh(Q,H)&&(ie=Fi(Q,H[0]));for(let oe=0;oe<H.length;oe++){const Me=H[oe],pe=q[oe];for(let ve=0;ve<Me.length-1;ve++){const Be=Me[ve],$e=[Be,Me[ve+1],pe[ve+1],pe[ve],Be];Rf(Q,$e)&&(ie=Math.min(ie,Fi(Q,$e)))}}return ie!==1/0&&ie}(U[0],U[1],N)}}function pi(r,t){return r.x*t.x+r.y*t.y}function Fi(r,t){if(r.length===1){let n=0;const u=t[n++];let f;for(;!f||u.equals(f);)if(f=t[n++],!f)return 1/0;for(;n<t.length;n++){const x=t[n],b=r[0],M=f.sub(u),A=x.sub(u),D=b.sub(u),O=pi(M,M),N=pi(M,A),U=pi(A,A),q=pi(D,M),H=pi(D,A),Q=O*U-N*N,ie=(U*q-N*H)/Q,oe=(O*H-N*q)/Q,Me=u.z*(1-ie-oe)+f.z*ie+x.z*oe;if(isFinite(Me))return Me}return 1/0}{let n=1/0;for(const u of t)n=Math.min(n,u.z);return n}}const Ua=yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$l}=Ua,Xu=yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yf}=Xu,sl=Math.cos(Math.PI/180*37.5),Pn=Math.pow(2,14)/.5;class _o{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Oe,this.layoutVertexArray2=new Ue,this.indexArray=new Ci,this.programConfigurations=new vn(t.layers,t.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,u){this.hasPattern=Bu("line",this.layers,n);const f=this.layers[0].layout.get("line-sort-key"),x=!f.isConstant(),b=[];for(const{feature:M,id:A,index:D,sourceLayerIndex:O}of t){const N=this.layers[0]._featureFilter.needGeometry,U=va(M,N);if(!this.layers[0]._featureFilter.filter(new ji(this.zoom,{globalState:this.globalState}),U,u))continue;const q=x?f.evaluate(U,{},u):void 0,H={id:A,properties:M.properties,type:M.type,sourceLayerIndex:O,index:D,geometry:N?U.geometry:Zi(M),patterns:{},sortKey:q};b.push(H)}x&&b.sort((M,A)=>M.sortKey-A.sortKey);for(const M of b){const{geometry:A,index:D,sourceLayerIndex:O}=M;if(this.hasPattern){const N=qc("line",this.layers,M,this.zoom,n);this.patternFeatures.push(N)}else this.addFeature(M,A,D,u,{},n.subdivisionGranularity);n.featureIndex.insert(t[D].feature,A,D,O,this.index)}}update(t,n,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,u)}addFeatures(t,n,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,u,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Yf)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$l),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,u,f,x,b){const M=this.layers[0].layout,A=M.get("line-join").evaluate(t,{}),D=M.get("line-cap"),O=M.get("line-miter-limit"),N=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const U of n)this.addLine(U,t,A,D,O,N,f,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,x,f)}addLine(t,n,u,f,x,b,M,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=rl(t,M?A.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<t.length-1;pe++)this.totalDistance+=t[pe].dist(t[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Wc.types[n.type]==="Polygon";let O=t.length;for(;O>=2&&t[O-1].equals(t[O-2]);)O--;let N=0;for(;N<O-1&&t[N].equals(t[N+1]);)N++;if(O<(D?3:2))return;u==="bevel"&&(x=1.05);const U=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let H,Q,ie,oe,Me;this.e1=this.e2=-1,D&&(H=t[O-2],Me=t[N].sub(H)._unit()._perp());for(let pe=N;pe<O;pe++){if(ie=pe===O-1?D?t[N+1]:void 0:t[pe+1],ie&&t[pe].equals(ie))continue;Me&&(oe=Me),H&&(Q=H),H=t[pe],Me=ie?ie.sub(H)._unit()._perp():oe,oe=oe||Me;let ve=oe.add(Me);ve.x===0&&ve.y===0||ve._unit();const Be=oe.x*Me.x+oe.y*Me.y,$e=ve.x*Me.x+ve.y*Me.y,nt=$e!==0?1/$e:1/0,vt=2*Math.sqrt(2-2*$e),pt=$e<sl&&Q&&ie,yt=oe.x*Me.y-oe.y*Me.x>0;if(pt&&pe>N){const _t=H.dist(Q);if(_t>2*U){const We=H.sub(H.sub(Q)._mult(U/_t)._round());this.updateDistance(Q,We),this.addCurrentVertex(We,oe,0,0,q),Q=We}}const It=Q&&ie;let xt=It?u:D?"butt":f;if(It&&xt==="round"&&(nt<b?xt="miter":nt<=2&&(xt="fakeround")),xt==="miter"&&nt>x&&(xt="bevel"),xt==="bevel"&&(nt>2&&(xt="flipbevel"),nt<x&&(xt="miter")),Q&&this.updateDistance(Q,H),xt==="miter")ve._mult(nt),this.addCurrentVertex(H,ve,0,0,q);else if(xt==="flipbevel"){if(nt>100)ve=Me.mult(-1);else{const _t=nt*oe.add(Me).mag()/oe.sub(Me).mag();ve._perp()._mult(_t*(yt?-1:1))}this.addCurrentVertex(H,ve,0,0,q),this.addCurrentVertex(H,ve.mult(-1),0,0,q)}else if(xt==="bevel"||xt==="fakeround"){const _t=-Math.sqrt(nt*nt-1),We=yt?_t:0,jt=yt?0:_t;if(Q&&this.addCurrentVertex(H,oe,We,jt,q),xt==="fakeround"){const Ut=Math.round(180*vt/Math.PI/20);for(let Lt=1;Lt<Ut;Lt++){let At=Lt/Ut;if(At!==.5){const Pi=At-.5;At+=At*Pi*(At-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*Pi*Pi+(.848013+Be*(.215638*Be-1.06021)))}const ti=Me.sub(oe)._mult(At)._add(oe)._unit()._mult(yt?-1:1);this.addHalfVertex(H,ti.x,ti.y,!1,yt,0,q)}}ie&&this.addCurrentVertex(H,Me,-We,-jt,q)}else if(xt==="butt")this.addCurrentVertex(H,ve,0,0,q);else if(xt==="square"){const _t=Q?1:-1;this.addCurrentVertex(H,ve,_t,_t,q)}else xt==="round"&&(Q&&(this.addCurrentVertex(H,oe,0,0,q),this.addCurrentVertex(H,oe,1,1,q,!0)),ie&&(this.addCurrentVertex(H,Me,-1,-1,q,!0),this.addCurrentVertex(H,Me,0,0,q)));if(pt&&pe<O-1){const _t=H.dist(ie);if(_t>2*U){const We=H.add(ie.sub(H)._mult(U/_t)._round());this.updateDistance(H,We),this.addCurrentVertex(We,Me,0,0,q),H=We}}}}addCurrentVertex(t,n,u,f,x,b=!1){const M=n.y*f-n.x,A=-n.y-n.x*f;this.addHalfVertex(t,n.x+n.y*u,n.y-n.x*u,b,!1,u,x),this.addHalfVertex(t,M,A,b,!0,-f,x),this.distance>Pn/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,n,u,f,x,b))}addHalfVertex({x:t,y:n},u,f,x,b,M,A){const D=.5*(this.lineClips?this.scaledDistance*(Pn-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(x?1:0),(n<<1)+(b?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(M===0?0:M<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,O,this.e2),A.primitiveLength++),b?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}let Hl,Zd;wt("LineBucket",_o,{omit:["layers","patternFeatures"]});var Ga={get paint(){return Zd=Zd||new Lr({"line-opacity":new kt(ze.paint_line["line-opacity"]),"line-color":new kt(ze.paint_line["line-color"]),"line-translate":new Ct(ze.paint_line["line-translate"]),"line-translate-anchor":new Ct(ze.paint_line["line-translate-anchor"]),"line-width":new kt(ze.paint_line["line-width"]),"line-gap-width":new kt(ze.paint_line["line-gap-width"]),"line-offset":new kt(ze.paint_line["line-offset"]),"line-blur":new kt(ze.paint_line["line-blur"]),"line-dasharray":new ma(ze.paint_line["line-dasharray"]),"line-pattern":new el(ze.paint_line["line-pattern"]),"line-gradient":new Ps(ze.paint_line["line-gradient"])})},get layout(){return Hl=Hl||new Lr({"line-cap":new Ct(ze.layout_line["line-cap"]),"line-join":new kt(ze.layout_line["line-join"]),"line-miter-limit":new Ct(ze.layout_line["line-miter-limit"]),"line-round-limit":new Ct(ze.layout_line["line-round-limit"]),"line-sort-key":new kt(ze.layout_line["line-sort-key"])})}};class Yu extends kt{possiblyEvaluate(t,n){return n=new ji(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(t,n)}evaluate(t,n,u,f){return n=gi({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(t,n,u,f)}}let Xl;class ba extends qr{constructor(t){super(t,Ga),this.gradientVersion=0,Xl||(Xl=new Yu(Ga.paint.properties["line-width"].specification),Xl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(n)&&n._styleExpression.expression instanceof mn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,n){super.recalculate(t,n),this.paint._values["line-floorwidth"]=Xl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new _o(t)}queryRadius(t){const n=t,u=qd(kh("line-width",this,n),kh("line-gap-width",this,n)),f=kh("line-offset",this,n);return u/2+Math.abs(f)+Lh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:u,geometry:f,transform:x,pixelsToTileUnits:b}){const M=Gn(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),A=b/2*qd(this.paint.get("line-width").evaluate(n,u),this.paint.get("line-gap-width").evaluate(n,u)),D=this.paint.get("line-offset").evaluate(n,u);return D&&(f=function(O,N){const U=[];for(let q=0;q<O.length;q++){const H=O[q],Q=[];for(let ie=0;ie<H.length;ie++){const oe=H[ie-1],Me=H[ie],pe=H[ie+1],ve=ie===0?new R(0,0):Me.sub(oe)._unit()._perp(),Be=ie===H.length-1?new R(0,0):pe.sub(Me)._unit()._perp(),$e=ve._add(Be)._unit(),nt=$e.x*Be.x+$e.y*Be.y;nt!==0&&$e._mult(1/nt),Q.push($e._mult(N)._add(Me))}U.push(Q)}return U}(f,D*b)),function(O,N,U){for(let q=0;q<N.length;q++){const H=N[q];if(O.length>=3){for(let Q=0;Q<H.length;Q++)if(Gc(O,H[Q]))return!0}if($p(O,H,U))return!0}return!1}(M,f,A)}isTileClipped(){return!0}}function qd(r,t){return t>0?t+2*r:r}const Wf=yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$d=yn([{name:"a_projected_pos",components:3,type:"Float32"}],4);yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hd=yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ol=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Fr=yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yl(r,t,n){return r.sections.forEach(u=>{u.text=function(f,x,b){const M=x.layout.get("text-transform").evaluate(b,{});return M==="uppercase"?f=f.toLocaleUpperCase():M==="lowercase"&&(f=f.toLocaleLowerCase()),Tr.applyArabicShaping&&(f=Tr.applyArabicShaping(f)),f}(u.text,t,n)}),r}yn([{name:"triangle",components:3,type:"Uint16"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),yn([{type:"Float32",name:"offsetX"}]),yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),yn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const vo={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var fn=24;const Uh=4294967296,Xd=1/Uh,Kf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Qc{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,n,u=this.length){for(;this.pos<u;){const f=this.readVarint(),x=f>>3,b=this.pos;this.type=7&f,t(x,n,this),this.pos===b&&this.skip(f)}return n}readMessage(t,n){return this.readFields(t,n,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Uh;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Uh;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const n=this.buf;let u,f;return f=n[this.pos++],u=127&f,f<128?u:(f=n[this.pos++],u|=(127&f)<<7,f<128?u:(f=n[this.pos++],u|=(127&f)<<14,f<128?u:(f=n[this.pos++],u|=(127&f)<<21,f<128?u:(f=n[this.pos],u|=(15&f)<<28,function(x,b,M){const A=M.buf;let D,O;if(O=A[M.pos++],D=(112&O)>>4,O<128||(O=A[M.pos++],D|=(127&O)<<3,O<128)||(O=A[M.pos++],D|=(127&O)<<10,O<128)||(O=A[M.pos++],D|=(127&O)<<17,O<128)||(O=A[M.pos++],D|=(127&O)<<24,O<128)||(O=A[M.pos++],D|=(1&O)<<31,O<128))return Wl(x,D,b);throw new Error("Expected varint not more than 10 bytes")}(u,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&Kf?Kf.decode(this.buf.subarray(n,t)):function(u,f,x){let b="",M=f;for(;M<x;){const A=u[M];let D,O,N,U=null,q=A>239?4:A>223?3:A>191?2:1;if(M+q>x)break;q===1?A<128&&(U=A):q===2?(D=u[M+1],(192&D)==128&&(U=(31&A)<<6|63&D,U<=127&&(U=null))):q===3?(D=u[M+1],O=u[M+2],(192&D)==128&&(192&O)==128&&(U=(15&A)<<12|(63&D)<<6|63&O,(U<=2047||U>=55296&&U<=57343)&&(U=null))):q===4&&(D=u[M+1],O=u[M+2],N=u[M+3],(192&D)==128&&(192&O)==128&&(192&N)==128&&(U=(15&A)<<18|(63&D)<<12|(63&O)<<6|63&N,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,q=1):U>65535&&(U-=65536,b+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),b+=String.fromCharCode(U),M+=q}return b}(this.buf,n,t)}readBytes(){const t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n}readPackedVarint(t=[],n){const u=this.readPackedEnd();for(;this.pos<u;)t.push(this.readVarint(n));return t}readPackedSVarint(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const n=7&t;if(n===0)for(;this.buf[this.pos++]>127;);else if(n===2)this.pos=this.readVarint()+this.pos;else if(n===5)this.pos+=4;else{if(n!==1)throw new Error(`Unimplemented type: ${n}`);this.pos+=8}}writeTag(t,n){this.writeVarint(t<<3|n)}realloc(t){let n=this.length||16;for(;n<this.pos+t;)n*=2;if(n!==this.length){const u=new Uint8Array(n);u.set(this.buf),this.buf=u,this.dataView=new DataView(u.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Xd),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Xd),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?function(n,u){let f,x;if(n>=0?(f=n%4294967296|0,x=n/4294967296|0):(f=~(-n%4294967296),x=~(-n/4294967296),4294967295^f?f=f+1|0:(f=0,x=x+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(b,M,A){A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,b>>>=7,A.buf[A.pos++]=127&b|128,A.buf[A.pos]=127&(b>>>=7)}(f,0,u),function(b,M){const A=(7&b)<<4;M.buf[M.pos++]|=A|((b>>>=3)?128:0),b&&(M.buf[M.pos++]=127&b|((b>>>=7)?128:0),b&&(M.buf[M.pos++]=127&b|((b>>>=7)?128:0),b&&(M.buf[M.pos++]=127&b|((b>>>=7)?128:0),b&&(M.buf[M.pos++]=127&b|((b>>>=7)?128:0),b&&(M.buf[M.pos++]=127&b)))))}(x,u)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const n=this.pos;this.pos=function(f,x,b){for(let M,A,D=0;D<x.length;D++){if(M=x.charCodeAt(D),M>55295&&M<57344){if(!A){M>56319||D+1===x.length?(f[b++]=239,f[b++]=191,f[b++]=189):A=M;continue}if(M<56320){f[b++]=239,f[b++]=191,f[b++]=189,A=M;continue}M=A-55296<<10|M-56320|65536,A=null}else A&&(f[b++]=239,f[b++]=191,f[b++]=189,A=null);M<128?f[b++]=M:(M<2048?f[b++]=M>>6|192:(M<65536?f[b++]=M>>12|224:(f[b++]=M>>18|240,f[b++]=M>>12&63|128),f[b++]=M>>6&63|128),f[b++]=63&M|128)}return b}(this.buf,t,this.pos);const u=this.pos-n;u>=128&&wa(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const n=t.length;this.writeVarint(n),this.realloc(n);for(let u=0;u<n;u++)this.buf[this.pos++]=t[u]}writeRawMessage(t,n){this.pos++;const u=this.pos;t(n,this);const f=this.pos-u;f>=128&&wa(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f}writeMessage(t,n,u){this.writeTag(t,2),this.writeRawMessage(n,u)}writePackedVarint(t,n){n.length&&this.writeMessage(t,hm,n)}writePackedSVarint(t,n){n.length&&this.writeMessage(t,Za,n)}writePackedBoolean(t,n){n.length&&this.writeMessage(t,vg,n)}writePackedFloat(t,n){n.length&&this.writeMessage(t,dm,n)}writePackedDouble(t,n){n.length&&this.writeMessage(t,fm,n)}writePackedFixed32(t,n){n.length&&this.writeMessage(t,Kl,n)}writePackedSFixed32(t,n){n.length&&this.writeMessage(t,Yd,n)}writePackedFixed64(t,n){n.length&&this.writeMessage(t,Qf,n)}writePackedSFixed64(t,n){n.length&&this.writeMessage(t,Wu,n)}writeBytesField(t,n){this.writeTag(t,2),this.writeBytes(n)}writeFixed32Field(t,n){this.writeTag(t,5),this.writeFixed32(n)}writeSFixed32Field(t,n){this.writeTag(t,5),this.writeSFixed32(n)}writeFixed64Field(t,n){this.writeTag(t,1),this.writeFixed64(n)}writeSFixed64Field(t,n){this.writeTag(t,1),this.writeSFixed64(n)}writeVarintField(t,n){this.writeTag(t,0),this.writeVarint(n)}writeSVarintField(t,n){this.writeTag(t,0),this.writeSVarint(n)}writeStringField(t,n){this.writeTag(t,2),this.writeString(n)}writeFloatField(t,n){this.writeTag(t,5),this.writeFloat(n)}writeDoubleField(t,n){this.writeTag(t,1),this.writeDouble(n)}writeBooleanField(t,n){this.writeVarintField(t,+n)}}function Wl(r,t,n){return n?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function wa(r,t,n){const u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(u);for(let f=n.pos-1;f>=r;f--)n.buf[f+u]=n.buf[f]}function hm(r,t){for(let n=0;n<r.length;n++)t.writeVarint(r[n])}function Za(r,t){for(let n=0;n<r.length;n++)t.writeSVarint(r[n])}function dm(r,t){for(let n=0;n<r.length;n++)t.writeFloat(r[n])}function fm(r,t){for(let n=0;n<r.length;n++)t.writeDouble(r[n])}function vg(r,t){for(let n=0;n<r.length;n++)t.writeBoolean(r[n])}function Kl(r,t){for(let n=0;n<r.length;n++)t.writeFixed32(r[n])}function Yd(r,t){for(let n=0;n<r.length;n++)t.writeSFixed32(r[n])}function Qf(r,t){for(let n=0;n<r.length;n++)t.writeFixed64(r[n])}function Wu(r,t){for(let n=0;n<r.length;n++)t.writeSFixed64(r[n])}function pm(r,t,n){r===1&&n.readMessage(mm,t)}function mm(r,t,n){if(r===3){const{id:u,bitmap:f,width:x,height:b,left:M,top:A,advance:D}=n.readMessage(gm,{});t.push({id:u,bitmap:new Zc({width:x+6,height:b+6},f),metrics:{width:x,height:b,left:M,top:A,advance:D}})}}function gm(r,t,n){r===1?t.id=n.readVarint():r===2?t.bitmap=n.readBytes():r===3?t.width=n.readVarint():r===4?t.height=n.readVarint():r===5?t.left=n.readSVarint():r===6?t.top=n.readSVarint():r===7&&(t.advance=n.readVarint())}function Wd(r){let t=0,n=0;for(const b of r)t+=b.w*b.h,n=Math.max(n,b.w);r.sort((b,M)=>M.h-b.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let f=0,x=0;for(const b of r)for(let M=u.length-1;M>=0;M--){const A=u[M];if(!(b.w>A.w||b.h>A.h)){if(b.x=A.x,b.y=A.y,x=Math.max(x,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===A.w&&b.h===A.h){const D=u.pop();D&&M<u.length&&(u[M]=D)}else b.h===A.h?(A.x+=b.w,A.w-=b.w):b.w===A.w?(A.y+=b.h,A.h-=b.h):(u.push({x:A.x+b.w,y:A.y,w:A.w-b.w,h:b.h}),A.y+=b.h,A.h-=b.h);break}}return{w:f,h:x,fill:t/(f*x)||0}}class Gh{constructor(t,{pixelRatio:n,version:u,stretchX:f,stretchY:x,content:b,textFitWidth:M,textFitHeight:A}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=f,this.stretchY=x,this.content=b,this.version=u,this.textFitWidth=M,this.textFitHeight=A}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ym{constructor(t,n){const u={},f={};this.haveRenderCallbacks=[];const x=[];this.addImages(t,u,x),this.addImages(n,f,x);const{w:b,h:M}=Wd(x),A=new jr({width:b||1,height:M||1});for(const D in t){const O=t[D],N=u[D].paddedRect;jr.copy(O.data,A,{x:0,y:0},{x:N.x+1,y:N.y+1},O.data)}for(const D in n){const O=n[D],N=f[D].paddedRect,U=N.x+1,q=N.y+1,H=O.data.width,Q=O.data.height;jr.copy(O.data,A,{x:0,y:0},{x:U,y:q},O.data),jr.copy(O.data,A,{x:0,y:Q-1},{x:U,y:q-1},{width:H,height:1}),jr.copy(O.data,A,{x:0,y:0},{x:U,y:q+Q},{width:H,height:1}),jr.copy(O.data,A,{x:H-1,y:0},{x:U-1,y:q},{width:1,height:Q}),jr.copy(O.data,A,{x:0,y:0},{x:U+H,y:q},{width:1,height:Q})}this.image=A,this.iconPositions=u,this.patternPositions=f}addImages(t,n,u){for(const f in t){const x=t[f],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};u.push(b),n[f]=new Gh(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,n){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),n),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),n)}patchUpdatedImage(t,n,u){if(!t||!n||t.version===n.version)return;t.version=n.version;const[f,x]=t.tl;u.update(n.data,void 0,{x:f,y:x})}}var Ql;wt("ImagePosition",Gh),wt("ImageAtlas",ym),w.ao=void 0,(Ql=w.ao||(w.ao={}))[Ql.none=0]="none",Ql[Ql.horizontal=1]="horizontal",Ql[Ql.vertical=2]="vertical",Ql[Ql.horizontalOnly=3]="horizontalOnly";class Zh{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,n,u){const f=new Zh;return f.scale=t||1,f.fontStack=n,f.verticalAlign=u||"bottom",f}static forImage(t,n){const u=new Zh;return u.imageName=t,u.verticalAlign=n||"bottom",u}}class Jc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){const u=new Jc;for(let f=0;f<t.sections.length;f++){const x=t.sections[f];x.image?u.addImageSection(x):u.addTextSection(x,n)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let n="";for(let u=0;u<t.length;u++){const f=t.charCodeAt(u+1)||null,x=t.charCodeAt(u-1)||null;n+=f&&Ru(f)&&!vo[t[u+1]]||x&&Ru(x)&&!vo[t[u-1]]||!vo[t[u]]?t[u]:vo[t[u]]}return n}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&ll[this.text.charCodeAt(u)];u++)t++;let n=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&ll[this.text.charCodeAt(u)];u--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){const u=new Jc;return u.text=this.text.substring(t,n),u.sectionIndex=this.sectionIndex.slice(t,n),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}getMaxImageSize(t){let n=0,u=0;for(let f=0;f<this.length();f++){const x=this.getSection(f);if(x.imageName){const b=t[x.imageName];if(!b)continue;const M=b.displaySize;n=Math.max(n,M[0]),u=Math.max(u,M[1])}}return{maxImageWidth:n,maxImageHeight:u}}addTextSection(t,n){this.text+=t.text,this.sections.push(Zh.forText(t.scale,t.fontStack||n,t.verticalAlign));const u=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(u)}addImageSection(t){const n=t.image?t.image.name:"";if(n.length===0)return void ln("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Zh.forImage(n,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ln("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qh(r,t,n,u,f,x,b,M,A,D,O,N,U,q,H){const Q=Jc.fromFeature(r,f);let ie;N===w.ao.vertical&&Q.verticalizePunctuation();const{processBidirectionalText:oe,processStyledBidirectionalText:Me}=Tr;if(oe&&Q.sections.length===1){ie=[];const Be=oe(Q.toString(),Ku(Q,D,x,t,u,q));for(const $e of Be){const nt=new Jc;nt.text=$e,nt.sections=Q.sections;for(let vt=0;vt<$e.length;vt++)nt.sectionIndex.push(0);ie.push(nt)}}else if(Me){ie=[];const Be=Me(Q.text,Q.sectionIndex,Ku(Q,D,x,t,u,q));for(const $e of Be){const nt=new Jc;nt.text=$e[0],nt.sectionIndex=$e[1],nt.sections=Q.sections,ie.push(nt)}}else ie=function(Be,$e){const nt=[],vt=Be.text;let pt=0;for(const yt of $e)nt.push(Be.substring(pt,yt)),pt=yt;return pt<vt.length&&nt.push(Be.substring(pt,vt.length)),nt}(Q,Ku(Q,D,x,t,u,q));const pe=[],ve={positionedLines:pe,text:Q.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(Be,$e,nt,vt,pt,yt,It,xt,_t,We,jt,Ut){let Lt=0,At=0,ti=0,Pi=0;const $i=xt==="right"?1:xt==="left"?0:.5,On=fn/Ut;let Vr=0;for(const Ji of pt){Ji.trim();const wn=Ji.getMaxScale(),ur={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Vr]=ur;const Kn=ur.positionedGlyphs;let hr=0;if(!Ji.length()){At+=yt,++Vr;continue}const Sa=xm(vt,Ji,On);for(let Ar=0;Ar<Ji.length();Ar++){const Tn=Ji.getSection(Ar),Zn=Ji.getSectionIndex(Ar),Sn=Ji.getCharCode(Ar),Mn=np(_t,jt,Sn);let ki;if(Tn.imageName){if(Be.iconsInText=!0,Tn.scale=Tn.scale*On,ki=bm(Tn,Mn,wn,Sa,vt),!ki)continue;hr=Math.max(hr,ki.imageOffset)}else if(ki=xg(Tn,Sn,Mn,Sa,$e,nt),!ki)continue;const{rect:ds,metrics:nh,baselineOffset:Ma}=ki;Kn.push({glyph:Sn,imageName:Tn.imageName,x:Lt,y:At+Ma+-17,vertical:Mn,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:Zn,metrics:nh,rect:ds}),Mn?(Be.verticalizable=!0,Lt+=(Tn.imageName?nh.advance:fn)*Tn.scale+We):Lt+=nh.advance*Tn.scale+We}Kn.length!==0&&(ti=Math.max(Lt-We,ti),bg(Kn,0,Kn.length-1,$i)),Lt=0,ur.lineOffset=Math.max(hr,(wn-1)*fn);const Qn=yt*wn+hr;At+=Qn,Pi=Math.max(Qn,Pi),++Vr}const{horizontalAlign:Bn,verticalAlign:cr}=Qd(It);(function(Ji,wn,ur,Kn,hr,Sa,Qn,Ar,Tn){const Zn=(wn-ur)*hr;let Sn=0;Sn=Sa!==Qn?-Ar*Kn- -17:-Kn*Tn*Qn+.5*Qn;for(const Mn of Ji)for(const ki of Mn.positionedGlyphs)ki.x+=Zn,ki.y+=Sn})(Be.positionedLines,$i,Bn,cr,ti,Pi,yt,At,pt.length),Be.top+=-cr*At,Be.bottom=Be.top+At,Be.left+=-Bn*ti,Be.right=Be.left+ti}(ve,t,n,u,ie,b,M,A,N,D,U,H),!function(Be){for(const $e of Be)if($e.positionedGlyphs.length!==0)return!1;return!0}(pe)&&ve}const ll={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kd={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},_m={40:!0};function Jf(r,t,n,u,f,x){if(t.imageName){const b=u[t.imageName];return b?b.displaySize[0]*t.scale*fn/x+f:0}{const b=n[t.fontStack],M=b&&b[r];return M?M.metrics.advance*t.scale+f:0}}function ep(r,t,n,u){const f=Math.pow(r-t,2);return u?r<t?f/2:2*f:f+Math.abs(n)*n}function vm(r,t,n){let u=0;return r===10&&(u-=1e4),n&&(u+=150),r!==40&&r!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function tp(r,t,n,u,f,x){let b=null,M=ep(t,n,f,x);for(const A of u){const D=ep(t-A.x,n,f,x)+A.badness;D<=M&&(b=A,M=D)}return{index:r,x:t,priorBreak:b,badness:M}}function ip(r){return r?ip(r.priorBreak).concat(r.index):[]}function Ku(r,t,n,u,f,x){if(!r)return[];const b=[],M=function(N,U,q,H,Q,ie){let oe=0;for(let Me=0;Me<N.length();Me++){const pe=N.getSection(Me);oe+=Jf(N.getCharCode(Me),pe,H,Q,U,ie)}return oe/Math.max(1,Math.ceil(oe/q))}(r,t,n,u,f,x),A=r.text.indexOf("")>=0;let D=0;for(let N=0;N<r.length();N++){const U=r.getSection(N),q=r.getCharCode(N);if(ll[q]||(D+=Jf(q,U,u,f,t,x)),N<r.length()-1){const H=!((O=q)<11904)&&(!!ci["CJK Compatibility Forms"](O)||!!ci["CJK Compatibility"](O)||!!ci["CJK Strokes"](O)||!!ci["CJK Symbols and Punctuation"](O)||!!ci["Enclosed CJK Letters and Months"](O)||!!ci["Halfwidth and Fullwidth Forms"](O)||!!ci["Ideographic Description Characters"](O)||!!ci["Vertical Forms"](O)||Wo.test(String.fromCodePoint(O)));(Kd[q]||H||U.imageName||N!==r.length()-2&&_m[r.getCharCode(N+1)])&&b.push(tp(N+1,D,M,b,vm(q,r.getCharCode(N+1),H&&A),!1))}}var O;return ip(tp(r.length(),D,M,b,0,!0))}function Qd(r){let t=.5,n=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function xm(r,t,n){const u=t.getMaxScale()*fn,{maxImageWidth:f,maxImageHeight:x}=t.getMaxImageSize(r),b=Math.max(u,x*n);return{verticalLineContentWidth:Math.max(u,f*n),horizontalLineContentHeight:b}}function qi(r){switch(r){case"top":return 0;case"center":return .5;default:return 1}}function np(r,t,n){return!(r===w.ao.horizontal||!t&&!Nc(n)||t&&(ll[n]||(u=n,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(u)))));var u}function xg(r,t,n,u,f,x){const b=x[r.fontStack],M=function(D,O,N,U){if(D&&D.rect)return D;const q=O[N.fontStack],H=q&&q[U];return H?{rect:null,metrics:H.metrics}:null}(b&&b[t],f,r,t);if(M===null)return null;let A;if(n)A=u.verticalLineContentWidth-r.scale*fn;else{const D=qi(r.verticalAlign);A=(u.horizontalLineContentHeight-r.scale*fn)*D}return{rect:M.rect,metrics:M.metrics,baselineOffset:A}}function bm(r,t,n,u,f){const x=f[r.imageName];if(!x)return null;const b=x.paddedRect,M=x.displaySize,A={width:M[0],height:M[1],left:1,top:-3,advance:t?M[1]:M[0]};let D;if(t)D=u.verticalLineContentWidth-M[1]*r.scale;else{const O=qi(r.verticalAlign);D=(u.horizontalLineContentHeight-M[1]*r.scale)*O}return{rect:b,metrics:A,baselineOffset:D,imageOffset:(t?M[0]:M[1])*r.scale-fn*n}}function bg(r,t,n,u){if(u===0)return;const f=r[n],x=(r[n].x+f.metrics.advance*f.scale)*u;for(let b=t;b<=n;b++)r[b].x-=x}function wg(r,t,n){const{horizontalAlign:u,verticalAlign:f}=Qd(n),x=t[0]-r.displaySize[0]*u,b=t[1]-r.displaySize[1]*f;return{image:r,top:b,bottom:b+r.displaySize[1],left:x,right:x+r.displaySize[0]}}function wm(r){var t,n;let u=r.left,f=r.top,x=r.right-u,b=r.bottom-f;const M=(t=r.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",A=(n=r.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",D=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(A==="proportional"){if(M==="stretchOnly"&&x/b<D||M==="proportional"){const O=Math.ceil(b*D);u*=O/x,x=O}}else if(M==="proportional"&&A==="stretchOnly"&&D!==0&&x/b>D){const O=Math.ceil(x/D);f*=O/b,b=O}return{x1:u,y1:f,x2:u+x,y2:f+b}}function $h(r,t,n,u,f,x){const b=r.image;let M;if(b.content){const ie=b.content,oe=b.pixelRatio||1;M=[ie[0]/oe,ie[1]/oe,b.displaySize[0]-ie[2]/oe,b.displaySize[1]-ie[3]/oe]}const A=t.left*x,D=t.right*x;let O,N,U,q;n==="width"||n==="both"?(q=f[0]+A-u[3],N=f[0]+D+u[1]):(q=f[0]+(A+D-b.displaySize[0])/2,N=q+b.displaySize[0]);const H=t.top*x,Q=t.bottom*x;return n==="height"||n==="both"?(O=f[1]+H-u[0],U=f[1]+Q+u[2]):(O=f[1]+(H+Q-b.displaySize[1])/2,U=O+b.displaySize[1]),{image:b,top:O,right:N,bottom:U,left:q,collisionPadding:M}}const Ta=128,xo=32640;function Hh(r,t){const{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new ji(r+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=n;let x=0;for(;x<u.length&&u[x]<=r;)x++;x=Math.max(0,x-1);let b=x;for(;b<u.length&&u[b]<r+1;)b++;b=Math.min(u.length-1,b);const M=u[x],A=u[b];return n.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:A,interpolationType:f}:{kind:"camera",minZoom:M,maxZoom:A,minSize:n.evaluate(new ji(M)),maxSize:n.evaluate(new ji(A)),interpolationType:f}}}function Xh(r,t,n){let u="never";const f=r.get(t);return f?u=f:r.get(n)&&(u="always"),u}const eu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qa(r,t,n,u,f,x,b,M,A,D,O,N,U){const q=M?Math.min(xo,Math.round(M[0])):0,H=M?Math.min(xo,Math.round(M[1])):0;r.emplaceBack(t,n,Math.round(32*u),Math.round(32*f),x,b,(q<<1)+(A?1:0),H,16*D,16*O,256*N,256*U)}function tu(r,t,n){r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n)}function Tg(r){for(const t of r.sections)if(Ih(t.text))return!0;return!1}class Jd{constructor(t){this.layoutVertexArray=new gt,this.indexArray=new Ci,this.programConfigurations=t,this.segments=new Wt,this.dynamicLayoutVertexArray=new tt,this.opacityVertexArray=new zt,this.hasVisibleVertices=!1,this.placedSymbolArray=new W}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wf.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,$d.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,eu,!0),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wt("SymbolBuffers",Jd);class ef{constructor(t,n,u){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new u,this.segments=new Wt,this.collisionVertexArray=new _i}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wt("CollisionBuffers",ef);class iu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hh(this.zoom,n["text-size"]),this.iconSizeData=Hh(this.zoom,n["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),x=u.get("symbol-z-order");this.canOverlap=Xh(u,"text-overlap","text-allow-overlap")!=="never"||Xh(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(b=>w.ao[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID}createArrays(){this.text=new Jd(new vn(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Jd(new vn(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new ae,this.lineVertexArray=new le,this.symbolInstances=new ne,this.textAnchorOffsets=new ue}calculateGlyphDependencies(t,n,u,f,x){for(let b=0;b<t.length;b++)if(n[t.charCodeAt(b)]=!0,(u||f)&&x){const M=vo[t.charAt(b)];M&&(n[M.charCodeAt(0)]=!0)}}populate(t,n,u){const f=this.layers[0],x=f.layout,b=x.get("text-font"),M=x.get("text-field"),A=x.get("icon-image"),D=(M.value.kind!=="constant"||M.value.value instanceof Rn&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),O=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,N=x.get("symbol-sort-key");if(this.features=[],!D&&!O)return;const U=n.iconDependencies,q=n.glyphDependencies,H=n.availableImages,Q=new ji(this.zoom,{globalState:this.globalState});for(const{feature:ie,id:oe,index:Me,sourceLayerIndex:pe}of t){const ve=f._featureFilter.needGeometry,Be=va(ie,ve);if(!f._featureFilter.filter(Q,Be,u))continue;let $e,nt;if(ve||(Be.geometry=Zi(ie)),D){const pt=f.getValueAndResolveTokens("text-field",Be,u,H),yt=Rn.factory(pt),It=this.hasRTLText=this.hasRTLText||Tg(yt);(!It||Tr.getRTLTextPluginStatus()==="unavailable"||It&&Tr.isParsed())&&($e=Yl(yt,f,Be))}if(O){const pt=f.getValueAndResolveTokens("icon-image",Be,u,H);nt=pt instanceof rr?pt:rr.fromString(pt)}if(!$e&&!nt)continue;const vt=this.sortFeaturesByKey?N.evaluate(Be,{},u):void 0;if(this.features.push({id:oe,text:$e,icon:nt,index:Me,sourceLayerIndex:pe,geometry:Be.geometry,properties:ie.properties,type:Wc.types[ie.type],sortKey:vt}),nt&&(U[nt.name]=!0),$e){const pt=b.evaluate(Be,{},u).join(","),yt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(w.ao.vertical)>=0;for(const It of $e.sections)if(It.image)U[It.image.name]=!0;else{const xt=Ba($e.toString()),_t=It.fontStack||pt,We=q[_t]=q[_t]||{};this.calculateGlyphDependencies(It.text,We,yt,this.allowVerticalPlacement,xt)}}}x.get("symbol-placement")==="line"&&(this.features=function(ie){const oe={},Me={},pe=[];let ve=0;function Be(pt){pe.push(ie[pt]),ve++}function $e(pt,yt,It){const xt=Me[pt];return delete Me[pt],Me[yt]=xt,pe[xt].geometry[0].pop(),pe[xt].geometry[0]=pe[xt].geometry[0].concat(It[0]),xt}function nt(pt,yt,It){const xt=oe[yt];return delete oe[yt],oe[pt]=xt,pe[xt].geometry[0].shift(),pe[xt].geometry[0]=It[0].concat(pe[xt].geometry[0]),xt}function vt(pt,yt,It){const xt=It?yt[0][yt[0].length-1]:yt[0][0];return`${pt}:${xt.x}:${xt.y}`}for(let pt=0;pt<ie.length;pt++){const yt=ie[pt],It=yt.geometry,xt=yt.text?yt.text.toString():null;if(!xt){Be(pt);continue}const _t=vt(xt,It),We=vt(xt,It,!0);if(_t in Me&&We in oe&&Me[_t]!==oe[We]){const jt=nt(_t,We,It),Ut=$e(_t,We,pe[jt].geometry);delete oe[_t],delete Me[We],Me[vt(xt,pe[Ut].geometry,!0)]=Ut,pe[jt].geometry=null}else _t in Me?$e(_t,We,It):We in oe?nt(_t,We,It):(Be(pt),oe[_t]=ve-1,Me[We]=ve-1)}return pe.filter(pt=>pt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,oe)=>ie.sortKey-oe.sortKey)}update(t,n,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){const u=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(n[t.segment+1]),x=t.dist(n[t.segment]);const b={};for(let M=t.segment+1;M<n.length;M++)b[M]={x:n[M].x,y:n[M].y,tileUnitDistanceFromAnchor:f},M<n.length-1&&(f+=n[M+1].dist(n[M]));for(let M=t.segment||0;M>=0;M--)b[M]={x:n[M].x,y:n[M].y,tileUnitDistanceFromAnchor:x},M>0&&(x+=n[M-1].dist(n[M]));for(let M=0;M<n.length;M++){const A=b[M];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,n,u,f,x,b,M,A,D,O,N,U){const q=t.indexArray,H=t.layoutVertexArray,Q=t.segments.prepareSegment(4*n.length,H,q,this.canOverlap?b.sortKey:void 0),ie=this.glyphOffsetArray.length,oe=Q.vertexLength,Me=this.allowVerticalPlacement&&M===w.ao.vertical?Math.PI/2:0,pe=b.text&&b.text.sections;for(let ve=0;ve<n.length;ve++){const{tl:Be,tr:$e,bl:nt,br:vt,tex:pt,pixelOffsetTL:yt,pixelOffsetBR:It,minFontScaleX:xt,minFontScaleY:_t,glyphOffset:We,isSDF:jt,sectionIndex:Ut}=n[ve],Lt=Q.vertexLength,At=We[1];qa(H,A.x,A.y,Be.x,At+Be.y,pt.x,pt.y,u,jt,yt.x,yt.y,xt,_t),qa(H,A.x,A.y,$e.x,At+$e.y,pt.x+pt.w,pt.y,u,jt,It.x,yt.y,xt,_t),qa(H,A.x,A.y,nt.x,At+nt.y,pt.x,pt.y+pt.h,u,jt,yt.x,It.y,xt,_t),qa(H,A.x,A.y,vt.x,At+vt.y,pt.x+pt.w,pt.y+pt.h,u,jt,It.x,It.y,xt,_t),tu(t.dynamicLayoutVertexArray,A,Me),q.emplaceBack(Lt,Lt+2,Lt+1),q.emplaceBack(Lt+1,Lt+2,Lt+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),ve!==n.length-1&&Ut===n[ve+1].sectionIndex||t.programConfigurations.populatePaintArrays(H.length,b,b.index,{},U,pe&&pe[Ut])}t.placedSymbolArray.emplaceBack(A.x,A.y,ie,this.glyphOffsetArray.length-ie,oe,D,O,A.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],M,0,!1,0,N)}_addCollisionDebugVertex(t,n,u,f,x,b){return n.emplaceBack(0,0),t.emplaceBack(u.x,u.y,f,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,n,u,f,x,b,M){const A=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),D=A.vertexLength,O=x.layoutVertexArray,N=x.collisionVertexArray,U=M.anchorX,q=M.anchorY;this._addCollisionDebugVertex(O,N,b,U,q,new R(t,n)),this._addCollisionDebugVertex(O,N,b,U,q,new R(u,n)),this._addCollisionDebugVertex(O,N,b,U,q,new R(u,f)),this._addCollisionDebugVertex(O,N,b,U,q,new R(t,f)),A.vertexLength+=4;const H=x.indexArray;H.emplaceBack(D,D+1),H.emplaceBack(D+1,D+2),H.emplaceBack(D+2,D+3),H.emplaceBack(D+3,D),A.primitiveLength+=4}addDebugCollisionBoxes(t,n,u,f){for(let x=t;x<n;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ef(ei,ol.members,Si),this.iconCollisionBox=new ef(ei,ol.members,Si);for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(t,n,u,f,x,b,M,A,D){const O={};for(let N=n;N<u;N++){const U=t.get(N);O.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},O.textFeatureIndex=U.featureIndex;break}for(let N=f;N<x;N++){const U=t.get(N);O.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},O.verticalTextFeatureIndex=U.featureIndex;break}for(let N=b;N<M;N++){const U=t.get(N);O.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},O.iconFeatureIndex=U.featureIndex;break}for(let N=A;N<D;N++){const U=t.get(N);O.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},O.verticalIconFeatureIndex=U.featureIndex;break}return O}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const u=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){const u=t.placedSymbolArray.get(n),f=u.vertexStartIndex+4*u.numGlyphs;for(let x=u.vertexStartIndex;x<f;x+=4)t.indexArray.emplaceBack(x,x+2,x+1),t.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(t),u=Math.cos(t),f=[],x=[],b=[];for(let M=0;M<this.symbolInstances.length;++M){b.push(M);const A=this.symbolInstances.get(M);f.push(0|Math.round(n*A.anchorX+u*A.anchorY)),x.push(A.featureIndex)}return b.sort((M,A)=>f[M]-f[A]||x[A]-x[M]),b}addToSortKeyRanges(t,n){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===n?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const u=this.symbolInstances.get(n);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((f,x,b)=>{f>=0&&b.indexOf(f)===x&&this.addIndicesForPlacedSymbol(this.text,f)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rp,Tm;wt("SymbolBucket",iu,{omit:["layers","collisionBoxArray","features","compareText"]}),iu.MAX_GLYPHS=65535,iu.addDynamicAttributes=tu;var Yh={get paint(){return Tm=Tm||new Lr({"icon-opacity":new kt(ze.paint_symbol["icon-opacity"]),"icon-color":new kt(ze.paint_symbol["icon-color"]),"icon-halo-color":new kt(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Ct(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ct(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(ze.paint_symbol["text-opacity"]),"text-color":new kt(ze.paint_symbol["text-color"],{runtimeType:En,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new kt(ze.paint_symbol["text-halo-color"]),"text-halo-width":new kt(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(ze.paint_symbol["text-halo-blur"]),"text-translate":new Ct(ze.paint_symbol["text-translate"]),"text-translate-anchor":new Ct(ze.paint_symbol["text-translate-anchor"])})},get layout(){return rp=rp||new Lr({"symbol-placement":new Ct(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Ct(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ct(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ct(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ct(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ct(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ct(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ct(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ct(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(ze.layout_symbol["icon-size"]),"icon-text-fit":new Ct(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ct(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(ze.layout_symbol["icon-image"]),"icon-rotate":new kt(ze.layout_symbol["icon-rotate"]),"icon-padding":new kt(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Ct(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(ze.layout_symbol["icon-offset"]),"icon-anchor":new kt(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ct(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ct(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ct(ze.layout_symbol["text-rotation-alignment"]),"text-field":new kt(ze.layout_symbol["text-field"]),"text-font":new kt(ze.layout_symbol["text-font"]),"text-size":new kt(ze.layout_symbol["text-size"]),"text-max-width":new kt(ze.layout_symbol["text-max-width"]),"text-line-height":new Ct(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(ze.layout_symbol["text-letter-spacing"]),"text-justify":new kt(ze.layout_symbol["text-justify"]),"text-radial-offset":new kt(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ct(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new kt(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new kt(ze.layout_symbol["text-anchor"]),"text-max-angle":new Ct(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Ct(ze.layout_symbol["text-writing-mode"]),"text-rotate":new kt(ze.layout_symbol["text-rotate"]),"text-padding":new Ct(ze.layout_symbol["text-padding"]),"text-keep-upright":new Ct(ze.layout_symbol["text-keep-upright"]),"text-transform":new kt(ze.layout_symbol["text-transform"]),"text-offset":new kt(ze.layout_symbol["text-offset"]),"text-allow-overlap":new Ct(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Ct(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Ct(ze.layout_symbol["text-ignore-placement"]),"text-optional":new Ct(ze.layout_symbol["text-optional"])})}};class ap{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Ka,this.defaultValue=t}evaluate(t){if(t.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wt("FormatSectionOverride",ap,{omit:["defaultValue"]});class Wh extends qr{constructor(t){super(t,Yh)}recalculate(t,n){if(super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const x of u)f.indexOf(x)<0&&f.push(x);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,n,u,f){const x=this.layout.get(t).evaluate(n,{},u,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||Ts(b.value)||!x?x:function(M,A){return A.replace(/{([^{}]+)}/g,(D,O)=>M&&O in M?String(M[O]):"")}(n.properties,x)}createBucket(t){return new iu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Yh.paint.overridableProperties){if(!Wh.hasPaintOverride(this.layout,t))continue;const n=this.paint.get(t),u=new ap(n),f=new Ic(u,n.property.specification);let x=null;x=n.value.kind==="constant"||n.value.kind==="source"?new to("source",f):new zl("composite",f,n.value.zoomStops),this.paint._values[t]=new Ri(n.property,x,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,u){return!(!this.layout||n.isDataDriven()||u.isDataDriven())&&Wh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){const u=t.get("text-field"),f=Yh.paint.properties[n];let x=!1;const b=M=>{for(const A of M)if(f.overrides&&f.overrides.hasOverride(A))return void(x=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Rn)b(u.value.value.sections);else if(u.value.kind==="source"){const M=D=>{x||(D instanceof ca&&Ft(D.value)===Ur?b(D.value.sections):D instanceof jo?b(D.sections):D.eachChild(M))},A=u.value;A._styleExpression&&M(A._styleExpression.expression)}return x}}let Sm;var sp={get paint(){return Sm=Sm||new Lr({"background-color":new Ct(ze.paint_background["background-color"]),"background-pattern":new ma(ze.paint_background["background-pattern"]),"background-opacity":new Ct(ze.paint_background["background-opacity"])})}};class op extends qr{constructor(t){super(t,sp)}}let Mm;var Sg={get paint(){return Mm=Mm||new Lr({"raster-opacity":new Ct(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ct(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ct(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ct(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Ct(ze.paint_raster["raster-saturation"]),"raster-contrast":new Ct(ze.paint_raster["raster-contrast"]),"raster-resampling":new Ct(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Ct(ze.paint_raster["raster-fade-duration"])})}};class Kh extends qr{constructor(t){super(t,Sg)}}class Mg extends qr{constructor(t){super(t,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Em{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const xi={once:!0},Qh=63710088e-1;class js{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new js(Hn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const n=Math.PI/180,u=this.lat*n,f=t.lat*n,x=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((t.lng-this.lng)*n);return Qh*Math.acos(Math.min(x,1))}static convert(t){if(t instanceof js)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new js(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new js(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tf=2*Math.PI*Qh;function lp(r){return tf*Math.cos(r*Math.PI/180)}function nf(r){return(180+r)/360}function Qu(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Jh(r,t){return r/lp(t)}function Jl(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function cp(r,t){return r*lp(Jl(t))}class ed{constructor(t,n,u=0){this.x=+t,this.y=+n,this.z=+u}static fromLngLat(t,n=0){const u=js.convert(t);return new ed(nf(u.lng),Qu(u.lat),Jh(n,u.lat))}toLngLat(){return new js(360*this.x-180,Jl(this.y))}toAltitude(){return cp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/tf*(t=Jl(this.y),1/Math.cos(t*Math.PI/180));var t}}function Cm(r,t,n){var u=2*Math.PI*6378137/256/Math.pow(2,n);return[r*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class rf{constructor(t,n,u){if(!function(f,x,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||x<0||x>=Math.pow(2,f))}(t,n,u))throw new Error(`x=${n}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=n,this.y=u,this.key=Mi(0,t,t,n,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n,u){const f=(b=this.y,M=this.z,A=Cm(256*(x=this.x),256*(b=Math.pow(2,M)-b-1),M),D=Cm(256*(x+1),256*(b+1),M),A[0]+","+A[1]+","+D[0]+","+D[1]);var x,b,M,A,D;const O=function(N,U,q){let H,Q="";for(let ie=N;ie>0;ie--)H=1<<ie-1,Q+=(U&H?1:0)+(q&H?2:0);return Q}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const n=this.z-t.z;return n>0&&t.x===this.x>>n&&t.y===this.y>>n}getTilePoint(t){const n=Math.pow(2,this.z);return new R((t.x*n-this.x)*mt,(t.y*n-this.y)*mt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class up{constructor(t,n){this.wrap=t,this.canonical=n,this.key=Mi(t,n.z,n.z,n.x,n.y)}}class $r{constructor(t,n,u,f,x){if(this.terrainRttPosMatrix32f=null,t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=n,this.canonical=new rf(u,+f,+x),this.key=Mi(n,t,u,f,x)}clone(){return new $r(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?new $r(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $r(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?Mi(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y):Mi(this.wrap*+n,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new $r(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new $r(n,this.wrap,n,u,f),new $r(n,this.wrap,n,u+1,f),new $r(n,this.wrap,n,u,f+1),new $r(n,this.wrap,n,u+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new $r(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new $r(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new up(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new ed(t.x-this.wrap,t.y))}}function Mi(r,t,n,u,f){(r*=2)<0&&(r=-1*r-1);const x=1<<n;return(x*x*r+x*f+u).toString(36)+n.toString(36)+t.toString(36)}function nu(r,t){return t?r.properties[t]:r.id}wt("CanonicalTileID",rf),wt("OverscaledTileID",$r,{omit:["terrainRttPosMatrix32f"]});class zn{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const n=new zn;return n.extend(t(new R(this.minX,this.minY))),n.extend(t(new R(this.maxX,this.minY))),n.extend(t(new R(this.minX,this.maxY))),n.extend(t(new R(this.maxX,this.maxY))),n}static fromPoints(t){const n=new zn;for(const u of t)n.extend(u);return n}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class Am{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){const u=t[n];this._stringToNumber[u]=n,this._numberToString[n]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class af{constructor(t,n,u,f,x){this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=u,t._y=f,this.properties=t.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(t[n]=this[n]);return t}}class sf{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Cs(mt,16,0),this.grid3D=new Cs(mt,16,0),this.featureIndexArray=new be,this.promoteId=n}insert(t,n,u,f,x,b){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,x);const A=b?this.grid3D:this.grid;for(let D=0;D<n.length;D++){const O=n[D],N=[1/0,1/0,-1/0,-1/0];for(let U=0;U<O.length;U++){const q=O[U];N[0]=Math.min(N[0],q.x),N[1]=Math.min(N[1],q.y),N[2]=Math.max(N[2],q.x),N[3]=Math.max(N[3],q.y)}N[0]<mt&&N[1]<mt&&N[2]>=0&&N[3]>=0&&A.insert(M,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Xf(new Qc(this.rawTileData)).layers,this.sourceLayerCoder=new Am(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,n,u,f){this.loadVTLayers();const x=t.params,b=mt/t.tileSize/t.scale,M=io(x.filter),A=t.queryGeometry,D=t.queryPadding*b,O=zn.fromPoints(A),N=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),U=zn.fromPoints(t.cameraQueryGeometry).expandBy(D),q=this.grid3D.query(U.minX,U.minY,U.maxX,U.maxY,(ie,oe,Me,pe)=>function(ve,Be,$e,nt,vt){for(const yt of ve)if(Be<=yt.x&&$e<=yt.y&&nt>=yt.x&&vt>=yt.y)return!0;const pt=[new R(Be,$e),new R(Be,vt),new R(nt,vt),new R(nt,$e)];if(ve.length>2){for(const yt of pt)if(Gc(ve,yt))return!0}for(let yt=0;yt<ve.length-1;yt++)if(Xp(ve[yt],ve[yt+1],pt))return!0;return!1}(t.cameraQueryGeometry,ie-D,oe-D,Me+D,pe+D));for(const ie of q)N.push(ie);N.sort(Pm);const H={};let Q;for(let ie=0;ie<N.length;ie++){const oe=N[ie];if(oe===Q)continue;Q=oe;const Me=this.featureIndexArray.get(oe);let pe=null;this.loadMatchingFeature(H,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,M,x.layers,x.availableImages,n,u,f,(ve,Be,$e)=>(pe||(pe=Zi(ve)),Be.queryIntersectsFeature({queryGeometry:A,feature:ve,featureState:$e,geometry:pe,zoom:this.z,transform:t.transform,pixelsToTileUnits:b,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return H}loadMatchingFeature(t,n,u,f,x,b,M,A,D,O,N){const U=this.bucketLayerIDs[n];if(b&&!U.some(ie=>b.has(ie)))return;const q=this.sourceLayerCoder.decode(u),H=this.vtLayers[q].feature(f);if(x.needGeometry){const ie=va(H,!0);if(!x.filter(new ji(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!x.filter(new ji(this.tileID.overscaledZ),H))return;const Q=this.getId(H,q);for(let ie=0;ie<U.length;ie++){const oe=U[ie];if(b&&!b.has(oe))continue;const Me=A[oe];if(!Me)continue;let pe={};Q&&O&&(pe=O.getState(Me.sourceLayer||"_geojsonTileLayer",Q));const ve=gi({},D[oe]);ve.paint=td(ve.paint,Me.paint,H,pe,M),ve.layout=td(ve.layout,Me.layout,H,pe,M);const Be=!N||N(H,Me,pe);if(!Be)continue;const $e=new af(H,this.z,this.x,this.y,Q);$e.layer=ve;let nt=t[oe];nt===void 0&&(nt=t[oe]=[]),nt.push({featureIndex:f,feature:$e,intersectionZ:Be})}}lookupSymbolFeatures(t,n,u,f,x,b,M,A){const D={};this.loadVTLayers();const O=io(x);for(const N of t)this.loadMatchingFeature(D,u,f,N,O,b,M,A,n);return D}hasLayer(t){for(const n of this.bucketLayerIDs)for(const u of n)if(t===u)return!0;return!1}getId(t,n){var u;let f=t.id;return this.promoteId&&(f=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((u=t.properties)===null||u===void 0)&&u.cluster)&&this.promoteId&&(f=Number(t.properties.cluster_id))),f}}function td(r,t,n,u,f){return Us(r,(x,b)=>{const M=t instanceof Jo?t.get(b):null;return M&&M.evaluate?M.evaluate(n,u,f):M})}function Pm(r,t){return t-r}function hp(r,t,n,u,f){const x=[];for(let b=0;b<r.length;b++){const M=r[b];let A;for(let D=0;D<M.length-1;D++){let O=M[D],N=M[D+1];O.x<t&&N.x<t||(O.x<t?O=new R(t,O.y+(t-O.x)/(N.x-O.x)*(N.y-O.y))._round():N.x<t&&(N=new R(t,O.y+(t-O.x)/(N.x-O.x)*(N.y-O.y))._round()),O.y<n&&N.y<n||(O.y<n?O=new R(O.x+(n-O.y)/(N.y-O.y)*(N.x-O.x),n)._round():N.y<n&&(N=new R(O.x+(n-O.y)/(N.y-O.y)*(N.x-O.x),n)._round()),O.x>=u&&N.x>=u||(O.x>=u?O=new R(u,O.y+(u-O.x)/(N.x-O.x)*(N.y-O.y))._round():N.x>=u&&(N=new R(u,O.y+(u-O.x)/(N.x-O.x)*(N.y-O.y))._round()),O.y>=f&&N.y>=f||(O.y>=f?O=new R(O.x+(f-O.y)/(N.y-O.y)*(N.x-O.x),f)._round():N.y>=f&&(N=new R(O.x+(f-O.y)/(N.y-O.y)*(N.x-O.x),f)._round()),A&&O.equals(A[A.length-1])||(A=[O],x.push(A)),A.push(N)))))}}return x}wt("FeatureIndex",sf,{omit:["rawTileData","sourceLayerCoder"]});class bo extends R{constructor(t,n,u,f){super(t,n),this.angle=u,f!==void 0&&(this.segment=f)}clone(){return new bo(this.x,this.y,this.angle,this.segment)}}function of(r,t,n,u,f){if(t.segment===void 0||n===0)return!0;let x=t,b=t.segment+1,M=0;for(;M>-n/2;){if(b--,b<0)return!1;M-=r[b].dist(x),x=r[b]}M+=r[b].dist(r[b+1]),b++;const A=[];let D=0;for(;M<n/2;){const O=r[b],N=r[b+1];if(!N)return!1;let U=r[b-1].angleTo(O)-O.angleTo(N);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:M,angleDelta:U}),D+=U;M-A[0].distance>u;)D-=A.shift().angleDelta;if(D>f)return!1;b++,M+=O.dist(N)}return!0}function zm(r){let t=0;for(let n=0;n<r.length-1;n++)t+=r[n].dist(r[n+1]);return t}function dp(r,t,n){return r?.6*t*n:0}function Im(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function Dm(r,t,n,u,f,x){const b=dp(n,f,x),M=Im(n,u)*x;let A=0;const D=zm(r)/2;for(let O=0;O<r.length-1;O++){const N=r[O],U=r[O+1],q=N.dist(U);if(A+q>D){const H=(D-A)/q,Q=as.number(N.x,U.x,H),ie=as.number(N.y,U.y,H),oe=new bo(Q,ie,U.angleTo(N),O);return oe._round(),!b||of(r,oe,M,b,t)?oe:void 0}A+=q}}function Eg(r,t,n,u,f,x,b,M,A){const D=dp(u,x,b),O=Im(u,f),N=O*b,U=r[0].x===0||r[0].x===A||r[0].y===0||r[0].y===A;return t-N<t/4&&(t=N+t/4),Rm(r,U?t/2*M%t:(O/2+2*x)*b*M%t,t,D,n,N,U,!1,A)}function Rm(r,t,n,u,f,x,b,M,A){const D=x/2,O=zm(r);let N=0,U=t-n,q=[];for(let H=0;H<r.length-1;H++){const Q=r[H],ie=r[H+1],oe=Q.dist(ie),Me=ie.angleTo(Q);for(;U+n<N+oe;){U+=n;const pe=(U-N)/oe,ve=as.number(Q.x,ie.x,pe),Be=as.number(Q.y,ie.y,pe);if(ve>=0&&ve<A&&Be>=0&&Be<A&&U-D>=0&&U+D<=O){const $e=new bo(ve,Be,Me,H);$e._round(),u&&!of(r,$e,x,u,f)||q.push($e)}}N+=oe}return M||q.length||b||(q=Rm(r,N/2,n,u,f,x,b,!0,A)),q}function cl(r,t,n,u){const f=[],x=r.image,b=x.pixelRatio,M=x.paddedRect.w-2,A=x.paddedRect.h-2;let D={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom};const O=x.stretchX||[[0,M]],N=x.stretchY||[[0,A]],U=(We,jt)=>We+jt[1]-jt[0],q=O.reduce(U,0),H=N.reduce(U,0),Q=M-q,ie=A-H;let oe=0,Me=q,pe=0,ve=H,Be=0,$e=Q,nt=0,vt=ie;if(x.content&&u){const We=x.content,jt=We[2]-We[0],Ut=We[3]-We[1];(x.textFitWidth||x.textFitHeight)&&(D=wm(r)),oe=id(O,0,We[0]),pe=id(N,0,We[1]),Me=id(O,We[0],We[2]),ve=id(N,We[1],We[3]),Be=We[0]-oe,nt=We[1]-pe,$e=jt-Me,vt=Ut-ve}const pt=D.x1,yt=D.y1,It=D.x2-pt,xt=D.y2-yt,_t=(We,jt,Ut,Lt)=>{const At=cf(We.stretch-oe,Me,It,pt),ti=uf(We.fixed-Be,$e,We.stretch,q),Pi=cf(jt.stretch-pe,ve,xt,yt),$i=uf(jt.fixed-nt,vt,jt.stretch,H),On=cf(Ut.stretch-oe,Me,It,pt),Vr=uf(Ut.fixed-Be,$e,Ut.stretch,q),Bn=cf(Lt.stretch-pe,ve,xt,yt),cr=uf(Lt.fixed-nt,vt,Lt.stretch,H),Ji=new R(At,Pi),wn=new R(On,Pi),ur=new R(On,Bn),Kn=new R(At,Bn),hr=new R(ti/b,$i/b),Sa=new R(Vr/b,cr/b),Qn=t*Math.PI/180;if(Qn){const Zn=Math.sin(Qn),Sn=Math.cos(Qn),Mn=[Sn,-Zn,Zn,Sn];Ji._matMult(Mn),wn._matMult(Mn),Kn._matMult(Mn),ur._matMult(Mn)}const Ar=We.stretch+We.fixed,Tn=jt.stretch+jt.fixed;return{tl:Ji,tr:wn,bl:Kn,br:ur,tex:{x:x.paddedRect.x+1+Ar,y:x.paddedRect.y+1+Tn,w:Ut.stretch+Ut.fixed-Ar,h:Lt.stretch+Lt.fixed-Tn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:hr,pixelOffsetBR:Sa,minFontScaleX:$e/b/It,minFontScaleY:vt/b/xt,isSDF:n}};if(u&&(x.stretchX||x.stretchY)){const We=lf(O,Q,q),jt=lf(N,ie,H);for(let Ut=0;Ut<We.length-1;Ut++){const Lt=We[Ut],At=We[Ut+1];for(let ti=0;ti<jt.length-1;ti++)f.push(_t(Lt,jt[ti],At,jt[ti+1]))}}else f.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:A+1}));return f}function id(r,t,n){let u=0;for(const f of r)u+=Math.max(t,Math.min(n,f[1]))-Math.max(t,Math.min(n,f[0]));return u}function lf(r,t,n){const u=[{fixed:-1,stretch:0}];for(const[f,x]of r){const b=u[u.length-1];u.push({fixed:f-b.stretch,stretch:b.stretch}),u.push({fixed:f-b.stretch,stretch:b.stretch+(x-f)})}return u.push({fixed:t+1,stretch:n}),u}function cf(r,t,n,u){return r/t*n+u}function uf(r,t,n,u){return r-t*n/u}wt("Anchor",bo);class Ju{constructor(t,n,u,f,x,b,M,A,D,O){var N;if(this.boxStartIndex=t.length,D){let U=b.top,q=b.bottom;const H=b.collisionPadding;H&&(U-=H[1],q+=H[3]);let Q=q-U;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{const U=!((N=b.image)===null||N===void 0)&&N.content&&(b.image.textFitWidth||b.image.textFitHeight)?wm(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};U.y1=U.y1*M-A[0],U.y2=U.y2*M+A[2],U.x1=U.x1*M-A[3],U.x2=U.x2*M+A[1];const q=b.collisionPadding;if(q&&(U.x1-=q[0]*M,U.y1-=q[1]*M,U.x2+=q[2]*M,U.y2+=q[3]*M),O){const H=new R(U.x1,U.y1),Q=new R(U.x2,U.y1),ie=new R(U.x1,U.y2),oe=new R(U.x2,U.y2),Me=O*Math.PI/180;H._rotate(Me),Q._rotate(Me),ie._rotate(Me),oe._rotate(Me),U.x1=Math.min(H.x,Q.x,ie.x,oe.x),U.x2=Math.max(H.x,Q.x,ie.x,oe.x),U.y1=Math.min(H.y,Q.y,ie.y,oe.y),U.y2=Math.max(H.y,Q.y,ie.y,oe.y)}t.emplaceBack(n.x,n.y,U.x1,U.y1,U.x2,U.y2,u,f,x)}this.boxEndIndex=t.length}}class Cg{constructor(t=[],n=(u,f)=>u<f?-1:u>f?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:u}=this,f=n[t];for(;t>0;){const x=t-1>>1,b=n[x];if(u(f,b)>=0)break;n[t]=b,t=x}n[t]=f}_down(t){const{data:n,compare:u}=this,f=this.length>>1,x=n[t];for(;t<f;){let b=1+(t<<1);const M=b+1;if(M<this.length&&u(n[M],n[b])<0&&(b=M),u(n[b],x)>=0)break;n[t]=n[b],t=b}n[t]=x}}function Ns(r,t=1,n=!1){const u=zn.fromPoints(r[0]),f=Math.min(u.width(),u.height());let x=f/2;const b=new Cg([],fp),{minX:M,minY:A,maxX:D,maxY:O}=u;if(f===0)return new R(M,A);for(let q=M;q<D;q+=f)for(let H=A;H<O;H+=f)b.push(new ru(q+x,H+x,x,r));let N=function(q){let H=0,Q=0,ie=0;const oe=q[0];for(let Me=0,pe=oe.length,ve=pe-1;Me<pe;ve=Me++){const Be=oe[Me],$e=oe[ve],nt=Be.x*$e.y-$e.x*Be.y;Q+=(Be.x+$e.x)*nt,ie+=(Be.y+$e.y)*nt,H+=3*nt}return new ru(Q/H,ie/H,0,q)}(r),U=b.length;for(;b.length;){const q=b.pop();(q.d>N.d||!N.d)&&(N=q,n&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,U)),q.max-N.d<=t||(x=q.h/2,b.push(new ru(q.p.x-x,q.p.y-x,x,r)),b.push(new ru(q.p.x+x,q.p.y-x,x,r)),b.push(new ru(q.p.x-x,q.p.y+x,x,r)),b.push(new ru(q.p.x+x,q.p.y+x,x,r)),U+=4)}return n&&(console.log(`num probes: ${U}`),console.log(`best distance: ${N.d}`)),N.p}function fp(r,t){return t.max-r.max}function ru(r,t,n,u){this.p=new R(r,t),this.h=n,this.d=function(f,x){let b=!1,M=1/0;for(let A=0;A<x.length;A++){const D=x[A];for(let O=0,N=D.length,U=N-1;O<N;U=O++){const q=D[O],H=D[U];q.y>f.y!=H.y>f.y&&f.x<(H.x-q.x)*(f.y-q.y)/(H.y-q.y)+q.x&&(b=!b),M=Math.min(M,kf(f,q,H))}}return(b?1:-1)*Math.sqrt(M)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var lr;w.aE=void 0,(lr=w.aE||(w.aE={}))[lr.center=1]="center",lr[lr.left=2]="left",lr[lr.right=3]="right",lr[lr.top=4]="top",lr[lr.bottom=5]="bottom",lr[lr["top-left"]=6]="top-left",lr[lr["top-right"]=7]="top-right",lr[lr["bottom-left"]=8]="bottom-left",lr[lr["bottom-right"]=9]="bottom-right";const au=Number.POSITIVE_INFINITY;function $a(r,t){return t[1]!==au?function(n,u,f){let x=0,b=0;switch(u=Math.abs(u),f=Math.abs(f),n){case"top-right":case"top-left":case"top":b=f-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-f}switch(n){case"top-right":case"bottom-right":case"right":x=-u;break;case"top-left":case"bottom-left":case"left":x=u}return[x,b]}(r,t[0],t[1]):function(n,u){let f=0,x=0;u<0&&(u=0);const b=u/Math.SQRT2;switch(n){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-u;break;case"top":x=u-7}switch(n){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=u;break;case"right":f=-u}return[f,x]}(r,t[0])}function pp(r,t,n){var u;const f=r.layout,x=(u=f.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(t,{},n);if(x){const M=x.values,A=[];for(let D=0;D<M.length;D+=2){const O=A[D]=M[D],N=M[D+1].map(U=>U*fn);O.startsWith("top")?N[1]-=7:O.startsWith("bottom")&&(N[1]+=7),A[D+1]=N}return new nr(A)}const b=f.get("text-variable-anchor");if(b){let M;M=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},n)*fn,au]:f.get("text-offset").evaluate(t,{},n).map(D=>D*fn);const A=[];for(const D of b)A.push(D,$a(D,M));return new nr(A)}return null}function eh(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ul(r,t,n,u,f,x,b,M,A,D,O,N){let U=x.textMaxSize.evaluate(t,{});U===void 0&&(U=b);const q=r.layers[0].layout,H=q.get("icon-offset").evaluate(t,{},O),Q=Lm(n.horizontal),ie=b/24,oe=r.tilePixelRatio*ie,Me=r.tilePixelRatio*U/24,pe=r.tilePixelRatio*M,ve=r.tilePixelRatio*q.get("symbol-spacing"),Be=q.get("text-padding")*r.tilePixelRatio,$e=function(Ut,Lt,At,ti=1){const Pi=Ut.get("icon-padding").evaluate(Lt,{},At),$i=Pi&&Pi.values;return[$i[0]*ti,$i[1]*ti,$i[2]*ti,$i[3]*ti]}(q,t,O,r.tilePixelRatio),nt=q.get("text-max-angle")/180*Math.PI,vt=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",pt=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",yt=q.get("symbol-placement"),It=ve/2,xt=q.get("icon-text-fit");let _t;u&&xt!=="none"&&(r.allowVerticalPlacement&&n.vertical&&(_t=$h(u,n.vertical,xt,q.get("icon-text-fit-padding"),H,ie)),Q&&(u=$h(u,Q,xt,q.get("icon-text-fit-padding"),H,ie)));const We=O?N.line.getGranularityForZoomLevel(O.z):1,jt=(Ut,Lt)=>{Lt.x<0||Lt.x>=mt||Lt.y<0||Lt.y>=mt||function(At,ti,Pi,$i,On,Vr,Bn,cr,Ji,wn,ur,Kn,hr,Sa,Qn,Ar,Tn,Zn,Sn,Mn,ki,ds,nh,Ma,i){const s=At.addToLineVertexArray(ti,Pi);let d,v,E,I,Z=0,ee=0,_e=0,Ge=0,Je=-1,at=-1;const qe={};let He=ks("");if(At.allowVerticalPlacement&&$i.vertical){const aa=cr.layout.get("text-rotate").evaluate(ki,{},Ma)+90;E=new Ju(Ji,ti,wn,ur,Kn,$i.vertical,hr,Sa,Qn,aa),Bn&&(I=new Ju(Ji,ti,wn,ur,Kn,Bn,Tn,Zn,Qn,aa))}if(On){const aa=cr.layout.get("icon-rotate").evaluate(ki,{}),Fs=cr.layout.get("icon-text-fit")!=="none",ad=cl(On,aa,nh,Fs),hl=Bn?cl(Bn,aa,nh,Fs):void 0;v=new Ju(Ji,ti,wn,ur,Kn,On,Tn,Zn,!1,aa),Z=4*ad.length;const sd=At.iconSizeData;let tc=null;sd.kind==="source"?(tc=[Ta*cr.layout.get("icon-size").evaluate(ki,{})],tc[0]>xo&&ln(`${At.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sd.kind==="composite"&&(tc=[Ta*ds.compositeIconSizes[0].evaluate(ki,{},Ma),Ta*ds.compositeIconSizes[1].evaluate(ki,{},Ma)],(tc[0]>xo||tc[1]>xo)&&ln(`${At.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),At.addSymbols(At.icon,ad,tc,Mn,Sn,ki,w.ao.none,ti,s.lineStartIndex,s.lineLength,-1,Ma),Je=At.icon.placedSymbolArray.length-1,hl&&(ee=4*hl.length,At.addSymbols(At.icon,hl,tc,Mn,Sn,ki,w.ao.vertical,ti,s.lineStartIndex,s.lineLength,-1,Ma),at=At.icon.placedSymbolArray.length-1)}const Kt=Object.keys($i.horizontal);for(const aa of Kt){const Fs=$i.horizontal[aa];if(!d){He=ks(Fs.text);const hl=cr.layout.get("text-rotate").evaluate(ki,{},Ma);d=new Ju(Ji,ti,wn,ur,Kn,Fs,hr,Sa,Qn,hl)}const ad=Fs.positionedLines.length===1;if(_e+=km(At,ti,Fs,Vr,cr,Qn,ki,Ar,s,$i.vertical?w.ao.horizontal:w.ao.horizontalOnly,ad?Kt:[aa],qe,Je,ds,Ma),ad)break}$i.vertical&&(Ge+=km(At,ti,$i.vertical,Vr,cr,Qn,ki,Ar,s,w.ao.vertical,["vertical"],qe,at,ds,Ma));const Xt=d?d.boxStartIndex:At.collisionBoxArray.length,Hi=d?d.boxEndIndex:At.collisionBoxArray.length,ke=E?E.boxStartIndex:At.collisionBoxArray.length,Ie=E?E.boxEndIndex:At.collisionBoxArray.length,Ve=v?v.boxStartIndex:At.collisionBoxArray.length,rt=v?v.boxEndIndex:At.collisionBoxArray.length,Ot=I?I.boxStartIndex:At.collisionBoxArray.length,mi=I?I.boxEndIndex:At.collisionBoxArray.length;let Dt=-1;const Gt=(aa,Fs)=>aa&&aa.circleDiameter?Math.max(aa.circleDiameter,Fs):Fs;Dt=Gt(d,Dt),Dt=Gt(E,Dt),Dt=Gt(v,Dt),Dt=Gt(I,Dt);const dr=Dt>-1?1:0;dr&&(Dt*=i/fn),At.glyphOffsetArray.length>=iu.MAX_GLYPHS&&ln("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ki.sortKey!==void 0&&At.addToSortKeyRanges(At.symbolInstances.length,ki.sortKey);const zi=pp(cr,ki,Ma),[ec,Ag]=function(aa,Fs){const ad=aa.length,hl=Fs?.values;if(hl?.length>0)for(let sd=0;sd<hl.length;sd+=2){const tc=hl[sd+1];aa.emplaceBack(w.aE[hl[sd]],tc[0],tc[1])}return[ad,aa.length]}(At.textAnchorOffsets,zi);At.symbolInstances.emplaceBack(ti.x,ti.y,qe.right>=0?qe.right:-1,qe.center>=0?qe.center:-1,qe.left>=0?qe.left:-1,qe.vertical||-1,Je,at,He,Xt,Hi,ke,Ie,Ve,rt,Ot,mi,wn,_e,Ge,Z,ee,dr,0,hr,Dt,ec,Ag)}(r,Lt,Ut,n,u,f,_t,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,oe,[Be,Be,Be,Be],vt,A,pe,$e,pt,H,t,x,D,O,b)};if(yt==="line")for(const Ut of hp(t.geometry,0,0,mt,mt)){const Lt=rl(Ut,We),At=Eg(Lt,ve,nt,n.vertical||Q,u,24,Me,r.overscaling,mt);for(const ti of At)Q&&th(r,Q.text,It,ti)||jt(Lt,ti)}else if(yt==="line-center"){for(const Ut of t.geometry)if(Ut.length>1){const Lt=rl(Ut,We),At=Dm(Lt,nt,n.vertical||Q,u,24,Me);At&&jt(Lt,At)}}else if(t.type==="Polygon")for(const Ut of El(t.geometry,0)){const Lt=Ns(Ut,16);jt(rl(Ut[0],We,!0),new bo(Lt.x,Lt.y,0))}else if(t.type==="LineString")for(const Ut of t.geometry){const Lt=rl(Ut,We);jt(Lt,new bo(Lt[0].x,Lt[0].y,0))}else if(t.type==="Point")for(const Ut of t.geometry)for(const Lt of Ut)jt([Lt],new bo(Lt.x,Lt.y,0))}function km(r,t,n,u,f,x,b,M,A,D,O,N,U,q,H){const Q=function(Me,pe,ve,Be,$e,nt,vt,pt){const yt=Be.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,It=[];for(const xt of pe.positionedLines)for(const _t of xt.positionedGlyphs){if(!_t.rect)continue;const We=_t.rect||{};let jt=4,Ut=!0,Lt=1,At=0;const ti=($e||pt)&&_t.vertical,Pi=_t.metrics.advance*_t.scale/2;if(pt&&pe.verticalizable&&(At=xt.lineOffset/2-(_t.imageName?-(fn-_t.metrics.width*_t.scale)/2:(_t.scale-1)*fn)),_t.imageName){const Zn=vt[_t.imageName];Ut=Zn.sdf,Lt=Zn.pixelRatio,jt=1/Lt}const $i=$e?[_t.x+Pi,_t.y]:[0,0];let On=$e?[0,0]:[_t.x+Pi+ve[0],_t.y+ve[1]-At],Vr=[0,0];ti&&(Vr=On,On=[0,0]);const Bn=_t.metrics.isDoubleResolution?2:1,cr=(_t.metrics.left-jt)*_t.scale-Pi+On[0],Ji=(-_t.metrics.top-jt)*_t.scale+On[1],wn=cr+We.w/Bn*_t.scale/Lt,ur=Ji+We.h/Bn*_t.scale/Lt,Kn=new R(cr,Ji),hr=new R(wn,Ji),Sa=new R(cr,ur),Qn=new R(wn,ur);if(ti){const Zn=new R(-Pi,Pi- -17),Sn=-Math.PI/2,Mn=12-Pi,ki=new R(22-Mn,-(_t.imageName?Mn:0)),ds=new R(...Vr);Kn._rotateAround(Sn,Zn)._add(ki)._add(ds),hr._rotateAround(Sn,Zn)._add(ki)._add(ds),Sa._rotateAround(Sn,Zn)._add(ki)._add(ds),Qn._rotateAround(Sn,Zn)._add(ki)._add(ds)}if(yt){const Zn=Math.sin(yt),Sn=Math.cos(yt),Mn=[Sn,-Zn,Zn,Sn];Kn._matMult(Mn),hr._matMult(Mn),Sa._matMult(Mn),Qn._matMult(Mn)}const Ar=new R(0,0),Tn=new R(0,0);It.push({tl:Kn,tr:hr,bl:Sa,br:Qn,tex:We,writingMode:pe.writingMode,glyphOffset:$i,sectionIndex:_t.sectionIndex,isSDF:Ut,pixelOffsetTL:Ar,pixelOffsetBR:Tn,minFontScaleX:0,minFontScaleY:0})}return It}(0,n,M,f,x,b,u,r.allowVerticalPlacement),ie=r.textSizeData;let oe=null;ie.kind==="source"?(oe=[Ta*f.layout.get("text-size").evaluate(b,{})],oe[0]>xo&&ln(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(oe=[Ta*q.compositeTextSizes[0].evaluate(b,{},H),Ta*q.compositeTextSizes[1].evaluate(b,{},H)],(oe[0]>xo||oe[1]>xo)&&ln(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,Q,oe,M,x,b,D,t,A.lineStartIndex,A.lineLength,U,H);for(const Me of O)N[Me]=r.text.placedSymbolArray.length-1;return 4*Q.length}function Lm(r){for(const t in r)return r[t];return null}function th(r,t,n,u){const f=r.compareText;if(t in f){const x=f[t];for(let b=x.length-1;b>=0;b--)if(u.dist(x[b])<n)return!0}else f[t]=[];return f[t].push(u),!1}const mp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gp{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,u]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=u>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const x=mp[15&u];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[M]=new Uint32Array(t,4,1);return new gp(M,b,x,t)}constructor(t,n=64,u=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=u,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const x=mp.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,M=t*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-M%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${u}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+M+A,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+M+A),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+M+A,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=t,this.coords[this._pos++]=n,u}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return yp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:M}=this,A=[0,x.length-1,0],D=[];for(;A.length;){const O=A.pop()||0,N=A.pop()||0,U=A.pop()||0;if(N-U<=M){for(let ie=U;ie<=N;ie++){const oe=b[2*ie],Me=b[2*ie+1];oe>=t&&oe<=u&&Me>=n&&Me<=f&&D.push(x[ie])}continue}const q=U+N>>1,H=b[2*q],Q=b[2*q+1];H>=t&&H<=u&&Q>=n&&Q<=f&&D.push(x[q]),(O===0?t<=H:n<=Q)&&(A.push(U),A.push(q-1),A.push(1-O)),(O===0?u>=H:f>=Q)&&(A.push(q+1),A.push(N),A.push(1-O))}return D}within(t,n,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:x,nodeSize:b}=this,M=[0,f.length-1,0],A=[],D=u*u;for(;M.length;){const O=M.pop()||0,N=M.pop()||0,U=M.pop()||0;if(N-U<=b){for(let ie=U;ie<=N;ie++)Bm(x[2*ie],x[2*ie+1],t,n)<=D&&A.push(f[ie]);continue}const q=U+N>>1,H=x[2*q],Q=x[2*q+1];Bm(H,Q,t,n)<=D&&A.push(f[q]),(O===0?t-u<=H:n-u<=Q)&&(M.push(U),M.push(q-1),M.push(1-O)),(O===0?t+u>=H:n+u>=Q)&&(M.push(q+1),M.push(N),M.push(1-O))}return A}}function yp(r,t,n,u,f,x){if(f-u<=n)return;const b=u+f>>1;Om(r,t,b,u,f,x),yp(r,t,n,u,b-1,1-x),yp(r,t,n,b+1,f,1-x)}function Om(r,t,n,u,f,x){for(;f>u;){if(f-u>600){const D=f-u+1,O=n-u+1,N=Math.log(D),U=.5*Math.exp(2*N/3),q=.5*Math.sqrt(N*U*(D-U)/D)*(O-D/2<0?-1:1);Om(r,t,n,Math.max(u,Math.floor(n-O*U/D+q)),Math.min(f,Math.floor(n+(D-O)*U/D+q)),x)}const b=t[2*n+x];let M=u,A=f;for(nd(r,t,u,n),t[2*f+x]>b&&nd(r,t,u,f);M<A;){for(nd(r,t,M,A),M++,A--;t[2*M+x]<b;)M++;for(;t[2*A+x]>b;)A--}t[2*u+x]===b?nd(r,t,u,A):(A++,nd(r,t,A,f)),A<=n&&(u=A+1),n<=A&&(f=A-1)}}function nd(r,t,n,u){_p(r,n,u),_p(t,2*n,2*u),_p(t,2*n+1,2*u+1)}function _p(r,t,n){const u=r[t];r[t]=r[n],r[n]=u}function Bm(r,t,n,u){const f=r-n,x=t-u;return f*f+x*x}var vp;w.cx=void 0,(vp=w.cx||(w.cx={})).create="create",vp.load="load",vp.fullLoad="fullLoad";let rd=null,wo=[];const su=1e3/60,hf="loadTime",xp="fullLoadTime",ih={mark(r){performance.mark(r)},frame(r){const t=r;rd!=null&&wo.push(t-rd),rd=t},clearMetrics(){rd=null,wo=[],performance.clearMeasures(hf),performance.clearMeasures(xp);for(const r in w.cx)performance.clearMarks(w.cx[r])},getPerformanceMetrics(){performance.measure(hf,w.cx.create,w.cx.load),performance.measure(xp,w.cx.create,w.cx.fullLoad);const r=performance.getEntriesByName(hf)[0].duration,t=performance.getEntriesByName(xp)[0].duration,n=wo.length,u=1/(wo.reduce((x,b)=>x+b,0)/n/1e3),f=wo.filter(x=>x>su).reduce((x,b)=>x+(b-su)/su,0);return{loadTime:r,fullLoadTime:t,fps:u,percentDroppedFrames:f/(n+f)*100,totalFrames:n}}};w.$=mt,w.A=Ce,w.B=function([r,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(n),y:r*Math.sin(t)*Math.sin(n),z:r*Math.cos(n)}},w.C=as,w.D=Ct,w.E=Pt,w.F=ji,w.G=La,w.H=function(r){if(pr==null){const t=r.navigator?r.navigator.userAgent:null;pr=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return pr},w.I=Gh,w.J=class{constructor(r,t){this.target=r,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Em(()=>this.process()),this.subscription=ms(this.target,"message",n=>this.receive(n),!1),this.globalScope=Ya(self)?r:window}registerMessageHandler(r,t){this.messageHandlers[r]=t}sendAsync(r,t){return new Promise((n,u)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=t?ms(t.signal,"abort",()=>{x?.unsubscribe(),delete this.resolveRejects[f];const A={id:f,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(A)},xi):null;this.resolveRejects[f]={resolve:A=>{x?.unsubscribe(),n(A)},reject:A=>{x?.unsubscribe(),u(A)}};const b=[],M=Object.assign(Object.assign({},r),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Yo(r.data,b)});this.target.postMessage(M,{transfer:b})})}receive(r){const t=r.data,n=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[n];const u=this.abortControllers[n];return delete this.abortControllers[n],void(u&&u.abort())}if(Ya(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){return c(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[r];return delete this.resolveRejects[r],f?void(t.error?f.reject(Oa(t.error)):f.resolve(Oa(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=Oa(t.data),u=new AbortController;this.abortControllers[r]=u;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,n,u);this.completeTask(r,null,f)}catch(f){this.completeTask(r,f)}})}completeTask(r,t,n){const u=[];delete this.abortControllers[r];const f={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Yo(t):null,data:Yo(n,u)};this.target.postMessage(f,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},w.K=te,w.L=function(){var r=new Ce(16);return Ce!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},w.M=function(r,t,n){var u,f,x,b,M,A,D,O,N,U,q,H,Q=n[0],ie=n[1],oe=n[2];return t===r?(r[12]=t[0]*Q+t[4]*ie+t[8]*oe+t[12],r[13]=t[1]*Q+t[5]*ie+t[9]*oe+t[13],r[14]=t[2]*Q+t[6]*ie+t[10]*oe+t[14],r[15]=t[3]*Q+t[7]*ie+t[11]*oe+t[15]):(f=t[1],x=t[2],b=t[3],M=t[4],A=t[5],D=t[6],O=t[7],N=t[8],U=t[9],q=t[10],H=t[11],r[0]=u=t[0],r[1]=f,r[2]=x,r[3]=b,r[4]=M,r[5]=A,r[6]=D,r[7]=O,r[8]=N,r[9]=U,r[10]=q,r[11]=H,r[12]=u*Q+M*ie+N*oe+t[12],r[13]=f*Q+A*ie+U*oe+t[13],r[14]=x*Q+D*ie+q*oe+t[14],r[15]=b*Q+O*ie+H*oe+t[15]),r},w.N=function(r,t,n){var u=n[0],f=n[1],x=n[2];return r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u,r[3]=t[3]*u,r[4]=t[4]*f,r[5]=t[5]*f,r[6]=t[6]*f,r[7]=t[7]*f,r[8]=t[8]*x,r[9]=t[9]*x,r[10]=t[10]*x,r[11]=t[11]*x,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},w.O=function(r,t,n){var u=t[0],f=t[1],x=t[2],b=t[3],M=t[4],A=t[5],D=t[6],O=t[7],N=t[8],U=t[9],q=t[10],H=t[11],Q=t[12],ie=t[13],oe=t[14],Me=t[15],pe=n[0],ve=n[1],Be=n[2],$e=n[3];return r[0]=pe*u+ve*M+Be*N+$e*Q,r[1]=pe*f+ve*A+Be*U+$e*ie,r[2]=pe*x+ve*D+Be*q+$e*oe,r[3]=pe*b+ve*O+Be*H+$e*Me,r[4]=(pe=n[4])*u+(ve=n[5])*M+(Be=n[6])*N+($e=n[7])*Q,r[5]=pe*f+ve*A+Be*U+$e*ie,r[6]=pe*x+ve*D+Be*q+$e*oe,r[7]=pe*b+ve*O+Be*H+$e*Me,r[8]=(pe=n[8])*u+(ve=n[9])*M+(Be=n[10])*N+($e=n[11])*Q,r[9]=pe*f+ve*A+Be*U+$e*ie,r[10]=pe*x+ve*D+Be*q+$e*oe,r[11]=pe*b+ve*O+Be*H+$e*Me,r[12]=(pe=n[12])*u+(ve=n[13])*M+(Be=n[14])*N+($e=n[15])*Q,r[13]=pe*f+ve*A+Be*U+$e*ie,r[14]=pe*x+ve*D+Be*q+$e*oe,r[15]=pe*b+ve*O+Be*H+$e*Me,r},w.P=R,w.Q=function(r,t){const n={};for(let u=0;u<t.length;u++){const f=t[u];f in r&&(n[f]=r[f])}return n},w.R=jr,w.S=js,w.T=Bs,w.U=Qu,w.V=nf,w.W=Re,w.X=ce,w.Y=Eo,w.Z=$r,w._=c,w.a=K,w.a$=ai,w.a0=function(r,t){var n,u,f,x;if(!r)return t??{};if(!t)return r;const b=Object.assign({},r);if(t.removeAll&&(b.removeAll=!0),t.remove){const M=new Set(b.remove?b.remove.concat(t.remove):t.remove);b.remove=Array.from(M.values())}if(t.add){const M=b.add?b.add.concat(t.add):t.add,A=new Map(M.map(D=>[D.id,D]));b.add=Array.from(A.values())}if(t.update){const M=new Map((n=b.update)===null||n===void 0?void 0:n.map(A=>[A.id,A]));for(const A of t.update){const D=(u=M.get(A.id))!==null&&u!==void 0?u:{id:A.id};A.newGeometry&&(D.newGeometry=A.newGeometry),A.addOrUpdateProperties&&(D.addOrUpdateProperties=((f=D.addOrUpdateProperties)!==null&&f!==void 0?f:[]).concat(A.addOrUpdateProperties)),A.removeProperties&&(D.removeProperties=((x=D.removeProperties)!==null&&x!==void 0?x:[]).concat(A.removeProperties)),A.removeAllProperties&&(D.removeAllProperties=!0),M.set(A.id,D)}b.update=Array.from(M.values())}return b},w.a1=ed,w.a2=zn,w.a3=25,w.a4=rf,w.a5=r=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const u of r){const f=window.document.createElement("source");Ne(u)||(t.crossOrigin="Anonymous"),f.src=u,t.appendChild(f)}})},w.a6=dt,w.a7=function(){return Xn++},w.a8=F,w.a9=iu,w.aA=function(r){let t=1/0,n=1/0,u=-1/0,f=-1/0;for(const x of r)t=Math.min(t,x.x),n=Math.min(n,x.y),u=Math.max(u,x.x),f=Math.max(f,x.y);return[t,n,u,f]},w.aB=fn,w.aC=ye,w.aD=function(r,t,n,u,f=!1){if(!n[0]&&!n[1])return[0,0];const x=f?u==="map"?-r.bearingInRadians:0:u==="viewport"?r.bearingInRadians:0;if(x){const b=Math.sin(x),M=Math.cos(x);n=[n[0]*M-n[1]*b,n[0]*b+n[1]*M]}return[f?n[0]:ye(t,n[0],r.zoom),f?n[1]:ye(t,n[1],r.zoom)]},w.aF=Xh,w.aG=eh,w.aH=Qd,w.aI=gp,w.aJ=yn,w.aK=Nr,w.aL=he,w.aM=Wt,w.aN=Ci,w.aO=Hn,w.aP=Zs,w.aQ=cp,w.aR=lt,w.aS=ut,w.aT=function(r){var t=new Ce(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},w.aU=function(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r},w.aV=function(r,t){var n=t[0],u=t[1],f=t[2],x=n*n+u*u+f*f;return x>0&&(x=1/Math.sqrt(x)),r[0]=t[0]*x,r[1]=t[1]*x,r[2]=t[2]*x,r},w.aW=Tt,w.aX=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]},w.aY=function(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r[3]=t[3]*n[3],r},w.aZ=ht,w.a_=function(r,t,n){const u=t[0]*n[0]+t[1]*n[1]+t[2]*n[2];return u===0?null:(-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2])-n[3])/u},w.aa=io,w.ab=va,w.ac=af,w.ad=function(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,u,f,x)=>{const b=f||x;return t[u]=!b||b.toLowerCase(),""}),t["max-age"]){const n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},w.ae=Co,w.af=function(r){return Math.pow(2,r)},w.ag=Fe,w.ah=Nt,w.ai=85.051129,w.aj=Jh,w.ak=function(r){return Math.log(r)/Math.LN2},w.al=function(r){var t=r[0],n=r[1];return t*t+n*n},w.am=function(r,t){const n=[];for(const u in r)u in t||n.push(u);return n},w.an=function(r,t){let n=0,u=0;if(r.kind==="constant")u=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:f,minZoom:x,maxZoom:b}=r,M=f?Nt(ar.interpolationFactor(f,t,x,b),0,1):0;r.kind==="camera"?u=as.number(r.minSize,r.maxSize,M):n=M}return{uSizeT:n,uSize:u}},w.ap=function(r,{uSize:t,uSizeT:n},{lowerSize:u,upperSize:f}){return r.kind==="source"?u/Ta:r.kind==="composite"?as.number(u/Ta,f/Ta,n):t},w.aq=function(r,t){var n=t[0],u=t[1],f=t[2],x=t[3],b=t[4],M=t[5],A=t[6],D=t[7],O=t[8],N=t[9],U=t[10],q=t[11],H=t[12],Q=t[13],ie=t[14],oe=t[15],Me=n*M-u*b,pe=n*A-f*b,ve=n*D-x*b,Be=u*A-f*M,$e=u*D-x*M,nt=f*D-x*A,vt=O*Q-N*H,pt=O*ie-U*H,yt=O*oe-q*H,It=N*ie-U*Q,xt=N*oe-q*Q,_t=U*oe-q*ie,We=Me*_t-pe*xt+ve*It+Be*yt-$e*pt+nt*vt;return We?(r[0]=(M*_t-A*xt+D*It)*(We=1/We),r[1]=(f*xt-u*_t-x*It)*We,r[2]=(Q*nt-ie*$e+oe*Be)*We,r[3]=(U*$e-N*nt-q*Be)*We,r[4]=(A*yt-b*_t-D*pt)*We,r[5]=(n*_t-f*yt+x*pt)*We,r[6]=(ie*ve-H*nt-oe*pe)*We,r[7]=(O*nt-U*ve+q*pe)*We,r[8]=(b*xt-M*yt+D*vt)*We,r[9]=(u*yt-n*xt-x*vt)*We,r[10]=(H*$e-Q*ve+oe*Me)*We,r[11]=(N*ve-O*$e-q*Me)*We,r[12]=(M*pt-b*It-A*vt)*We,r[13]=(n*It-u*pt+f*vt)*We,r[14]=(Q*pe-H*Be-ie*Me)*We,r[15]=(O*Be-N*pe+U*Me)*We,r):null},w.ar=it,w.as=function(r){return Math.hypot(r[0],r[1])},w.at=function(r){return r[0]=0,r[1]=0,r},w.au=function(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r},w.av=tu,w.aw=Li,w.ax=function(r,t,n,u){const f=t.y-r.y,x=t.x-r.x,b=u.y-n.y,M=u.x-n.x,A=b*x-M*f;if(A===0)return null;const D=(M*(r.y-n.y)-b*(r.x-n.x))/A;return new R(r.x+D*x,r.y+D*f)},w.ay=hp,w.az=Rf,w.b=Wa,w.b$=class extends y{},w.b0=function(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r},w.b1=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]},w.b2=up,w.b3=Mi,w.b4=function(r,t,n,u,f){var x,b=1/Math.tan(t/2);return r[0]=b/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=b,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,f!=null&&f!==1/0?(r[10]=(f+u)*(x=1/(u-f)),r[14]=2*f*u*x):(r[10]=-1,r[14]=-2*u),r},w.b5=function(r){var t=new Ce(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},w.b6=function(r,t,n){var u=Math.sin(n),f=Math.cos(n),x=t[0],b=t[1],M=t[2],A=t[3],D=t[4],O=t[5],N=t[6],U=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=x*f+D*u,r[1]=b*f+O*u,r[2]=M*f+N*u,r[3]=A*f+U*u,r[4]=D*f-x*u,r[5]=O*f-b*u,r[6]=N*f-M*u,r[7]=U*f-A*u,r},w.b7=function(r,t,n){var u=Math.sin(n),f=Math.cos(n),x=t[4],b=t[5],M=t[6],A=t[7],D=t[8],O=t[9],N=t[10],U=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=x*f+D*u,r[5]=b*f+O*u,r[6]=M*f+N*u,r[7]=A*f+U*u,r[8]=D*f-x*u,r[9]=O*f-b*u,r[10]=N*f-M*u,r[11]=U*f-A*u,r},w.b8=function(){const r=new Float32Array(16);return Fe(r),r},w.b9=function(){const r=new Float64Array(16);return Fe(r),r},w.bA=function(r,t){const n=Ke(r,360),u=Ke(t,360),f=u-n,x=u>n?f-360:f+360;return Math.abs(f)<Math.abs(x)?f:x},w.bB=function(r){return r[0]=0,r[1]=0,r[2]=0,r},w.bC=function(r,t,n,u){const f=Math.sqrt(r*r+t*t),x=Math.sqrt(n*n+u*u);r/=f,t/=f,n/=x,u/=x;const b=Math.acos(r*n+t*u);return-t*n+r*u>0?b:-b},w.bD=function(r,t){const n=Ke(r,2*Math.PI),u=Ke(t,2*Math.PI);return Math.min(Math.abs(n-u),Math.abs(n-u+2*Math.PI),Math.abs(n-u-2*Math.PI))},w.bE=function(){const r={},t=ze.$version;for(const n in ze.$root){const u=ze.$root[n];if(u.required){let f=null;f=n==="version"?t:u.type==="array"?[]:{},f!=null&&(r[n]=f)}}return r},w.bF=jc,w.bG=we,w.bH=function r(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let u=0;u<t.length;u++)if(!r(t[u],n[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(const u in t)if(!r(t[u],n[u]))return!1;return!0}return t===n},w.bI=function(r){r=r.slice();const t=Object.create(null);for(let n=0;n<r.length;n++)t[r[n].id]=r[n];for(let n=0;n<r.length;n++)"ref"in r[n]&&(r[n]=si(r[n],t[r[n].ref]));return r},w.bJ=function(r){if(r.type==="custom")return new Mg(r);switch(r.type){case"background":return new op(r);case"circle":return new Wp(r);case"color-relief":return new em(r);case"fill":return new ql(r);case"fill-extrusion":return new vi(r);case"heatmap":return new Ff(r);case"hillshade":return new Kp(r);case"line":return new ba(r);case"raster":return new Kh(r);case"symbol":return new Wh(r)}},w.bK=zr,w.bL=function(r,t){if(!r)return[{command:"setStyle",args:[t]}];let n=[];try{if(!Rt(r.version,t.version))return[{command:"setStyle",args:[t]}];Rt(r.center,t.center)||n.push({command:"setCenter",args:[t.center]}),Rt(r.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),Rt(r.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),Rt(r.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),Rt(r.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),Rt(r.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),Rt(r.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),Rt(r.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),Rt(r.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),Rt(r.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),Rt(r.light,t.light)||n.push({command:"setLight",args:[t.light]}),Rt(r.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),Rt(r.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),Rt(r.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const u={},f=[];(function(b,M,A,D){let O;for(O in M=M||{},b=b||{})Object.prototype.hasOwnProperty.call(b,O)&&(Object.prototype.hasOwnProperty.call(M,O)||Dn(O,A,D));for(O in M)Object.prototype.hasOwnProperty.call(M,O)&&(Object.prototype.hasOwnProperty.call(b,O)?Rt(b[O],M[O])||(b[O].type==="geojson"&&M[O].type==="geojson"&&Oi(b,M,O)?Yt(A,{command:"setGeoJSONSourceData",args:[O,M[O].data]}):Nn(O,M,A,D)):Ii(O,M,A))})(r.sources,t.sources,f,u);const x=[];r.layers&&r.layers.forEach(b=>{"source"in b&&u[b.source]?n.push({command:"removeLayer",args:[b.id]}):x.push(b)}),n=n.concat(f),function(b,M,A){M=M||[];const D=(b=b||[]).map(qt),O=M.map(qt),N=b.reduce(Xi,{}),U=M.reduce(Xi,{}),q=D.slice(),H=Object.create(null);let Q,ie,oe,Me,pe;for(let ve=0,Be=0;ve<D.length;ve++)Q=D[ve],Object.prototype.hasOwnProperty.call(U,Q)?Be++:(Yt(A,{command:"removeLayer",args:[Q]}),q.splice(q.indexOf(Q,Be),1));for(let ve=0,Be=0;ve<O.length;ve++)Q=O[O.length-1-ve],q[q.length-1-ve]!==Q&&(Object.prototype.hasOwnProperty.call(N,Q)?(Yt(A,{command:"removeLayer",args:[Q]}),q.splice(q.lastIndexOf(Q,q.length-Be),1)):Be++,Me=q[q.length-ve],Yt(A,{command:"addLayer",args:[U[Q],Me]}),q.splice(q.length-ve,0,Q),H[Q]=!0);for(let ve=0;ve<O.length;ve++)if(Q=O[ve],ie=N[Q],oe=U[Q],!H[Q]&&!Rt(ie,oe))if(Rt(ie.source,oe.source)&&Rt(ie["source-layer"],oe["source-layer"])&&Rt(ie.type,oe.type)){for(pe in Vt(ie.layout,oe.layout,A,Q,null,"setLayoutProperty"),Vt(ie.paint,oe.paint,A,Q,null,"setPaintProperty"),Rt(ie.filter,oe.filter)||Yt(A,{command:"setFilter",args:[Q,oe.filter]}),Rt(ie.minzoom,oe.minzoom)&&Rt(ie.maxzoom,oe.maxzoom)||Yt(A,{command:"setLayerZoomRange",args:[Q,oe.minzoom,oe.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Vt(ie[pe],oe[pe],A,Q,pe.slice(6),"setPaintProperty"):Rt(ie[pe],oe[pe])||Yt(A,{command:"setLayerProperty",args:[Q,pe,oe[pe]]}));for(pe in oe)Object.prototype.hasOwnProperty.call(oe,pe)&&!Object.prototype.hasOwnProperty.call(ie,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Vt(ie[pe],oe[pe],A,Q,pe.slice(6),"setPaintProperty"):Rt(ie[pe],oe[pe])||Yt(A,{command:"setLayerProperty",args:[Q,pe,oe[pe]]}))}else Yt(A,{command:"removeLayer",args:[Q]}),Me=q[q.lastIndexOf(Q)+1],Yt(A,{command:"addLayer",args:[oe,Me]})}(x,t.layers,n)}catch(u){console.warn("Unable to compute style diff:",u),n=[{command:"setStyle",args:[t]}]}return n},w.bM=function(r){const t=[],n=r.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},w.bN=Us,w.bO=ps,w.bP=class extends Mr{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},w.bQ=dn,w.bR=class extends Mr{constructor(r,t){super(r,t),this.current=Br}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},w.bS=Qi,w.bT=class extends Mr{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},w.bU=class extends Mr{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},w.bV=Ye,w.bW=function(r,t){var n=Math.sin(t),u=Math.cos(t);return r[0]=u,r[1]=n,r[2]=0,r[3]=-n,r[4]=u,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},w.bX=function(r,t,n){var u=t[0],f=t[1],x=t[2];return r[0]=u*n[0]+f*n[3]+x*n[6],r[1]=u*n[1]+f*n[4]+x*n[7],r[2]=u*n[2]+f*n[5]+x*n[8],r},w.bY=function(r,t,n,u,f,x,b){var M=1/(t-n),A=1/(u-f),D=1/(x-b);return r[0]=-2*M,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*D,r[11]=0,r[12]=(t+n)*M,r[13]=(f+u)*A,r[14]=(b+x)*D,r[15]=1,r},w.bZ=class extends Mr{constructor(r,t){super(r,t),this.current=new Array}set(r){if(r!=this.current){this.current=r;const t=new Float32Array(4*r.length);for(let n=0;n<r.length;n++)t[4*n]=r[n].r,t[4*n+1]=r[n].g,t[4*n+2]=r[n].b,t[4*n+3]=r[n].a;this.gl.uniform4fv(this.location,t)}}},w.b_=class extends Mr{constructor(r,t){super(r,t),this.current=new Array}set(r){if(r!=this.current){this.current=r;const t=new Float32Array(r);this.gl.uniform1fv(this.location,t)}}},w.ba=function(){return new Float64Array(16)},w.bb=function(r,t,n){const u=new Float64Array(4);return je(u,r,t-90,n),u},w.bc=function(r,t,n,u){var f,x,b,M,A,D=t[0],O=t[1],N=t[2],U=t[3],q=n[0],H=n[1],Q=n[2],ie=n[3];return(x=D*q+O*H+N*Q+U*ie)<0&&(x=-x,q=-q,H=-H,Q=-Q,ie=-ie),1-x>De?(f=Math.acos(x),b=Math.sin(f),M=Math.sin((1-u)*f)/b,A=Math.sin(u*f)/b):(M=1-u,A=u),r[0]=M*D+A*q,r[1]=M*O+A*H,r[2]=M*N+A*Q,r[3]=M*U+A*ie,r},w.bd=function(r){const t=new Float64Array(9);var n,u,f,x,b,M,A,D,O,N,U,q,H,Q,ie,oe,Me,pe;N=(f=(u=r)[0])*(A=f+f),U=(x=u[1])*A,H=(b=u[2])*A,Q=b*(D=x+x),oe=(M=u[3])*A,Me=M*D,pe=M*(O=b+b),(n=t)[0]=1-(q=x*D)-(ie=b*O),n[3]=U-pe,n[6]=H+Me,n[1]=U+pe,n[4]=1-N-ie,n[7]=Q-oe,n[2]=H-Me,n[5]=Q+oe,n[8]=1-N-q;const ve=Zs(-Math.asin(Nt(t[2],-1,1)));let Be,$e;return Math.hypot(t[5],t[8])<.001?(Be=0,$e=-Zs(Math.atan2(t[3],t[4]))):(Be=Zs(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),$e=Zs(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:Be,pitch:ve+90,bearing:$e}},w.be=function(r,t){return r.roll==t.roll&&r.pitch==t.pitch&&r.bearing==t.bearing},w.bf=ni,w.bg=fo,w.bh=xa,w.bi=Vu,w.bj=Vi,w.bk=Mt,w.bl=St,w.bm=hn,w.bn=function(r,t,n,u,f){return Mt(u,f,Nt((r-t)/(n-t),0,1))},w.bo=Ke,w.bp=function(){return new Float64Array(3)},w.bq=function(r,t,n,u){return r[0]=t[0]+n[0]*u,r[1]=t[1]+n[1]*u,r[2]=t[2]+n[2]*u,r},w.br=je,w.bs=function(r,t,n){var u=n[0],f=n[1],x=n[2],b=t[0],M=t[1],A=t[2],D=f*A-x*M,O=x*b-u*A,N=u*M-f*b,U=f*N-x*O,q=x*D-u*N,H=u*O-f*D,Q=2*n[3];return O*=Q,N*=Q,q*=2,H*=2,r[0]=b+(D*=Q)+(U*=2),r[1]=M+O+q,r[2]=A+N+H,r},w.bt=function(r,t,n){const u=(f=[r[0],r[1],r[2],t[0],t[1],t[2],n[0],n[1],n[2]])[0]*((O=f[8])*(b=f[4])-(M=f[5])*(D=f[7]))+f[1]*(-O*(x=f[3])+M*(A=f[6]))+f[2]*(D*x-b*A);var f,x,b,M,A,D,O;if(u===0)return null;const N=Tt([],[t[0],t[1],t[2]],[n[0],n[1],n[2]]),U=Tt([],[n[0],n[1],n[2]],[r[0],r[1],r[2]]),q=Tt([],[r[0],r[1],r[2]],[t[0],t[1],t[2]]),H=lt([],N,-r[3]);return ut(H,H,lt([],U,-t[3])),ut(H,H,lt([],q,-n[3])),lt(H,H,1/u),H},w.bu=Qh,w.bv=function(){return new Float64Array(4)},w.bw=function(r,t,n,u){var f=[],x=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],x[0]=f[0]*Math.cos(u)-f[1]*Math.sin(u),x[1]=f[0]*Math.sin(u)+f[1]*Math.cos(u),x[2]=f[2],r[0]=x[0]+n[0],r[1]=x[1]+n[1],r[2]=x[2]+n[2],r},w.bx=function(r,t,n,u){var f=[],x=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],x[0]=f[0],x[1]=f[1]*Math.cos(u)-f[2]*Math.sin(u),x[2]=f[1]*Math.sin(u)+f[2]*Math.cos(u),r[0]=x[0]+n[0],r[1]=x[1]+n[1],r[2]=x[2]+n[2],r},w.by=function(r,t,n,u){var f=[],x=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],x[0]=f[2]*Math.sin(u)+f[0]*Math.cos(u),x[1]=f[1],x[2]=f[2]*Math.cos(u)-f[0]*Math.sin(u),r[0]=x[0]+n[0],r[1]=x[1]+n[1],r[2]=x[2]+n[2],r},w.bz=function(r,t,n){var u=Math.sin(n),f=Math.cos(n),x=t[0],b=t[1],M=t[2],A=t[3],D=t[8],O=t[9],N=t[10],U=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=x*f-D*u,r[1]=b*f-O*u,r[2]=M*f-N*u,r[3]=A*f-U*u,r[8]=x*u+D*f,r[9]=b*u+O*f,r[10]=M*u+N*f,r[11]=A*u+U*f,r},w.c=Te,w.c0=Fr,w.c1=class extends a{},w.c2=Nd,w.c3=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},w.c4=jd,w.c5=function(r,t,n){var u=t[0],f=t[1],x=t[2],b=n[3]*u+n[7]*f+n[11]*x+n[15];return r[0]=(n[0]*u+n[4]*f+n[8]*x+n[12])/(b=b||1),r[1]=(n[1]*u+n[5]*f+n[9]*x+n[13])/b,r[2]=(n[2]*u+n[6]*f+n[10]*x+n[14])/b,r},w.c6=class extends Sr{},w.c7=class extends L{},w.c8=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]},w.c9=function(r,t){var n=r[0],u=r[1],f=r[2],x=r[3],b=r[4],M=r[5],A=r[6],D=r[7],O=r[8],N=r[9],U=r[10],q=r[11],H=r[12],Q=r[13],ie=r[14],oe=r[15],Me=t[0],pe=t[1],ve=t[2],Be=t[3],$e=t[4],nt=t[5],vt=t[6],pt=t[7],yt=t[8],It=t[9],xt=t[10],_t=t[11],We=t[12],jt=t[13],Ut=t[14],Lt=t[15];return Math.abs(n-Me)<=De*Math.max(1,Math.abs(n),Math.abs(Me))&&Math.abs(u-pe)<=De*Math.max(1,Math.abs(u),Math.abs(pe))&&Math.abs(f-ve)<=De*Math.max(1,Math.abs(f),Math.abs(ve))&&Math.abs(x-Be)<=De*Math.max(1,Math.abs(x),Math.abs(Be))&&Math.abs(b-$e)<=De*Math.max(1,Math.abs(b),Math.abs($e))&&Math.abs(M-nt)<=De*Math.max(1,Math.abs(M),Math.abs(nt))&&Math.abs(A-vt)<=De*Math.max(1,Math.abs(A),Math.abs(vt))&&Math.abs(D-pt)<=De*Math.max(1,Math.abs(D),Math.abs(pt))&&Math.abs(O-yt)<=De*Math.max(1,Math.abs(O),Math.abs(yt))&&Math.abs(N-It)<=De*Math.max(1,Math.abs(N),Math.abs(It))&&Math.abs(U-xt)<=De*Math.max(1,Math.abs(U),Math.abs(xt))&&Math.abs(q-_t)<=De*Math.max(1,Math.abs(q),Math.abs(_t))&&Math.abs(H-We)<=De*Math.max(1,Math.abs(H),Math.abs(We))&&Math.abs(Q-jt)<=De*Math.max(1,Math.abs(Q),Math.abs(jt))&&Math.abs(ie-Ut)<=De*Math.max(1,Math.abs(ie),Math.abs(Ut))&&Math.abs(oe-Lt)<=De*Math.max(1,Math.abs(oe),Math.abs(Lt))},w.cA=function(r,t){K.REGISTERED_PROTOCOLS[r]=t},w.cB=function(r){delete K.REGISTERED_PROTOCOLS[r]},w.cC=function(r,t){const n={};for(let f=0;f<r.length;f++){const x=t&&t[r[f].id]||Ho(r[f]);t&&(t[r[f].id]=x);let b=n[x];b||(b=n[x]=[]),b.push(r[f])}const u=[];for(const f in n)u.push(n[f]);return u},w.cD=wt,w.cE=Am,w.cF=sf,w.cG=ym,w.cH=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=mt/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const t=r.bucket.layers[0],n=t.layout,u=t._unevaluatedLayout._values,f={layoutIconSize:u["icon-size"].possiblyEvaluate(new ji(r.bucket.zoom+1),r.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new ji(r.bucket.zoom+1),r.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new ji(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=r.bucket.textSizeData;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ji(D),r.canonical),u["text-size"].possiblyEvaluate(new ji(O),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=r.bucket.iconSizeData;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ji(D),r.canonical),u["icon-size"].possiblyEvaluate(new ji(O),r.canonical)]}const x=n.get("text-line-height")*fn,b=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",M=n.get("text-keep-upright"),A=n.get("text-size");for(const D of r.bucket.features){const O=n.get("text-font").evaluate(D,{},r.canonical).join(","),N=A.evaluate(D,{},r.canonical),U=f.layoutTextSize.evaluate(D,{},r.canonical),q=f.layoutIconSize.evaluate(D,{},r.canonical),H={horizontal:{},vertical:void 0},Q=D.text;let ie,oe=[0,0];if(Q){const ve=Q.toString(),Be=n.get("text-letter-spacing").evaluate(D,{},r.canonical)*fn,$e=Ph(ve)?Be:0,nt=n.get("text-anchor").evaluate(D,{},r.canonical),vt=pp(t,D,r.canonical);if(!vt){const xt=n.get("text-radial-offset").evaluate(D,{},r.canonical);oe=xt?$a(nt,[xt*fn,au]):n.get("text-offset").evaluate(D,{},r.canonical).map(_t=>_t*fn)}let pt=b?"center":n.get("text-justify").evaluate(D,{},r.canonical);const yt=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(D,{},r.canonical)*fn:1/0,It=()=>{r.bucket.allowVerticalPlacement&&Ba(ve)&&(H.vertical=qh(Q,r.glyphMap,r.glyphPositions,r.imagePositions,O,yt,x,nt,"left",$e,oe,w.ao.vertical,!0,U,N))};if(!b&&vt){const xt=new Set;if(pt==="auto")for(let We=0;We<vt.values.length;We+=2)xt.add(eh(vt.values[We]));else xt.add(pt);let _t=!1;for(const We of xt)if(!H.horizontal[We])if(_t)H.horizontal[We]=H.horizontal[0];else{const jt=qh(Q,r.glyphMap,r.glyphPositions,r.imagePositions,O,yt,x,"center",We,$e,oe,w.ao.horizontal,!1,U,N);jt&&(H.horizontal[We]=jt,_t=jt.positionedLines.length===1)}It()}else{pt==="auto"&&(pt=eh(nt));const xt=qh(Q,r.glyphMap,r.glyphPositions,r.imagePositions,O,yt,x,nt,pt,$e,oe,w.ao.horizontal,!1,U,N);xt&&(H.horizontal[pt]=xt),It(),Ba(ve)&&b&&M&&(H.vertical=qh(Q,r.glyphMap,r.glyphPositions,r.imagePositions,O,yt,x,nt,pt,$e,oe,w.ao.vertical,!1,U,N))}}let Me=!1;if(D.icon&&D.icon.name){const ve=r.imageMap[D.icon.name];ve&&(ie=wg(r.imagePositions[D.icon.name],n.get("icon-offset").evaluate(D,{},r.canonical),n.get("icon-anchor").evaluate(D,{},r.canonical)),Me=!!ve.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=Me:r.bucket.sdfIcons!==Me&&ln("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ve.pixelRatio!==r.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const pe=Lm(H.horizontal)||H.vertical;r.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||ie)&&ul(r.bucket,D,H,ie,r.imageMap,f,U,q,oe,Me,r.canonical,r.subdivisionGranularity)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},w.cI=_o,w.cJ=ra,w.cK=Hu,w.cL=Xf,w.cM=Qc,w.cN=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},w.cO=function(r,t,n,u,f){return c(this,void 0,void 0,function*(){if(ce())try{return yield Eo(r,t,n,u,f)}catch{}return function(x,b,M,A,D){const O=x.width,N=x.height;za&&Gs||(za=new OffscreenCanvas(O,N),Gs=za.getContext("2d",{willReadFrequently:!0})),za.width=O,za.height=N,Gs.drawImage(x,0,0,O,N);const U=Gs.getImageData(b,M,A,D);return Gs.clearRect(0,0,O,N),U.data}(r,t,n,u,f)})},w.cP=Vd,w.cQ=k,w.cR=Zu,w.cS=Wc,w.cT=os,w.cU=function(r,t){const n=new Map;if(r!=null)if(r.type==="Feature")n.set(nu(r,t),r);else for(const u of r.features)n.set(nu(u,t),u);return n},w.cV=function(r,t){if(r==null)return!0;if(r.type==="Feature")return nu(r,t)!=null;if(r.type==="FeatureCollection"){const n=new Set;for(const u of r.features){const f=nu(u,t);if(f==null||n.has(f))return!1;n.add(f)}return!0}return!1},w.cW=function(r,t,n){var u,f,x,b;if(t.removeAll&&r.clear(),t.remove)for(const M of t.remove)r.delete(M);if(t.add)for(const M of t.add){const A=nu(M,n);A!=null&&r.set(A,M)}if(t.update)for(const M of t.update){let A=r.get(M.id);if(A==null)continue;const D=!M.removeAllProperties&&(((u=M.removeProperties)===null||u===void 0?void 0:u.length)>0||((f=M.addOrUpdateProperties)===null||f===void 0?void 0:f.length)>0);if((M.newGeometry||M.removeAllProperties||D)&&(A=Object.assign({},A),r.set(M.id,A),D&&(A.properties=Object.assign({},A.properties))),M.newGeometry&&(A.geometry=M.newGeometry),M.removeAllProperties)A.properties={};else if(((x=M.removeProperties)===null||x===void 0?void 0:x.length)>0)for(const O of M.removeProperties)Object.prototype.hasOwnProperty.call(A.properties,O)&&delete A.properties[O];if(((b=M.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0)for(const{key:O,value:N}of M.addOrUpdateProperties)A.properties[O]=N}},w.cX=Tr,w.ca=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},w.cb=r=>r.type==="symbol",w.cc=r=>r.type==="circle",w.cd=r=>r.type==="heatmap",w.ce=r=>r.type==="line",w.cf=r=>r.type==="fill",w.cg=r=>r.type==="fill-extrusion",w.ch=r=>r.type==="hillshade",w.ci=r=>r.type==="color-relief",w.cj=r=>r.type==="raster",w.ck=r=>r.type==="background",w.cl=r=>r.type==="custom",w.cm=Bt,w.cn=function(r,t,n){const u=st(t.x-n.x,t.y-n.y),f=st(r.x-n.x,r.y-n.y);var x,b;return Zs(Math.atan2(u[0]*f[1]-u[1]*f[0],(x=u)[0]*(b=f)[0]+x[1]*b[1]))},w.co=hi,w.cp=function(r,t){return In[t]&&(r instanceof MouseEvent||r instanceof WheelEvent)},w.cq=function(r,t){return oa[t]&&"touches"in r},w.cr=function(r){return oa[r]||In[r]},w.cs=function(r,t,n){var u=t[0],f=t[1];return r[0]=n[0]*u+n[4]*f+n[12],r[1]=n[1]*u+n[5]*f+n[13],r},w.ct=function(r,t){const{x:n,y:u}=ed.fromLngLat(t);return!(r<0||r>25||u<0||u>=1||n<0||n>=1)},w.cu=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},w.cv=class extends lo{},w.cw=ih,w.cy=function(r){return r.message===Hr},w.cz=de,w.d=Ne,w.e=gi,w.f=r=>c(void 0,void 0,void 0,function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(t)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),w.g=J,w.h=r=>new Promise((t,n)=>{const u=new Image;u.onload=()=>{t(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=Pa})},u.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(r)],{type:"image/png"});u.src=r.byteLength?URL.createObjectURL(f):Pa}),w.i=Ya,w.j=(r,t)=>Se(gi(r,{type:"json"}),t),w.k=Qe,w.l=ot,w.m=Se,w.n=(r,t)=>Se(gi(r,{type:"arrayBuffer"}),t),w.o=function(r){return new Qc(r).readFields(pm,[])},w.p=Wd,w.q=Zc,w.r=Lr,w.s=ms,w.t=ku,w.u=ci,w.v=ze,w.w=ln,w.x=Id,w.y=Ol,w.z=Ll}),S("worker",["./shared"],function(w){class c{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,J){for(const de of K){this._layerConfigs[de.id]=de;const we=this._layers[de.id]=w.bJ(de);we._featureFilter=w.aa(we.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(const de of J)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const te=w.cC(Object.values(this._layerConfigs),this.keyCache);for(const de of te){const we=de.map(Qe=>this._layers[Qe.id]),Se=we[0];if(Se.visibility==="none")continue;const Ne=Se.source||"";let Pe=this.familiesBySource[Ne];Pe||(Pe=this.familiesBySource[Ne]={});const Xe=Se.sourceLayer||"_geojsonTileLayer";let ot=Pe[Xe];ot||(ot=Pe[Xe]=[]),ot.push(we)}}}class R{constructor(K){const J={},te=[];for(const Ne in K){const Pe=K[Ne],Xe=J[Ne]={};for(const ot in Pe){const Qe=Pe[+ot];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const Pt={x:0,y:0,w:Qe.bitmap.width+2,h:Qe.bitmap.height+2};te.push(Pt),Xe[ot]={rect:Pt,metrics:Qe.metrics}}}const{w:de,h:we}=w.p(te),Se=new w.q({width:de||1,height:we||1});for(const Ne in K){const Pe=K[Ne];for(const Xe in Pe){const ot=Pe[+Xe];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Qe=J[Ne][Xe].rect;w.q.copy(ot.bitmap,Se,{x:0,y:0},{x:Qe.x+1,y:Qe.y+1},ot.bitmap)}}this.image=Se,this.positions=J}}w.cD("GlyphAtlas",R);class k{constructor(K){this.tileID=new w.Z(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[],this.globalState=K.globalState}parse(K,J,te,de,we){return w._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new w.a8;const Se=new w.cE(Object.keys(K.layers).sort()),Ne=new w.cF(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const Pe={},Xe={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te,subdivisionGranularity:we},ot=J.familiesBySource[this.source];for(const Vt in ot){const qt=K.layers[Vt];if(!qt)continue;qt.version===1&&w.w(`Vector tile source "${this.source}" layer "${Vt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xi=Se.encode(Vt),dt=[];for(let mr=0;mr<qt.length;mr++){const cn=qt.feature(mr),gs=Ne.getId(cn,Vt);dt.push({feature:cn,id:gs,index:mr,sourceLayerIndex:Xi})}for(const mr of ot[Vt]){const cn=mr[0];cn.source!==this.source&&w.w(`layer.source = ${cn.source} does not equal this.source = ${this.source}`),cn.minzoom&&this.zoom<Math.floor(cn.minzoom)||cn.maxzoom&&this.zoom>=cn.maxzoom||cn.visibility!=="none"&&(j(mr,this.zoom,te),(Pe[cn.id]=cn.createBucket({index:Ne.bucketLayerIDs.length,layers:mr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xi,sourceID:this.source,globalState:this.globalState})).populate(dt,Xe,this.tileID.canonical),Ne.bucketLayerIDs.push(mr.map(gs=>gs.id)))}}const Qe=w.bN(Xe.glyphDependencies,Vt=>Object.keys(Vt).map(Number));this.inFlightDependencies.forEach(Vt=>Vt?.abort()),this.inFlightDependencies=[];let Pt=Promise.resolve({});if(Object.keys(Qe).length){const Vt=new AbortController;this.inFlightDependencies.push(Vt),Pt=de.sendAsync({type:"GG",data:{stacks:Qe,source:this.source,tileID:this.tileID,type:"glyphs"}},Vt)}const ze=Object.keys(Xe.iconDependencies);let Zt=Promise.resolve({});if(ze.length){const Vt=new AbortController;this.inFlightDependencies.push(Vt),Zt=de.sendAsync({type:"GI",data:{icons:ze,source:this.source,tileID:this.tileID,type:"icons"}},Vt)}const si=Object.keys(Xe.patternDependencies);let Rt=Promise.resolve({});if(si.length){const Vt=new AbortController;this.inFlightDependencies.push(Vt),Rt=de.sendAsync({type:"GI",data:{icons:si,source:this.source,tileID:this.tileID,type:"patterns"}},Vt)}const[Yt,Ii,Dn]=yield Promise.all([Pt,Zt,Rt]),Nn=new R(Yt),Oi=new w.cG(Ii,Dn);for(const Vt in Pe){const qt=Pe[Vt];qt instanceof w.a9?(j(qt.layers,this.zoom,te),w.cH({bucket:qt,glyphMap:Yt,glyphPositions:Nn.positions,imageMap:Ii,imagePositions:Oi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Xe.subdivisionGranularity})):qt.hasPattern&&(qt instanceof w.cI||qt instanceof w.cJ||qt instanceof w.cK)&&(j(qt.layers,this.zoom,te),qt.addFeatures(Xe,this.tileID.canonical,Oi.patternPositions))}return this.status="done",{buckets:Object.values(Pe).filter(Vt=>!Vt.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:Oi,glyphMap:this.returnDependencies?Yt:null,iconMap:this.returnDependencies?Ii:null,glyphPositions:this.returnDependencies?Nn.positions:null}})}}function j(Te,K,J){const te=new w.F(K);for(const de of Te)de.recalculate(te,J)}class ${constructor(K,J,te){this.actor=K,this.layerIndex=J,this.availableImages=te,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,J){return w._(this,void 0,void 0,function*(){const te=yield w.n(K.request,J);try{return{vectorTile:new w.cL(new w.cM(te.data)),rawData:te.data,cacheControl:te.cacheControl,expires:te.expires}}catch(de){const we=new Uint8Array(te.data);let Se=`Unable to parse the tile at ${K.request.url}, `;throw Se+=we[0]===31&&we[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${de.message}`,new Error(Se)}})}loadTile(K){return w._(this,void 0,void 0,function*(){const J=K.uid,te=!!(K&&K.request&&K.request.collectResourceTiming)&&new w.cN(K.request),de=new k(K);this.loading[J]=de;const we=new AbortController;de.abort=we;try{const Se=yield this.loadVectorTile(K,we);if(delete this.loading[J],!Se)return null;const Ne=Se.rawData,Pe={};Se.expires&&(Pe.expires=Se.expires),Se.cacheControl&&(Pe.cacheControl=Se.cacheControl);const Xe={};if(te){const Qe=te.finish();Qe&&(Xe.resourceTiming=JSON.parse(JSON.stringify(Qe)))}de.vectorTile=Se.vectorTile;const ot=de.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);this.loaded[J]=de,this.fetching[J]={rawTileData:Ne,cacheControl:Pe,resourceTiming:Xe};try{const Qe=yield ot;return w.e({rawTileData:Ne.slice(0)},Qe,Pe,Xe)}finally{delete this.fetching[J]}}catch(Se){throw delete this.loading[J],de.status="done",this.loaded[J]=de,Se}})}reloadTile(K){return w._(this,void 0,void 0,function*(){const J=K.uid;if(!this.loaded||!this.loaded[J])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const te=this.loaded[J];if(te.showCollisionBoxes=K.showCollisionBoxes,te.globalState=K.globalState,te.status==="parsing"){const de=yield te.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);let we;if(this.fetching[J]){const{rawTileData:Se,cacheControl:Ne,resourceTiming:Pe}=this.fetching[J];delete this.fetching[J],we=w.e({rawTileData:Se.slice(0)},de,Ne,Pe)}else we=de;return we}if(te.status==="done"&&te.vectorTile)return te.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity)})}abortTile(K){return w._(this,void 0,void 0,function*(){const J=this.loading,te=K.uid;J&&J[te]&&J[te].abort&&(J[te].abort.abort(),delete J[te])})}removeTile(K){return w._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class Y{constructor(){this.loaded={}}loadTile(K){return w._(this,void 0,void 0,function*(){const{uid:J,encoding:te,rawImageData:de,redFactor:we,greenFactor:Se,blueFactor:Ne,baseShift:Pe}=K,Xe=de.width+2,ot=de.height+2,Qe=w.b(de)?new w.R({width:Xe,height:ot},yield w.cO(de,-1,-1,Xe,ot)):de,Pt=new w.cP(J,Qe,te,we,Se,Ne,Pe);return this.loaded=this.loaded||{},this.loaded[J]=Pt,Pt})}removeTile(K){const J=this.loaded,te=K.uid;J&&J[te]&&delete J[te]}}var X,se,xe=function(){if(se)return X;function Te(J,te){if(J.length!==0){K(J[0],te);for(var de=1;de<J.length;de++)K(J[de],!te)}}function K(J,te){for(var de=0,we=0,Se=0,Ne=J.length,Pe=Ne-1;Se<Ne;Pe=Se++){var Xe=(J[Se][0]-J[Pe][0])*(J[Pe][1]+J[Se][1]),ot=de+Xe;we+=Math.abs(de)>=Math.abs(Xe)?de-ot+Xe:Xe-ot+de,de=ot}de+we>=0!=!!te&&J.reverse()}return se=1,X=function J(te,de){var we,Se=te&&te.type;if(Se==="FeatureCollection")for(we=0;we<te.features.length;we++)J(te.features[we],de);else if(Se==="GeometryCollection")for(we=0;we<te.geometries.length;we++)J(te.geometries[we],de);else if(Se==="Feature")J(te.geometry,de);else if(Se==="Polygon")Te(te.coordinates,de);else if(Se==="MultiPolygon")for(we=0;we<te.coordinates.length;we++)Te(te.coordinates[we],de);return te}}(),Re=w.cQ(xe);class ce extends w.cS{constructor(K,J){super(new w.cM,0,J,[],[]),this.feature=K,this.type=K.type,this.properties=K.tags?K.tags:{},"id"in K&&(typeof K.id=="string"?this.id=parseInt(K.id,10):typeof K.id!="number"||isNaN(K.id)||(this.id=K.id))}loadGeometry(){const K=[],J=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const te of J){const de=[];for(const we of te)de.push(new w.P(we[0],we[1]));K.push(de)}return K}}class De extends w.cR{constructor(K,J){super(new w.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=J?J.version:1,this.extent=J?J.extent:4096,this.length=K.length,this.features=K}feature(K){return new ce(this.features[K],this.extent)}}function Ce(Te,K){K.writeVarintField(15,Te.version||1),K.writeStringField(1,Te.name||""),K.writeVarintField(5,Te.extent||4096);const J={keys:[],values:[],keycache:{},valuecache:{}};for(let we=0;we<Te.length;we++)J.feature=Te.feature(we),K.writeMessage(2,Ye,J);const te=J.keys;for(const we of te)K.writeStringField(3,we);const de=J.values;for(const we of de)K.writeMessage(4,ut,we)}function Ye(Te,K){if(!Te.feature)return;const J=Te.feature;J.id!==void 0&&K.writeVarintField(1,J.id),K.writeMessage(2,Fe,Te),K.writeVarintField(3,J.type),K.writeMessage(4,et,J)}function Fe(Te,K){for(const J in Te.feature?.properties){let te=Te.feature.properties[J],de=Te.keycache[J];if(te===null)continue;de===void 0&&(Te.keys.push(J),de=Te.keys.length-1,Te.keycache[J]=de),K.writeVarint(de),typeof te!="string"&&typeof te!="boolean"&&typeof te!="number"&&(te=JSON.stringify(te));const we=typeof te+":"+te;let Se=Te.valuecache[we];Se===void 0&&(Te.values.push(te),Se=Te.values.length-1,Te.valuecache[we]=Se),K.writeVarint(Se)}}function ct(Te,K){return(K<<3)+(7&Te)}function ht(Te){return Te<<1^Te>>31}function et(Te,K){const J=Te.loadGeometry(),te=Te.type;let de=0,we=0;for(const Se of J){let Ne=1;te===1&&(Ne=Se.length),K.writeVarint(ct(1,Ne));const Pe=te===3?Se.length-1:Se.length;for(let Xe=0;Xe<Pe;Xe++){Xe===1&&te!==1&&K.writeVarint(ct(2,Pe-1));const ot=Se[Xe].x-de,Qe=Se[Xe].y-we;K.writeVarint(ht(ot)),K.writeVarint(ht(Qe)),de+=ot,we+=Qe}Te.type===3&&K.writeVarint(ct(7,1))}}function ut(Te,K){const J=typeof Te;J==="string"?K.writeStringField(1,Te):J==="boolean"?K.writeBooleanField(7,Te):J==="number"&&(Te%1!=0?K.writeDoubleField(3,Te):Te<0?K.writeSVarintField(6,Te):K.writeVarintField(5,Te))}const lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},Tt=Math.fround||(Et=new Float32Array(1),Te=>(Et[0]=+Te,Et[0]));var Et;class ai{constructor(K){this.options=Object.assign(Object.create(lt),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:J,minZoom:te,maxZoom:de}=this.options;J&&console.time("total time");const we=`prepare ${K.length} points`;J&&console.time(we),this.points=K;const Se=[];for(let Pe=0;Pe<K.length;Pe++){const Xe=K[Pe];if(!Xe.geometry)continue;const[ot,Qe]=Xe.geometry.coordinates,Pt=Tt(je(ot)),ze=Tt(it(Qe));Se.push(Pt,ze,1/0,Pe,-1,1),this.options.reduce&&Se.push(0)}let Ne=this.trees[de+1]=this._createTree(Se);J&&console.timeEnd(we);for(let Pe=de;Pe>=te;Pe--){const Xe=+Date.now();Ne=this.trees[Pe]=this._createTree(this._cluster(Ne,Pe)),J&&console.log("z%d: %d clusters in %dms",Pe,Ne.numItems,+Date.now()-Xe)}return J&&console.timeEnd("total time"),this}getClusters(K,J){let te=((K[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,K[1]));let we=K[2]===180?180:((K[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)te=-180,we=180;else if(te>we){const Qe=this.getClusters([te,de,180,Se],J),Pt=this.getClusters([-180,de,we,Se],J);return Qe.concat(Pt)}const Ne=this.trees[this._limitZoom(J)],Pe=Ne.range(je(te),it(Se),je(we),it(de)),Xe=Ne.data,ot=[];for(const Qe of Pe){const Pt=this.stride*Qe;ot.push(Xe[Pt+5]>1?Li(Xe,Pt,this.clusterProps):this.points[Xe[Pt+3]])}return ot}getChildren(K){const J=this._getOriginId(K),te=this._getOriginZoom(K),de="No cluster with the specified id.",we=this.trees[te];if(!we)throw new Error(de);const Se=we.data;if(J*this.stride>=Se.length)throw new Error(de);const Ne=this.options.radius/(this.options.extent*Math.pow(2,te-1)),Pe=we.within(Se[J*this.stride],Se[J*this.stride+1],Ne),Xe=[];for(const ot of Pe){const Qe=ot*this.stride;Se[Qe+4]===K&&Xe.push(Se[Qe+5]>1?Li(Se,Qe,this.clusterProps):this.points[Se[Qe+3]])}if(Xe.length===0)throw new Error(de);return Xe}getLeaves(K,J,te){const de=[];return this._appendLeaves(de,K,J=J||10,te=te||0,0),de}getTile(K,J,te){const de=this.trees[this._limitZoom(K)],we=Math.pow(2,K),{extent:Se,radius:Ne}=this.options,Pe=Ne/Se,Xe=(te-Pe)/we,ot=(te+1+Pe)/we,Qe={features:[]};return this._addTileFeatures(de.range((J-Pe)/we,Xe,(J+1+Pe)/we,ot),de.data,J,te,we,Qe),J===0&&this._addTileFeatures(de.range(1-Pe/we,Xe,1,ot),de.data,we,te,we,Qe),J===we-1&&this._addTileFeatures(de.range(0,Xe,Pe/we,ot),de.data,-1,te,we,Qe),Qe.features.length?Qe:null}getClusterExpansionZoom(K){let J=this._getOriginZoom(K)-1;for(;J<=this.options.maxZoom;){const te=this.getChildren(K);if(J++,te.length!==1)break;K=te[0].properties.cluster_id}return J}_appendLeaves(K,J,te,de,we){const Se=this.getChildren(J);for(const Ne of Se){const Pe=Ne.properties;if(Pe&&Pe.cluster?we+Pe.point_count<=de?we+=Pe.point_count:we=this._appendLeaves(K,Pe.cluster_id,te,de,we):we<de?we++:K.push(Ne),K.length===te)break}return we}_createTree(K){const J=new w.aI(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<K.length;te+=this.stride)J.add(K[te],K[te+1]);return J.finish(),J.data=K,J}_addTileFeatures(K,J,te,de,we,Se){for(const Ne of K){const Pe=Ne*this.stride,Xe=J[Pe+5]>1;let ot,Qe,Pt;if(Xe)ot=ui(J,Pe,this.clusterProps),Qe=J[Pe],Pt=J[Pe+1];else{const si=this.points[J[Pe+3]];ot=si.properties;const[Rt,Yt]=si.geometry.coordinates;Qe=je(Rt),Pt=it(Yt)}const ze={type:1,geometry:[[Math.round(this.options.extent*(Qe*we-te)),Math.round(this.options.extent*(Pt*we-de))]],tags:ot};let Zt;Zt=Xe||this.options.generateId?J[Pe+3]:this.points[J[Pe+3]].id,Zt!==void 0&&(ze.id=Zt),Se.features.push(ze)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,J){const{radius:te,extent:de,reduce:we,minPoints:Se}=this.options,Ne=te/(de*Math.pow(2,J)),Pe=K.data,Xe=[],ot=this.stride;for(let Qe=0;Qe<Pe.length;Qe+=ot){if(Pe[Qe+2]<=J)continue;Pe[Qe+2]=J;const Pt=Pe[Qe],ze=Pe[Qe+1],Zt=K.within(Pe[Qe],Pe[Qe+1],Ne),si=Pe[Qe+5];let Rt=si;for(const Yt of Zt){const Ii=Yt*ot;Pe[Ii+2]>J&&(Rt+=Pe[Ii+5])}if(Rt>si&&Rt>=Se){let Yt,Ii=Pt*si,Dn=ze*si,Nn=-1;const Oi=(Qe/ot<<5)+(J+1)+this.points.length;for(const Vt of Zt){const qt=Vt*ot;if(Pe[qt+2]<=J)continue;Pe[qt+2]=J;const Xi=Pe[qt+5];Ii+=Pe[qt]*Xi,Dn+=Pe[qt+1]*Xi,Pe[qt+4]=Oi,we&&(Yt||(Yt=this._map(Pe,Qe,!0),Nn=this.clusterProps.length,this.clusterProps.push(Yt)),we(Yt,this._map(Pe,qt)))}Pe[Qe+4]=Oi,Xe.push(Ii/Rt,Dn/Rt,1/0,Oi,-1,Rt),we&&Xe.push(Nn)}else{for(let Yt=0;Yt<ot;Yt++)Xe.push(Pe[Qe+Yt]);if(Rt>1)for(const Yt of Zt){const Ii=Yt*ot;if(!(Pe[Ii+2]<=J)){Pe[Ii+2]=J;for(let Dn=0;Dn<ot;Dn++)Xe.push(Pe[Ii+Dn])}}}}return Xe}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,J,te){if(K[J+5]>1){const Se=this.clusterProps[K[J+6]];return te?Object.assign({},Se):Se}const de=this.points[K[J+3]].properties,we=this.options.map(de);return te&&we===de?Object.assign({},we):we}}function Li(Te,K,J){return{type:"Feature",id:Te[K+3],properties:ui(Te,K,J),geometry:{type:"Point",coordinates:[(te=Te[K],360*(te-.5)),st(Te[K+1])]}};var te}function ui(Te,K,J){const te=Te[K+5],de=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,we=Te[K+6],Se=we===-1?{}:Object.assign({},J[we]);return Object.assign(Se,{cluster:!0,cluster_id:Te[K+3],point_count:te,point_count_abbreviated:de})}function je(Te){return Te/360+.5}function it(Te){const K=Math.sin(Te*Math.PI/180),J=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return J<0?0:J>1?1:J}function st(Te){const K=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function mt(Te,K,J,te){let de=te;const we=K+(J-K>>1);let Se,Ne=J-K;const Pe=Te[K],Xe=Te[K+1],ot=Te[J],Qe=Te[J+1];for(let Pt=K+3;Pt<J;Pt+=3){const ze=ye(Te[Pt],Te[Pt+1],Pe,Xe,ot,Qe);if(ze>de)Se=Pt,de=ze;else if(ze===de){const Zt=Math.abs(Pt-we);Zt<Ne&&(Se=Pt,Ne=Zt)}}de>te&&(Se-K>3&&mt(Te,K,Se,te),Te[Se+2]=de,J-Se>3&&mt(Te,Se,J,te))}function ye(Te,K,J,te,de,we){let Se=de-J,Ne=we-te;if(Se!==0||Ne!==0){const Pe=((Te-J)*Se+(K-te)*Ne)/(Se*Se+Ne*Ne);Pe>1?(J=de,te=we):Pe>0&&(J+=Se*Pe,te+=Ne*Pe)}return Se=Te-J,Ne=K-te,Se*Se+Ne*Ne}function Ke(Te,K,J,te){const de={id:Te??null,type:K,geometry:J,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")Mt(de,J);else if(K==="Polygon")Mt(de,J[0]);else if(K==="MultiLineString")for(const we of J)Mt(de,we);else if(K==="MultiPolygon")for(const we of J)Mt(de,we[0]);return de}function Mt(Te,K){for(let J=0;J<K.length;J+=3)Te.minX=Math.min(Te.minX,K[J]),Te.minY=Math.min(Te.minY,K[J+1]),Te.maxX=Math.max(Te.maxX,K[J]),Te.maxY=Math.max(Te.maxY,K[J+1])}function St(Te,K,J,te){if(!K.geometry)return;const de=K.geometry.coordinates;if(de&&de.length===0)return;const we=K.geometry.type,Se=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2);let Ne=[],Pe=K.id;if(J.promoteId?Pe=K.properties[J.promoteId]:J.generateId&&(Pe=te||0),we==="Point")Bt(de,Ne);else if(we==="MultiPoint")for(const Xe of de)Bt(Xe,Ne);else if(we==="LineString")hi(de,Ne,Se,!1);else if(we==="MultiLineString"){if(J.lineMetrics){for(const Xe of de)Ne=[],hi(Xe,Ne,Se,!1),Te.push(Ke(Pe,"LineString",Ne,K.properties));return}Nt(de,Ne,Se,!1)}else if(we==="Polygon")Nt(de,Ne,Se,!0);else{if(we!=="MultiPolygon"){if(we==="GeometryCollection"){for(const Xe of K.geometry.geometries)St(Te,{id:Pe,geometry:Xe,properties:K.properties},J,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Xe of de){const ot=[];Nt(Xe,ot,Se,!0),Ne.push(ot)}}Te.push(Ke(Pe,we,Ne,K.properties))}function Bt(Te,K){K.push(Hn(Te[0]),gi(Te[1]),0)}function hi(Te,K,J,te){let de,we,Se=0;for(let Pe=0;Pe<Te.length;Pe++){const Xe=Hn(Te[Pe][0]),ot=gi(Te[Pe][1]);K.push(Xe,ot,0),Pe>0&&(Se+=te?(de*ot-Xe*we)/2:Math.sqrt(Math.pow(Xe-de,2)+Math.pow(ot-we,2))),de=Xe,we=ot}const Ne=K.length-3;K[2]=1,mt(K,0,Ne,J),K[Ne+2]=1,K.size=Math.abs(Se),K.start=0,K.end=K.size}function Nt(Te,K,J,te){for(let de=0;de<Te.length;de++){const we=[];hi(Te[de],we,J,te),K.push(we)}}function Hn(Te){return Te/360+.5}function gi(Te){const K=Math.sin(Te*Math.PI/180),J=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return J<0?0:J>1?1:J}function Xn(Te,K,J,te,de,we,Se,Ne){if(te/=K,we>=(J/=K)&&Se<te)return Te;if(Se<J||we>=te)return null;const Pe=[];for(const Xe of Te){const ot=Xe.geometry;let Qe=Xe.type;const Pt=de===0?Xe.minX:Xe.minY,ze=de===0?Xe.maxX:Xe.maxY;if(Pt>=J&&ze<te){Pe.push(Xe);continue}if(ze<J||Pt>=te)continue;let Zt=[];if(Qe==="Point"||Qe==="MultiPoint")Us(ot,Zt,J,te,de);else if(Qe==="LineString")ps(ot,Zt,J,te,de,!1,Ne.lineMetrics);else if(Qe==="MultiLineString")en(ot,Zt,J,te,de,!1);else if(Qe==="Polygon")en(ot,Zt,J,te,de,!0);else if(Qe==="MultiPolygon")for(const si of ot){const Rt=[];en(si,Rt,J,te,de,!0),Rt.length&&Zt.push(Rt)}if(Zt.length){if(Ne.lineMetrics&&Qe==="LineString"){for(const si of Zt)Pe.push(Ke(Xe.id,Qe,si,Xe.tags));continue}Qe!=="LineString"&&Qe!=="MultiLineString"||(Zt.length===1?(Qe="LineString",Zt=Zt[0]):Qe="MultiLineString"),Qe!=="Point"&&Qe!=="MultiPoint"||(Qe=Zt.length===3?"Point":"MultiPoint"),Pe.push(Ke(Xe.id,Qe,Zt,Xe.tags))}}return Pe.length?Pe:null}function Us(Te,K,J,te,de){for(let we=0;we<Te.length;we+=3){const Se=Te[we+de];Se>=J&&Se<=te&&ln(K,Te[we],Te[we+1],Te[we+2])}}function ps(Te,K,J,te,de,we,Se){let Ne=zr(Te);const Pe=de===0?Aa:Ya;let Xe,ot,Qe=Te.start;for(let Rt=0;Rt<Te.length-3;Rt+=3){const Yt=Te[Rt],Ii=Te[Rt+1],Dn=Te[Rt+2],Nn=Te[Rt+3],Oi=Te[Rt+4],Vt=de===0?Yt:Ii,qt=de===0?Nn:Oi;let Xi=!1;Se&&(Xe=Math.sqrt(Math.pow(Yt-Nn,2)+Math.pow(Ii-Oi,2))),Vt<J?qt>J&&(ot=Pe(Ne,Yt,Ii,Nn,Oi,J),Se&&(Ne.start=Qe+Xe*ot)):Vt>te?qt<te&&(ot=Pe(Ne,Yt,Ii,Nn,Oi,te),Se&&(Ne.start=Qe+Xe*ot)):ln(Ne,Yt,Ii,Dn),qt<J&&Vt>=J&&(ot=Pe(Ne,Yt,Ii,Nn,Oi,J),Xi=!0),qt>te&&Vt<=te&&(ot=Pe(Ne,Yt,Ii,Nn,Oi,te),Xi=!0),!we&&Xi&&(Se&&(Ne.end=Qe+Xe*ot),K.push(Ne),Ne=zr(Te)),Se&&(Qe+=Xe)}let Pt=Te.length-3;const ze=Te[Pt],Zt=Te[Pt+1],si=de===0?ze:Zt;si>=J&&si<=te&&ln(Ne,ze,Zt,Te[Pt+2]),Pt=Ne.length-3,we&&Pt>=3&&(Ne[Pt]!==Ne[0]||Ne[Pt+1]!==Ne[1])&&ln(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&K.push(Ne)}function zr(Te){const K=[];return K.size=Te.size,K.start=Te.start,K.end=Te.end,K}function en(Te,K,J,te,de,we){for(const Se of Te)ps(Se,K,J,te,de,we,!1)}function ln(Te,K,J,te){Te.push(K,J,te)}function Aa(Te,K,J,te,de,we){const Se=(we-K)/(te-K);return ln(Te,we,J+(de-J)*Se,1),Se}function Ya(Te,K,J,te,de,we){const Se=(we-J)/(de-J);return ln(Te,K+(te-K)*Se,we,1),Se}function pr(Te,K){const J=[];for(let te=0;te<Te.length;te++){const de=Te[te],we=de.type;let Se;if(we==="Point"||we==="MultiPoint"||we==="LineString")Se=Wa(de.geometry,K);else if(we==="MultiLineString"||we==="Polygon"){Se=[];for(const Ne of de.geometry)Se.push(Wa(Ne,K))}else if(we==="MultiPolygon"){Se=[];for(const Ne of de.geometry){const Pe=[];for(const Xe of Ne)Pe.push(Wa(Xe,K));Se.push(Pe)}}J.push(Ke(de.id,we,Se,de.tags))}return J}function Wa(Te,K){const J=[];J.size=Te.size,Te.start!==void 0&&(J.start=Te.start,J.end=Te.end);for(let te=0;te<Te.length;te+=3)J.push(Te[te]+K,Te[te+1],Te[te+2]);return J}function Pa(Te,K){if(Te.transformed)return Te;const J=1<<Te.z,te=Te.x,de=Te.y;for(const we of Te.features){const Se=we.geometry,Ne=we.type;if(we.geometry=[],Ne===1)for(let Pe=0;Pe<Se.length;Pe+=2)we.geometry.push(Eo(Se[Pe],Se[Pe+1],K,J,te,de));else for(let Pe=0;Pe<Se.length;Pe++){const Xe=[];for(let ot=0;ot<Se[Pe].length;ot+=2)Xe.push(Eo(Se[Pe][ot],Se[Pe][ot+1],K,J,te,de));we.geometry.push(Xe)}}return Te.transformed=!0,Te}function Eo(Te,K,J,te,de,we){return[Math.round(J*(Te*te-de)),Math.round(J*(K*te-we))]}function za(Te,K,J,te,de){const we=K===de.maxZoom?0:de.tolerance/((1<<K)*de.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:Te.length,source:null,x:J,y:te,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ne of Te)Gs(Se,Ne,we,de);return Se}function Gs(Te,K,J,te){const de=K.geometry,we=K.type,Se=[];if(Te.minX=Math.min(Te.minX,K.minX),Te.minY=Math.min(Te.minY,K.minY),Te.maxX=Math.max(Te.maxX,K.maxX),Te.maxY=Math.max(Te.maxY,K.maxY),we==="Point"||we==="MultiPoint")for(let Ne=0;Ne<de.length;Ne+=3)Se.push(de[Ne],de[Ne+1]),Te.numPoints++,Te.numSimplified++;else if(we==="LineString")ms(Se,de,Te,J,!1,!1);else if(we==="MultiLineString"||we==="Polygon")for(let Ne=0;Ne<de.length;Ne++)ms(Se,de[Ne],Te,J,we==="Polygon",Ne===0);else if(we==="MultiPolygon")for(let Ne=0;Ne<de.length;Ne++){const Pe=de[Ne];for(let Xe=0;Xe<Pe.length;Xe++)ms(Se,Pe[Xe],Te,J,!0,Xe===0)}if(Se.length){let Ne=K.tags||null;if(we==="LineString"&&te.lineMetrics){Ne={};for(const Xe in K.tags)Ne[Xe]=K.tags[Xe];Ne.mapbox_clip_start=de.start/de.size,Ne.mapbox_clip_end=de.end/de.size}const Pe={geometry:Se,type:we==="Polygon"||we==="MultiPolygon"?3:we==="LineString"||we==="MultiLineString"?2:1,tags:Ne};K.id!==null&&(Pe.id=K.id),Te.features.push(Pe)}}function ms(Te,K,J,te,de,we){const Se=te*te;if(te>0&&K.size<(de?Se:te))return void(J.numPoints+=K.length/3);const Ne=[];for(let Pe=0;Pe<K.length;Pe+=3)(te===0||K[Pe+2]>Se)&&(J.numSimplified++,Ne.push(K[Pe],K[Pe+1])),J.numPoints++;de&&function(Pe,Xe){let ot=0;for(let Qe=0,Pt=Pe.length,ze=Pt-2;Qe<Pt;ze=Qe,Qe+=2)ot+=(Pe[Qe]-Pe[ze])*(Pe[Qe+1]+Pe[ze+1]);if(ot>0===Xe)for(let Qe=0,Pt=Pe.length;Qe<Pt/2;Qe+=2){const ze=Pe[Qe],Zt=Pe[Qe+1];Pe[Qe]=Pe[Pt-2-Qe],Pe[Qe+1]=Pe[Pt-1-Qe],Pe[Pt-2-Qe]=ze,Pe[Pt-1-Qe]=Zt}}(Ne,we),Te.push(Ne)}const Co={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Zs{constructor(K,J){const te=(J=this.options=function(we,Se){for(const Ne in Se)we[Ne]=Se[Ne];return we}(Object.create(Co),J)).debug;if(te&&console.time("preprocess data"),J.maxZoom<0||J.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(J.promoteId&&J.generateId)throw new Error("promoteId and generateId cannot be used together.");let de=function(we,Se){const Ne=[];if(we.type==="FeatureCollection")for(let Pe=0;Pe<we.features.length;Pe++)St(Ne,we.features[Pe],Se,Pe);else St(Ne,we.type==="Feature"?we:{geometry:we},Se);return Ne}(K,J);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",J.indexMaxZoom,J.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(we,Se){const Ne=Se.buffer/Se.extent;let Pe=we;const Xe=Xn(we,1,-1-Ne,Ne,0,-1,2,Se),ot=Xn(we,1,1-Ne,2+Ne,0,-1,2,Se);return(Xe||ot)&&(Pe=Xn(we,1,-Ne,1+Ne,0,-1,2,Se)||[],Xe&&(Pe=pr(Xe,1).concat(Pe)),ot&&(Pe=Pe.concat(pr(ot,-1)))),Pe}(de,J),de.length&&this.splitTile(de,0,0,0),te&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,J,te,de,we,Se,Ne){const Pe=[K,J,te,de],Xe=this.options,ot=Xe.debug;for(;Pe.length;){de=Pe.pop(),te=Pe.pop(),J=Pe.pop(),K=Pe.pop();const Qe=1<<J,Pt=oa(J,te,de);let ze=this.tiles[Pt];if(!ze&&(ot>1&&console.time("creation"),ze=this.tiles[Pt]=za(K,J,te,de,Xe),this.tileCoords.push({z:J,x:te,y:de}),ot)){ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",J,te,de,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));const Xi=`z${J}`;this.stats[Xi]=(this.stats[Xi]||0)+1,this.total++}if(ze.source=K,we==null){if(J===Xe.indexMaxZoom||ze.numPoints<=Xe.indexMaxPoints)continue}else{if(J===Xe.maxZoom||J===we)continue;if(we!=null){const Xi=we-J;if(te!==Se>>Xi||de!==Ne>>Xi)continue}}if(ze.source=null,K.length===0)continue;ot>1&&console.time("clipping");const Zt=.5*Xe.buffer/Xe.extent,si=.5-Zt,Rt=.5+Zt,Yt=1+Zt;let Ii=null,Dn=null,Nn=null,Oi=null,Vt=Xn(K,Qe,te-Zt,te+Rt,0,ze.minX,ze.maxX,Xe),qt=Xn(K,Qe,te+si,te+Yt,0,ze.minX,ze.maxX,Xe);K=null,Vt&&(Ii=Xn(Vt,Qe,de-Zt,de+Rt,1,ze.minY,ze.maxY,Xe),Dn=Xn(Vt,Qe,de+si,de+Yt,1,ze.minY,ze.maxY,Xe),Vt=null),qt&&(Nn=Xn(qt,Qe,de-Zt,de+Rt,1,ze.minY,ze.maxY,Xe),Oi=Xn(qt,Qe,de+si,de+Yt,1,ze.minY,ze.maxY,Xe),qt=null),ot>1&&console.timeEnd("clipping"),Pe.push(Ii||[],J+1,2*te,2*de),Pe.push(Dn||[],J+1,2*te,2*de+1),Pe.push(Nn||[],J+1,2*te+1,2*de),Pe.push(Oi||[],J+1,2*te+1,2*de+1)}}getTile(K,J,te){K=+K,J=+J,te=+te;const de=this.options,{extent:we,debug:Se}=de;if(K<0||K>24)return null;const Ne=1<<K,Pe=oa(K,J=J+Ne&Ne-1,te);if(this.tiles[Pe])return Pa(this.tiles[Pe],we);Se>1&&console.log("drilling down to z%d-%d-%d",K,J,te);let Xe,ot=K,Qe=J,Pt=te;for(;!Xe&&ot>0;)ot--,Qe>>=1,Pt>>=1,Xe=this.tiles[oa(ot,Qe,Pt)];return Xe&&Xe.source?(Se>1&&(console.log("found parent tile z%d-%d-%d",ot,Qe,Pt),console.time("drilling down")),this.splitTile(Xe.source,ot,Qe,Pt,K,J,te),Se>1&&console.timeEnd("drilling down"),this.tiles[Pe]?Pa(this.tiles[Pe],we):null):null}}function oa(Te,K,J){return 32*((1<<Te)*J+K)+Te}class In extends ${constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,J){return w._(this,void 0,void 0,function*(){const te=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const de=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!de)return null;const we=new De(de.features,{version:2,extent:w.$});let Se=function(Ne){const Pe=new w.cM;return function(Xe,ot){for(const Qe in Xe.layers)ot.writeMessage(3,Ce,Xe.layers[Qe])}(Ne,Pe),Pe.finish()}(we);return Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),{vectorTile:we,rawData:Se.buffer}})}loadData(K){return w._(this,void 0,void 0,function*(){var J;(J=this._pendingRequest)===null||J===void 0||J.abort();const te=!!(K&&K.request&&K.request.collectResourceTiming)&&new w.cN(K.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest);const de=yield this._pendingData;this._geoJSONIndex=K.cluster?new ai(function({superclusterOptions:Se,clusterProperties:Ne}){if(!Ne||!Se)return Se;const Pe={},Xe={},ot={accumulated:null,zoom:0},Qe={properties:null},Pt=Object.keys(Ne);for(const ze of Pt){const[Zt,si]=Ne[ze],Rt=w.cT(si),Yt=w.cT(typeof Zt=="string"?[Zt,["accumulated"],["get",ze]]:Zt);Pe[ze]=Rt.value,Xe[ze]=Yt.value}return Se.map=ze=>{Qe.properties=ze;const Zt={};for(const si of Pt)Zt[si]=Pe[si].evaluate(ot,Qe);return Zt},Se.reduce=(ze,Zt)=>{Qe.properties=Zt;for(const si of Pt)ot.accumulated=ze[si],ze[si]=Xe[si].evaluate(ot,Qe)},Se}(K)).load(de.features):function(Se,Ne){return new Zs(Se,Ne)}(de,K.geojsonVtOptions),this.loaded={};const we={data:de};if(te){const Se=te.finish();Se&&(we.resourceTiming={},we.resourceTiming[K.source]=JSON.parse(JSON.stringify(Se)))}return we}catch(de){if(delete this._pendingRequest,w.cy(de))return{abandoned:!0};throw de}})}getData(){return w._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(K){const J=this.loaded;return J&&J[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,J){return w._(this,void 0,void 0,function*(){let te=yield this.loadGeoJSON(K,J);if(delete this._pendingRequest,typeof te!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(Re(te,!0),K.filter){const de=w.cT(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));te={type:"FeatureCollection",features:te.features.filter(Se=>de.value.evaluate({zoom:0},Se))}}return te})}loadGeoJSON(K,J){return w._(this,void 0,void 0,function*(){const{promoteId:te}=K;if(K.request){const de=yield w.j(K.request,J);return this._dataUpdateable=w.cV(de.data,te)?w.cU(de.data,te):void 0,de.data}if(typeof K.data=="string")try{const de=JSON.parse(K.data);return this._dataUpdateable=w.cV(de,te)?w.cU(de,te):void 0,de}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return w.cW(this._dataUpdateable,K.dataDiff,te),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return w._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class Hr{constructor(K){this.self=K,this.actor=new w.J(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(J,te)=>{if(this.externalWorkerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.externalWorkerSourceTypes[J]=te},this.self.addProtocol=w.cA,this.self.removeProtocol=w.cB,this.self.registerRTLTextPlugin=J=>{w.cX.setMethods(J)},this.actor.registerMessageHandler("LDT",(J,te)=>this._getDEMWorkerSource(J,te.source).loadTile(te)),this.actor.registerMessageHandler("RDT",(J,te)=>w._(this,void 0,void 0,function*(){this._getDEMWorkerSource(J,te.source).removeTile(te)})),this.actor.registerMessageHandler("GCEZ",(J,te)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(J,te.type,te.source).getClusterExpansionZoom(te)})),this.actor.registerMessageHandler("GCC",(J,te)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(J,te.type,te.source).getClusterChildren(te)})),this.actor.registerMessageHandler("GCL",(J,te)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(J,te.type,te.source).getClusterLeaves(te)})),this.actor.registerMessageHandler("LD",(J,te)=>this._getWorkerSource(J,te.type,te.source).loadData(te)),this.actor.registerMessageHandler("GD",(J,te)=>this._getWorkerSource(J,te.type,te.source).getData()),this.actor.registerMessageHandler("LT",(J,te)=>this._getWorkerSource(J,te.type,te.source).loadTile(te)),this.actor.registerMessageHandler("RT",(J,te)=>this._getWorkerSource(J,te.type,te.source).reloadTile(te)),this.actor.registerMessageHandler("AT",(J,te)=>this._getWorkerSource(J,te.type,te.source).abortTile(te)),this.actor.registerMessageHandler("RMT",(J,te)=>this._getWorkerSource(J,te.type,te.source).removeTile(te)),this.actor.registerMessageHandler("RS",(J,te)=>w._(this,void 0,void 0,function*(){if(!this.workerSources[J]||!this.workerSources[J][te.type]||!this.workerSources[J][te.type][te.source])return;const de=this.workerSources[J][te.type][te.source];delete this.workerSources[J][te.type][te.source],de.removeSource!==void 0&&de.removeSource(te)})),this.actor.registerMessageHandler("RM",J=>w._(this,void 0,void 0,function*(){delete this.layerIndexes[J],delete this.availableImages[J],delete this.workerSources[J],delete this.demWorkerSources[J]})),this.actor.registerMessageHandler("SR",(J,te)=>w._(this,void 0,void 0,function*(){this.referrer=te})),this.actor.registerMessageHandler("SRPS",(J,te)=>this._syncRTLPluginState(J,te)),this.actor.registerMessageHandler("IS",(J,te)=>w._(this,void 0,void 0,function*(){this.self.importScripts(te)})),this.actor.registerMessageHandler("SI",(J,te)=>this._setImages(J,te)),this.actor.registerMessageHandler("UL",(J,te)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(J).update(te.layers,te.removedIds)})),this.actor.registerMessageHandler("SL",(J,te)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(J).replace(te)}))}_setImages(K,J){return w._(this,void 0,void 0,function*(){this.availableImages[K]=J;for(const te in this.workerSources[K]){const de=this.workerSources[K][te];for(const we in de)de[we].availableImages=J}})}_syncRTLPluginState(K,J){return w._(this,void 0,void 0,function*(){return yield w.cX.syncState(J,this.self.importScripts)})}_getAvailableImages(K){let J=this.availableImages[K];return J||(J=[]),J}_getLayerIndex(K){let J=this.layerIndexes[K];return J||(J=this.layerIndexes[K]=new c),J}_getWorkerSource(K,J,te){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][J]||(this.workerSources[K][J]={}),!this.workerSources[K][J][te]){const de={sendAsync:(we,Se)=>(we.targetMapId=K,this.actor.sendAsync(we,Se))};switch(J){case"vector":this.workerSources[K][J][te]=new $(de,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][J][te]=new In(de,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][J][te]=new this.externalWorkerSourceTypes[J](de,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][J][te]}_getDEMWorkerSource(K,J){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][J]||(this.demWorkerSources[K][J]=new Y),this.demWorkerSources[K][J]}}return w.i(self)&&(self.worker=new Hr(self)),Hr}),S("index",["exports","./shared"],function(w,c){var R="5.6.2";function k(){var y=new c.A(4);return c.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}let j,$;const Y={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y,e,a){const h=requestAnimationFrame(_=>{p(),e(_)}),{unsubscribe:p}=c.s(y.signal,"abort",()=>{p(),cancelAnimationFrame(h),a(c.c())},!1)},frameAsync(y){return new Promise((e,a)=>{this.frame(y,e,a)})},getImageData(y,e=0){return this.getImageCanvasContext(y).getImageData(-e,-e,y.width+2*e,y.height+2*e)},getImageCanvasContext(y){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=y.width,e.height=y.height,a.drawImage(y,0,0,y.width,y.height),a},resolveURL:y=>(j||(j=document.createElement("a")),j.href=y,j.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&($==null&&($=matchMedia("(prefers-reduced-motion: reduce)")),$.matches)}};class X{static testProp(e){if(!X.docStyle)return e[0];for(let a=0;a<e.length;a++)if(e[a]in X.docStyle)return e[a];return e[0]}static create(e,a,h){const p=window.document.createElement(e);return a!==void 0&&(p.className=a),h&&h.appendChild(p),p}static createNS(e,a){return window.document.createElementNS(e,a)}static disableDrag(){X.docStyle&&X.selectProp&&(X.userSelect=X.docStyle[X.selectProp],X.docStyle[X.selectProp]="none")}static enableDrag(){X.docStyle&&X.selectProp&&(X.docStyle[X.selectProp]=X.userSelect)}static setTransform(e,a){e.style[X.transformProp]=a}static addEventListener(e,a,h,p={}){e.addEventListener(a,h,"passive"in p?p:p.capture)}static removeEventListener(e,a,h,p={}){e.removeEventListener(a,h,"passive"in p?p:p.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",X.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",X.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",X.suppressClickInternal,!0)},0)}static getScale(e){const a=e.getBoundingClientRect();return{x:a.width/e.offsetWidth||1,y:a.height/e.offsetHeight||1,boundingClientRect:a}}static getPoint(e,a,h){const p=a.boundingClientRect;return new c.P((h.clientX-p.left)/a.x-e.clientLeft,(h.clientY-p.top)/a.y-e.clientTop)}static mousePos(e,a){const h=X.getScale(e);return X.getPoint(e,h,a)}static touchPos(e,a){const h=[],p=X.getScale(e);for(let _=0;_<a.length;_++)h.push(X.getPoint(e,p,a[_]));return h}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const a=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),h=a.querySelectorAll("script");for(const p of h)p.remove();return X.clean(a),a.innerHTML}static isPossiblyDangerous(e,a){const h=a.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!h.includes("javascript:")&&!h.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const a=e.children;for(const h of a)X.removeAttributes(h),X.clean(h)}static removeAttributes(e){for(const{name:a,value:h}of e.attributes)X.isPossiblyDangerous(a,h)&&e.removeAttribute(a)}}X.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,X.selectProp=X.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),X.transformProp=X.testProp(["transform","WebkitTransform"]);const se={supported:!1,testSupport:function(y){!ce&&Re&&(De?Ce(y):xe=y)}};let xe,Re,ce=!1,De=!1;function Ce(y){const e=y.createTexture();y.bindTexture(y.TEXTURE_2D,e);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Re),y.isContextLost())return;se.supported=!0}catch{}y.deleteTexture(e),ce=!0}var Ye;typeof document<"u"&&(Re=document.createElement("img"),Re.onload=()=>{xe&&Ce(xe),xe=null,De=!0},Re.onerror=()=>{ce=!0,xe=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let e,a,h,p;y.resetRequestQueue=()=>{e=[],a=0,h=0,p={}},y.addThrottleControl=z=>{const L=h++;return p[L]=z,L},y.removeThrottleControl=z=>{delete p[z],T()},y.getImage=(z,L,B=!0)=>new Promise((V,F)=>{se.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),c.e(z,{type:"image"}),e.push({abortController:L,requestParameters:z,supportImageRefresh:B,state:"queued",onError:G=>{F(G)},onSuccess:G=>{V(G)}}),T()});const _=z=>c._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:L,supportImageRefresh:B,onError:V,onSuccess:F,abortController:G}=z,W=B===!1&&!c.i(self)&&!c.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce((ae,le)=>ae&&le==="accept",!0));a++;const re=W?P(L,G):c.m(L,G);try{const ae=yield re;delete z.abortController,z.state="completed",ae.data instanceof HTMLImageElement||c.b(ae.data)?F(ae):ae.data&&F({data:yield(ne=ae.data,typeof createImageBitmap=="function"?c.f(ne):c.h(ne)),cacheControl:ae.cacheControl,expires:ae.expires})}catch(ae){delete z.abortController,V(ae)}finally{a--,T()}var ne}),T=()=>{const z=(()=>{for(const L of Object.keys(p))if(p[L]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=a;L<z&&e.length>0;L++){const B=e.shift();B.abortController.signal.aborted?L--:_(B)}},P=(z,L)=>new Promise((B,V)=>{const F=new Image,G=z.url,W=z.credentials;W&&W==="include"?F.crossOrigin="use-credentials":(W&&W==="same-origin"||!c.d(G))&&(F.crossOrigin="anonymous"),L.signal.addEventListener("abort",()=>{F.src="",V(c.c())}),F.fetchPriority="high",F.onload=()=>{F.onerror=F.onload=null,B({data:F})},F.onerror=()=>{F.onerror=F.onload=null,L.signal.aborted||V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},F.src=G})}(Ye||(Ye={})),Ye.resetRequestQueue();class Fe{constructor(e){this._transformRequestFn=e??null}transformRequest(e,a){return this._transformRequestFn&&this._transformRequestFn(e,a)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ct(y){const e=[];if(typeof y=="string")e.push({id:"default",url:y});else if(y&&y.length>0){const a=[];for(const{id:h,url:p}of y){const _=`${h}${p}`;a.indexOf(_)===-1&&(a.push(_),e.push({id:h,url:p}))}}return e}function ht(y,e,a){try{const h=new URL(y);return h.pathname+=`${e}${a}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${y}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function et(y){const{userImage:e}=y;return!!(e&&e.render&&e.render())&&(y.data.replace(new Uint8Array(e.data.buffer)),!0)}class ut extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:a,promiseResolve:h}of this.requestors)h(this._getImagesForIds(a));this.requestors=[]}}getImage(e){const a=this.images[e];if(a&&!a.data&&a.spriteData){const h=a.spriteData;a.data=new c.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),a.spriteData=null}return a}addImage(e,a){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,a)&&(this.images[e]=a)}_validate(e,a){let h=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new c.k(new Error(`Image "${e}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new c.k(new Error(`Image "${e}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new c.k(new Error(`Image "${e}" has invalid "content" value`))),h=!1),h}_validateStretch(e,a){if(!e)return!0;let h=0;for(const p of e){if(p[0]<h||p[1]<p[0]||a<p[1])return!1;h=p[1]}return!0}_validateContent(e,a){if(!e)return!0;if(e.length!==4)return!1;const h=a.spriteData,p=h&&h.width||a.data.width,_=h&&h.height||a.data.height;return!(e[0]<0||p<e[0]||e[1]<0||_<e[1]||e[2]<0||p<e[2]||e[3]<0||_<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,a,h=!0){const p=this.getImage(e);if(h&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[e]=a,this.updatedImages[e]=!0}removeImage(e){const a=this.images[e];delete this.images[e],delete this.patterns[e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((a,h)=>{let p=!0;if(!this.isLoaded())for(const _ of e)this.images[_]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:a})})}_getImagesForIds(e){const a={};for(const h of e){let p=this.getImage(h);p||(this.fire(new c.l("styleimagemissing",{id:h})),p=this.getImage(h)),p?a[h]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:c.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:e,height:a}=this.atlasImage;return{width:e,height:a}}getPattern(e){const a=this.patterns[e],h=this.getImage(e);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const p={w:h.data.width+2,h:h.data.height+2,x:0,y:0},_=new c.I(p,h);this.patterns[e]={bin:p,position:_}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const a=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(e,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const _ in this.patterns)e.push(this.patterns[_].bin);const{w:a,h}=c.p(e),p=this.atlasImage;p.resize({width:a||1,height:h||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],P=T.x+1,z=T.y+1,L=this.getImage(_).data,B=L.width,V=L.height;c.R.copy(L,p,{x:0,y:0},{x:P,y:z},{width:B,height:V}),c.R.copy(L,p,{x:0,y:V-1},{x:P,y:z-1},{width:B,height:1}),c.R.copy(L,p,{x:0,y:0},{x:P,y:z+V},{width:B,height:1}),c.R.copy(L,p,{x:B-1,y:0},{x:P-1,y:z},{width:1,height:V}),c.R.copy(L,p,{x:0,y:0},{x:P+B,y:z},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const a of e){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.getImage(a);h||c.w(`Image with ID: "${a}" was not found`),et(h)&&this.updateImage(a,h)}}}const lt=1e20;function Tt(y,e,a,h,p,_,T,P,z){for(let L=e;L<e+h;L++)Et(y,a*_+L,_,p,T,P,z);for(let L=a;L<a+p;L++)Et(y,L*_+e,1,h,T,P,z)}function Et(y,e,a,h,p,_,T){_[0]=0,T[0]=-lt,T[1]=lt,p[0]=y[e];for(let P=1,z=0,L=0;P<h;P++){p[P]=y[e+P*a];const B=P*P;do{const V=_[z];L=(p[P]-p[V]+B-V*V)/(P-V)/2}while(L<=T[z]&&--z>-1);z++,_[z]=P,T[z]=L,T[z+1]=lt}for(let P=0,z=0;P<h;P++){for(;T[z+1]<P;)z++;const L=_[z],B=P-L;y[e+P*a]=p[L]+B*B}}class ai{constructor(e,a){this.requestManager=e,this.localIdeographFontFamily=a,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return c._(this,void 0,void 0,function*(){const a=[];for(const _ in e)for(const T of e[_])a.push(this._getAndCacheGlyphsPromise(_,T));const h=yield Promise.all(a),p={};for(const{stack:_,id:T,glyph:P}of h)p[_]||(p[_]={}),p[_][T]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return p})}_getAndCacheGlyphsPromise(e,a){return c._(this,void 0,void 0,function*(){let h=this.entries[e];h||(h=this.entries[e]={glyphs:{},requests:{},ranges:{}});let p=h.glyphs[a];if(p!==void 0)return{stack:e,id:a,glyph:p};if(p=this._tinySDF(h,e,a),p)return h.glyphs[a]=p,{stack:e,id:a,glyph:p};const _=Math.floor(a/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[_])return{stack:e,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[_]){const P=ai.loadGlyphRange(e,_,this.url,this.requestManager);h.requests[_]=P}const T=yield h.requests[_];for(const P in T)this._doesCharSupportLocalGlyph(+P)||(h.glyphs[+P]=T[+P]);return h.ranges[_]=!0,{stack:e,id:a,glyph:T[a]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||c.u["CJK Unified Ideographs"](e)||c.u["Hangul Syllables"](e)||c.u.Hiragana(e)||c.u.Katakana(e)||c.u["CJK Symbols and Punctuation"](e)||c.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,a,h){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let _=e.tinySDF;if(!_){let P="400";/bold/i.test(a)?P="900":/medium/i.test(a)?P="500":/light/i.test(a)&&(P="200"),_=e.tinySDF=new ai.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:P})}const T=_.draw(String.fromCharCode(h));return{id:h,bitmap:new c.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ai.loadGlyphRange=function(y,e,a,h){return c._(this,void 0,void 0,function*(){const p=256*e,_=p+255,T=h.transformRequest(a.replace("{fontstack}",y).replace("{range}",`${p}-${_}`),"Glyphs"),P=yield c.n(T,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${e}, ${p}-${_}`);const z={};for(const L of c.o(P.data))z[L.id]=L;return z})},ai.TinySDF=class{constructor({fontSize:y=24,buffer:e=3,radius:a=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:_="normal",fontStyle:T="normal",lang:P=null}={}){this.buffer=e,this.cutoff=h,this.radius=a,this.lang=P;const z=this.size=y+4*e,L=this._createCanvas(z),B=this.ctx=L.getContext("2d",{willReadFrequently:!0});B.font=`${T} ${_} ${y}px ${p}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(y){const e=document.createElement("canvas");return e.width=e.height=y,e}draw(y){const{width:e,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:_}=this.ctx.measureText(y),T=Math.ceil(a),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-p))),z=Math.min(this.size-this.buffer,T+Math.ceil(h)),L=P+2*this.buffer,B=z+2*this.buffer,V=Math.max(L*B,0),F=new Uint8ClampedArray(V),G={data:F,width:L,height:B,glyphWidth:P,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:e};if(P===0||z===0)return G;const{ctx:W,buffer:re,gridInner:ne,gridOuter:ae}=this;this.lang&&(W.lang=this.lang),W.clearRect(re,re,P,z),W.fillText(y,re,re+T);const le=W.getImageData(re,re,P,z);ae.fill(lt,0,V),ne.fill(0,0,V);for(let fe=0;fe<z;fe++)for(let ue=0;ue<P;ue++){const me=le.data[4*(fe*P+ue)+3]/255;if(me===0)continue;const be=(fe+re)*L+ue+re;if(me===1)ae[be]=0,ne[be]=lt;else{const he=.5-me;ae[be]=he>0?he*he:0,ne[be]=he<0?he*he:0}}Tt(ae,0,0,L,B,L,this.f,this.v,this.z),Tt(ne,re,re,P,z,L,this.f,this.v,this.z);for(let fe=0;fe<V;fe++){const ue=Math.sqrt(ae[fe])-Math.sqrt(ne[fe]);F[fe]=Math.round(255-255*(ue/this.radius+this.cutoff))}return G}};class Li{constructor(){this.specification=c.v.light.position}possiblyEvaluate(e,a){return c.B(e.expression.evaluate(a))}interpolate(e,a,h){return{x:c.C.number(e.x,a.x,h),y:c.C.number(e.y,a.y,h),z:c.C.number(e.z,a.z,h)}}}let ui;class je extends c.E{constructor(e){super(),ui=ui||new c.r({anchor:new c.D(c.v.light.anchor),position:new Li,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.t(ui),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,a={}){if(!this._validate(c.x,e,a))for(const h in e){const p=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,h){return(!h||h.validate!==!1)&&c.y(this,e.call(c.z,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const it=new c.r({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class st extends c.E{constructor(e){super(),this._transitionable=new c.t(it),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0))}setSky(e,a={}){if(!this._validate(c.G,e,a)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in e){const p=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,h={}){return h?.validate!==!1&&c.y(this,e.call(c.z,c.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class mt{constructor(e,a){this.width=e,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,a){const h=e.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(e,a)),this.dashEntry[h]}getDashRanges(e,a,h){const p=[];let _=e.length%2==1?-e[e.length-1]*h:0,T=e[0]*h,P=!0;p.push({left:_,right:T,isDash:P,zeroLength:e[0]===0});let z=e[0];for(let L=1;L<e.length;L++){P=!P;const B=e[L];_=z*h,z+=B,T=z*h,p.push({left:_,right:T,isDash:P,zeroLength:B===0})}return p}addRoundDash(e,a,h){const p=a/2;for(let _=-h;_<=h;_++){const T=this.width*(this.nextRow+h+_);let P=0,z=e[P];for(let L=0;L<this.width;L++){L/z.right>1&&(z=e[++P]);const B=Math.abs(L-z.left),V=Math.abs(L-z.right),F=Math.min(B,V);let G;const W=_/h*(p+1);if(z.isDash){const re=p-Math.abs(W);G=Math.sqrt(F*F+re*re)}else G=p-Math.sqrt(F*F+W*W);this.data[T+L]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(e){for(let P=e.length-1;P>=0;--P){const z=e[P],L=e[P+1];z.zeroLength?e.splice(P,1):L&&L.isDash===z.isDash&&(L.left=z.left,e.splice(P,1))}const a=e[0],h=e[e.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const p=this.width*this.nextRow;let _=0,T=e[_];for(let P=0;P<this.width;P++){P/T.right>1&&(T=e[++_]);const z=Math.abs(P-T.left),L=Math.abs(P-T.right),B=Math.min(z,L);this.data[p+P]=Math.max(0,Math.min(255,(T.isDash?B:-B)+128))}}addDash(e,a){const h=a?7:0,p=2*h+1;if(this.nextRow+p>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let P=0;P<e.length;P++)_+=e[P];if(_!==0){const P=this.width/_,z=this.getDashRanges(e,this.width,P);a?this.addRoundDash(z,P,h):this.addRegularDash(z)}const T={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:_};return this.nextRow+=p,this.dirty=!0,T}bind(e){const a=e.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const ye="maplibre_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ye]}numActive(){return Object.keys(this.active).length}}const Mt=Math.floor(Y.hardwareConcurrency/2);let St,Bt;function hi(){return St||(St=new Ke),St}Ke.workerCount=c.H(globalThis)?Math.max(Math.min(Mt,3),1):1;class Nt{constructor(e,a){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=a;const h=this.workerPool.acquire(a);for(let p=0;p<h.length;p++){const _=new c.J(h[p],a);_.name=`Worker ${p}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,a){const h=[];for(const p of this.actors)h.push(p.sendAsync({type:e,data:a}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,a){for(const h of this.actors)h.registerMessageHandler(e,a)}}function Hn(){return Bt||(Bt=new Nt(hi(),c.K),Bt.registerMessageHandler("GR",(y,e,a)=>c.m(e,a))),Bt}function gi(y,e){const a=c.L();return c.M(a,a,[1,1,0]),c.N(a,a,[.5*y.width,.5*y.height,1]),y.calculatePosMatrix?c.O(a,a,y.calculatePosMatrix(e.toUnwrapped())):a}function Xn(y,e,a,h,p,_,T){var P;const z=function(F,G,W){if(F)for(const re of F){const ne=G[re];if(ne&&ne.source===W&&ne.type==="fill-extrusion")return!0}else for(const re in G){const ne=G[re];if(ne.source===W&&ne.type==="fill-extrusion")return!0}return!1}((P=p?.layers)!==null&&P!==void 0?P:null,e,y.id),L=_.maxPitchScaleFactor(),B=y.tilesIn(h,L,z);B.sort(Us);const V=[];for(const F of B)V.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(e,a,y._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,p,_,L,gi(y.transform,F.tileID),T?(G,W)=>T(F.tileID,G,W):void 0)});return function(F,G){for(const W in F)for(const re of F[W])ps(re,G);return F}(function(F){const G={},W={};for(const re of F){const ne=re.queryResults,ae=re.wrappedTileID,le=W[ae]=W[ae]||{};for(const fe in ne){const ue=ne[fe],me=le[fe]=le[fe]||{},be=G[fe]=G[fe]||[];for(const he of ue)me[he.featureIndex]||(me[he.featureIndex]=!0,be.push(he))}}return G}(V),y)}function Us(y,e){const a=y.tileID,h=e.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}function ps(y,e){const a=y.feature,h=e.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=h}function zr(y,e,a){return c._(this,void 0,void 0,function*(){let h=y;if(y.url?h=(yield c.j(e.transformRequest(y.url,"Source"),a)).data:yield Y.frameAsync(a),!h)return null;const p=c.Q(c.e(h,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(p.vectorLayerIds=h.vector_layers.map(_=>_.id)),p})}class en{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof c.S?new c.S(e.lng,e.lat):c.S.convert(e),this}setSouthWest(e){return this._sw=e instanceof c.S?new c.S(e.lng,e.lat):c.S.convert(e),this}extend(e){const a=this._sw,h=this._ne;let p,_;if(e instanceof c.S)p=e,_=e;else{if(!(e instanceof en))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(en.convert(e)):this.extend(c.S.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(c.S.convert(e)):this;if(p=e._sw,_=e._ne,!p||!_)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(_.lng,h.lng),h.lat=Math.max(_.lat,h.lat)):(this._sw=new c.S(p.lng,p.lat),this._ne=new c.S(_.lng,_.lat)),this}getCenter(){return new c.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.S(this.getWest(),this.getNorth())}getSouthEast(){return new c.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:h}=c.S.convert(e);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(e){return e instanceof en?e:e&&new en(e)}static fromLngLat(e,a=0){const h=360*a/40075017,p=h/Math.cos(Math.PI/180*e.lat);return new en(new c.S(e.lng-p,e.lat-h),new c.S(e.lng+p,e.lat+h))}adjustAntiMeridian(){const e=new c.S(this._sw.lng,this._sw.lat),a=new c.S(this._ne.lng,this._ne.lat);return new en(e,e.lng>a.lng?new c.S(a.lng+360,a.lat):a)}}class ln{constructor(e,a,h){this.bounds=en.convert(this.validateBounds(e)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const a=Math.pow(2,e.z),h=Math.floor(c.V(this.bounds.getWest())*a),p=Math.floor(c.U(this.bounds.getNorth())*a),_=Math.ceil(c.V(this.bounds.getEast())*a),T=Math.ceil(c.U(this.bounds.getSouth())*a);return e.x>=h&&e.x<_&&e.y>=p&&e.y<T}}class Aa extends c.E{constructor(e,a,h,p){if(super(),this.id=e,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.Q(a,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield zr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(c.e(this,e),e.bounds&&(this.tileBounds=new ln(e.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new c.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(a,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};h.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((_,T)=>{e.reloadPromise={resolve:_,reject:T}})}else e.actor=this.dispatcher.getActor(),p="LT";e.abortController=new AbortController;try{const _=yield e.actor.sendAsync({type:p,data:h},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,_)}catch(_){if(delete e.abortController,e.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,a){if(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),e.reloadPromise){const h=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(h.resolve).catch(h.reject)}}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ya extends c.E{constructor(e,a,h,p){super(),this.id=e,this.dispatcher=h,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},a),c.e(this,c.Q(a,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield zr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(c.e(this,a),a.bounds&&(this.tileBounds=new ln(a.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(a){this._tileJSONRequest=null,this.fire(new c.k(a))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return c.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const h=yield Ye.getImage(this.map._requestManager.transformRequest(a,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&(h.cacheControl||h.expires)&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const p=this.map.painter.context,_=p.gl,T=h.data;e.texture=this.map.painter.getTileTexture(T.width),e.texture?e.texture.update(T,{useMipmap:!0}):(e.texture=new c.T(p,T,_.RGBA,{useMipmap:!0}),e.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class pr extends Ya{constructor(e,a,h,p){super(e,a,h,p),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(a,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const p=yield Ye.getImage(h,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(p&&p.data){const _=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&e.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const T=c.b(_)&&c.W()?_:yield this.readImageNow(_),P={type:this.type,uid:e.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const z=yield e.actor.sendAsync({type:"LDT",data:P});e.dem=z,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(p){if(delete e.abortController,e.aborted)e.state="unloaded";else if(p)throw e.state="errored",p}})}readImageNow(e){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.X()){const a=e.width+2,h=e.height+2;try{return new c.R({width:a,height:h},yield c.Y(e,-1,-1,a,h))}catch{}}return Y.getImageData(e,1)})}_getNeighboringTiles(e){const a=e.canonical,h=Math.pow(2,a.z),p=(a.x-1+h)%h,_=a.x===0?e.wrap-1:e.wrap,T=(a.x+1+h)%h,P=a.x+1===h?e.wrap+1:e.wrap,z={};return z[new c.Z(e.overscaledZ,_,a.z,p,a.y).key]={backfilled:!1},z[new c.Z(e.overscaledZ,P,a.z,T,a.y).key]={backfilled:!1},a.y>0&&(z[new c.Z(e.overscaledZ,_,a.z,p,a.y-1).key]={backfilled:!1},z[new c.Z(e.overscaledZ,e.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},z[new c.Z(e.overscaledZ,P,a.z,T,a.y-1).key]={backfilled:!1}),a.y+1<h&&(z[new c.Z(e.overscaledZ,_,a.z,p,a.y+1).key]={backfilled:!1},z[new c.Z(e.overscaledZ,e.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},z[new c.Z(e.overscaledZ,P,a.z,T,a.y+1).key]={backfilled:!1}),z}unloadTile(e){return c._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Wa extends c.E{constructor(e,a,h,p){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:a.data},this.actor=h.getActor(),this.setEventedParent(p),this._data=a.data,this._options=c.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId,a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(a.buffer!==void 0?a.buffer:128),tolerance:this._pixelsToTileUnits(a.tolerance!==void 0?a.tolerance:.375),extent:c.$,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(a.clusterMaxZoom),minPoints:Math.max(2,a.clusterMinPoints||2),extent:c.$,radius:this._pixelsToTileUnits(a.clusterRadius||50),log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(c.$/this.tileSize)}_getClusterMaxZoom(e){const a=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||e===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${a}"`),a}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._pendingWorkerUpdate={data:e},this._updateWorkerData(),this}updateData(e){return this._pendingWorkerUpdate.diff=c.a0(this._pendingWorkerUpdate.diff,e),this._updateWorkerData(),this}getData(){return c._(this,void 0,void 0,function*(){const e=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(a=>a.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return c._(this,void 0,void 0,function*(){const e=new en,a=yield this.getData();let h;switch(a.type){case"FeatureCollection":h=a.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(a.geometry);break;default:h=this.getCoordinatesFromGeometry(a)}if(h.length==0)return e;for(let p=0;p<h.length-1;p+=2)e.extend([h[p],h[p+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,a,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:a,offset:h}})}_updateWorkerData(){return c._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:e,diff:a}=this._pendingWorkerUpdate;if(!e&&!a)return void c.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const h=c.e({type:this.type},this.workerOptions);e?(typeof e=="string"?(h.request=this.map._requestManager.transformRequest(Y.resolveURL(e),"Source"),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(e),this._pendingWorkerUpdate.data=void 0):a&&(h.dataDiff=a,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:h});if(this._isUpdatingWorker=!1,this._removed||p.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));this._data=p.data;let _=null;p.resourceTiming&&p.resourceTiming[this.id]&&(_=p.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(T,{resourceTiming:_}),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(p){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(p))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(e){return c._(this,void 0,void 0,function*(){const a=e.actor?"RT":"LT";e.actor=this.actor;const h={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};e.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:h},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(e){return c._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return c._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Pa extends c.E{constructor(e,a,h,p){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(e){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield Ye.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,e&&(this.coordinates=e),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new c.k(a))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const a=e.map(c.a1.fromLngLat);var h;return this.tileID=function(p){const _=c.a2.fromPoints(p),T=_.width(),P=_.height(),z=Math.max(T,P),L=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,L);return new c.a4(L,Math.floor((_.minX+_.maxX)/2*B),Math.floor((_.minY+_.maxY)/2*B))}(a),this.terrainTileRanges=this._getOverlappingTileRanges(a),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=a.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,a=e.gl;this.texture||(this.texture=new c.T(e,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){const{minX:a,minY:h,maxX:p,maxY:_}=c.a2.fromPoints(e),T={};for(let P=0;P<=c.a3;P++){const z=Math.pow(2,P),L=Math.floor(a*z),B=Math.floor(h*z),V=Math.floor(p*z),F=Math.floor(_*z);T[P]={minTileX:L,minTileY:B,maxTileX:V,maxTileY:F}}return T}}class Eo extends Pa{constructor(e,a,h,p){super(e,a,h,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const a of e.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield c.a5(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new c.k(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const a=this.video.seekable;e<a.start(0)||e>a.end(0)?this.fire(new c.k(new c.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,a=e.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(e,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class za extends Pa{constructor(e,a,h,p){super(e,a,h,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new c.k(new c.a6(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.a6(`sources.${e}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new c.k(new c.a6(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.a6(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.a6(`sources.${e}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.T(a,this.canvas,h.RGBA,{premultiply:!0});let p=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Gs={},ms=y=>{switch(y){case"geojson":return Wa;case"image":return Pa;case"raster":return Ya;case"raster-dem":return pr;case"vector":return Aa;case"video":return Eo;case"canvas":return za}return Gs[y]},Co="RTLPluginLoaded";class Zs extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Hn()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return c._(this,arguments,void 0,function*(a,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Y.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Co))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let oa=null;function In(){return oa||(oa=new Zs),oa}class Hr{constructor(e,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=c.a7(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const a=e+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(p,_){const T={};if(!_)return T;for(const P of p){const z=P.layerIds.map(L=>_.getLayer(L)).filter(Boolean);if(z.length!==0){P.layers=z,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(L=>z.filter(B=>B.id===L)[0]));for(const L of z)T[L.id]=P}}return T}(e.buckets,a?.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof c.a9){if(this.hasSymbolBuckets=!0,!h)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof c.a9&&_.hasRTLText){this.hasRTLText=!0,In().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const _=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(_))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new c.a8}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(e)}const a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,a,h,p,_,T,P,z,L,B,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:B,transform:z,params:P,queryPadding:this.queryPadding*L,getElevation:V},e,a,h):{}}querySourceFeatures(e,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),_=a&&a.sourceLayer?a.sourceLayer:"",T=p._geojsonTileLayer||p[_];if(!T)return;const P=c.aa(a&&a.filter),{z,x:L,y:B}=this.tileID.canonical,V={z,x:L,y:B};for(let F=0;F<T.length;F++){const G=T.feature(F);if(P.needGeometry){const ne=c.ab(G,!0);if(!P.filter(new c.F(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!P.filter(new c.F(this.tileID.overscaledZ),G))continue;const W=h.getId(G,_),re=new c.ac(G,z,L,B,W);re.tile=V,e.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const a=this.expirationTime;if(e.cacheControl){const h=c.ad(e.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const _=this.expirationTime-a;_?this.expirationTime=h+Math.max(_,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const _=this.buckets[p],T=_.layers[0].sourceLayer||"_geojsonTileLayer",P=h[T],z=e[T];if(!P||!z||Object.keys(z).length===0)continue;_.update(z,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=a&&a.style&&a.style.getLayer(p);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Y.now()+e}setDependencies(e,a){const h={};for(const p of a)h[p]=!0;this.dependencies[e]=h}hasDependency(e,a){for(const h of e){const p=this.dependencies[h];if(p){for(const _ of a)if(p[_])return!0}}return!1}}class Te{constructor(e,a){this.max=e,this.onRemove=a,this.reset()}reset(){for(const e in this.data)for(const a of this.data[e])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(e,a,h){const p=e.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const _={value:a,timeout:void 0};if(h!==void 0&&(_.timeout=setTimeout(()=>{this.remove(e,_)},h)),this.data[p].push(_),this.order.push(p),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const a=this.data[e].shift();return a.timeout&&clearTimeout(a.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),a.value}getByKey(e){const a=this.data[e];return a?a[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,a){if(!this.has(e))return this;const h=e.wrapped().key,p=a===void 0?0:this.data[h].indexOf(a),_=this.data[h][p];return this.data[h].splice(p,1),_.timeout&&clearTimeout(_.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(_.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(e){const a=[];for(const h in this.data)for(const p of this.data[h])e(p.value)||a.push(p);for(const h of a)this.remove(h.value.tileID,h)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,a,h){const p=String(a);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][p]=this.stateChanges[e][p]||{},c.e(this.stateChanges[e][p],h),this.deletedStates[e]===null){this.deletedStates[e]={};for(const _ in this.state[e])_!==p&&(this.deletedStates[e][_]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][p]===null){this.deletedStates[e][p]={};for(const _ in this.state[e][p])h[_]||(this.deletedStates[e][p][_]=null)}else for(const _ in h)this.deletedStates[e]&&this.deletedStates[e][p]&&this.deletedStates[e][p][_]===null&&delete this.deletedStates[e][p][_]}removeFeatureState(e,a,h){if(this.deletedStates[e]===null)return;const p=String(a);if(this.deletedStates[e]=this.deletedStates[e]||{},h&&a!==void 0)this.deletedStates[e][p]!==null&&(this.deletedStates[e][p]=this.deletedStates[e][p]||{},this.deletedStates[e][p][h]=null);else if(a!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][p])for(h in this.deletedStates[e][p]={},this.stateChanges[e][p])this.deletedStates[e][p][h]=null;else this.deletedStates[e][p]=null;else this.deletedStates[e]=null}getState(e,a){const h=String(a),p=c.e({},(this.state[e]||{})[h],(this.stateChanges[e]||{})[h]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const _=this.deletedStates[e][a];if(_===null)return{};for(const T in _)delete p[T]}return p}initializeTileState(e,a){e.setFeatureState(this.state,a)}coalesceChanges(e,a){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const _={};for(const T in this.stateChanges[p])this.state[p][T]||(this.state[p][T]={}),c.e(this.state[p][T],this.stateChanges[p][T]),_[T]=this.state[p][T];h[p]=_}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const _={};if(this.deletedStates[p]===null)for(const T in this.state[p])_[T]={},this.state[p][T]={};else for(const T in this.deletedStates[p]){if(this.deletedStates[p][T]===null)this.state[p][T]={};else for(const P of Object.keys(this.deletedStates[p][T]))delete this.state[p][T][P];_[T]=this.state[p][T]}h[p]=h[p]||{},c.e(h[p],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in e)e[p].setFeatureState(h,a)}}const J=89.25;function te(y,e){const a=c.ah(e.lat,-c.ai,c.ai);return new c.P(c.V(e.lng)*y,c.U(a)*y)}function de(y,e){return new c.a1(e.x/y,e.y/y).toLngLat()}function we(y){return y.cameraToCenterDistance*Math.min(.85*Math.tan(c.ae(90-y.pitch)),Math.tan(c.ae(J-y.pitch)))}function Se(y,e){const a=y.canonical,h=e/c.af(a.z),p=a.x+Math.pow(2,a.z)*y.wrap,_=c.ag(new Float64Array(16));return c.M(_,_,[p*h,a.y*h,0]),c.N(_,_,[h/c.$,h/c.$,1]),_}function Ne(y,e,a,h,p){const _=c.a1.fromLngLat(y,e),T=p*c.aj(1,y.lat),P=T*Math.cos(c.ae(a)),z=Math.sqrt(T*T-P*P),L=z*Math.sin(c.ae(-h)),B=z*Math.cos(c.ae(-h));return new c.a1(_.x+L,_.y+B,_.z+P)}function Pe(y,e,a){const h=e.intersectsFrustum(y);if(!a||h===0)return h;const p=e.intersectsPlane(a);return p===0?0:h===2&&p===2?2:1}function Xe(y,e,a){let h=0;const p=(a-e)/10;for(let _=0;_<10;_++)h+=p*Math.pow(Math.cos(e+(_+.5)/10*(a-e)),y);return h}function ot(y,e){return function(a,h,p,_,T){const P=2*((y-1)/c.ak(Math.cos(c.ae(J-T))/Math.cos(c.ae(J)))-1),z=Math.acos(p/_),L=2*Xe(P-1,0,c.ae(T/2)),B=Math.min(c.ae(J),z+c.ae(T/2)),V=Xe(P-1,Math.min(B,z-c.ae(T/2)),B),F=Math.atan(h/p),G=Math.hypot(h,p);let W=a;return W+=c.ak(_/G/Math.max(.5,Math.cos(c.ae(T/2)))),W+=P*c.ak(Math.cos(F))/2,W-=c.ak(Math.max(1,V/L/e))/2,W}}const Qe=ot(9.314,3);function Pt(y,e){const a=(e.roundZoom?Math.round:Math.floor)(y.zoom+c.ak(y.tileSize/e.tileSize));return Math.max(0,a)}function ze(y,e){const a=y.getCameraFrustum(),h=y.getClippingPlane(),p=y.screenPointToMercatorCoordinate(y.getCameraPoint()),_=c.a1.fromLngLat(y.center,y.elevation);p.z=_.z+Math.cos(y.pitchInRadians)*y.cameraToCenterDistance/y.worldSize;const T=y.getCoveringTilesDetailsProvider(),P=T.allowVariableZoom(y,e),z=Pt(y,e),L=e.minzoom||0,B=e.maxzoom!==void 0?e.maxzoom:y.maxZoom,V=Math.min(Math.max(0,z),B),F=Math.pow(2,V),G=[F*p.x,F*p.y,0],W=[F*_.x,F*_.y,0],re=Math.hypot(_.x-p.x,_.y-p.y),ne=Math.abs(_.z-p.z),ae=Math.hypot(re,ne),le=me=>({zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),fe=[],ue=[];if(y.renderWorldCopies&&T.allowWorldCopies())for(let me=1;me<=3;me++)fe.push(le(-me)),fe.push(le(me));for(fe.push(le(0));fe.length>0;){const me=fe.pop(),be=me.x,he=me.y;let Ee=me.fullyVisible;const Ze={x:be,y:he,z:me.zoom},Le=T.getTileBoundingVolume(Ze,me.wrap,y.elevation,e);if(!Ee){const gt=Pe(a,Le,h);if(gt===0)continue;Ee=gt===2}const Oe=T.distanceToTile2d(p.x,p.y,Ze,Le);let Ue=z;P&&(Ue=(e.calculateTileZoom||Qe)(y.zoom+c.ak(y.tileSize/e.tileSize),Oe,ne,ae,y.fov)),Ue=(e.roundZoom?Math.round:Math.floor)(Ue),Ue=Math.max(0,Ue);const ft=Math.min(Ue,B);if(me.wrap=T.getWrap(_,Ze,me.wrap),me.zoom>=ft){if(me.zoom<L)continue;const gt=V-me.zoom,tt=G[0]-.5-(be<<gt),zt=G[1]-.5-(he<<gt),ei=e.reparseOverscaled?Math.max(me.zoom,Ue):me.zoom;ue.push({tileID:new c.Z(me.zoom===B?ei:me.zoom,me.wrap,me.zoom,be,he),distanceSq:c.al([W[0]-.5-be,W[1]-.5-he]),tileDistanceToCamera:Math.sqrt(tt*tt+zt*zt)})}else for(let gt=0;gt<4;gt++)fe.push({zoom:me.zoom+1,x:(be<<1)+gt%2,y:(he<<1)+(gt>>1),wrap:me.wrap,fullyVisible:Ee})}return ue.sort((me,be)=>me.distanceSq-be.distanceSq).map(me=>me.tileID)}const Zt=c.a2.fromPoints([new c.P(0,0),new c.P(c.$,c.$)]);class si extends c.E{constructor(e,a,h){super(),this.id=e,this.dispatcher=h,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,_,T,P)=>{const z=new(ms(_.type))(p,_,T,P);if(z.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${z.id}`);return z})(e,a,h,this),this._tiles={},this._cache=new Te(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new K,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const a=this._tiles[e];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,a,h){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,a,h)}catch(p){e.state="errored",p.status!==404?this._source.fire(new c.k(p,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new c.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(e),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(Rt).map(e=>e.key)}getRenderableIds(e){const a=[];for(const h in this._tiles)this._isIdRenderable(h,e)&&a.push(this._tiles[h]);return e?a.sort((h,p)=>{const _=h.tileID,T=p.tileID,P=new c.P(_.canonical.x,_.canonical.y)._rotate(-this.transform.bearingInRadians),z=new c.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return _.overscaledZ-T.overscaledZ||z.y-P.y||z.x-P.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(Rt).map(h=>h.key)}hasRenderableParent(e){const a=this.findLoadedParent(e,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(e,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(a||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)e?this._reloadTile(a,"expired"):this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(e,a){return c._(this,void 0,void 0,function*(){const h=this._tiles[e];h&&(h.state!=="loading"&&(h.state=a),yield this._loadTile(h,e,a))})}_tileLoaded(e,a,h){e.timeAdded=Y.now(),h==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(a,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const _=a[p];if(e.neighboringTiles&&e.neighboringTiles[_]){const T=this.getTileByID(_);h(e,T),h(T,e)}}function h(p,_){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-p.tileID.canonical.x;const P=_.tileID.canonical.y-p.tileID.canonical.y,z=Math.pow(2,p.tileID.canonical.z),L=_.tileID.key;T===0&&P===0||Math.abs(P)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),_.dem&&p.dem&&(p.dem.backfillBorder(_.dem,T,P),p.neighboringTiles&&p.neighboringTiles[L]&&(p.neighboringTiles[L].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,a,h,p){for(const _ in this._tiles){let T=this._tiles[_];if(p[_]||!T.hasData()||T.tileID.overscaledZ<=a||T.tileID.overscaledZ>h)continue;let P=T.tileID;for(;T&&T.tileID.overscaledZ>a+1;){const L=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[L.key],T&&T.hasData()&&(P=L)}let z=P;for(;z.overscaledZ>a;)if(z=z.scaledTo(z.overscaledZ-1),e[z.key]||e[z.canonical.key]){p[P.key]=P;break}}}findLoadedParent(e,a){if(e.key in this._loadedParentTiles){const h=this._loadedParentTiles[e.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=e.overscaledZ-1;h>=a;h--){const p=e.scaledTo(h),_=this._getLoadedTile(p);if(_)return _}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const a=this._tiles[e.key];return a&&a.hasData()?a:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const a=Math.ceil(e.width/this._source.tileSize)+1,h=Math.ceil(e.height/this._source.tileSize)+1,p=Math.floor(a*h*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(_)}handleWrapJump(e){const a=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,a){const h={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+a),h[_.tileID.key]=_}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(e,a,h,p,_,T){const P={},z={},L=Object.keys(e),B=Y.now();for(const V of L){const F=e[V],G=this._tiles[V];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=B)continue;const W=this.findLoadedParent(F,a),re=this.findLoadedSibling(F),ne=W||re||null;ne&&(this._addTile(ne.tileID),P[ne.tileID.key]=ne.tileID),z[V]=F}this._retainLoadedChildren(z,p,h,e);for(const V in P)e[V]||(this._coveredTiles[V]=!0,e[V]=P[V]);if(T){const V={},F={};for(const G of _)this._tiles[G.key].hasData()?V[G.key]=G:F[G.key]=G;for(const G in F){const W=F[G].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(V[W[0].key]=e[W[0].key]=W[0],V[W[1].key]=e[W[1].key]=W[1],V[W[2].key]=e[W[2].key]=W[2],V[W[3].key]=e[W[3].key]=W[3],delete F[G])}for(const G in F){const W=F[G],re=this.findLoadedParent(W,this._source.minzoom),ne=this.findLoadedSibling(W),ae=re||ne||null;if(ae){V[ae.tileID.key]=e[ae.tileID.key]=ae.tileID;for(const le in V)V[le].isChildOf(ae.tileID)&&delete V[le]}}for(const G in this._tiles)V[G]||(this._coveredTiles[G]=!0)}}update(e,a){if(!this._sourceLoaded||this._paused)return;let h;this.transform=e,this.terrain=a,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new c.Z(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(h=ze(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(B=>this._source.hasTile(B)))):h=[];const p=Pt(e,this._source),_=Math.max(p-si.maxOverzooming,this._source.minzoom),T=Math.max(p+si.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const V of h)if(V.canonical.z>this._source.minzoom){const F=V.scaledTo(V.canonical.z-1);B[F.key]=F;const G=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));B[G.key]=G}h=h.concat(Object.values(B))}const P=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(h,p);Yt(this._source.type)&&this._updateCoveredAndRetainedTiles(z,_,T,p,h,a);for(const B in z)this._tiles[B].clearFadeHold();const L=c.am(this._tiles,z);for(const B of L){const V=this._tiles[B];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,a){var h;const p={},_={},T=Math.max(a-si.maxOverzooming,this._source.minzoom),P=Math.max(a+si.maxUnderzooming,this._source.minzoom),z={};for(const L of e){const B=this._addTile(L);p[L.key]=L,B.hasData()||a<this._source.maxzoom&&(z[L.key]=L)}this._retainLoadedChildren(z,a,P,p);for(const L of e){let B=this._tiles[L.key];if(B.hasData())continue;if(a+1>this._source.maxzoom){const F=L.children(this._source.maxzoom)[0],G=this.getTile(F);if(G&&G.hasData()){p[F.key]=F;continue}}else{const F=L.children(this._source.maxzoom);if(p[F[0].key]&&p[F[1].key]&&p[F[2].key]&&p[F[3].key])continue}let V=B.wasRequested();for(let F=L.overscaledZ-1;F>=T;--F){const G=L.scaledTo(F);if(_[G.key])break;if(_[G.key]=!0,B=this.getTile(G),!B&&V&&(B=this._addTile(G)),B){const W=B.hasData();if((W||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||V)&&(p[G.key]=G),V=B.wasRequested(),W)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const a=[];let h,p=this._tiles[e].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}a.push(p.key);const _=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(_),h)break;p=_}for(const _ of a)this._loadedParentTiles[_]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const a=this._tiles[e].tileID,h=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=h}}_addTile(e){let a=this._tiles[e.key];if(a)return a;a=this._cache.getAndRemove(e),a&&(this._setTileReloadTimer(e.key,a),a.tileID=e,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,a)));const h=a;return a||(a=new Hr(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(a,e.key,a.state)),a.uses++,this._tiles[e.key]=a,h||this._source.fire(new c.l("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(e,a){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const h=a.getExpiryTimeout();h&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},h))}refreshTiles(e){for(const a in this._tiles)(this._isIdRenderable(a)||this._tiles[a].state=="errored")&&e.some(h=>h.equals(this._tiles[a].tileID.canonical))&&this._reloadTile(a,"expired")}_removeTile(e){const a=this._tiles[e];a&&(a.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(e){const a=e.sourceDataType;e.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&a==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,a,h){const p=[],_=this.transform;if(!_)return p;const T=_.getCoveringTilesDetailsProvider().allowWorldCopies(),P=h?_.getCameraQueryGeometry(e):e,z=G=>_.screenPointToMercatorCoordinate(G,this.terrain),L=this.transformBbox(e,z,!T),B=this.transformBbox(P,z,!T),V=this.getIds(),F=c.a2.fromPoints(B);for(let G=0;G<V.length;G++){const W=this._tiles[V[G]];if(W.holdingForFade())continue;const re=T?[W.tileID]:[W.tileID.unwrapTo(-1),W.tileID.unwrapTo(0)],ne=Math.pow(2,_.zoom-W.tileID.overscaledZ),ae=a*W.queryPadding*c.$/W.tileSize/ne;for(const le of re){const fe=F.map(ue=>le.getTilePoint(new c.a1(ue.x,ue.y)));if(fe.expandBy(ae),fe.intersects(Zt)){const ue=L.map(be=>le.getTilePoint(be)),me=B.map(be=>le.getTilePoint(be));p.push({tile:W,tileID:T?le:le.unwrapTo(0),queryGeometry:ue,cameraQueryGeometry:me,scale:ne})}}}return p}transformBbox(e,a,h){let p=e.map(a);if(h){const _=c.a2.fromPoints(e);_.shrinkBy(.001*Math.min(_.width(),_.height()));const T=_.map(a);c.a2.fromPoints(p).covers(T)||(p=p.map(P=>P.x>.5?new c.a1(P.x-1,P.y,P.z):P))}return p}getVisibleCoordinates(e){const a=this.getRenderableIds(e).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(a),a}hasTransition(){if(this._source.hasTransition())return!0;if(Yt(this._source.type)){const e=Y.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=e)return!0}return!1}setFeatureState(e,a,h){this._state.updateState(e=e||"_geojsonTileLayer",a,h)}removeFeatureState(e,a,h){this._state.removeFeatureState(e=e||"_geojsonTileLayer",a,h)}getFeatureState(e,a){return this._state.getState(e=e||"_geojsonTileLayer",a)}setDependencies(e,a,h){const p=this._tiles[e];p&&p.setDependencies(a,h)}reloadTilesForDependencies(e,a){for(const h in this._tiles)this._tiles[h].hasDependency(e,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(e,a))}}function Rt(y,e){const a=Math.abs(2*y.wrap)-+(y.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return y.overscaledZ-e.overscaledZ||h-a||e.canonical.y-y.canonical.y||e.canonical.x-y.canonical.x}function Yt(y){return y==="raster"||y==="image"||y==="video"}si.maxOverzooming=10,si.maxUnderzooming=3;class Ii{constructor(e,a){this.reset(e,a)}reset(e,a){this.points=e||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=c.ah(e,0,1);let a=1,h=this._distances[a];const p=e*this.paddedLength+this.padding;for(;h<p&&a<this._distances.length;)h=this._distances[++a];const _=a-1,T=this._distances[_],P=h-T,z=P>0?(p-T)/P:0;return this.points[_].mult(1-z).add(this.points[a].mult(z))}}function Dn(y,e){let a=!0;return y==="always"||y!=="never"&&e!=="never"||(a=!1),a}class Nn{constructor(e,a,h){const p=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(e/h),this.yCellCount=Math.ceil(a/h);for(let T=0;T<this.xCellCount*this.yCellCount;T++)p.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=a,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,a,h,p,_){this._forEachCell(a,h,p,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(_)}insertCircle(e,a,h,p){this._forEachCell(a-p,h-p,a+p,h+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(a),this.circles.push(h),this.circles.push(p)}_insertBoxCell(e,a,h,p,_,T){this.boxCells[_].push(T)}_insertCircleCell(e,a,h,p,_,T){this.circleCells[_].push(T)}_query(e,a,h,p,_,T,P){if(h<0||e>this.width||p<0||a>this.height)return[];const z=[];if(e<=0&&a<=0&&this.width<=h&&this.height<=p){if(_)return[{key:null,x1:e,y1:a,x2:h,y2:p}];for(let L=0;L<this.boxKeys.length;L++)z.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const B=this.circles[3*L],V=this.circles[3*L+1],F=this.circles[3*L+2];z.push({key:this.circleKeys[L],x1:B-F,y1:V-F,x2:B+F,y2:V+F})}}else this._forEachCell(e,a,h,p,this._queryCell,z,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},P);return z}query(e,a,h,p){return this._query(e,a,h,p,!1,null)}hitTest(e,a,h,p,_,T){return this._query(e,a,h,p,!0,_,T).length>0}hitTestCircle(e,a,h,p,_){const T=e-h,P=e+h,z=a-h,L=a+h;if(P<0||T>this.width||L<0||z>this.height)return!1;const B=[];return this._forEachCell(T,z,P,L,this._queryCellCircle,B,{hitTest:!0,overlapMode:p,circle:{x:e,y:a,radius:h},seenUids:{box:{},circle:{}}},_),B.length>0}_queryCell(e,a,h,p,_,T,P,z){const{seenUids:L,hitTest:B,overlapMode:V}=P,F=this.boxCells[_];if(F!==null){const W=this.bboxes;for(const re of F)if(!L.box[re]){L.box[re]=!0;const ne=4*re,ae=this.boxKeys[re];if(e<=W[ne+2]&&a<=W[ne+3]&&h>=W[ne+0]&&p>=W[ne+1]&&(!z||z(ae))&&(!B||!Dn(V,ae.overlapMode))&&(T.push({key:ae,x1:W[ne],y1:W[ne+1],x2:W[ne+2],y2:W[ne+3]}),B))return!0}}const G=this.circleCells[_];if(G!==null){const W=this.circles;for(const re of G)if(!L.circle[re]){L.circle[re]=!0;const ne=3*re,ae=this.circleKeys[re];if(this._circleAndRectCollide(W[ne],W[ne+1],W[ne+2],e,a,h,p)&&(!z||z(ae))&&(!B||!Dn(V,ae.overlapMode))){const le=W[ne],fe=W[ne+1],ue=W[ne+2];if(T.push({key:ae,x1:le-ue,y1:fe-ue,x2:le+ue,y2:fe+ue}),B)return!0}}}return!1}_queryCellCircle(e,a,h,p,_,T,P,z){const{circle:L,seenUids:B,overlapMode:V}=P,F=this.boxCells[_];if(F!==null){const W=this.bboxes;for(const re of F)if(!B.box[re]){B.box[re]=!0;const ne=4*re,ae=this.boxKeys[re];if(this._circleAndRectCollide(L.x,L.y,L.radius,W[ne+0],W[ne+1],W[ne+2],W[ne+3])&&(!z||z(ae))&&!Dn(V,ae.overlapMode))return T.push(!0),!0}}const G=this.circleCells[_];if(G!==null){const W=this.circles;for(const re of G)if(!B.circle[re]){B.circle[re]=!0;const ne=3*re,ae=this.circleKeys[re];if(this._circlesCollide(W[ne],W[ne+1],W[ne+2],L.x,L.y,L.radius)&&(!z||z(ae))&&!Dn(V,ae.overlapMode))return T.push(!0),!0}}}_forEachCell(e,a,h,p,_,T,P,z){const L=this._convertToXCellCoord(e),B=this._convertToYCellCoord(a),V=this._convertToXCellCoord(h),F=this._convertToYCellCoord(p);for(let G=L;G<=V;G++)for(let W=B;W<=F;W++)if(_.call(this,e,a,h,p,this.xCellCount*W+G,T,P,z))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,a,h,p,_,T){const P=p-e,z=_-a,L=h+T;return L*L>P*P+z*z}_circleAndRectCollide(e,a,h,p,_,T,P){const z=(T-p)/2,L=Math.abs(e-(p+z));if(L>z+h)return!1;const B=(P-_)/2,V=Math.abs(a-(_+B));if(V>B+h)return!1;if(L<=z||V<=B)return!0;const F=L-z,G=V-B;return F*F+G*G<=h*h}}function Oi(y,e,a){const h=c.L();if(!y){const{vecSouth:V,vecEast:F}=qt(e),G=k();G[0]=F[0],G[1]=F[1],G[2]=V[0],G[3]=V[1],p=G,(B=(T=(_=G)[0])*(L=_[3])-(z=_[2])*(P=_[1]))&&(p[0]=L*(B=1/B),p[1]=-P*B,p[2]=-z*B,p[3]=T*B),h[0]=G[0],h[1]=G[1],h[4]=G[2],h[5]=G[3]}var p,_,T,P,z,L,B;return c.N(h,h,[1/a,1/a,1]),h}function Vt(y,e,a,h){if(y){const p=c.L();if(!e){const{vecSouth:_,vecEast:T}=qt(a);p[0]=T[0],p[1]=T[1],p[4]=_[0],p[5]=_[1]}return c.N(p,p,[h,h,1]),p}return a.pixelsToClipSpaceMatrix}function qt(y){const e=Math.cos(y.rollInRadians),a=Math.sin(y.rollInRadians),h=Math.cos(y.pitchInRadians),p=Math.cos(y.bearingInRadians),_=Math.sin(y.bearingInRadians),T=c.ar();T[0]=-p*h*a-_*e,T[1]=-_*h*a+p*e;const P=c.as(T);P<1e-9?c.at(T):c.au(T,T,1/P);const z=c.ar();z[0]=p*h*e-_*a,z[1]=_*h*e+p*a;const L=c.as(z);return L<1e-9?c.at(z):c.au(z,z,1/L),{vecEast:z,vecSouth:T}}function Xi(y,e,a,h){let p;h?(p=[y,e,h(y,e),1],c.aw(p,p,a)):(p=[y,e,0,1],Ao(p,p,a));const _=p[3];return{point:new c.P(p[0]/_,p[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function dt(y,e){return .5+y/e*.5}function mr(y,e){return y.x>=-e[0]&&y.x<=e[0]&&y.y>=-e[1]&&y.y<=e[1]}function cn(y,e,a,h,p,_,T,P,z,L,B,V,F){const G=a?y.textSizeData:y.iconSizeData,W=c.an(G,e.transform.zoom),re=[256/e.width*2+1,256/e.height*2+1],ne=a?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ne.clear();const ae=y.lineVertexArray,le=a?y.text.placedSymbolArray:y.icon.placedSymbolArray,fe=e.transform.width/e.transform.height;let ue=!1;for(let me=0;me<le.length;me++){const be=le.get(me);if(be.hidden||be.writingMode===c.ao.vertical&&!ue){Qa(be.numGlyphs,ne);continue}ue=!1;const he=new c.P(be.anchorX,be.anchorY),Ee={getElevation:F,pitchedLabelPlaneMatrix:h,lineVertexArray:ae,pitchWithMap:_,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:he,unwrappedTileID:z,width:L,height:B,translation:V},Ze=Yi(be.anchorX,be.anchorY,Ee);if(!mr(Ze.point,re)){Qa(be.numGlyphs,ne);continue}const Le=dt(e.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),Oe=c.ap(G,W,be),Ue=_?Oe*e.transform.getPitchedTextCorrection(be.anchorX,be.anchorY,z)/Le:Oe*Le,ft=bt({projectionContext:Ee,pitchedLabelPlaneMatrixInverse:p,symbol:be,fontSize:Ue,flip:!1,keepUpright:T,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:ne,aspectRatio:fe,rotateToLine:P});ue=ft.useVertical,(ft.notEnoughRoom||ue||ft.needsFlipping&&bt({projectionContext:Ee,pitchedLabelPlaneMatrixInverse:p,symbol:be,fontSize:Ue,flip:!0,keepUpright:T,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:ne,aspectRatio:fe,rotateToLine:P}).notEnoughRoom)&&Qa(be.numGlyphs,ne)}a?y.text.dynamicLayoutVertexBuffer.updateData(ne):y.icon.dynamicLayoutVertexBuffer.updateData(ne)}function gs(y,e,a,h,p,_,T,P){const z=_.glyphStartIndex+_.numGlyphs,L=_.lineStartIndex,B=_.lineStartIndex+_.lineLength,V=e.getoffsetX(_.glyphStartIndex),F=e.getoffsetX(z-1),G=Ur(y*V,a,h,p,_.segment,L,B,P,T);if(!G)return null;const W=Ur(y*F,a,h,p,_.segment,L,B,P,T);return W?P.projectionCache.anyProjectionOccluded?null:{first:G,last:W}:null}function Ka(y,e,a,h){return y===c.ao.horizontal&&Math.abs(a.y-e.y)>Math.abs(a.x-e.x)*h?{useVertical:!0}:(y===c.ao.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function bt(y){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:a,symbol:h,fontSize:p,flip:_,keepUpright:T,glyphOffsetArray:P,dynamicLayoutVertexArray:z,aspectRatio:L,rotateToLine:B}=y,V=p/24,F=h.lineOffsetX*V,G=h.lineOffsetY*V;let W;if(h.numGlyphs>1){const re=h.glyphStartIndex+h.numGlyphs,ne=h.lineStartIndex,ae=h.lineStartIndex+h.lineLength,le=gs(V,P,F,G,_,h,B,e);if(!le)return{notEnoughRoom:!0};const fe=la(le.first.point.x,le.first.point.y,e,a),ue=la(le.last.point.x,le.last.point.y,e,a);if(T&&!_){const me=Ka(h.writingMode,fe,ue,L);if(me)return me}W=[le.first];for(let me=h.glyphStartIndex+1;me<re-1;me++){const be=Ur(V*P.getoffsetX(me),F,G,_,h.segment,ne,ae,e,B);if(!be)return{notEnoughRoom:!0};W.push(be)}W.push(le.last)}else{if(T&&!_){const ne=En(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,ae=h.lineStartIndex+h.segment+1,le=new c.P(e.lineVertexArray.getx(ae),e.lineVertexArray.gety(ae)),fe=En(le.x,le.y,e),ue=fe.signedDistanceFromCamera>0?fe.point:Qt(e.tileAnchorPoint,le,ne,1,e),me=la(ne.x,ne.y,e,a),be=la(ue.x,ue.y,e,a),he=Ka(h.writingMode,me,be,L);if(he)return he}const re=Ur(V*P.getoffsetX(h.glyphStartIndex),F,G,_,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,e,B);if(!re||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};W=[re]}for(const re of W)c.av(z,re.point,re.angle);return{}}function Qt(y,e,a,h,p){const _=y.add(y.sub(e)._unit()),T=En(_.x,_.y,p).point,P=a.sub(T);return a.add(P._mult(h/P.mag()))}function Ht(y,e,a){const h=e.projectionCache;if(h.projections[y])return h.projections[y];const p=new c.P(e.lineVertexArray.getx(y),e.lineVertexArray.gety(y)),_=En(p.x,p.y,e);if(_.signedDistanceFromCamera>0)return h.projections[y]=_.point,h.anyProjectionOccluded=h.anyProjectionOccluded||_.isOccluded,_.point;const T=y-a.direction;return Qt(a.distanceFromAnchor===0?e.tileAnchorPoint:new c.P(e.lineVertexArray.getx(T),e.lineVertexArray.gety(T)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,e)}function En(y,e,a){const h=y+a.translation[0],p=e+a.translation[1];let _;return a.pitchWithMap?(_=Xi(h,p,a.pitchedLabelPlaneMatrix,a.getElevation),_.isOccluded=!1):(_=a.transform.projectTileCoordinates(h,p,a.unwrappedTileID,a.getElevation),_.point.x=(.5*_.point.x+.5)*a.width,_.point.y=(.5*-_.point.y+.5)*a.height),_}function la(y,e,a,h){if(a.pitchWithMap){const p=[y,e,0,1];return c.aw(p,p,h),a.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],a.unwrappedTileID,a.getElevation).point}return{x:y/a.width*2-1,y:1-e/a.height*2}}function Yi(y,e,a){return a.transform.projectTileCoordinates(y,e,a.unwrappedTileID,a.getElevation)}function Jt(y,e,a){return y._unit()._perp()._mult(e*a)}function cc(y,e,a,h,p,_,T,P,z){if(P.projectionCache.offsets[y])return P.projectionCache.offsets[y];const L=a.add(e);if(y+z.direction<h||y+z.direction>=p)return P.projectionCache.offsets[y]=L,L;const B=Ht(y+z.direction,P,z),V=Jt(B.sub(a),T,z.direction),F=a.add(V),G=B.add(V);return P.projectionCache.offsets[y]=c.ax(_,L,F,G)||L,P.projectionCache.offsets[y]}function Ur(y,e,a,h,p,_,T,P,z){const L=h?y-e:y+e;let B=L>0?1:-1,V=0;h&&(B*=-1,V=Math.PI),B<0&&(V+=Math.PI);let F,G=B>0?_+p:_+p+1;P.projectionCache.cachedAnchorPoint?F=P.projectionCache.cachedAnchorPoint:(F=En(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=F);let W,re,ne=F,ae=F,le=0,fe=0;const ue=Math.abs(L),me=[];let be;for(;le+fe<=ue;){if(G+=B,G<_||G>=T)return null;le+=fe,ae=ne,re=W;const Ze={absOffsetX:ue,direction:B,distanceFromAnchor:le,previousVertex:ae};if(ne=Ht(G,P,Ze),a===0)me.push(ae),be=ne.sub(ae);else{let Le;const Oe=ne.sub(ae);Le=Oe.mag()===0?Jt(Ht(G+B,P,Ze).sub(ne),a,B):Jt(Oe,a,B),re||(re=ae.add(Le)),W=cc(G,Le,ne,_,T,re,a,P,Ze),me.push(re),be=W.sub(re)}fe=be.mag()}const he=be._mult((ue-le)/fe)._add(re||ae),Ee=V+Math.atan2(ne.y-ae.y,ne.x-ae.x);return me.push(he),{point:he,angle:z?Ee:0,path:me}}const ys=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qa(y,e){for(let a=0;a<y;a++){const h=e.length;e.resize(h+4),e.float32.set(ys,3*h)}}function Ao(y,e,a){const h=e[0],p=e[1];return y[0]=a[0]*h+a[4]*p+a[12],y[1]=a[1]*h+a[5]*p+a[13],y[3]=a[3]*h+a[7]*p+a[15],y}const un=100;class mu{constructor(e,a=new Nn(e.width+200,e.height+200,25),h=new Nn(e.width+200,e.height+200,25)){this.transform=e,this.grid=a,this.ignoredGrid=h,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+un,this.screenBottomBoundary=e.height+un,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,a,h,p,_,T,P,z,L,B,V,F){const G=this.projectAndGetPerspectiveRatio(e.anchorPointX+z[0],e.anchorPointY+z[1],_,B,F),W=h*G.perspectiveRatio;let re;if(T||P)re=this._projectCollisionBox(e,W,p,_,T,P,z,G,B,V,F);else{const be=G.x+(V?V.x*W:0),he=G.y+(V?V.y*W:0);re={allPointsOccluded:!1,box:[be+e.x1*W,he+e.y1*W,be+e.x2*W,he+e.y2*W]}}const[ne,ae,le,fe]=re.box,ue=T?re.allPointsOccluded:G.isOccluded;let me=ue;return me||(me=G.perspectiveRatio<this.perspectiveRatioCutoff),me||(me=!this.isInsideGrid(ne,ae,le,fe)),me||a!=="always"&&this.grid.hitTest(ne,ae,le,fe,a,L)?{box:[ne,ae,le,fe],placeable:!1,offscreen:!1,occluded:ue}:{box:[ne,ae,le,fe],placeable:!0,offscreen:this.isOffscreen(ne,ae,le,fe),occluded:ue}}placeCollisionCircles(e,a,h,p,_,T,P,z,L,B,V,F,G,W){const re=[],ne=new c.P(a.anchorX,a.anchorY),ae=this.getPerspectiveRatio(ne.x,ne.y,T,W),le=(L?_*this.transform.getPitchedTextCorrection(a.anchorX,a.anchorY,T)/ae:_*ae)/c.aB,fe={getElevation:W,pitchedLabelPlaneMatrix:P,lineVertexArray:h,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ne,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:G},ue=gs(le,p,a.lineOffsetX*le,a.lineOffsetY*le,!1,a,!1,fe);let me=!1,be=!1,he=!0;if(ue){const Ee=.5*V*ae+F,Ze=new c.P(-100,-100),Le=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Oe=new Ii,Ue=ue.first,ft=ue.last;let gt=[];for(let ei=Ue.path.length-1;ei>=1;ei--)gt.push(Ue.path[ei]);for(let ei=1;ei<ft.path.length;ei++)gt.push(ft.path[ei]);const tt=2.5*Ee;if(L){const ei=this.projectPathToScreenSpace(gt,fe);gt=ei.some(_i=>_i.signedDistanceFromCamera<=0)?[]:ei.map(_i=>_i.point)}let zt=[];if(gt.length>0){const ei=gt[0].clone(),_i=gt[0].clone();for(let Ci=1;Ci<gt.length;Ci++)ei.x=Math.min(ei.x,gt[Ci].x),ei.y=Math.min(ei.y,gt[Ci].y),_i.x=Math.max(_i.x,gt[Ci].x),_i.y=Math.max(_i.y,gt[Ci].y);zt=ei.x>=Ze.x&&_i.x<=Le.x&&ei.y>=Ze.y&&_i.y<=Le.y?[gt]:_i.x<Ze.x||ei.x>Le.x||_i.y<Ze.y||ei.y>Le.y?[]:c.ay([gt],Ze.x,Ze.y,Le.x,Le.y)}for(const ei of zt){Oe.reset(ei,.25*Ee);let _i=0;_i=Oe.length<=.5*Ee?1:Math.ceil(Oe.paddedLength/tt)+1;for(let Ci=0;Ci<_i;Ci++){const Si=Ci/Math.max(_i-1,1),rn=Oe.lerp(Si),Ki=rn.x+un,Wt=rn.y+un;re.push(Ki,Wt,Ee,0);const Ai=Ki-Ee,_n=Wt-Ee,Ln=Ki+Ee,Un=Wt+Ee;if(he=he&&this.isOffscreen(Ai,_n,Ln,Un),be=be||this.isInsideGrid(Ai,_n,Ln,Un),e!=="always"&&this.grid.hitTestCircle(Ki,Wt,Ee,e,B)&&(me=!0,!z))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!z&&me||!be||ae<this.perspectiveRatioCutoff?[]:re,offscreen:he,collisionDetected:me}}projectPathToScreenSpace(e,a){const h=function(p,_){const T=c.L();return c.aq(T,_.pitchedLabelPlaneMatrix),p.map(P=>{const z=Xi(P.x,P.y,T,_.getElevation),L=_.transform.projectTileCoordinates(z.point.x,z.point.y,_.unwrappedTileID,_.getElevation);return L.point.x=(.5*L.point.x+.5)*_.width,L.point.y=(.5*-L.point.y+.5)*_.height,L})}(e,a);return function(p){let _=0,T=0,P=0,z=0;for(let L=0;L<p.length;L++)p[L].isOccluded?(P=L+1,z=0):(z++,z>T&&(T=z,_=P));return p.slice(_,_+T)}(h)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[],h=new c.a2;for(const V of e){const F=new c.P(V.x+un,V.y+un);h.extend(F),a.push(F)}const{minX:p,minY:_,maxX:T,maxY:P}=h,z=this.grid.query(p,_,T,P).concat(this.ignoredGrid.query(p,_,T,P)),L={},B={};for(const V of z){const F=V.key;if(L[F.bucketInstanceId]===void 0&&(L[F.bucketInstanceId]={}),L[F.bucketInstanceId][F.featureIndex])continue;const G=[new c.P(V.x1,V.y1),new c.P(V.x2,V.y1),new c.P(V.x2,V.y2),new c.P(V.x1,V.y2)];c.az(a,G)&&(L[F.bucketInstanceId][F.featureIndex]=!0,B[F.bucketInstanceId]===void 0&&(B[F.bucketInstanceId]=[]),B[F.bucketInstanceId].push(F.featureIndex))}return B}insertCollisionBox(e,a,h,p,_,T){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:_,collisionGroupID:T,overlapMode:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,a,h,p,_,T){const P=h?this.ignoredGrid:this.grid,z={bucketInstanceId:p,featureIndex:_,collisionGroupID:T,overlapMode:a};for(let L=0;L<e.length;L+=4)P.insertCircle(z,e[L],e[L+1],e[L+2])}projectAndGetPerspectiveRatio(e,a,h,p,_){if(_){let T;p?(T=[e,a,p(e,a),1],c.aw(T,T,_)):(T=[e,a,0,1],Ao(T,T,_));const P=T[3];return{x:(T[0]/P+1)/2*this.transform.width+un,y:(-T[1]/P+1)/2*this.transform.height+un,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{const T=this.transform.projectTileCoordinates(e,a,h,p);return{x:(T.point.x+1)/2*this.transform.width+un,y:(1-T.point.y)/2*this.transform.height+un,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(e,a,h,p){const _=this.transform.projectTileCoordinates(e,a,h,p);return .5+this.transform.cameraToCenterDistance/_.signedDistanceFromCamera*.5}isOffscreen(e,a,h,p){return h<un||e>=this.screenRightBoundary||p<un||a>this.screenBottomBoundary}isInsideGrid(e,a,h,p){return h>=0&&e<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const e=c.ag([]);return c.M(e,e,[-100,-100,0]),e}_projectCollisionBox(e,a,h,p,_,T,P,z,L,B,V){let F=1,G=0,W=0,re=1;const ne=e.anchorPointX+P[0],ae=e.anchorPointY+P[1];if(T&&!_){const gt=this.projectAndGetPerspectiveRatio(ne+1,ae,p,L,V),tt=gt.x-z.x,zt=Math.atan((gt.y-z.y)/tt)+(tt<0?Math.PI:0),ei=Math.sin(zt),_i=Math.cos(zt);F=_i,G=ei,W=-ei,re=_i}else if(!T&&_){const gt=qt(this.transform);F=gt.vecEast[0],G=gt.vecEast[1],W=gt.vecSouth[0],re=gt.vecSouth[1]}let le=z.x,fe=z.y,ue=a;_&&(le=ne,fe=ae,ue=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),ue*=this.transform.getPitchedTextCorrection(ne,ae,p),B||(ue*=c.ah(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(le+=F*B.x*ue+W*B.y*ue,fe+=G*B.x*ue+re*B.y*ue);const me=e.x1*ue,be=e.x2*ue,he=(me+be)/2,Ee=e.y1*ue,Ze=e.y2*ue,Le=(Ee+Ze)/2,Oe=[{offsetX:me,offsetY:Ee},{offsetX:he,offsetY:Ee},{offsetX:be,offsetY:Ee},{offsetX:be,offsetY:Le},{offsetX:be,offsetY:Ze},{offsetX:he,offsetY:Ze},{offsetX:me,offsetY:Ze},{offsetX:me,offsetY:Le}];let Ue=[];for(const{offsetX:gt,offsetY:tt}of Oe)Ue.push(new c.P(le+F*gt+W*tt,fe+G*gt+re*tt));let ft=!1;if(_){const gt=Ue.map(tt=>this.projectAndGetPerspectiveRatio(tt.x,tt.y,p,L,V));ft=gt.some(tt=>!tt.isOccluded),Ue=gt.map(tt=>new c.P(tt.x,tt.y))}else ft=!0;return{box:c.aA(Ue),allPointsOccluded:!ft}}}class er{constructor(e,a,h,p){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?a:-a))):p&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Ti{constructor(e,a,h,p,_){this.text=new er(e?e.text:null,a,h,_),this.icon=new er(e?e.icon:null,a,p,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ja{constructor(e,a,h){this.text=e,this.icon=a,this.skipFade=h}}class Po{constructor(e,a,h,p,_){this.bucketInstanceId=e,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=p,this.tileID=_}}class gu{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const a=++this.maxGroupID;this.collisionGroups[e]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[e]}}function Xr(y,e,a,h,p){const{horizontalAlign:_,verticalAlign:T}=c.aH(y);return new c.P(-(_-.5)*e+h[0]*p,-(T-.5)*a+h[1]*p)}class es{constructor(e,a,h,p,_){this.transform=e.clone(),this.terrain=a,this.collisionIndex=new mu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new gu(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const a=this.terrain;return a?(h,p)=>a.getElevation(e,h,p):null}getBucketParts(e,a,h,p){const _=h.getBucket(a),T=h.latestFeatureIndex;if(!_||!T||a.id!==_.layerIds[0])return;const P=h.collisionBoxArray,z=_.layers[0].layout,L=_.layers[0].paint,B=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),V=h.tileSize/c.$,F=h.tileID.toUnwrapped(),G=z.get("text-rotation-alignment")==="map",W=c.aC(h,1,this.transform.zoom),re=c.aD(this.collisionIndex.transform,h,L.get("text-translate"),L.get("text-translate-anchor")),ne=c.aD(this.collisionIndex.transform,h,L.get("icon-translate"),L.get("icon-translate-anchor")),ae=Oi(G,this.transform,W);this.retainedQueryData[_.bucketInstanceId]=new Po(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,h.tileID);const le={bucket:_,layout:z,translationText:re,translationIcon:ne,unwrappedTileID:F,pitchedLabelPlaneMatrix:ae,scale:B,textPixelRatio:V,holdingForFade:h.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:c.an(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(p)for(const fe of _.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:me,symbolInstanceEnd:be}=fe;e.push({sortKey:ue,symbolInstanceStart:me,symbolInstanceEnd:be,parameters:le})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:le})}attemptAnchorPlacement(e,a,h,p,_,T,P,z,L,B,V,F,G,W,re,ne,ae,le,fe,ue){const me=c.aE[e.textAnchor],be=[e.textOffset0,e.textOffset1],he=Xr(me,h,p,be,_),Ee=this.collisionIndex.placeCollisionBox(a,F,z,L,B,P,T,ne,V.predicate,fe,he,ue);if((!le||this.collisionIndex.placeCollisionBox(le,F,z,L,B,P,T,ae,V.predicate,fe,he,ue).placeable)&&Ee.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:be,width:h,height:p,anchor:me,textBoxScale:_,prevAnchor:Ze},this.markUsedJustification(W,me,G,re),W.allowVerticalPlacement&&(this.markUsedOrientation(W,re,G),this.placedOrientations[G.crossTileID]=re),{shift:he,placedGlyphBoxes:Ee}}}placeLayerBucketPart(e,a,h){const{bucket:p,layout:_,translationText:T,translationIcon:P,unwrappedTileID:z,pitchedLabelPlaneMatrix:L,textPixelRatio:B,holdingForFade:V,collisionBoxArray:F,partiallyEvaluatedTextSize:G,collisionGroup:W}=e.parameters,re=_.get("text-optional"),ne=_.get("icon-optional"),ae=c.aF(_,"text-overlap","text-allow-overlap"),le=ae==="always",fe=c.aF(_,"icon-overlap","icon-allow-overlap"),ue=fe==="always",me=_.get("text-rotation-alignment")==="map",be=_.get("text-pitch-alignment")==="map",he=_.get("icon-text-fit")!=="none",Ee=_.get("symbol-z-order")==="viewport-y",Ze=le&&(ue||!p.hasIconData()||ne),Le=ue&&(le||!p.hasTextData()||re);!p.collisionArrays&&F&&p.deserializeCollisionBoxes(F);const Oe=this.retainedQueryData[p.bucketInstanceId].tileID,Ue=this._getTerrainElevationFunc(Oe),ft=this.transform.getFastPathSimpleProjectionMatrix(Oe),gt=(tt,zt,ei)=>{var _i,Ci;if(a[tt.crossTileID])return;if(V)return void(this.placements[tt.crossTileID]=new Ja(!1,!1,!1));let Si=!1,rn=!1,Ki=!0,Wt=null,Ai={box:null,placeable:!1,offscreen:null,occluded:!1},_n={placeable:!1},Ln=null,Un=null,Or=null,Na=0,Rs=0,ga=0;zt.textFeatureIndex?Na=zt.textFeatureIndex:tt.useRuntimeCollisionCircles&&(Na=tt.featureIndex),zt.verticalTextFeatureIndex&&(Rs=zt.verticalTextFeatureIndex);const co=zt.textBox;if(co){const sr=Qi=>{let dn=c.ao.horizontal;if(p.allowVerticalPlacement&&!Qi&&this.prevPlacement){const Br=this.prevPlacement.placedOrientations[tt.crossTileID];Br&&(this.placedOrientations[tt.crossTileID]=Br,dn=Br,this.markUsedOrientation(p,dn,tt))}return dn},ya=(Qi,dn)=>{if(p.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&zt.verticalTextBox){for(const Br of p.writingModes)if(Br===c.ao.vertical?(Ai=dn(),_n=Ai):Ai=Qi(),Ai&&Ai.placeable)break}else Ai=Qi()},Mr=tt.textAnchorOffsetStartIndex,fo=tt.textAnchorOffsetEndIndex;if(fo===Mr){const Qi=(dn,Br)=>{const an=this.collisionIndex.placeCollisionBox(dn,ae,B,Oe,z,be,me,T,W.predicate,Ue,void 0,ft);return an&&an.placeable&&(this.markUsedOrientation(p,Br,tt),this.placedOrientations[tt.crossTileID]=Br),an};ya(()=>Qi(co,c.ao.horizontal),()=>{const dn=zt.verticalTextBox;return p.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&dn?Qi(dn,c.ao.vertical):{box:null,offscreen:null}}),sr(Ai&&Ai.placeable)}else{let Qi=c.aE[(Ci=(_i=this.prevPlacement)===null||_i===void 0?void 0:_i.variableOffsets[tt.crossTileID])===null||Ci===void 0?void 0:Ci.anchor];const dn=(an,po,il)=>{const us=an.x2-an.x1,Er=an.y2-an.y1,Ls=tt.textBoxScale,na=he&&fe==="never"?po:null;let vn=null,Os=ae==="never"?1:2,Lu="never";Qi&&Os++;for(let Fa=0;Fa<Os;Fa++){for(let _a=Mr;_a<fo;_a++){const Zi=p.textAnchorOffsets.get(_a);if(Qi&&Zi.textAnchor!==Qi)continue;const va=this.attemptAnchorPlacement(Zi,an,us,Er,Ls,me,be,B,Oe,z,W,Lu,tt,p,il,T,P,na,Ue);if(va&&(vn=va.placedGlyphBoxes,vn&&vn.placeable))return Si=!0,Wt=va.shift,vn}Qi?Qi=null:Lu=ae}return h&&!vn&&(vn={box:this.collisionIndex.placeCollisionBox(co,"always",B,Oe,z,be,me,T,W.predicate,Ue,void 0,ft).box,offscreen:!1,placeable:!1,occluded:!1}),vn};ya(()=>dn(co,zt.iconBox,c.ao.horizontal),()=>{const an=zt.verticalTextBox;return p.allowVerticalPlacement&&(!Ai||!Ai.placeable)&&tt.numVerticalGlyphVertices>0&&an?dn(an,zt.verticalIconBox,c.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Ai&&(Si=Ai.placeable,Ki=Ai.offscreen);const Br=sr(Ai&&Ai.placeable);if(!Si&&this.prevPlacement){const an=this.prevPlacement.variableOffsets[tt.crossTileID];an&&(this.variableOffsets[tt.crossTileID]=an,this.markUsedJustification(p,an.anchor,tt,Br))}}}if(Ln=Ai,Si=Ln&&Ln.placeable,Ki=Ln&&Ln.offscreen,tt.useRuntimeCollisionCircles){const sr=p.text.placedSymbolArray.get(tt.centerJustifiedTextSymbolIndex),ya=c.ap(p.textSizeData,G,sr),Mr=_.get("text-padding");Un=this.collisionIndex.placeCollisionCircles(ae,sr,p.lineVertexArray,p.glyphOffsetArray,ya,z,L,h,be,W.predicate,tt.collisionCircleDiameter,Mr,T,Ue),Un.circles.length&&Un.collisionDetected&&!h&&c.w("Collisions detected, but collision boxes are not shown"),Si=le||Un.circles.length>0&&!Un.collisionDetected,Ki=Ki&&Un.offscreen}if(zt.iconFeatureIndex&&(ga=zt.iconFeatureIndex),zt.iconBox){const sr=ya=>this.collisionIndex.placeCollisionBox(ya,fe,B,Oe,z,be,me,P,W.predicate,Ue,he&&Wt?Wt:void 0,ft);_n&&_n.placeable&&zt.verticalIconBox?(Or=sr(zt.verticalIconBox),rn=Or.placeable):(Or=sr(zt.iconBox),rn=Or.placeable),Ki=Ki&&Or.offscreen}const ks=re||tt.numHorizontalGlyphVertices===0&&tt.numVerticalGlyphVertices===0,uo=ne||tt.numIconVertices===0;ks||uo?uo?ks||(rn=rn&&Si):Si=rn&&Si:rn=Si=rn&&Si;const ho=rn&&Or.placeable;if(Si&&Ln.placeable&&this.collisionIndex.insertCollisionBox(Ln.box,ae,_.get("text-ignore-placement"),p.bucketInstanceId,_n&&_n.placeable&&Rs?Rs:Na,W.ID),ho&&this.collisionIndex.insertCollisionBox(Or.box,fe,_.get("icon-ignore-placement"),p.bucketInstanceId,ga,W.ID),Un&&Si&&this.collisionIndex.insertCollisionCircles(Un.circles,ae,_.get("text-ignore-placement"),p.bucketInstanceId,Na,W.ID),h&&this.storeCollisionData(p.bucketInstanceId,ei,zt,Ln,Or,Un),tt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[tt.crossTileID]=new Ja((Si||Ze)&&!Ln?.occluded,(rn||Le)&&!Or?.occluded,Ki||p.justReloaded),a[tt.crossTileID]=!0};if(Ee){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const tt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let zt=tt.length-1;zt>=0;--zt){const ei=tt[zt];gt(p.symbolInstances.get(ei),p.collisionArrays[ei],ei)}}else for(let tt=e.symbolInstanceStart;tt<e.symbolInstanceEnd;tt++)gt(p.symbolInstances.get(tt),p.collisionArrays[tt],tt);p.justReloaded=!1}storeCollisionData(e,a,h,p,_,T){if(h.textBox||h.iconBox){let P,z;this.collisionBoxArrays.has(e)?P=this.collisionBoxArrays.get(e):(P=new Map,this.collisionBoxArrays.set(e,P)),P.has(a)?z=P.get(a):(z={text:null,icon:null},P.set(a,z)),h.textBox&&(z.text=p.box),h.iconBox&&(z.icon=_.box)}if(T){let P=this.collisionCircleArrays[e];P===void 0&&(P=this.collisionCircleArrays[e]=[]);for(let z=0;z<T.circles.length;z+=4)P.push(T.circles[z+0]-un),P.push(T.circles[z+1]-un),P.push(T.circles[z+2]),P.push(T.collisionDetected?1:0)}}markUsedJustification(e,a,h,p){let _;_=p===c.ao.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[c.aG(a)];const T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const P of T)P>=0&&(e.text.placedSymbolArray.get(P).crossTileID=_>=0&&P!==_?0:h.crossTileID)}markUsedOrientation(e,a,h){const p=a===c.ao.horizontal||a===c.ao.horizontalOnly?a:0,_=a===c.ao.vertical?a:0,T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const P of T)e.text.placedSymbolArray.get(P).placedOrientation=p;h.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(e):1,_=a?a.opacities:{},T=a?a.variableOffsets:{},P=a?a.placedOrientations:{};for(const z in this.placements){const L=this.placements[z],B=_[z];B?(this.opacities[z]=new Ti(B,p,L.text,L.icon),h=h||L.text!==B.text.placed||L.icon!==B.icon.placed):(this.opacities[z]=new Ti(null,p,L.text,L.icon,L.skipFade),h=h||L.text||L.icon)}for(const z in _){const L=_[z];if(!this.opacities[z]){const B=new Ti(L,p,!1,!1);B.isHidden()||(this.opacities[z]=B,h=h||L.text.placed||L.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in P)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=P[z]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:e)}updateLayerOpacities(e,a){const h={};for(const p of a){const _=p.getBucket(e);_&&p.latestFeatureIndex&&e.id===_.layerIds[0]&&this.updateBucketOpacities(_,p.tileID,h,p.collisionBoxArray)}}updateBucketOpacities(e,a,h,p){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const _=e.layers[0],T=_.layout,P=new Ti(null,0,!1,!1,!0),z=T.get("text-allow-overlap"),L=T.get("icon-allow-overlap"),B=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),V=T.get("text-rotation-alignment")==="map",F=T.get("text-pitch-alignment")==="map",G=T.get("icon-text-fit")!=="none",W=new Ti(null,0,z&&(L||!e.hasIconData()||T.get("icon-optional")),L&&(z||!e.hasTextData()||T.get("text-optional")),!0);!e.collisionArrays&&p&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(p);const re=(ae,le,fe)=>{for(let ue=0;ue<le/4;ue++)ae.opacityVertexArray.emplaceBack(fe);ae.hasVisibleVertices=ae.hasVisibleVertices||fe!==gl},ne=this.collisionBoxArrays.get(e.bucketInstanceId);for(let ae=0;ae<e.symbolInstances.length;ae++){const le=e.symbolInstances.get(ae),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:ue,crossTileID:me}=le;let be=this.opacities[me];h[me]?be=P:be||(be=W,this.opacities[me]=be),h[me]=!0;const he=le.numIconVertices>0,Ee=this.placedOrientations[le.crossTileID],Ze=Ee===c.ao.vertical,Le=Ee===c.ao.horizontal||Ee===c.ao.horizontalOnly;if(fe>0||ue>0){const Ue=ml(be.text);re(e.text,fe,Ze?gl:Ue),re(e.text,ue,Le?gl:Ue);const ft=be.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(zt=>{zt>=0&&(e.text.placedSymbolArray.get(zt).hidden=ft||Ze?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=ft||Le?1:0);const gt=this.variableOffsets[le.crossTileID];gt&&this.markUsedJustification(e,gt.anchor,le,Ee);const tt=this.placedOrientations[le.crossTileID];tt&&(this.markUsedJustification(e,"left",le,tt),this.markUsedOrientation(e,tt,le))}if(he){const Ue=ml(be.icon),ft=!(G&&le.verticalPlacedIconSymbolIndex&&Ze);le.placedIconSymbolIndex>=0&&(re(e.icon,le.numIconVertices,ft?Ue:gl),e.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=be.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(re(e.icon,le.numVerticalIconVertices,ft?gl:Ue),e.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}const Oe=ne&&ne.has(ae)?ne.get(ae):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Ue=e.collisionArrays[ae];if(Ue){let ft=new c.P(0,0);if(Ue.textBox||Ue.verticalTextBox){let gt=!0;if(B){const tt=this.variableOffsets[me];tt?(ft=Xr(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textBoxScale),V&&ft._rotate(F?-this.transform.bearingInRadians:this.transform.bearingInRadians)):gt=!1}if(Ue.textBox||Ue.verticalTextBox){let tt;Ue.textBox&&(tt=Ze),Ue.verticalTextBox&&(tt=Le),uc(e.textCollisionBox.collisionVertexArray,be.text.placed,!gt||tt,Oe.text,ft.x,ft.y)}}if(Ue.iconBox||Ue.verticalIconBox){const gt=!!(!Le&&Ue.verticalIconBox);let tt;Ue.iconBox&&(tt=gt),Ue.verticalIconBox&&(tt=!gt),uc(e.iconCollisionBox.collisionVertexArray,be.icon.placed,tt,Oe.icon,G?ft.x:0,G?ft.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>e}setStale(){this.stale=!0}}function uc(y,e,a,h,p,_){h&&h.length!==0||(h=[0,0,0,0]);const T=h[0]-un,P=h[1]-un,z=h[2]-un,L=h[3]-un;y.emplaceBack(e?1:0,a?1:0,p||0,_||0,T,P),y.emplaceBack(e?1:0,a?1:0,p||0,_||0,z,P),y.emplaceBack(e?1:0,a?1:0,p||0,_||0,z,L),y.emplaceBack(e?1:0,a?1:0,p||0,_||0,T,L)}const md=Math.pow(2,25),uh=Math.pow(2,24),tr=Math.pow(2,17),hh=Math.pow(2,16),Ef=Math.pow(2,9),yu=Math.pow(2,8),gd=Math.pow(2,1);function ml(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const e=y.placed?1:0,a=Math.floor(127*y.opacity);return a*md+e*uh+a*tr+e*hh+a*Ef+e*yu+a*gd+e}const gl=0;class Gr{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,a,h,p,_){const T=this._bucketParts;for(;this._currentTileIndex<e.length;)if(a.getBucketParts(T,p,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((P,z)=>P.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(a.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,_())return!0;return!1}}class hc{constructor(e,a,h,p,_,T,P,z){this.placement=new es(e,a,T,P,z),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(e,a,h){const p=Y.now(),_=()=>!this._forceFullPlacement&&Y.now()-p>2;for(;this._currentPlacementIndex>=0;){const T=a[e[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=P)&&(!T.maxzoom||T.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Gr(T)),this._inProgressLayer.continuePlacement(h[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const zo=512/c.$/2;class dc{constructor(e,a,h){this.tileID=e,this.bucketInstanceId=h,this._symbolsByKey={};const p=new Map;for(let _=0;_<a.length;_++){const T=a.get(_),P=T.key,z=p.get(P);z?z.push(T):p.set(P,[T])}for(const[_,T]of p){const P={positions:T.map(z=>({x:Math.floor(z.anchorX*zo),y:Math.floor(z.anchorY*zo)})),crossTileIDs:T.map(z=>z.crossTileID)};if(P.positions.length>128){const z=new c.aI(P.positions.length,16,Uint16Array);for(const{x:L,y:B}of P.positions)z.add(L,B);z.finish(),delete P.positions,P.index=z}this._symbolsByKey[_]=P}}getScaledCoordinates(e,a){const{x:h,y:p,z:_}=this.tileID.canonical,{x:T,y:P,z}=a.canonical,L=zo/Math.pow(2,z-_),B=(P*c.$+e.anchorY)*L,V=p*c.$*zo;return{x:Math.floor((T*c.$+e.anchorX)*L-h*c.$*zo),y:Math.floor(B-V)}}findMatches(e,a,h){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let _=0;_<e.length;_++){const T=e.get(_);if(T.crossTileID)continue;const P=this._symbolsByKey[T.key];if(!P)continue;const z=this.getScaledCoordinates(T,a);if(P.index){const L=P.index.range(z.x-p,z.y-p,z.x+p,z.y+p).sort();for(const B of L){const V=P.crossTileIDs[B];if(!h[V]){h[V]=!0,T.crossTileID=V;break}}}else if(P.positions)for(let L=0;L<P.positions.length;L++){const B=P.positions[L],V=P.crossTileIDs[L];if(Math.abs(B.x-z.x)<=p&&Math.abs(B.y-z.y)<=p&&!h[V]){h[V]=!0,T.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class qs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const a=Math.round((e-this.lng)/360);if(a!==0)for(const h in this.indexes){const p=this.indexes[h],_={};for(const T in p){const P=p[T];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+a),_[P.tileID.key]=P}this.indexes[h]=_}this.lng=e}addBucket(e,a,h){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let _=0;_<a.symbolInstances.length;_++)a.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const p=this.usedCrossTileIDs[e.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>e.overscaledZ)for(const P in T){const z=T[P];z.tileID.isChildOf(e)&&z.findMatches(a.symbolInstances,e,p)}else{const P=T[e.scaledTo(Number(_)).key];P&&P.findMatches(a.symbolInstances,e,p)}}for(let _=0;_<a.symbolInstances.length;_++){const T=a.symbolInstances.get(_);T.crossTileID||(T.crossTileID=h.generate(),p[T.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new dc(e,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(e,a){for(const h of a.getCrossTileIDsLists())for(const p of h)delete this.usedCrossTileIDs[e][p]}removeStaleBuckets(e){let a=!1;for(const h in this.indexes){const p=this.indexes[h];for(const _ in p)e[p[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,p[_]),delete p[_],a=!0)}return a}}class Io{constructor(){this.layerIndexes={},this.crossTileIDs=new qs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,a,h){let p=this.layerIndexes[e.id];p===void 0&&(p=this.layerIndexes[e.id]=new yd);let _=!1;const T={};p.handleWrapJump(h);for(const P of a){const z=P.getBucket(e);z&&e.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(P.tileID,z,this.crossTileIDs)&&(_=!0),T[z.bucketInstanceId]=!0)}return p.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(e){const a={};e.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}var ts="void main() {fragColor=vec4(1.0);}";const Ia={prelude:oi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:oi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:oi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:oi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:oi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:oi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:oi(ts,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:oi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:oi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:oi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:oi(ts,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:oi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:oi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:oi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:oi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:oi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:oi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:oi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:oi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:oi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:oi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:oi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:oi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:oi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:oi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:oi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:oi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:oi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:oi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function oi(y,e){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=e.match(/in ([\w]+) ([\w]+)/g),p=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(p):p,P={};return{fragmentSource:y=y.replace(a,(z,L,B,V,F)=>(P[F]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${F}
in ${B} ${V} ${F};
#else
uniform ${B} ${V} u_${F};
#endif
`:`
#ifdef HAS_UNIFORM_u_${F}
    ${B} ${V} ${F} = u_${F};
#endif
`)),vertexSource:e=e.replace(a,(z,L,B,V,F)=>{const G=V==="float"?"vec2":"vec4",W=F.match(/color/)?"color":G;return P[F]?L==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${B} ${G} a_${F};
out ${B} ${V} ${F};
#else
uniform ${B} ${V} u_${F};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${B} ${V} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${W}(a_${F}, u_${F}_t);
#else
    ${B} ${V} ${F} = u_${F};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${B} ${G} a_${F};
#else
uniform ${B} ${V} u_${F};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${B} ${V} ${F} = a_${F};
#else
    ${B} ${V} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${B} ${V} ${F} = unpack_mix_${W}(a_${F}, u_${F}_t);
#else
    ${B} ${V} ${F} = u_${F};
#endif
`}),staticAttributes:h,staticUniforms:T}}class $s{constructor(e,a,h){this.vertexBuffer=e,this.indexBuffer=a,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var is=c.aJ([{name:"a_pos",type:"Int16",components:2}]);const _s="#define PROJECTION_MERCATOR",Do="mercator";class ni{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Do}get shaderDefine(){return _s}get shaderPreludeCode(){return Ia.projectionMercator}get vertexShaderPreludeCode(){return Ia.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,a,h,p,_){if(this._cachedMesh)return this._cachedMesh;const T=new c.aL;T.emplaceBack(0,0),T.emplaceBack(c.$,0),T.emplaceBack(0,c.$),T.emplaceBack(c.$,c.$);const P=e.createVertexBuffer(T,is.members),z=c.aM.simpleSegment(0,0,4,2),L=new c.aN;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const B=e.createIndexBuffer(L);return this._cachedMesh=new $s(P,B,z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class vs{constructor(e=0,a=0,h=0,p=0){if(isNaN(e)||e<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=a,this.left=h,this.right=p}interpolate(e,a,h){return a.top!=null&&e.top!=null&&(this.top=c.C.number(e.top,a.top,h)),a.bottom!=null&&e.bottom!=null&&(this.bottom=c.C.number(e.bottom,a.bottom,h)),a.left!=null&&e.left!=null&&(this.left=c.C.number(e.left,a.left,h)),a.right!=null&&e.right!=null&&(this.right=c.C.number(e.right,a.right,h)),this}getCenter(e,a){const h=c.ah((this.left+e-this.right)/2,0,e),p=c.ah((this.top+a-this.bottom)/2,0,a);return new c.P(h,p)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new vs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function yl(y,e){if(!y.renderWorldCopies||y.lngRange)return;const a=e.lng-y.center.lng;e.lng+=a>180?-360:a<-180?360:0}function xs(y){return Math.max(0,Math.floor(y))}class Rn{constructor(e,a,h,p,_,T){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=_??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=xs(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new vs,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,a,h){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=xs(this._zoom),this._scale=c.af(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new vs(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!h&&e.autoCalculateNearFarZ,a&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const a=c.aO(e,-180,180)*Math.PI/180;var h,p,_,T,P,z,L,B,V;this._bearingInRadians!==a&&(this._unmodified=!1,this._bearingInRadians=a,this._calcMatrices(),this._rotationMatrix=k(),h=this._rotationMatrix,_=-this._bearingInRadians,T=(p=this._rotationMatrix)[0],P=p[1],z=p[2],L=p[3],B=Math.sin(_),V=Math.cos(_),h[0]=T*V+z*B,h[1]=P*V+L*B,h[2]=T*-B+z*V,h[3]=P*-B+L*V)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const a=c.ah(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==a&&(this._unmodified=!1,this._pitchInRadians=a,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const a=e/180*Math.PI;this._rollInRadians!==a&&(this._unmodified=!1,this._rollInRadians=a,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aP(this._fovInRadians)}setFov(e){e=c.ah(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=c.ae(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const a=this.getConstrained(this._center,e).zoom;this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this._tileZoom=Math.max(0,Math.floor(a)),this._scale=c.af(a),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,a){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=a,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,a,h){this._unmodified=!1,this._edgeInsets.interpolate(e,a,h),this._constrain(),this._calcMatrices()}resize(e,a,h=!0){this._width=e,this._height=a,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new en([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-c.ai,c.ai])}getConstrained(e,a){return this._callbacks.getConstrained(e,a)}getCameraQueryGeometry(e,a){if(a.length===1)return[a[0],e];{const{minX:h,minY:p,maxX:_,maxY:T}=c.a2.fromPoints(a).extend(e);return[new c.P(h,p),new c.P(_,p),new c.P(_,T),new c.P(h,T),new c.P(h,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:a,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(a),this.setZoom(h),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=c.ag(new Float64Array(16));c.N(e,e,[this._width/2,-this._height/2,1]),c.M(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=c.ag(new Float64Array(16)),c.N(e,e,[1,-1,1]),c.M(e,e,[-1,-1,0]),c.N(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,a,h,p){const _=h!==void 0?h:this.bearing,T=p=p!==void 0?p:this.pitch,P=c.a1.fromLngLat(e,a),z=-Math.cos(c.ae(T)),L=Math.sin(c.ae(T)),B=L*Math.sin(c.ae(_)),V=-L*Math.cos(c.ae(_));let F=this.elevation;const G=a-F;let W;z*G>=0||Math.abs(z)<.1?(W=1e4,F=a+W*z):W=-G/z;let re,ne,ae=c.aQ(1,P.y),le=0;do{if(le+=1,le>10)break;ne=W/ae,re=new c.a1(P.x+B*ne,P.y+V*ne),ae=1/re.meterInMercatorCoordinateUnits()}while(Math.abs(W-ne*ae)>1e-12);return{center:re.toLngLat(),elevation:F,zoom:c.ak(this.height/2/Math.tan(this.fovInRadians/2)/ne/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const a=c.aj(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/a,p=c.a1.fromLngLat(this.center,this.elevation),_=Ne(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=e;const T=this.calculateCenterFromCameraLngLatAlt(_.toLngLat(),c.aQ(_.z,p.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=c.aj(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const a=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/a,e.canonical.y/a,1/a/c.$,1/a/c.$]}}class Fn{constructor(e,a){this.min=e,this.max=a,this.center=c.aR([],c.aS([],this.min,this.max),.5)}quadrant(e){const a=[e%2==0,e<2],h=c.aT(this.min),p=c.aT(this.max);for(let _=0;_<a.length;_++)h[_]=a[_]?this.min[_]:this.center[_],p[_]=a[_]?this.center[_]:this.max[_];return p[2]=this.max[2],new Fn(h,p)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let a=!0;for(let h=0;h<e.planes.length;h++){const p=this.intersectsPlane(e.planes[h]);if(p===0)return 0;p===1&&(a=!1)}return a?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let a=e[3],h=e[3];for(let p=0;p<3;p++)e[p]>0?(a+=e[p]*this.min[p],h+=e[p]*this.max[p]):(h+=e[p]*this.min[p],a+=e[p]*this.max[p]);return a>=0?2:h<0?0:1}}class ir{distanceToTile2d(e,a,h,p){const _=p.distanceX([e,a]),T=p.distanceY([e,a]);return Math.hypot(_,T)}getWrap(e,a,h){return h}getTileBoundingVolume(e,a,h,p){var _,T;let P=0,z=0;if(p?.terrain){const B=new c.Z(e.z,a,e.z,e.x,e.y),V=p.terrain.getMinMaxElevation(B);P=(_=V.minElevation)!==null&&_!==void 0?_:Math.min(0,h),z=(T=V.maxElevation)!==null&&T!==void 0?T:Math.max(0,h)}const L=1<<e.z;return new Fn([a+e.x/L,e.y/L,P],[a+(e.x+1)/L,(e.y+1)/L,z])}allowVariableZoom(e,a){const h=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,p=c.ah(78.5-h/2,0,60);return!!a.terrain||e.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Cn{constructor(e,a,h){this.points=e,this.planes=a,this.aabb=h}static fromInvProjectionMatrix(e,a=1,h=0,p,_){const T=_?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],P=Math.pow(2,h),z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(F=>function(G,W,re,ne){const ae=c.aw([],G,W),le=1/ae[3]/re*ne;return c.aY(ae,ae,[le,le,1/ae[3],le])}(F,e,a,P));p&&function(F,G,W,re){const ne=re?4:0,ae=re?0:4;let le=0;const fe=[],ue=[];for(let he=0;he<4;he++){const Ee=c.aU([],F[he+ae],F[he+ne]),Ze=c.aZ(Ee);c.aR(Ee,Ee,1/Ze),fe.push(Ze),ue.push(Ee)}for(let he=0;he<4;he++){const Ee=c.a_(F[he+ne],ue[he],W);le=Ee!==null&&Ee>=0?Math.max(le,Ee):Math.max(le,fe[he])}const me=function(he,Ee){const Ze=c.aU([],he[Ee[0]],he[Ee[1]]),Le=c.aU([],he[Ee[2]],he[Ee[1]]),Oe=[0,0,0,0];return c.aV(Oe,c.aW([],Ze,Le)),Oe[3]=-c.aX(Oe,he[Ee[0]]),Oe}(F,G),be=function(he,Ee){const Ze=c.a$(he),Le=c.b0([],he,1/Ze),Oe=c.aU([],Ee,c.aR([],Le,c.aX(Ee,Le))),Ue=c.a$(Oe);if(Ue>0){const ft=Math.sqrt(1-Le[3]*Le[3]),gt=c.aR([],Le,-Le[3]),tt=c.aS([],gt,c.aR([],Oe,ft/Ue));return c.b1(Ee,tt)}return null}(W,me);if(be!==null){const he=be/c.aX(ue[0],me);le=Math.min(le,he)}for(let he=0;he<4;he++){const Ee=Math.min(le,fe[he]);F[he+ae]=[F[he+ne][0]+ue[he][0]*Ee,F[he+ne][1]+ue[he][1]*Ee,F[he+ne][2]+ue[he][2]*Ee,1]}}(z,T[0],p,_);const L=T.map(F=>{const G=c.aU([],z[F[0]],z[F[1]]),W=c.aU([],z[F[2]],z[F[1]]),re=c.aV([],c.aW([],G,W)),ne=-c.aX(re,z[F[1]]);return re.concat(ne)}),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],V=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const F of z)for(let G=0;G<3;G++)B[G]=Math.min(B[G],F[G]),V[G]=Math.max(V[G],F[G]);return new Cn(z,L,new Fn(B,V))}}class bi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a,h=!0){this._helper.resize(e,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,a){}constructor(e,a,h,p,_){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,P)=>this.getConstrained(T,P)},e,a,h,p,_),this._coveringTilesDetailsProvider=new ir}clone(){const e=new bi;return e.apply(this),e}apply(e,a,h){this._helper.apply(e,a,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const a=[new c.b2(0,e)];if(this._helper._renderWorldCopies){const h=this.screenPointToMercatorCoordinate(new c.P(0,0)),p=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),P=Math.floor(Math.min(h.x,p.x,_.x,T.x)),z=Math.floor(Math.max(h.x,p.x,_.x,T.x)),L=1;for(let B=P-L;B<=z+L;B++)B!==0&&a.push(new c.b2(B,e))}return a}getCameraFrustum(){return Cn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const a=this.screenPointToLocation(this.centerPoint,e),h=e?e.getElevationForLngLatZoom(a,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(e,a){const h=c.aj(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(a,h),_=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),T=c.a1.fromLngLat(e),P=new c.a1(T.x-(p.x-_.x),T.y-(p.y-_.y));this.setCenter(P?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,a){return a?this.coordinatePoint(c.a1.fromLngLat(e),a.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.a1.fromLngLat(e))}screenPointToLocation(e,a){var h;return(h=this.screenPointToMercatorCoordinate(e,a))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(e,a){if(a){const h=a.pointCoordinate(e);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,a){const h=a||0,p=[e.x,e.y,0,1],_=[e.x,e.y,1,1];c.aw(p,p,this._pixelMatrixInverse),c.aw(_,_,this._pixelMatrixInverse);const T=p[3],P=_[3],z=p[1]/T,L=_[1]/P,B=p[2]/T,V=_[2]/P,F=B===V?0:(h-B)/(V-B);return new c.a1(c.C.number(p[0]/T,_[0]/P,F)/this.worldSize,c.C.number(z,L,F)/this.worldSize,h)}coordinatePoint(e,a=0,h=this._pixelMatrix){const p=[e.x*this.worldSize,e.y*this.worldSize,a,1];return c.aw(p,p,h),new c.P(p[0]/p[3],p[1]/p[3])}getBounds(){const e=Math.max(0,this._helper._height/2-we(this));return new en().extend(this.screenPointToLocation(new c.P(0,e))).extend(this.screenPointToLocation(new c.P(this._helper._width,e))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(e,a){return a?a.pointCoordinate(e)!=null:e.y>this.height/2-we(this)}calculatePosMatrix(e,a=!1,h){var p;const _=(p=e.key)!==null&&p!==void 0?p:c.b3(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),T=a?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(_)){const L=T.get(_);return h?L.f32:L.f64}const P=Se(e,this.worldSize);c.O(P,a?this._alignedProjMatrix:this._viewProjMatrix,P);const z={f64:P,f32:new Float32Array(P)};return T.set(_,z),h?z.f32:z.f64}calculateFogMatrix(e){const a=e.key,h=this._fogMatrixCacheF32;if(h.has(a))return h.get(a);const p=Se(e,this.worldSize);return c.O(p,this._fogMatrix,p),h.set(a,new Float32Array(p)),h.get(a)}getConstrained(e,a){a=c.ah(+a,this.minZoom,this.maxZoom);const h={center:new c.S(e.lng,e.lat),zoom:a};let p=this._helper._lngRange;if(!this._helper._renderWorldCopies&&p===null){const fe=179.9999999999;p=[-fe,fe]}const _=this.tileSize*c.af(h.zoom);let T=0,P=_,z=0,L=_,B=0,V=0;const{x:F,y:G}=this.size;if(this._helper._latRange){const fe=this._helper._latRange;T=c.U(fe[1])*_,P=c.U(fe[0])*_,P-T<G&&(B=G/(P-T))}p&&(z=c.aO(c.V(p[0])*_,0,_),L=c.aO(c.V(p[1])*_,0,_),L<z&&(L+=_),L-z<F&&(V=F/(L-z)));const{x:W,y:re}=te(_,e);let ne,ae;const le=Math.max(V||0,B||0);if(le){const fe=new c.P(V?(L+z)/2:W,B?(P+T)/2:re);return h.center=de(_,fe).wrap(),h.zoom+=c.ak(le),h}if(this._helper._latRange){const fe=G/2;re-fe<T&&(ae=T+fe),re+fe>P&&(ae=P-fe)}if(p){const fe=(z+L)/2;let ue=W;this._helper._renderWorldCopies&&(ue=c.aO(W,fe-_/2,fe+_/2));const me=F/2;ue-me<z&&(ne=z+me),ue+me>L&&(ne=L-me)}if(ne!==void 0||ae!==void 0){const fe=new c.P(ne??W,ae??re);h.center=de(_,fe).wrap()}return h}calculateCenterFromCameraLngLatAlt(e,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,p)}_calculateNearFarZIfNeeded(e,a,h){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),_=e-p*this._helper._pixelPerMeter/Math.cos(a),T=p<0?_:e,P=Math.PI/2+this.pitchInRadians,z=c.ae(this.fov)*(Math.abs(Math.cos(c.ae(this.roll)))*this.height+Math.abs(Math.sin(c.ae(this.roll)))*this.width)/this.height*(.5+h.y/this.height),L=Math.sin(z)*T/Math.sin(c.ah(Math.PI-P-z,.01,Math.PI-.01)),B=we(this),V=Math.atan(B/this._helper.cameraToCenterDistance),F=c.ae(.75),G=V>F?2*V*(.5+h.y/(2*B)):F,W=Math.sin(G)*T/Math.sin(c.ah(Math.PI-P-G,.01,Math.PI-.01)),re=Math.min(L,W);this._helper._farZ=1.01*(Math.cos(Math.PI/2-a)*re+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,a=te(this.worldSize,this.center),h=a.x,p=a.y;this._helper._pixelPerMeter=c.aj(1,this.center.lat)*this.worldSize;const _=c.ae(Math.min(this.pitch,J)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(_));let P;this._calculateNearFarZIfNeeded(T,_,e),P=new Float64Array(16),c.b4(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aq(this._invProjMatrix,P),P[8]=2*-e.x/this._helper._width,P[9]=2*e.y/this._helper._height,this._projectionMatrix=c.b5(P),c.N(P,P,[1,-1,1]),c.M(P,P,[0,0,-this._helper.cameraToCenterDistance]),c.b6(P,P,-this.rollInRadians),c.b7(P,P,this.pitchInRadians),c.b6(P,P,-this.bearingInRadians),c.M(P,P,[-h,-p,0]),this._mercatorMatrix=c.N([],P,[this.worldSize,this.worldSize,this.worldSize]),c.N(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),c.M(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=c.aq([],P);const z=[0,0,-1,1];c.aw(z,z,this._invViewProjMatrix),this._cameraPosition=[z[0]/z[3],z[1]/z[3],z[2]/z[3]],this._fogMatrix=new Float64Array(16),c.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,c.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.M(this._fogMatrix,this._fogMatrix,[-h,-p,0]),c.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);const L=this._helper._width%2/2,B=this._helper._height%2/2,V=Math.cos(this.bearingInRadians),F=Math.sin(-this.bearingInRadians),G=h-Math.round(h)+V*L+F*B,W=p-Math.round(p)+V*B+F*L,re=new Float64Array(P);if(c.M(re,re,[G>.5?G-1:G,W>.5?W-1:W,0]),this._alignedProjMatrix=re,P=c.aq(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new c.P(0,0)),a=[e.x*this.worldSize,e.y*this.worldSize,0,1];return c.aw(a,a,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=c.aj(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,a){const h=c.a1.fromLngLat(e),p=[h.x*this.worldSize,h.y*this.worldSize,a,1];return c.aw(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(e){const{overscaledTileID:a,aligned:h,applyTerrainMatrix:p}=e,_=this._helper.getMercatorTileCoordinates(a),T=a?this.calculatePosMatrix(a,h,!0):null;let P;return P=a&&a.terrainRttPosMatrix32f&&p?a.terrainRttPosMatrix32f:T||c.b8(),{mainMatrix:P,tileMercatorCoords:_,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,a,h){return 1}transformLightDirection(e){return c.aT(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,a,h,p){const _=this.calculatePosMatrix(h);let T;p?(T=[e,a,p(e,a),1],c.aw(T,T,_)):(T=[e,a,0,1],Ao(T,T,_));const P=T[3];return{point:new c.P(T[0]/P,T[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(e){for(const a of e)this.calculatePosMatrix(a)}getMatrixForModel(e,a){const h=c.a1.fromLngLat(e,a),p=h.meterInMercatorCoordinateUnits(),_=c.b9();return c.M(_,_,[h.x,h.y,h.z]),c.b6(_,_,Math.PI),c.b7(_,_,Math.PI/2),c.N(_,_,[-p,p,p]),_}getProjectionDataForCustomLayer(e=!0){const a=new c.Z(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:a,applyGlobeMatrix:e}),p=Se(a,this.worldSize);c.O(p,this._viewProjMatrix,p),h.tileMercatorCoords=[0,0,1,1];const _=[c.$,c.$,this.worldSize/this._helper.pixelsPerMeter],T=c.ba();return c.N(T,p,_),h.fallbackMatrix=T,h.mainMatrix=T,h}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function ns(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function nr(y){if(y.useSlerp)if(y.k<1){const e=c.bb(y.startEulerAngles.roll,y.startEulerAngles.pitch,y.startEulerAngles.bearing),a=c.bb(y.endEulerAngles.roll,y.endEulerAngles.pitch,y.endEulerAngles.bearing),h=new Float64Array(4);c.bc(h,e,a,y.k);const p=c.bd(h);y.tr.setRoll(p.roll),y.tr.setPitch(p.pitch),y.tr.setBearing(p.bearing)}else y.tr.setRoll(y.endEulerAngles.roll),y.tr.setPitch(y.endEulerAngles.pitch),y.tr.setBearing(y.endEulerAngles.bearing);else y.tr.setRoll(c.C.number(y.startEulerAngles.roll,y.endEulerAngles.roll,y.k)),y.tr.setPitch(c.C.number(y.startEulerAngles.pitch,y.endEulerAngles.pitch,y.k)),y.tr.setBearing(c.C.number(y.startEulerAngles.bearing,y.endEulerAngles.bearing,y.k))}function rr(y,e,a,h,p){const _=p.padding,T=te(p.worldSize,a.getNorthWest()),P=te(p.worldSize,a.getNorthEast()),z=te(p.worldSize,a.getSouthEast()),L=te(p.worldSize,a.getSouthWest()),B=c.ae(-h),V=T.rotate(B),F=P.rotate(B),G=z.rotate(B),W=L.rotate(B),re=new c.P(Math.max(V.x,F.x,W.x,G.x),Math.max(V.y,F.y,W.y,G.y)),ne=new c.P(Math.min(V.x,F.x,W.x,G.x),Math.min(V.y,F.y,W.y,G.y)),ae=re.sub(ne),le=(p.width-(_.left+_.right+e.left+e.right))/ae.x,fe=(p.height-(_.top+_.bottom+e.top+e.bottom))/ae.y;if(fe<0||le<0)return void ns();const ue=Math.min(c.ak(p.scale*Math.min(le,fe)),y.maxZoom),me=c.P.convert(y.offset),be=new c.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(c.ae(h)),he=me.add(be).mult(p.scale/c.af(ue));return{center:de(p.worldSize,T.add(z).div(2).sub(he)),zoom:ue,bearing:h}}class hn{get useGlobeControls(){return!1}handlePanInertia(e,a){return{easingOffset:e,easingCenter:a.center}}handleMapControlsRollPitchBearingZoom(e,a){e.bearingDelta&&a.setBearing(a.bearing+e.bearingDelta),e.pitchDelta&&a.setPitch(a.pitch+e.pitchDelta),e.rollDelta&&a.setRoll(a.roll+e.rollDelta),e.zoomDelta&&a.setZoom(a.zoom+e.zoomDelta)}handleMapControlsPan(e,a,h){e.around.distSqr(a.centerPoint)<.01||a.setLocationAtPoint(h,e.around)}cameraForBoxAndBearing(e,a,h,p,_){return rr(e,a,h,p,_)}handleJumpToCenterZoom(e,a){e.zoom!==(a.zoom!==void 0?+a.zoom:e.zoom)&&e.setZoom(+a.zoom),a.center!==void 0&&e.setCenter(c.S.convert(a.center))}handleEaseTo(e,a){const h=e.zoom,p=e.padding,_={roll:e.roll,pitch:e.pitch,bearing:e.bearing},T={roll:a.roll===void 0?e.roll:a.roll,pitch:a.pitch===void 0?e.pitch:a.pitch,bearing:a.bearing===void 0?e.bearing:a.bearing},P=a.zoom!==void 0,z=!e.isPaddingEqual(a.padding);let L=!1;const B=P?+a.zoom:e.zoom;let V=e.centerPoint.add(a.offsetAsPoint);const F=e.screenPointToLocation(V),{center:G,zoom:W}=e.getConstrained(c.S.convert(a.center||F),B??h);yl(e,G);const re=te(e.worldSize,F),ne=te(e.worldSize,G).sub(re),ae=c.af(W-h);return L=W!==h,{easeFunc:le=>{if(L&&e.setZoom(c.C.number(h,W,le)),c.be(_,T)||nr({startEulerAngles:_,endEulerAngles:T,tr:e,k:le,useSlerp:_.roll!=T.roll}),z&&(e.interpolatePadding(p,a.padding,le),V=e.centerPoint.add(a.offsetAsPoint)),a.around)e.setLocationAtPoint(a.around,a.aroundPoint);else{const fe=c.af(e.zoom-h),ue=W>h?Math.min(2,ae):Math.max(.5,ae),me=Math.pow(ue,1-le),be=de(e.worldSize,re.add(ne.mult(le*me)).mult(fe));e.setLocationAtPoint(e.renderWorldCopies?be.wrap():be,V)}},isZooming:L,elevationCenter:G}}handleFlyTo(e,a){const h=a.zoom!==void 0,p=e.zoom,_=e.getConstrained(c.S.convert(a.center||a.locationAtOffset),h?+a.zoom:p),T=_.center,P=_.zoom;yl(e,T);const z=te(e.worldSize,a.locationAtOffset),L=te(e.worldSize,T).sub(z),B=L.mag(),V=c.af(P-p);let F;if(a.minZoom!==void 0){const G=Math.min(+a.minZoom,p,P),W=e.getConstrained(T,G).zoom;F=c.af(W-p)}return{easeFunc:(G,W,re,ne)=>{e.setZoom(G===1?P:p+c.ak(W));const ae=G===1?T:de(e.worldSize,z.add(L.mult(re)).mult(W));e.setLocationAtPoint(e.renderWorldCopies?ae.wrap():ae,ne)},scaleOfZoom:V,targetCenter:T,scaleOfMinZoom:F,pixelPathLength:B}}}class Bi{constructor(e,a,h){this.blendFunction=e,this.blendColor=a,this.mask=h}}Bi.Replace=[1,0],Bi.disabled=new Bi(Bi.Replace,c.bf.transparent,[!1,!1,!1,!1]),Bi.unblended=new Bi(Bi.Replace,c.bf.transparent,[!0,!0,!0,!0]),Bi.alphaBlended=new Bi([1,771],c.bf.transparent,[!0,!0,!0,!0]);const rs=2305;class Ft{constructor(e,a,h){this.enable=e,this.mode=a,this.frontFace=h}}Ft.disabled=new Ft(!1,1029,rs),Ft.backCCW=new Ft(!0,1029,rs),Ft.frontCCW=new Ft(!0,1028,rs);class $t{constructor(e,a,h){this.func=e,this.mask=a,this.range=h}}$t.ReadOnly=!1,$t.ReadWrite=!0,$t.disabled=new $t(519,$t.ReadOnly,[0,1]);const ca=7680;class di{constructor(e,a,h,p,_,T){this.test=e,this.ref=a,this.mask=h,this.fail=p,this.depthFail=_,this.pass=T}}di.disabled=new di({func:519,mask:0},0,0,ca,ca,ca);const Ui=new WeakMap;function gr(y){var e;if(Ui.has(y))return Ui.get(y);{const a=(e=y.getParameter(y.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Ui.set(y,a),a}}class Yr{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const a=e.context,h=a.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;const p=new c.aL;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const _=new c.aN;_.emplaceBack(0,1,2),this._fullscreenTriangle=new $s(a.createVertexBuffer(p,is.members),a.createIndexBuffer(_),c.aM.simpleSegment(0,0,p.length,_.length)),this._resultBuffer=new Uint8Array(4),a.activeTexture.set(h.TEXTURE1);const T=h.createTexture();h.bindTexture(h.TEXTURE_2D,T),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=a.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),gr(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,a){const h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,a),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,a=e.gl;e.activeTexture.set(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,a){const h=this._cachedRenderContext.context,p=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:c.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,p.TRIANGLES,$t.disabled,di.disabled,Bi.unblended,Ft.disabled,((_,T)=>({u_input:_,u_output_expected:T}))(e,a),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&gr(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const _=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:_}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&gr(e)){const a=e.clientWaitSync(this._readbackQueue.sync,0,0);if(a===e.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(a===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Yr._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let a=0;return a+=e[0]/256,a+=e[1]/65536,a+=e[2]/16777216,e[3]<127&&(a=-a),a/128}}const Hs=c.$/128;function dh(y,e){const a=y.granularity!==void 0?Math.max(y.granularity,1):1,h=a+(y.generateBorders?2:0),p=a+(y.extendToNorthPole||y.generateBorders?1:0)+(y.extendToSouthPole||y.generateBorders?1:0),_=h+1,T=p+1,P=y.generateBorders?-1:0,z=y.generateBorders||y.extendToNorthPole?-1:0,L=a+(y.generateBorders?1:0),B=a+(y.generateBorders||y.extendToSouthPole?1:0),V=_*T,F=h*p*6,G=_*T>65536;if(G&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const W=G||e==="32bit",re=new Int16Array(2*V);let ne=0;for(let fe=z;fe<=B;fe++)for(let ue=P;ue<=L;ue++){let me=ue/a*c.$;ue===-1&&(me=-Hs),ue===a+1&&(me=c.$+Hs);let be=fe/a*c.$;fe===-1&&(be=y.extendToNorthPole?c.bh:-Hs),fe===a+1&&(be=y.extendToSouthPole?c.bi:c.$+Hs),re[ne++]=me,re[ne++]=be}const ae=W?new Uint32Array(F):new Uint16Array(F);let le=0;for(let fe=0;fe<p;fe++)for(let ue=0;ue<h;ue++){const me=ue+1+fe*_,be=ue+(fe+1)*_,he=ue+1+(fe+1)*_;ae[le++]=ue+fe*_,ae[le++]=be,ae[le++]=me,ae[le++]=me,ae[le++]=be,ae[le++]=he}return{vertices:re.buffer.slice(0),indices:ae.buffer.slice(0),uses32bitIndices:W}}const Xs=new c.aK({fill:new c.bj(128,2),line:new c.bj(512,0),tile:new c.bj(128,32),stencil:new c.bj(128,1),circle:3});class Ro{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ia.projectionGlobe}get vertexShaderPreludeCode(){return Ia.projectionMercator.vertexSource}get subdivisionGranularity(){return Xs}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new Yr(e));const a=c.U(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(a,h),_=Y.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=_);const T=Math.min(Math.max((_-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bl(T))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,a,h,p,_){const T=(_==="stencil"?Xs.stencil:Xs.tile).getGranularityForZoomLevel(a.z);return this._getMesh(e,{granularity:T,generateBorders:h,extendToNorthPole:a.y===0&&p,extendToSouthPole:a.y===(1<<a.z)-1&&p})}_getMesh(e,a){const h=this._getMeshKey(a);if(h in this._tileMeshCache)return this._tileMeshCache[h];const p=function(_,T){const P=dh(T,"16bit"),z=c.aL.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),L=c.aN.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new $s(_.createVertexBuffer(z,is.members),_.createIndexBuffer(L),c.aM.simpleSegment(0,0,z.length,L.length))}(e,a);return this._tileMeshCache[h]=p,p}recalculate(e){}hasTransition(){const e=Y.now();let a=!1;return a=a||(e-this._errorMeasurementLastChangeTime)/1e3<.7,a=a||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,a}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const Ys=new c.r({type:new c.D(c.v.projection.type)});class ko extends c.E{constructor(e){super(),this._transitionable=new c.t(Ys),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.F(0)),this._mercatorProjection=new ni,this._verticalPerspectiveProjection=new Ro}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof c.bm){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,a,h,p,_){return this.currentProjection.getMeshFromTileID(e,a,h,p,_)}setProjection(e){this._transitionable.setValue("type",e?.type||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function fc(y){const e=_l(y.worldSize,y.center.lat);return 2*Math.PI*e}function Da(y,e,a,h,p){const _=1/(1<<p),T=e/c.$*_+h*_,P=c.bo((y/c.$*_+a*_)*Math.PI*2+Math.PI,2*Math.PI),z=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,L=Math.cos(z),B=new Float64Array(3);return B[0]=Math.sin(P)*L,B[1]=Math.sin(z),B[2]=Math.cos(P)*L,B}function Yn(y){return function(e,a){const h=Math.cos(a),p=new Float64Array(3);return p[0]=Math.sin(e)*h,p[1]=Math.sin(a),p[2]=Math.cos(e)*h,p}(y.lng*Math.PI/180,y.lat*Math.PI/180)}function _l(y,e){return y/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Lo(y){const e=Math.asin(y[1])/Math.PI*180,a=Math.sqrt(y[0]*y[0]+y[2]*y[2]);if(a>1e-6){const h=y[0]/a,p=Math.acos(y[2]/a),_=(h>0?p:-p)/Math.PI*180;return new c.S(c.aO(_,-180,180),e)}return new c.S(0,e)}function Oo(y){return Math.cos(y*Math.PI/180)}function mn(y,e){const a=Oo(y),h=Oo(e);return c.ak(h/a)}function _d(y,e){const a=y.rotate(e.bearingInRadians),h=e.zoom+mn(e.center.lat,0),p=c.bk(1/Oo(e.center.lat),1/Oo(Math.min(Math.abs(e.center.lat),60)),c.bn(h,7,3,0,1)),_=360/fc({worldSize:e.worldSize,center:{lat:e.center.lat}});return new c.S(e.center.lng-a.x*_*p,c.ah(e.center.lat+a.y*_,-c.ai,c.ai))}function pc(y){const e=.5*y,a=Math.sin(e),h=Math.cos(e);return Math.log(a+h)-Math.log(h-a)}function fh(y,e,a,h){const p=y.lat+a*h;if(Math.abs(a)>1){const _=(Math.sign(y.lat+a)!==Math.sign(y.lat)?-Math.abs(y.lat):Math.abs(y.lat))*Math.PI/180,T=Math.abs(y.lat+a)*Math.PI/180,P=pc(_+h*(T-_)),z=pc(_),L=pc(T);return new c.S(y.lng+e*((P-z)/(L-z)),p)}return new c.S(y.lng+e*h,p)}class vd{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,a,h,p){const _=`${e.z}_${e.x}_${e.y}_${p?.terrain?"t":""}`,T=this._cache.get(_);if(T)return T;const P=this._cachePrevious.get(_);if(P)return this._cache.set(_,P),P;const z=this._boundingVolumeFactory(e,a,h,p);return this._cache.set(_,z),this._hadAnyChanges=!0,z}}class vl{constructor(e,a,h,p){this.min=h,this.max=p,this.points=e,this.planes=a}static fromAabb(e,a){const h=[];for(let p=0;p<8;p++)h.push([1&~p?e[0]:a[0],(p>>1&1)==1?a[1]:e[1],(p>>2&1)==1?a[2]:e[2]]);return new vl(h,[[-1,0,0,a[0]],[1,0,0,-e[0]],[0,-1,0,a[1]],[0,1,0,-e[1]],[0,0,-1,a[2]],[0,0,1,-e[2]]],e,a)}static fromCenterSizeAngles(e,a,h){const p=c.br([],h[0],h[1],h[2]),_=c.bs([],[a[0],0,0],p),T=c.bs([],[0,a[1],0],p),P=c.bs([],[0,0,a[2]],p),z=[...e],L=[...e];for(let V=0;V<8;V++)for(let F=0;F<3;F++){const G=e[F]+_[F]*(1&~V?-1:1)+T[F]*((V>>1&1)==1?1:-1)+P[F]*((V>>2&1)==1?1:-1);z[F]=Math.min(z[F],G),L[F]=Math.max(L[F],G)}const B=[];for(let V=0;V<8;V++){const F=[...e];c.aS(F,F,c.aR([],_,1&~V?-1:1)),c.aS(F,F,c.aR([],T,(V>>1&1)==1?1:-1)),c.aS(F,F,c.aR([],P,(V>>2&1)==1?1:-1)),B.push(F)}return new vl(B,[[..._,-c.aX(_,B[0])],[...T,-c.aX(T,B[0])],[...P,-c.aX(P,B[0])],[-_[0],-_[1],-_[2],-c.aX(_,B[7])],[-T[0],-T[1],-T[2],-c.aX(T,B[7])],[-P[0],-P[1],-P[2],-c.aX(P,B[7])]],z,L)}intersectsFrustum(e){let a=!0;const h=this.points.length,p=this.planes.length,_=e.planes.length,T=e.points.length;for(let P=0;P<_;P++){const z=e.planes[P];let L=0;for(let B=0;B<h;B++){const V=this.points[B];z[0]*V[0]+z[1]*V[1]+z[2]*V[2]+z[3]>=0&&L++}if(L===0)return 0;L<h&&(a=!1)}if(a)return 2;for(let P=0;P<p;P++){const z=this.planes[P];let L=0;for(let B=0;B<T;B++){const V=e.points[B];z[0]*V[0]+z[1]*V[1]+z[2]*V[2]+z[3]>=0&&L++}if(L===0)return 0}return 1}intersectsPlane(e){const a=this.points.length;let h=0;for(let p=0;p<a;p++){const _=this.points[p];e[0]*_[0]+e[1]*_[1]+e[2]*_[2]+e[3]>=0&&h++}return h===a?2:h===0?0:1}}function ar(y,e,a){const h=y-e;return h<0?-h:Math.max(0,h-a)}function mc(y,e,a,h,p){const _=y-a;let T;return T=_<0?Math.min(-_,1+_-p):_>1?Math.min(Math.max(_-p,0),1-_):0,Math.max(T,ar(e,h,p))}class as{constructor(){this._boundingVolumeCache=new vd(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,a,h,p){const _=1<<h.z,T=1/_,P=h.x/_,z=h.y/_;let L=2;return L=Math.min(L,mc(e,a,P,z,T)),L=Math.min(L,mc(e,a,P+.5,-z-T,T)),L=Math.min(L,mc(e,a,P+.5,2-z-T,T)),L}getWrap(e,a,h){const p=1<<a.z,_=1/p,T=a.x/p,P=ar(e.x,T,_),z=ar(e.x,T-1,_),L=ar(e.x,T+1,_),B=Math.min(P,z,L);return B===L?1:B===z?-1:0}allowVariableZoom(e,a){return Pt(e,a)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,a,h,p){return this._boundingVolumeCache.getTileBoundingVolume(e,a,h,p)}_computeTileBoundingVolume(e,a,h,p){var _,T;let P=0,z=0;if(p?.terrain){const L=new c.Z(e.z,a,e.z,e.x,e.y),B=p.terrain.getMinMaxElevation(L);P=(_=B.minElevation)!==null&&_!==void 0?_:Math.min(0,h),z=(T=B.maxElevation)!==null&&T!==void 0?T:Math.max(0,h)}if(P/=c.bu,z/=c.bu,P+=1,z+=1,e.z<=0)return vl.fromAabb([-z,-z,-z],[z,z,z]);if(e.z===1)return vl.fromAabb([e.x===0?-z:0,e.y===0?0:-z,-z],[e.x===0?0:z,e.y===0?z:0,z]);{const L=[Da(0,0,e.x,e.y,e.z),Da(c.$,0,e.x,e.y,e.z),Da(c.$,c.$,e.x,e.y,e.z),Da(0,c.$,e.x,e.y,e.z)],B=[];for(const Oe of L)B.push(c.aR([],Oe,z));if(z!==P)for(const Oe of L)B.push(c.aR([],Oe,P));e.y===0&&B.push([0,1,0]),e.y===(1<<e.z)-1&&B.push([0,-1,0]);const V=[1,1,1],F=[-1,-1,-1];for(const Oe of B)for(let Ue=0;Ue<3;Ue++)V[Ue]=Math.min(V[Ue],Oe[Ue]),F[Ue]=Math.max(F[Ue],Oe[Ue]);const G=Da(c.$/2,c.$/2,e.x,e.y,e.z),W=c.aW([],[0,1,0],G);c.aV(W,W);const re=c.aW([],G,W);c.aV(re,re);const ne=c.aW([],L[2],L[1]);c.aV(ne,ne);const ae=c.aW([],L[0],L[3]);c.aV(ae,ae),B.push(c.aR([],G,z)),e.y>=(1<<e.z)/2&&B.push(c.aR([],Da(c.$/2,0,e.x,e.y,e.z),z)),e.y<(1<<e.z)/2&&B.push(c.aR([],Da(c.$/2,c.$,e.x,e.y,e.z),z));const le=Bo(G,B),fe=Bo(re,B),ue=[-G[0],-G[1],-G[2],le.max],me=[G[0],G[1],G[2],-le.min],be=[-re[0],-re[1],-re[2],fe.max],he=[re[0],re[1],re[2],-fe.min],Ee=[...ne,0],Ze=[...ae,0],Le=[];return e.y===0?Le.push(c.bt(Ze,Ee,ue),c.bt(Ze,Ee,me)):Le.push(c.bt(be,Ee,ue),c.bt(be,Ee,me),c.bt(be,Ze,ue),c.bt(be,Ze,me)),e.y===(1<<e.z)-1?Le.push(c.bt(Ze,Ee,ue),c.bt(Ze,Ee,me)):Le.push(c.bt(he,Ee,ue),c.bt(he,Ee,me),c.bt(he,Ze,ue),c.bt(he,Ze,me)),new vl(Le,[ue,me,be,he,Ee,Ze],V,F)}}}function Bo(y,e){let a=1/0,h=-1/0;for(const p of e){const _=c.aX(y,p);a=Math.min(a,_),h=Math.max(h,_)}return{min:a,max:h}}class gc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a){this._helper.resize(e,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=c.bv(),this._projectionMatrix=c.b9(),this._globeViewProjMatrix32f=c.b8(),this._globeViewProjMatrixNoCorrection=c.b9(),this._globeViewProjMatrixNoCorrectionInverted=c.b9(),this._globeProjMatrixInverted=c.b9(),this._cameraPosition=c.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,a)=>this.getConstrained(e,a)}),this._coveringTilesDetailsProvider=new as}clone(){const e=new gc;return e.apply(this),e}apply(e,a){this._globeLatitudeErrorCorrectionRadians=a||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=c.bp();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:a,applyGlobeMatrix:h}=e,p=this._helper.getMercatorTileCoordinates(a);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const a=this.pitchInRadians,h=this.cameraToCenterDistance/e,p=Math.sin(a)*h,_=Math.cos(a)*h+1,T=1/Math.sqrt(p*p+_*_)*1;let P=-p,z=_;const L=Math.sqrt(P*P+z*z);P/=L,z/=L;const B=[0,P,z];c.bw(B,B,[0,0,0],-this.bearingInRadians),c.bx(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),c.by(B,B,[0,0,0],this.center.lng*Math.PI/180);const V=1/c.aZ(B);return c.aR(B,B,V),[...B,-T*V]}isLocationOccluded(e){return!this.isSurfacePointVisible(Yn(e))}transformLightDirection(e){const a=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,p=Math.cos(h),_=[Math.sin(a)*p,Math.sin(h),Math.cos(a)*p],T=[_[2],0,-_[0]],P=[0,0,0];c.aW(P,T,_),c.aV(T,T),c.aV(P,P);const z=[0,0,0];return c.aV(z,[T[0]*e[0]+P[0]*e[1]+_[0]*e[2],T[1]*e[0]+P[1]*e[1]+_[1]*e[2],T[2]*e[0]+P[2]*e[1]+_[2]*e[2]]),z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,a,h){const p=function(P,z,L){const B=1/(1<<L.z);return new c.a1(P/c.$*B+L.x*B,z/c.$*B+L.y*B)}(e,a,h.canonical),_=(T=p.y,[c.bo(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(_[1])}projectTileCoordinates(e,a,h,p){const _=h.canonical,T=Da(e,a,_.x,_.y,_.z),P=1+(p?p(e,a):0)/c.bu,z=[T[0]*P,T[1]*P,T[2]*P,1];c.aw(z,z,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,B=L[0]*T[0]+L[1]*T[1]+L[2]*T[2]+L[3]<0;return{point:new c.P(z[0]/z[3],z[1]/z[3]),signedDistanceFromCamera:z[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=_l(this.worldSize,this.center.lat),a=c.ba(),h=c.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),c.b4(a,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;a[8]=2*-p.x/this._helper._width,a[9]=2*p.y/this._helper._height,this._projectionMatrix=c.b5(a),this._globeProjMatrixInverted=c.ba(),c.aq(this._globeProjMatrixInverted,a),c.M(a,a,[0,0,-this.cameraToCenterDistance]),c.b6(a,a,this.rollInRadians),c.b7(a,a,-this.pitchInRadians),c.b6(a,a,this.bearingInRadians),c.M(a,a,[0,0,-e]);const _=c.bp();_[0]=e,_[1]=e,_[2]=e,c.b7(h,a,this.center.lat*Math.PI/180),c.bz(h,h,-this.center.lng*Math.PI/180),c.N(h,h,_),this._globeViewProjMatrixNoCorrection=h,c.b7(a,a,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bz(a,a,-this.center.lng*Math.PI/180),c.N(a,a,_),this._globeViewProjMatrix32f=new Float32Array(a),this._globeViewProjMatrixNoCorrectionInverted=c.ba(),c.aq(this._globeViewProjMatrixNoCorrectionInverted,h);const T=c.bp();this._cameraPosition=c.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/e,c.bw(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),c.bx(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),c.bw(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),c.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bx(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),c.by(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const P=c.b5(this._globeViewProjMatrixNoCorrectionInverted);c.N(P,P,[1,1,-1]),this._cachedFrustum=Cn.fromInvProjectionMatrix(P,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){c.w("calculateFogMatrix is not supported on globe projection.");const a=c.ba();return c.ag(a),a}getVisibleUnwrappedCoordinates(e){return[new c.b2(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,a){if(!this._globeViewProjMatrixNoCorrection)return 1;const h=Yn(e);c.aR(h,h,1+a/c.bu);const p=c.bv();return c.aw(p,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(e){}getBounds(){const e=.5*this.width,a=.5*this.height,h=[new c.P(0,0),new c.P(e,0),new c.P(this.width,0),new c.P(this.width,a),new c.P(this.width,this.height),new c.P(e,this.height),new c.P(0,this.height),new c.P(0,a)],p=[];for(const V of h)p.push(this.unprojectScreenPoint(V));let _=0,T=0,P=0,z=0;const L=this.center;for(const V of p){const F=c.bA(L.lng,V.lng),G=c.bA(L.lat,V.lat);F<T&&(T=F),F>_&&(_=F),G<z&&(z=G),G>P&&(P=G)}const B=[L.lng+T,L.lat+z,L.lng+_,L.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new en(B)}getConstrained(e,a){const h=c.ah(e.lat,-c.ai,c.ai),p=c.ah(+a,this.minZoom+mn(0,h),this.maxZoom);return{center:new c.S(e.lng,h),zoom:p}}calculateCenterFromCameraLngLatAlt(e,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,p)}setLocationAtPoint(e,a){const h=Yn(this.unprojectScreenPoint(a)),p=Yn(e),_=c.bp();c.bB(_);const T=c.bp();c.by(T,h,_,-this.center.lng*Math.PI/180),c.bx(T,T,_,this.center.lat*Math.PI/180);const P=p[0]*p[0]+p[2]*p[2],z=T[0]*T[0];if(P<z)return;const L=Math.sqrt(P-z),B=-L,V=c.bC(p[0],p[2],T[0],L),F=c.bC(p[0],p[2],T[0],B),G=c.bp();c.by(G,p,_,-V);const W=c.bC(G[1],G[2],T[1],T[2]),re=c.bp();c.by(re,p,_,-F);const ne=c.bC(re[1],re[2],T[1],T[2]),ae=.5*Math.PI,le=W>=-ae&&W<=ae,fe=ne>=-ae&&ne<=ae;let ue,me;if(le&&fe){const Ze=this.center.lng*Math.PI/180,Le=this.center.lat*Math.PI/180;c.bD(V,Ze)+c.bD(W,Le)<c.bD(F,Ze)+c.bD(ne,Le)?(ue=V,me=W):(ue=F,me=ne)}else if(le)ue=V,me=W;else{if(!fe)return;ue=F,me=ne}const be=ue/Math.PI*180,he=me/Math.PI*180,Ee=this.center.lat;this.setCenter(new c.S(be,c.ah(he,-90,90))),this.setZoom(this.zoom+mn(Ee,this.center.lat))}locationToScreenPoint(e,a){const h=Yn(e);if(a){const p=a.getElevationForLngLatZoom(e,this._helper._tileZoom);c.aR(h,h,1+p/c.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(e){const a=c.bv();return c.aw(a,[...e,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],new c.P((.5*a[0]+.5)*this.width,(.5*-a[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,a){if(a){const h=a.pointCoordinate(e);if(h)return h}return c.a1.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,a){var h;return(h=this.screenPointToMercatorCoordinate(e,a))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(e,a){const h=this._cameraPosition,p=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(h,p)}getRayDirectionFromPixel(e){const a=c.bv();a[0]=e.x/this.width*2-1,a[1]=-1*(e.y/this.height*2-1),a[2]=1,a[3]=1,c.aw(a,a,this._globeViewProjMatrixNoCorrectionInverted),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];const h=c.bp();h[0]=a[0]-this._cameraPosition[0],h[1]=a[1]-this._cameraPosition[1],h[2]=a[2]-this._cameraPosition[2];const p=c.bp();return c.aV(p,h),p}isSurfacePointVisible(e){const a=this._cachedClippingPlane;return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const a=c.bv();return c.aw(a,[...e,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],a[0]>-1&&a[0]<1&&a[1]>-1&&a[1]<1&&a[2]>-1&&a[2]<1}rayPlanetIntersection(e,a){const h=c.aX(e,a),p=c.bp(),_=c.bp();c.aR(_,a,h),c.aU(p,e,_);const T=1-c.aX(p,p);if(T<0)return null;const P=c.aX(e,e)-1,z=-h+(h<0?1:-1)*Math.sqrt(T),L=P/z,B=z;return{tMin:Math.min(L,B),tMax:Math.max(L,B)}}unprojectScreenPoint(e){const a=this._cameraPosition,h=this.getRayDirectionFromPixel(e),p=this.rayPlanetIntersection(a,h);if(p){const B=c.bp();c.aS(B,a,[h[0]*p.tMin,h[1]*p.tMin,h[2]*p.tMin]);const V=c.bp();return c.aV(V,B),Lo(V)}const _=this._cachedClippingPlane,T=_[0]*h[0]+_[1]*h[1]+_[2]*h[2],P=-c.b1(_,a)/T,z=c.bp();if(P>0)c.aS(z,a,[h[0]*P,h[1]*P,h[2]*P]);else{const B=c.bp();c.aS(B,a,[2*h[0],2*h[1],2*h[2]]);const V=c.b1(this._cachedClippingPlane,B);c.aU(z,B,[this._cachedClippingPlane[0]*V,this._cachedClippingPlane[1]*V,this._cachedClippingPlane[2]*V])}const L=function(B){const V=c.bp();return V[0]=B[0]*-B[3],V[1]=B[1]*-B[3],V[2]=B[2]*-B[3],{center:V,radius:Math.sqrt(1-B[3]*B[3])}}(_);return Lo(function(B,V,F){const G=c.bp();c.aU(G,F,B);const W=c.bp();return c.bq(W,B,G,V/c.a$(G)),W}(L.center,L.radius,z))}getMatrixForModel(e,a){const h=c.S.convert(e),p=1/c.bu,_=c.b9();return c.bz(_,_,h.lng/180*Math.PI),c.b7(_,_,-h.lat/180*Math.PI),c.M(_,_,[0,0,1+a/c.bu]),c.b7(_,_,.5*Math.PI),c.N(_,_,[p,p,p]),_}getProjectionDataForCustomLayer(e=!0){const a=this.getProjectionData({overscaledTileID:new c.Z(0,0,0,0,0),applyGlobeMatrix:e});return a.tileMercatorCoords=[0,0,1,1],a}getFastPathSimpleProjectionMatrix(e){}}class yc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a,h=!0){this._helper.resize(e,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,a){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=a,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,a)=>this.getConstrained(e,a)}),this._globeness=1,this._mercatorTransform=new bi,this._verticalPerspectiveTransform=new gc}clone(){const e=new yc;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const a=this._mercatorTransform.getProjectionData(e),h=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:a.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:a.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return c.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,a,h){const p=this._mercatorTransform.getPitchedTextCorrection(e,a,h),_=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,a,h);return c.bk(p,_,this._globeness)}projectTileCoordinates(e,a,h,p){return this.currentTransform.projectTileCoordinates(e,a,h,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,a){return this.currentTransform.lngLatToCameraDepth(e,a)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,a){return this.currentTransform.getConstrained(e,a)}calculateCenterFromCameraLngLatAlt(e,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,p)}setLocationAtPoint(e,a){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,a),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,a),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,a){return this.currentTransform.locationToScreenPoint(e,a)}screenPointToMercatorCoordinate(e,a){return this.currentTransform.screenPointToMercatorCoordinate(e,a)}screenPointToLocation(e,a){return this.currentTransform.screenPointToLocation(e,a)}isPointOnMapSurface(e,a){return this.currentTransform.isPointOnMapSurface(e,a)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,a){return this.currentTransform.getMatrixForModel(e,a)}getProjectionDataForCustomLayer(e=!0){const a=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return a;const h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return h.fallbackMatrix=a.mainMatrix,h}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class yr{get useGlobeControls(){return!0}handlePanInertia(e,a){const h=_d(e,a);return Math.abs(h.lng-a.center.lng)>180&&(h.lng=a.center.lng+179.5*Math.sign(h.lng-a.center.lng)),{easingCenter:h,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,a){const h=e.around,p=a.screenPointToLocation(h);e.bearingDelta&&a.setBearing(a.bearing+e.bearingDelta),e.pitchDelta&&a.setPitch(a.pitch+e.pitchDelta),e.rollDelta&&a.setRoll(a.roll+e.rollDelta);const _=a.zoom;e.zoomDelta&&a.setZoom(a.zoom+e.zoomDelta);const T=a.zoom-_;if(T===0)return;const P=c.bA(a.center.lng,p.lng),z=P/(Math.abs(P/180)+1),L=c.bA(a.center.lat,p.lat),B=a.getRayDirectionFromPixel(h),V=a.cameraPosition,F=-1*c.aX(V,B),G=c.bp();c.aS(G,V,[B[0]*F,B[1]*F,B[2]*F]);const W=c.aZ(G)-1,re=Math.exp(.5*-Math.max(W-.3,0)),ne=_l(a.worldSize,a.center.lat)/Math.min(a.width,a.height),ae=c.bn(ne,.9,.5,1,.25),le=(1-c.af(-T))*Math.min(re,ae),fe=a.center.lat,ue=a.zoom,me=new c.S(a.center.lng+z*le,c.ah(a.center.lat+L*le,-c.ai,c.ai));a.setLocationAtPoint(p,h);const be=a.center,he=c.bn(Math.abs(P),45,85,0,1),Ee=c.bn(ne,.75,.35,0,1),Ze=Math.pow(Math.max(he,Ee),.25),Le=c.bA(be.lng,me.lng),Oe=c.bA(be.lat,me.lat);a.setCenter(new c.S(be.lng+Le*Ze,be.lat+Oe*Ze).wrap()),a.setZoom(ue+mn(fe,a.center.lat))}handleMapControlsPan(e,a,h){if(!e.panDelta)return;const p=a.center.lat,_=a.zoom;a.setCenter(_d(e.panDelta,a).wrap()),a.setZoom(_+mn(p,a.center.lat))}cameraForBoxAndBearing(e,a,h,p,_){const T=rr(e,a,h,p,_),P=a.left/_.width*2-1,z=(_.width-a.right)/_.width*2-1,L=a.top/_.height*-2+1,B=(_.height-a.bottom)/_.height*-2+1,V=c.bA(h.getWest(),h.getEast())<0,F=V?h.getEast():h.getWest(),G=V?h.getWest():h.getEast(),W=Math.max(h.getNorth(),h.getSouth()),re=Math.min(h.getNorth(),h.getSouth()),ne=F+.5*c.bA(F,G),ae=W+.5*c.bA(W,re),le=_.clone();le.setCenter(T.center),le.setBearing(T.bearing),le.setPitch(0),le.setRoll(0),le.setZoom(T.zoom);const fe=le.modelViewProjectionMatrix,ue=[Yn(h.getNorthWest()),Yn(h.getNorthEast()),Yn(h.getSouthWest()),Yn(h.getSouthEast()),Yn(new c.S(G,ae)),Yn(new c.S(F,ae)),Yn(new c.S(ne,W)),Yn(new c.S(ne,re))],me=Yn(T.center);let be=Number.POSITIVE_INFINITY;for(const he of ue)P<0&&(be=yr.getLesserNonNegativeNonNull(be,yr.solveVectorScale(he,me,fe,"x",P))),z>0&&(be=yr.getLesserNonNegativeNonNull(be,yr.solveVectorScale(he,me,fe,"x",z))),L>0&&(be=yr.getLesserNonNegativeNonNull(be,yr.solveVectorScale(he,me,fe,"y",L))),B<0&&(be=yr.getLesserNonNegativeNonNull(be,yr.solveVectorScale(he,me,fe,"y",B)));if(Number.isFinite(be)&&be!==0)return T.zoom=le.zoom+c.ak(be),T;ns()}handleJumpToCenterZoom(e,a){const h=e.center.lat,p=e.getConstrained(a.center?c.S.convert(a.center):e.center,e.zoom).center;e.setCenter(p.wrap());const _=a.zoom!==void 0?+a.zoom:e.zoom+mn(h,p.lat);e.zoom!==_&&e.setZoom(_)}handleEaseTo(e,a){const h=e.zoom,p=e.center,_=e.padding,T={roll:e.roll,pitch:e.pitch,bearing:e.bearing},P={roll:a.roll===void 0?e.roll:a.roll,pitch:a.pitch===void 0?e.pitch:a.pitch,bearing:a.bearing===void 0?e.bearing:a.bearing},z=a.zoom!==void 0,L=!e.isPaddingEqual(a.padding);let B=!1;const V=a.center?c.S.convert(a.center):p,F=e.getConstrained(V,h).center;yl(e,F);const G=e.clone();G.setCenter(F),G.setZoom(z?+a.zoom:h+mn(p.lat,V.lat)),G.setBearing(a.bearing);const W=new c.P(c.ah(e.centerPoint.x+a.offsetAsPoint.x,0,e.width),c.ah(e.centerPoint.y+a.offsetAsPoint.y,0,e.height));G.setLocationAtPoint(F,W);const re=(a.offset&&a.offsetAsPoint.mag())>0?G.center:F,ne=z?+a.zoom:h+mn(p.lat,re.lat),ae=h+mn(p.lat,0),le=ne+mn(re.lat,0),fe=c.bA(p.lng,re.lng),ue=c.bA(p.lat,re.lat),me=c.af(le-ae);return B=ne!==h,{easeFunc:be=>{if(c.be(T,P)||nr({startEulerAngles:T,endEulerAngles:P,tr:e,k:be,useSlerp:T.roll!=P.roll}),L&&e.interpolatePadding(_,a.padding,be),a.around)c.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(a.around,a.aroundPoint);else{const he=le>ae?Math.min(2,me):Math.max(.5,me),Ee=Math.pow(he,1-be),Ze=fh(p,fe,ue,be*Ee);e.setCenter(Ze.wrap())}if(B){const he=c.C.number(ae,le,be)+mn(0,e.center.lat);e.setZoom(he)}},isZooming:B,elevationCenter:re}}handleFlyTo(e,a){const h=a.zoom!==void 0,p=e.center,_=e.zoom,T=e.padding,P=!e.isPaddingEqual(a.padding),z=e.getConstrained(c.S.convert(a.center||a.locationAtOffset),_).center,L=h?+a.zoom:e.zoom+mn(e.center.lat,z.lat),B=e.clone();B.setCenter(z),B.setZoom(L),B.setBearing(a.bearing);const V=new c.P(c.ah(e.centerPoint.x+a.offsetAsPoint.x,0,e.width),c.ah(e.centerPoint.y+a.offsetAsPoint.y,0,e.height));B.setLocationAtPoint(z,V);const F=B.center;yl(e,F);const G=function(ue,me,be){const he=Yn(me),Ee=Yn(be),Ze=c.aX(he,Ee),Le=Math.acos(Ze),Oe=fc(ue);return Le/(2*Math.PI)*Oe}(e,p,F),W=_+mn(p.lat,0),re=L+mn(F.lat,0),ne=c.af(re-W);let ae;if(typeof a.minZoom=="number"){const ue=+a.minZoom+mn(F.lat,0),me=Math.min(ue,W,re)+mn(0,F.lat),be=e.getConstrained(F,me).zoom+mn(F.lat,0);ae=c.af(be-W)}const le=c.bA(p.lng,F.lng),fe=c.bA(p.lat,F.lat);return{easeFunc:(ue,me,be,he)=>{const Ee=fh(p,le,fe,be);P&&e.interpolatePadding(T,a.padding,ue);const Ze=ue===1?F:Ee;e.setCenter(Ze.wrap());const Le=W+c.ak(me);e.setZoom(ue===1?L:Le+mn(0,Ze.lat))},scaleOfZoom:ne,targetCenter:F,scaleOfMinZoom:ae,pixelPathLength:G}}static solveVectorScale(e,a,h,p,_){const T=p==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],P=[h[3],h[7],h[11],h[15]],z=e[0]*T[0]+e[1]*T[1]+e[2]*T[2],L=e[0]*P[0]+e[1]*P[1]+e[2]*P[2],B=a[0]*T[0]+a[1]*T[1]+a[2]*T[2],V=a[0]*P[0]+a[1]*P[1]+a[2]*P[2];return B+_*L===z+_*V||P[3]*(z-B)+T[3]*(V-L)+z*V==B*L?null:(B+T[3]-_*V-_*P[3])/(B-z-_*V+_*L)}static getLesserNonNegativeNonNull(e,a){return a!==null&&a>=0&&a<e?a:e}}class ph{constructor(e){this._globe=e,this._mercatorCameraHelper=new hn,this._verticalPerspectiveCameraHelper=new yr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,a){return this.currentHelper.handlePanInertia(e,a)}handleMapControlsRollPitchBearingZoom(e,a){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,a)}handleMapControlsPan(e,a,h){this.currentHelper.handleMapControlsPan(e,a,h)}cameraForBoxAndBearing(e,a,h,p,_){return this.currentHelper.cameraForBoxAndBearing(e,a,h,p,_)}handleJumpToCenterZoom(e,a){this.currentHelper.handleJumpToCenterZoom(e,a)}handleEaseTo(e,a){return this.currentHelper.handleEaseTo(e,a)}handleFlyTo(e,a){return this.currentHelper.handleFlyTo(e,a)}}const _u=(y,e)=>c.y(y,e&&e.filter(a=>a.identifier!=="source.canvas")),Cf=c.bE();class mh extends c.E{constructor(e,a={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const p=this.sourceCaches[h].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[h].reload()}},this.map=e,this.dispatcher=new Nt(hi(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,p)=>this.getGlyphs(h,p)),this.dispatcher.registerMessageHandler("GI",(h,p)=>this.getImages(h,p)),this.imageManager=new ut,this.imageManager.setEventedParent(this),this.glyphManager=new ai(e._requestManager,a.localIdeographFontFamily),this.lineAtlas=new mt(256,512),this.crossTileSymbolIndex=new Io,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",c.bG()),In().on(Co,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const p=this.sourceCaches[h.sourceId];if(!p)return;const _=p.getSource();if(_&&_.vectorLayerIds)for(const T in this._layers){const P=this._layers[T];P.source===_.id&&this._validateLayer(P)}})}setGlobalStateProperty(e,a){var h,p,_;this._checkLoaded();const T=a===null?(_=(p=(h=this.stylesheet.state)===null||h===void 0?void 0:h[e])===null||p===void 0?void 0:p.default)!==null&&_!==void 0?_:null:a;if(c.bH(T,this._globalState[e]))return this;this._globalState[e]=T;const P=this._findGlobalStateAffectedSources([e]);for(const z in this.sourceCaches)P.has(z)&&(this._reloadSource(z),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const a=[];for(const p in e)!c.bH(this._globalState[p],e[p].default)&&(a.push(p),this._globalState[p]=e[p].default);const h=this._findGlobalStateAffectedSources(a);for(const p in this.sourceCaches)h.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(e){if(e.length===0)return new Set;const a=new Set;for(const h in this._layers){const p=this._layers[h],_=p.getLayoutAffectingGlobalStateRefs();for(const T of e)_.has(T)&&a.add(p.source)}return a}loadURL(e,a={},h){this.fire(new c.l("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;c.j(p,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,a,h)}).catch(T=>{this._loadStyleRequest=null,T&&!_.signal.aborted&&this.fire(new c.k(T))})}loadJSON(e,a={},h){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(e,a,h)}).catch(()=>{})}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Cf,{validate:!1})}_load(e,a,h){var p,_,T;const P=a.transformStyle?a.transformStyle(h,e):e;if(!a.validate||!_u(this,c.z(P))){this._loaded=!0,this.stylesheet=P;for(const z in P.sources)this.addSource(z,P.sources[z],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new je(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new st(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.setGlobalState((T=this.stylesheet.state)!==null&&T!==void 0?T:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){const e=c.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of e){const h=c.bJ(a);h.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=h}}_loadSprite(e,a=!1,h=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,T,P,z){return c._(this,void 0,void 0,function*(){const L=ct(_),B=P>1?"@2x":"",V={},F={};for(const{id:G,url:W}of L){const re=T.transformRequest(ht(W,B,".json"),"SpriteJSON");V[G]=c.j(re,z);const ne=T.transformRequest(ht(W,B,".png"),"SpriteImage");F[G]=Ye.getImage(ne,z)}return yield Promise.all([...Object.values(V),...Object.values(F)]),function(G,W){return c._(this,void 0,void 0,function*(){const re={};for(const ne in G){re[ne]={};const ae=Y.getImageCanvasContext((yield W[ne]).data),le=(yield G[ne]).data;for(const fe in le){const{width:ue,height:me,x:be,y:he,sdf:Ee,pixelRatio:Ze,stretchX:Le,stretchY:Oe,content:Ue,textFitWidth:ft,textFitHeight:gt}=le[fe];re[ne][fe]={data:null,pixelRatio:Ze,sdf:Ee,stretchX:Le,stretchY:Oe,content:Ue,textFitWidth:ft,textFitHeight:gt,spriteData:{width:ue,height:me,x:be,y:he,context:ae}}}}return re})}(V,F)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const T in _){this._spritesImagesIds[T]=[];const P=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(z=>!(z in _)):[];for(const z of P)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in _[T]){const L=T==="default"?z:`${T}:${z}`;this._spritesImagesIds[T].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,_[T][z],!1):this.imageManager.addImage(L,_[T][z]),a&&(this._changedImages[L]=!0)}}}).catch(_=>{this._spriteRequest=null,p=_,this.fire(new c.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),h&&h(p)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(e){const a=this.sourceCaches[e.source];if(!a)return;const h=e.sourceLayer;if(!h)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(h)===-1)&&this.fire(new c.k(new Error(`Source layer "${h}" does not exist on source "${p.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,a=!1){const h=this._serializedAllLayers();if(!e||e.length===0)return Object.values(a?c.bK(h):h);const p=[];for(const _ of e)if(h[_]){const T=a?c.bK(h[_]):h[_];p.push(T)}return p}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const a=Object.keys(this._layers);for(const h of a){const p=this._layers[h];p.type!=="custom"&&(e[h]=p.serialize())}return e}hasTransitions(){var e,a,h;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((a=this.sky)===null||a===void 0)&&a.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(p.length||_.length)&&this._updateWorkerLayers(p,_);for(const T in this._updatedSources){const P=this._updatedSources[T];if(P==="reload")this._reloadSource(T);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const h={};for(const p in this.sourceCaches){const _=this.sourceCaches[p];h[p]=_.used,_.used=!1}for(const p of this._order){const _=this._layers[p];_.recalculate(e,this._availableImages),!_.isHidden(e.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const p in h){const _=this.sourceCaches[p];!!h[p]!=!!_.used&&_.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,a&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,a={}){var h;this._checkLoaded();const p=this.serialize();if(e=a.transformStyle?a.transformStyle(p,e):e,((h=a.validate)===null||h===void 0||h)&&_u(this,c.z(e)))return!1;(e=c.bK(e)).layers=c.bI(e.layers);const _=c.bL(p,e),T=this._getOperationsToPerform(_);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const P of T.operations)P();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const a=[],h=[];for(const p of e)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":a.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:h.push(p.command)}return{operations:a,unimplemented:h}}addImage(e,a){if(this.getImage(e))return this.fire(new c.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,a),this._afterImageUpdated(e)}updateImage(e,a){this.imageManager.updateImage(e,a)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new c.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,a,h={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(c.z.source,`sources.${e}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[e]=new si(e,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:e})),p.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===e)return this.fire(new c.k(new Error(`Source "${e}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],a.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,a){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const h=this.sourceCaches[e].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(a),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,a,h={}){this._checkLoaded();const p=e.id;if(this.getLayer(p))return void this.fire(new c.k(new Error(`Layer "${p}" already exists on this map.`)));let _;if(e.type==="custom"){if(_u(this,c.bM(e)))return;_=c.bJ(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(p,e.source),e=c.bK(e),e=c.e(e,{source:p})),this._validate(c.z.layer,`layers.${p}`,e,{arrayIndex:-1},h))return;_=c.bJ(e),this._validateLayer(_),_.setEventedParent(this,{layer:{id:p}})}const T=a?this._order.indexOf(a):this._order.length;if(a&&T===-1)this.fire(new c.k(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(T,0,p),this._layerOrderChanged=!0,this._layers[p]=_,this._removedLayers[p]&&_.source&&_.type!=="custom"){const P=this._removedLayers[p];delete this._removedLayers[p],P.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(e,a){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new c.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===a)return;const h=this._order.indexOf(e);this._order.splice(h,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new c.k(new Error(`Cannot move layer "${e}" before non-existing layer "${a}".`))):(this._order.splice(p,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const a=this._layers[e];if(!a)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${e}".`)));a.setEventedParent(null);const h=this._order.indexOf(e);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=a,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],a.onRemove&&a.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,a,h){this._checkLoaded();const p=this.getLayer(e);p?p.minzoom===a&&p.maxzoom===h||(a!=null&&(p.minzoom=a),h!=null&&(p.maxzoom=h),this._updateLayer(p)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,a,h={}){this._checkLoaded();const p=this.getLayer(e);if(p){if(!c.bH(p.filter,a))return a==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(c.z.filter,`layers.${p.id}.filter`,a,null,h)||(p.setFilter(c.bK(a)),this._updateLayer(p)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return c.bK(this.getLayer(e).filter)}setLayoutProperty(e,a,h,p={}){this._checkLoaded();const _=this.getLayer(e);_?c.bH(_.getLayoutProperty(a),h)||(_.setLayoutProperty(a,h,p),this._updateLayer(_)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,a){const h=this.getLayer(e);if(h)return h.getLayoutProperty(a);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,a,h,p={}){this._checkLoaded();const _=this.getLayer(e);_?c.bH(_.getPaintProperty(a),h)||(_.setPaintProperty(a,h,p)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new c.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,a){return this.getLayer(e).getPaintProperty(a)}setFeatureState(e,a){this._checkLoaded();const h=e.source,p=e.sourceLayer,_=this.sourceCaches[h];if(_===void 0)return void this.fire(new c.k(new Error(`The source '${h}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&p?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||p?(e.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),_.setFeatureState(p,e.id,a)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,a){this._checkLoaded();const h=e.source,p=this.sourceCaches[h];if(p===void 0)return void this.fire(new c.k(new Error(`The source '${h}' does not exist in the map's style.`)));const _=p.getSource().type,T=_==="vector"?e.sourceLayer:void 0;_!=="vector"||T?a&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(T,e.id,a):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const a=e.source,h=e.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||h?(e.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(h,e.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=c.bN(this.sourceCaches,_=>_.serialize()),a=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,p=this.stylesheet;return c.bO({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:e,layers:a,terrain:h},_=>_!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const a=T=>this._layers[T].type==="fill-extrusion",h={},p=[];for(let T=this._order.length-1;T>=0;T--){const P=this._order[T];if(a(P)){h[P]=T;for(const z of e){const L=z[P];if(L)for(const B of L)p.push(B)}}}p.sort((T,P)=>P.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const P=this._order[T];if(a(P))for(let z=p.length-1;z>=0;z--){const L=p[z].feature;if(h[L.layer.id]<T)break;_.push(L),p.pop()}else for(const z of e){const L=z[P];if(L)for(const B of L)_.push(B.feature)}}return _}queryRenderedFeatures(e,a,h){a&&a.filter&&this._validate(c.z.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!(Array.isArray(a.layers)||a.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of a.layers){const B=this._layers[L];if(!B)return this.fire(new c.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];p[B.source]=!0}}const _=[];a.availableImages=this._availableImages;const T=this._serializedAllLayers(),P=a.layers instanceof Set?a.layers:Array.isArray(a.layers)?new Set(a.layers):null,z=Object.assign(Object.assign({},a),{layers:P});for(const L in this.sourceCaches)a.layers&&!p[L]||_.push(Xn(this.sourceCaches[L],this._layers,T,e,z,h,this.map.terrain?(B,V,F)=>this.map.terrain.getElevation(B,V,F):void 0));return this.placement&&_.push(function(L,B,V,F,G,W,re){const ne={},ae=W.queryRenderedSymbols(F),le=[];for(const fe of Object.keys(ae).map(Number))le.push(re[fe]);le.sort(Us);for(const fe of le){const ue=fe.featureIndex.lookupSymbolFeatures(ae[fe.bucketInstanceId],B,fe.bucketIndex,fe.sourceLayerIndex,G.filter,G.layers,G.availableImages,L);for(const me in ue){const be=ne[me]=ne[me]||[],he=ue[me];he.sort((Ee,Ze)=>{const Le=fe.featureSortOrder;if(Le){const Oe=Le.indexOf(Ee.featureIndex);return Le.indexOf(Ze.featureIndex)-Oe}return Ze.featureIndex-Ee.featureIndex});for(const Ee of he)be.push(Ee)}}return function(fe,ue,me){for(const be in fe)for(const he of fe[be])ps(he,me[ue[be].source]);return fe}(ne,L,V)}(this._layers,T,this.sourceCaches,e,z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(e,a){a&&a.filter&&this._validate(c.z.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[e];return h?function(p,_){const T=p.getRenderableIds().map(L=>p.getTileByID(L)),P=[],z={};for(let L=0;L<T.length;L++){const B=T[L],V=B.tileID.canonical.key;z[V]||(z[V]=!0,B.querySourceFeatures(P,_))}return P}(h,a):[]}getLight(){return this.light.getLight()}setLight(e,a={}){this._checkLoaded();const h=this.light.getLight();let p=!1;for(const T in e)if(!c.bH(e[T],h[T])){p=!0;break}if(!p)return;const _={now:Y.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,a),this.light.updateTransitions(_)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,a={}){this._checkLoaded();const h=this.getSky();let p=!1;if(!e&&!h)return;if(e&&!h)p=!0;else if(!e&&h)p=!0;else for(const T in e)if(!c.bH(e[T],h[T])){p=!0;break}if(!p)return;const _={now:Y.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,a),this.sky.updateTransitions(_)}_setProjectionInternal(e){const a=function(h){if(Array.isArray(h)){const p=new ko({type:h});return{projection:p,transform:new yc,cameraHelper:new ph(p)}}switch(h){case"mercator":return{projection:new ni,transform:new bi,cameraHelper:new hn};case"globe":{const p=new ko({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new yc,cameraHelper:new ph(p)}}case"vertical-perspective":return{projection:new Ro,transform:new gc,cameraHelper:new yr};default:return c.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new ni,transform:new bi,cameraHelper:new hn}}}(e);this.projection=a.projection,this.map.migrateProjection(a.transform,a.cameraHelper);for(const h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(e,a,h,p,_={}){return(!_||_.validate!==!1)&&_u(this,e.call(c.z,c.e({key:a,style:this.serialize(),value:h,styleSpec:c.v},p)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),In().off(Co,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const h=this.sourceCaches[a];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const a in this.sourceCaches)this.sourceCaches[a].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,a,h,p,_=!1){let T=!1,P=!1;const z={};for(const L of this._order){const B=this._layers[L];if(B.type!=="symbol")continue;if(!z[B.source]){const F=this.sourceCaches[B.source];z[B.source]=F.getRenderableIds(!0).map(G=>F.getTileByID(G)).sort((G,W)=>W.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(W.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(B,z[B.source],e.center.lng);T=T||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Y.now(),e.zoom))&&(this.pauseablePlacement=new hc(e,this.map.terrain,this._order,_,a,h,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Y.now()),P=!0),T&&this.pauseablePlacement.placement.setStale()),P||T)for(const L of this._order){const B=this._layers[L];B.type==="symbol"&&this.placement.updateLayerOpacities(B,z[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Y.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,a){return c._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),h})}getGlyphs(e,a){return c._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,a={}){this._checkLoaded(),e&&this._validate(c.z.glyphs,"glyphs",e,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,a,h={},p){this._checkLoaded();const _=[{id:e,url:a}],T=[...ct(this.stylesheet.sprite),..._];this._validate(c.z.sprite,"sprite",T,null,h)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,p))}removeSprite(e){this._checkLoaded();const a=ct(this.stylesheet.sprite);if(a.find(h=>h.id===e)){if(this._spritesImagesIds[e])for(const h of this._spritesImagesIds[e])this.imageManager.removeImage(h),this._changedImages[h]=!0;a.splice(a.findIndex(h=>h.id===e),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return ct(this.stylesheet.sprite)}setSprite(e,a={},h){this._checkLoaded(),e&&this._validate(c.z.sprite,"sprite",e,null,a)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,h):(this._unloadSprite(),h&&h(null)))}}var Af=c.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pf{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,a,h,p,_,T,P,z,L){this.context=e;let B=this.boundPaintVertexBuffers.length!==p.length;for(let V=0;!B&&V<p.length;V++)this.boundPaintVertexBuffers[V]!==p[V]&&(B=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==h||B||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==L?this.freshBind(a,h,p,_,T,P,z,L):(e.bindVertexArray.set(this.vao),P&&P.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind(),L&&L.bind())}freshBind(e,a,h,p,_,T,P,z){const L=e.numAttributes,B=this.context,V=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=p,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=z,a.enableAttributes(V,e);for(const F of h)F.enableAttributes(V,e);T&&T.enableAttributes(V,e),P&&P.enableAttributes(V,e),z&&z.enableAttributes(V,e),a.bind(),a.setVertexAttribPointers(V,e,_);for(const F of h)F.bind(),F.setVertexAttribPointers(V,e,_);T&&(T.bind(),T.setVertexAttribPointers(V,e,_)),p&&p.bind(),P&&(P.bind(),P.setVertexAttribPointers(V,e,_)),z&&(z.bind(),z.setVertexAttribPointers(V,e,_)),B.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vu=(y,e,a,h,p)=>({u_texture:0,u_ele_delta:y,u_fog_matrix:e,u_fog_color:a?a.properties.get("fog-color"):c.bf.white,u_fog_ground_blend:a?a.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:a?a.calculateFogBlendOpacity(h):0,u_horizon_color:a?a.properties.get("horizon-color"):c.bf.white,u_horizon_fog_blend:a?a.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),gh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function jo(y){const e=[];for(let a=0;a<y.length;a++){if(y[a]===null)continue;const h=y[a].split(" ");e.push(h.pop())}return e}class yh{constructor(e,a,h,p,_,T,P,z,L=[]){const B=e.gl;this.program=B.createProgram();const V=jo(a.staticAttributes),F=h?h.getBinderAttributes():[],G=V.concat(F),W=Ia.prelude.staticUniforms?jo(Ia.prelude.staticUniforms):[],re=P.staticUniforms?jo(P.staticUniforms):[],ne=a.staticUniforms?jo(a.staticUniforms):[],ae=h?h.getBinderUniforms():[],le=W.concat(re).concat(ne).concat(ae),fe=[];for(const Le of le)fe.indexOf(Le)<0&&fe.push(Le);const ue=h?h.defines():[];gr(B)&&ue.unshift("#version 300 es"),_&&ue.push("#define OVERDRAW_INSPECTOR;"),T&&ue.push("#define TERRAIN3D;"),z&&ue.push(z),L&&ue.push(...L);let me=ue.concat(Ia.prelude.fragmentSource,P.fragmentSource,a.fragmentSource).join(`
`),be=ue.concat(Ia.prelude.vertexSource,P.vertexSource,a.vertexSource).join(`
`);gr(B)||(me=function(Le){return Le.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(me),be=function(Le){return Le.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(be));const he=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(he,me),B.compileShader(he),!B.getShaderParameter(he,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(he)}`);B.attachShader(this.program,he);const Ee=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Ee,be),B.compileShader(Ee),!B.getShaderParameter(Ee,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Ee)}`);B.attachShader(this.program,Ee),this.attributes={};const Ze={};this.numAttributes=G.length;for(let Le=0;Le<this.numAttributes;Le++)G[Le]&&(B.bindAttribLocation(this.program,Le,G[Le]),this.attributes[G[Le]]=Le);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Ee),B.deleteShader(he);for(let Le=0;Le<fe.length;Le++){const Oe=fe[Le];if(Oe&&!Ze[Oe]){const Ue=B.getUniformLocation(this.program,Oe);Ue&&(Ze[Oe]=Ue)}}this.fixedUniforms=p(e,Ze),this.terrainUniforms=((Le,Oe)=>({u_depth:new c.bP(Le,Oe.u_depth),u_terrain:new c.bP(Le,Oe.u_terrain),u_terrain_dim:new c.bg(Le,Oe.u_terrain_dim),u_terrain_matrix:new c.bR(Le,Oe.u_terrain_matrix),u_terrain_unpack:new c.bS(Le,Oe.u_terrain_unpack),u_terrain_exaggeration:new c.bg(Le,Oe.u_terrain_exaggeration)}))(e,Ze),this.projectionUniforms=((Le,Oe)=>({u_projection_matrix:new c.bR(Le,Oe.u_projection_matrix),u_projection_tile_mercator_coords:new c.bS(Le,Oe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.bS(Le,Oe.u_projection_clipping_plane),u_projection_transition:new c.bg(Le,Oe.u_projection_transition),u_projection_fallback_matrix:new c.bR(Le,Oe.u_projection_fallback_matrix)}))(e,Ze),this.binderUniforms=h?h.getUniforms(e,Ze):[]}draw(e,a,h,p,_,T,P,z,L,B,V,F,G,W,re,ne,ae,le,fe){const ue=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(h),e.setStencilMode(p),e.setColorMode(_),e.setCullFace(T),z){e.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,z.depthTexture),e.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,z.texture);for(const be in this.terrainUniforms)this.terrainUniforms[be].set(z[be])}if(L)for(const be in L)this.projectionUniforms[gh[be]].set(L[be]);if(P)for(const be in this.fixedUniforms)this.fixedUniforms[be].set(P[be]);ne&&ne.setUniforms(e,this.binderUniforms,W,{zoom:re});let me=0;switch(a){case ue.LINES:me=2;break;case ue.TRIANGLES:me=3;break;case ue.LINE_STRIP:me=1}for(const be of G.get()){const he=be.vaos||(be.vaos={});(he[B]||(he[B]=new Pf)).bind(e,this,V,ne?ne.getPaintVertexBuffers():[],F,be.vertexOffset,ae,le,fe),ue.drawElements(a,be.primitiveLength*me,ue.UNSIGNED_SHORT,be.primitiveOffset*me*2)}}}function xl(y,e,a){const h=1/c.aC(a,1,e.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),_=a.tileSize*Math.pow(2,e.transform.tileZoom)/p,T=_*(a.tileID.canonical.x+a.tileID.wrap*p),P=_*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,P>>16],u_pixel_coord_lower:[65535&T,65535&P]}}const Ir=(y,e,a,h)=>{const p=y.style.light,_=p.properties.get("position"),T=[_.x,_.y,_.z],P=c.bV();p.properties.get("anchor")==="viewport"&&c.bW(P,y.transform.bearingInRadians),c.bX(T,T,P);const z=y.transform.transformLightDirection(T),L=p.properties.get("color");return{u_lightpos:T,u_lightpos_globe:z,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+e,u_opacity:a,u_fill_translate:h}},zf=(y,e,a,h,p,_,T)=>c.e(Ir(y,e,a,h),xl(_,y,T),{u_height_factor:-Math.pow(2,p.overscaledZ)/T.tileSize/8}),_c=(y,e,a,h)=>c.e(xl(e,y,a),{u_fill_translate:h}),bl=(y,e)=>({u_world:y,u_fill_translate:e}),wl=(y,e,a,h,p)=>c.e(_c(y,e,a,p),{u_world:h}),xd=(y,e,a,h,p)=>{const _=y.transform;let T,P,z=0;if(a.paint.get("circle-pitch-alignment")==="map"){const L=c.aC(e,1,_.zoom);T=!0,P=[L,L],z=L/(c.$*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*p}else T=!1,P=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(a.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:z,u_translate:h}},vc=y=>({u_pixel_extrude_scale:[1/y.width,1/y.height]}),Tl=y=>({u_viewport_size:[y.width,y.height]}),No=(y,e=1)=>({u_color:y,u_overlay:0,u_overlay_scale:e}),bd=(y,e,a,h)=>{const p=c.aC(y,1,e)/(c.$*Math.pow(2,y.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:c.aC(y,1,e),u_intensity:a,u_globe_extrude_scale:p}},_h=(y,e,a,h)=>{const p=c.L();c.bY(p,0,y.width,y.height,0,0,1);const _=y.context.gl;return{u_matrix:p,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:a,u_color_ramp:h,u_opacity:e.paint.get("heatmap-opacity")}},wd=(y,e,a)=>{const h=a.paint.get("hillshade-accent-color");let p;switch(a.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const _=a.getIlluminationProperties();for(let T=0;T<_.directionRadians.length;T++)a.paint.get("hillshade-illumination-anchor")==="viewport"&&(_.directionRadians[T]+=y.transform.bearingInRadians);return{u_image:0,u_latrange:Fo(0,e.tileID),u_exaggeration:a.paint.get("hillshade-exaggeration"),u_altitudes:_.altitudeRadians,u_azimuths:_.directionRadians,u_accent:h,u_method:p,u_highlights:_.highlightColor,u_shadows:_.shadowColor}},vh=(y,e)=>{const a=e.stride,h=c.L();return c.bY(h,0,c.$,-c.$,0,0,1),c.M(h,h,[0,-c.$,0]),{u_matrix:h,u_image:1,u_dimension:[a,a],u_zoom:y.overscaledZ,u_unpack:e.getUnpackVector()}};function Fo(y,e){const a=Math.pow(2,e.canonical.z),h=e.canonical.y;return[new c.a1(0,h/a).toLngLat().lat,new c.a1(0,(h+1)/a).toLngLat().lat]}const Sl=(y,e,a=0)=>({u_image:0,u_unpack:e.getUnpackVector(),u_dimension:[e.stride,e.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:a,u_opacity:y.paint.get("color-relief-opacity")}),xu=(y,e,a,h)=>{const p=y.transform;return{u_translation:wc(y,e,a),u_ratio:h/c.aC(e,1,p.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},xc=(y,e,a,h,p)=>c.e(xu(y,e,a,h),{u_image:0,u_image_height:p}),xh=(y,e,a,h,p)=>{const _=y.transform,T=bc(e,_);return{u_translation:wc(y,e,a),u_texsize:e.imageAtlasTexture.size,u_ratio:h/c.aC(e,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ws=(y,e,a,h,p,_)=>{const T=y.lineAtlas,P=bc(e,y.transform),z=a.layout.get("line-cap")==="round",L=T.getDash(p.from,z),B=T.getDash(p.to,z),V=L.width*_.fromScale,F=B.width*_.toScale;return c.e(xu(y,e,a,h),{u_patternscale_a:[P/V,-L.height/2],u_patternscale_b:[P/F,-B.height/2],u_sdfgamma:T.width/(256*Math.min(V,F)*y.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:B.y,u_mix:_.t})};function bc(y,e){return 1/c.aC(y,1,e.tileZoom)}function wc(y,e,a){return c.aD(y.transform,e,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Ml=(y,e,a,h,p)=>{return{u_tl_parent:y,u_scale_parent:e,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(T=h.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=h.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Td(h.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var _,T};function Td(y){y*=Math.PI/180;const e=Math.sin(y),a=Math.cos(y);return[(2*a+1)/3,(-Math.sqrt(3)*e-a+1)/3,(Math.sqrt(3)*e-a+1)/3]}const El=(y,e,a,h,p,_,T,P,z,L,B,V,F)=>{const G=T.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:G.width/G.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+h,u_is_along_line:p,u_is_variable_anchor:_,u_texsize:V,u_texture:0,u_translation:L,u_pitched_scale:F}},Sd=(y,e,a,h,p,_,T,P,z,L,B,V,F,G)=>{const W=T.transform;return c.e(El(y,e,a,h,p,_,T,P,z,L,B,V,G),{u_gamma_scale:h?Math.cos(W.pitch*Math.PI/180)*W.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},If=(y,e,a,h,p,_,T,P,z,L,B,V,F)=>c.e(Sd(y,e,a,h,p,_,T,P,z,L,!0,B,0,F),{u_texsize_icon:V,u_texture_icon:1}),Md=(y,e)=>({u_opacity:y,u_color:e}),Ed=(y,e,a,h,p)=>c.e(function(_,T,P,z){const L=P.imageManager.getPattern(_.from.toString()),B=P.imageManager.getPattern(_.to.toString()),{width:V,height:F}=P.imageManager.getPixelSize(),G=Math.pow(2,z.tileID.overscaledZ),W=z.tileSize*Math.pow(2,P.transform.tileZoom)/G,re=W*(z.tileID.canonical.x+z.tileID.wrap*G),ne=W*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[V,F],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/c.aC(z,1,P.transform.tileZoom),u_pixel_coord_upper:[re>>16,ne>>16],u_pixel_coord_lower:[65535&re,65535&ne]}}(a,p,e,h),{u_opacity:y}),bh=(y,e)=>{},Dr={fillExtrusion:(y,e)=>({u_lightpos:new c.bT(y,e.u_lightpos),u_lightpos_globe:new c.bT(y,e.u_lightpos_globe),u_lightintensity:new c.bg(y,e.u_lightintensity),u_lightcolor:new c.bT(y,e.u_lightcolor),u_vertical_gradient:new c.bg(y,e.u_vertical_gradient),u_opacity:new c.bg(y,e.u_opacity),u_fill_translate:new c.bU(y,e.u_fill_translate)}),fillExtrusionPattern:(y,e)=>({u_lightpos:new c.bT(y,e.u_lightpos),u_lightpos_globe:new c.bT(y,e.u_lightpos_globe),u_lightintensity:new c.bg(y,e.u_lightintensity),u_lightcolor:new c.bT(y,e.u_lightcolor),u_vertical_gradient:new c.bg(y,e.u_vertical_gradient),u_height_factor:new c.bg(y,e.u_height_factor),u_opacity:new c.bg(y,e.u_opacity),u_fill_translate:new c.bU(y,e.u_fill_translate),u_image:new c.bP(y,e.u_image),u_texsize:new c.bU(y,e.u_texsize),u_pixel_coord_upper:new c.bU(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(y,e.u_pixel_coord_lower),u_scale:new c.bT(y,e.u_scale),u_fade:new c.bg(y,e.u_fade)}),fill:(y,e)=>({u_fill_translate:new c.bU(y,e.u_fill_translate)}),fillPattern:(y,e)=>({u_image:new c.bP(y,e.u_image),u_texsize:new c.bU(y,e.u_texsize),u_pixel_coord_upper:new c.bU(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(y,e.u_pixel_coord_lower),u_scale:new c.bT(y,e.u_scale),u_fade:new c.bg(y,e.u_fade),u_fill_translate:new c.bU(y,e.u_fill_translate)}),fillOutline:(y,e)=>({u_world:new c.bU(y,e.u_world),u_fill_translate:new c.bU(y,e.u_fill_translate)}),fillOutlinePattern:(y,e)=>({u_world:new c.bU(y,e.u_world),u_image:new c.bP(y,e.u_image),u_texsize:new c.bU(y,e.u_texsize),u_pixel_coord_upper:new c.bU(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(y,e.u_pixel_coord_lower),u_scale:new c.bT(y,e.u_scale),u_fade:new c.bg(y,e.u_fade),u_fill_translate:new c.bU(y,e.u_fill_translate)}),circle:(y,e)=>({u_camera_to_center_distance:new c.bg(y,e.u_camera_to_center_distance),u_scale_with_map:new c.bP(y,e.u_scale_with_map),u_pitch_with_map:new c.bP(y,e.u_pitch_with_map),u_extrude_scale:new c.bU(y,e.u_extrude_scale),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_globe_extrude_scale:new c.bg(y,e.u_globe_extrude_scale),u_translate:new c.bU(y,e.u_translate)}),collisionBox:(y,e)=>({u_pixel_extrude_scale:new c.bU(y,e.u_pixel_extrude_scale)}),collisionCircle:(y,e)=>({u_viewport_size:new c.bU(y,e.u_viewport_size)}),debug:(y,e)=>({u_color:new c.bQ(y,e.u_color),u_overlay:new c.bP(y,e.u_overlay),u_overlay_scale:new c.bg(y,e.u_overlay_scale)}),depth:bh,clippingMask:bh,heatmap:(y,e)=>({u_extrude_scale:new c.bg(y,e.u_extrude_scale),u_intensity:new c.bg(y,e.u_intensity),u_globe_extrude_scale:new c.bg(y,e.u_globe_extrude_scale)}),heatmapTexture:(y,e)=>({u_matrix:new c.bR(y,e.u_matrix),u_world:new c.bU(y,e.u_world),u_image:new c.bP(y,e.u_image),u_color_ramp:new c.bP(y,e.u_color_ramp),u_opacity:new c.bg(y,e.u_opacity)}),hillshade:(y,e)=>({u_image:new c.bP(y,e.u_image),u_latrange:new c.bU(y,e.u_latrange),u_exaggeration:new c.bg(y,e.u_exaggeration),u_altitudes:new c.b_(y,e.u_altitudes),u_azimuths:new c.b_(y,e.u_azimuths),u_accent:new c.bQ(y,e.u_accent),u_method:new c.bP(y,e.u_method),u_shadows:new c.bZ(y,e.u_shadows),u_highlights:new c.bZ(y,e.u_highlights)}),hillshadePrepare:(y,e)=>({u_matrix:new c.bR(y,e.u_matrix),u_image:new c.bP(y,e.u_image),u_dimension:new c.bU(y,e.u_dimension),u_zoom:new c.bg(y,e.u_zoom),u_unpack:new c.bS(y,e.u_unpack)}),colorRelief:(y,e)=>({u_image:new c.bP(y,e.u_image),u_unpack:new c.bS(y,e.u_unpack),u_dimension:new c.bU(y,e.u_dimension),u_elevation_stops:new c.bP(y,e.u_elevation_stops),u_color_stops:new c.bP(y,e.u_color_stops),u_color_ramp_size:new c.bP(y,e.u_color_ramp_size),u_opacity:new c.bg(y,e.u_opacity)}),line:(y,e)=>({u_translation:new c.bU(y,e.u_translation),u_ratio:new c.bg(y,e.u_ratio),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_units_to_pixels:new c.bU(y,e.u_units_to_pixels)}),lineGradient:(y,e)=>({u_translation:new c.bU(y,e.u_translation),u_ratio:new c.bg(y,e.u_ratio),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_units_to_pixels:new c.bU(y,e.u_units_to_pixels),u_image:new c.bP(y,e.u_image),u_image_height:new c.bg(y,e.u_image_height)}),linePattern:(y,e)=>({u_translation:new c.bU(y,e.u_translation),u_texsize:new c.bU(y,e.u_texsize),u_ratio:new c.bg(y,e.u_ratio),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_image:new c.bP(y,e.u_image),u_units_to_pixels:new c.bU(y,e.u_units_to_pixels),u_scale:new c.bT(y,e.u_scale),u_fade:new c.bg(y,e.u_fade)}),lineSDF:(y,e)=>({u_translation:new c.bU(y,e.u_translation),u_ratio:new c.bg(y,e.u_ratio),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_units_to_pixels:new c.bU(y,e.u_units_to_pixels),u_patternscale_a:new c.bU(y,e.u_patternscale_a),u_patternscale_b:new c.bU(y,e.u_patternscale_b),u_sdfgamma:new c.bg(y,e.u_sdfgamma),u_image:new c.bP(y,e.u_image),u_tex_y_a:new c.bg(y,e.u_tex_y_a),u_tex_y_b:new c.bg(y,e.u_tex_y_b),u_mix:new c.bg(y,e.u_mix)}),raster:(y,e)=>({u_tl_parent:new c.bU(y,e.u_tl_parent),u_scale_parent:new c.bg(y,e.u_scale_parent),u_buffer_scale:new c.bg(y,e.u_buffer_scale),u_fade_t:new c.bg(y,e.u_fade_t),u_opacity:new c.bg(y,e.u_opacity),u_image0:new c.bP(y,e.u_image0),u_image1:new c.bP(y,e.u_image1),u_brightness_low:new c.bg(y,e.u_brightness_low),u_brightness_high:new c.bg(y,e.u_brightness_high),u_saturation_factor:new c.bg(y,e.u_saturation_factor),u_contrast_factor:new c.bg(y,e.u_contrast_factor),u_spin_weights:new c.bT(y,e.u_spin_weights),u_coords_top:new c.bS(y,e.u_coords_top),u_coords_bottom:new c.bS(y,e.u_coords_bottom)}),symbolIcon:(y,e)=>({u_is_size_zoom_constant:new c.bP(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(y,e.u_is_size_feature_constant),u_size_t:new c.bg(y,e.u_size_t),u_size:new c.bg(y,e.u_size),u_camera_to_center_distance:new c.bg(y,e.u_camera_to_center_distance),u_pitch:new c.bg(y,e.u_pitch),u_rotate_symbol:new c.bP(y,e.u_rotate_symbol),u_aspect_ratio:new c.bg(y,e.u_aspect_ratio),u_fade_change:new c.bg(y,e.u_fade_change),u_label_plane_matrix:new c.bR(y,e.u_label_plane_matrix),u_coord_matrix:new c.bR(y,e.u_coord_matrix),u_is_text:new c.bP(y,e.u_is_text),u_pitch_with_map:new c.bP(y,e.u_pitch_with_map),u_is_along_line:new c.bP(y,e.u_is_along_line),u_is_variable_anchor:new c.bP(y,e.u_is_variable_anchor),u_texsize:new c.bU(y,e.u_texsize),u_texture:new c.bP(y,e.u_texture),u_translation:new c.bU(y,e.u_translation),u_pitched_scale:new c.bg(y,e.u_pitched_scale)}),symbolSDF:(y,e)=>({u_is_size_zoom_constant:new c.bP(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(y,e.u_is_size_feature_constant),u_size_t:new c.bg(y,e.u_size_t),u_size:new c.bg(y,e.u_size),u_camera_to_center_distance:new c.bg(y,e.u_camera_to_center_distance),u_pitch:new c.bg(y,e.u_pitch),u_rotate_symbol:new c.bP(y,e.u_rotate_symbol),u_aspect_ratio:new c.bg(y,e.u_aspect_ratio),u_fade_change:new c.bg(y,e.u_fade_change),u_label_plane_matrix:new c.bR(y,e.u_label_plane_matrix),u_coord_matrix:new c.bR(y,e.u_coord_matrix),u_is_text:new c.bP(y,e.u_is_text),u_pitch_with_map:new c.bP(y,e.u_pitch_with_map),u_is_along_line:new c.bP(y,e.u_is_along_line),u_is_variable_anchor:new c.bP(y,e.u_is_variable_anchor),u_texsize:new c.bU(y,e.u_texsize),u_texture:new c.bP(y,e.u_texture),u_gamma_scale:new c.bg(y,e.u_gamma_scale),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_is_halo:new c.bP(y,e.u_is_halo),u_translation:new c.bU(y,e.u_translation),u_pitched_scale:new c.bg(y,e.u_pitched_scale)}),symbolTextAndIcon:(y,e)=>({u_is_size_zoom_constant:new c.bP(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bP(y,e.u_is_size_feature_constant),u_size_t:new c.bg(y,e.u_size_t),u_size:new c.bg(y,e.u_size),u_camera_to_center_distance:new c.bg(y,e.u_camera_to_center_distance),u_pitch:new c.bg(y,e.u_pitch),u_rotate_symbol:new c.bP(y,e.u_rotate_symbol),u_aspect_ratio:new c.bg(y,e.u_aspect_ratio),u_fade_change:new c.bg(y,e.u_fade_change),u_label_plane_matrix:new c.bR(y,e.u_label_plane_matrix),u_coord_matrix:new c.bR(y,e.u_coord_matrix),u_is_text:new c.bP(y,e.u_is_text),u_pitch_with_map:new c.bP(y,e.u_pitch_with_map),u_is_along_line:new c.bP(y,e.u_is_along_line),u_is_variable_anchor:new c.bP(y,e.u_is_variable_anchor),u_texsize:new c.bU(y,e.u_texsize),u_texsize_icon:new c.bU(y,e.u_texsize_icon),u_texture:new c.bP(y,e.u_texture),u_texture_icon:new c.bP(y,e.u_texture_icon),u_gamma_scale:new c.bg(y,e.u_gamma_scale),u_device_pixel_ratio:new c.bg(y,e.u_device_pixel_ratio),u_is_halo:new c.bP(y,e.u_is_halo),u_translation:new c.bU(y,e.u_translation),u_pitched_scale:new c.bg(y,e.u_pitched_scale)}),background:(y,e)=>({u_opacity:new c.bg(y,e.u_opacity),u_color:new c.bQ(y,e.u_color)}),backgroundPattern:(y,e)=>({u_opacity:new c.bg(y,e.u_opacity),u_image:new c.bP(y,e.u_image),u_pattern_tl_a:new c.bU(y,e.u_pattern_tl_a),u_pattern_br_a:new c.bU(y,e.u_pattern_br_a),u_pattern_tl_b:new c.bU(y,e.u_pattern_tl_b),u_pattern_br_b:new c.bU(y,e.u_pattern_br_b),u_texsize:new c.bU(y,e.u_texsize),u_mix:new c.bg(y,e.u_mix),u_pattern_size_a:new c.bU(y,e.u_pattern_size_a),u_pattern_size_b:new c.bU(y,e.u_pattern_size_b),u_scale_a:new c.bg(y,e.u_scale_a),u_scale_b:new c.bg(y,e.u_scale_b),u_pixel_coord_upper:new c.bU(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new c.bU(y,e.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bg(y,e.u_tile_units_to_pixels)}),terrain:(y,e)=>({u_texture:new c.bP(y,e.u_texture),u_ele_delta:new c.bg(y,e.u_ele_delta),u_fog_matrix:new c.bR(y,e.u_fog_matrix),u_fog_color:new c.bQ(y,e.u_fog_color),u_fog_ground_blend:new c.bg(y,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bg(y,e.u_fog_ground_blend_opacity),u_horizon_color:new c.bQ(y,e.u_horizon_color),u_horizon_fog_blend:new c.bg(y,e.u_horizon_fog_blend),u_is_globe_mode:new c.bg(y,e.u_is_globe_mode)}),terrainDepth:(y,e)=>({u_ele_delta:new c.bg(y,e.u_ele_delta)}),terrainCoords:(y,e)=>({u_texture:new c.bP(y,e.u_texture),u_terrain_coords_id:new c.bg(y,e.u_terrain_coords_id),u_ele_delta:new c.bg(y,e.u_ele_delta)}),projectionErrorMeasurement:(y,e)=>({u_input:new c.bg(y,e.u_input),u_output_expected:new c.bg(y,e.u_output_expected)}),atmosphere:(y,e)=>({u_sun_pos:new c.bT(y,e.u_sun_pos),u_atmosphere_blend:new c.bg(y,e.u_atmosphere_blend),u_globe_position:new c.bT(y,e.u_globe_position),u_globe_radius:new c.bg(y,e.u_globe_radius),u_inv_proj_matrix:new c.bR(y,e.u_inv_proj_matrix)}),sky:(y,e)=>({u_sky_color:new c.bQ(y,e.u_sky_color),u_horizon_color:new c.bQ(y,e.u_horizon_color),u_horizon:new c.bU(y,e.u_horizon),u_horizon_normal:new c.bU(y,e.u_horizon_normal),u_sky_horizon_blend:new c.bg(y,e.u_sky_horizon_blend),u_sky_blend:new c.bg(y,e.u_sky_blend)})};class Cl{constructor(e,a,h){this.context=e;const p=e.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ss{constructor(e,a,h,p){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=e;const _=e.gl;this.buffer=_.createBuffer(),e.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,a){for(let h=0;h<this.attributes.length;h++){const p=a.attributes[this.attributes[h].name];p!==void 0&&e.enableVertexAttribArray(p)}}setVertexAttribPointers(e,a,h){for(let p=0;p<this.attributes.length;p++){const _=this.attributes[p],T=a.attributes[_.name];T!==void 0&&e.vertexAttribPointer(T,_.components,e[Tc[_.type]],!1,this.itemSize,_.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class yi{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bu extends yi{getDefault(){return c.bf.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Sc extends yi{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Cd extends yi{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Ks extends yi{getDefault(){return[!0,!0,!0,!0]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class bs extends yi{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Vo extends yi{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class wh extends yi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const a=this.current;(e.func!==a.func||e.ref!==a.ref||e.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Ad extends yi{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Uo extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=e,this.dirty=!1}}class Al extends yi{getDefault(){return[0,1]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class wu extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=e,this.dirty=!1}}class Pd extends yi{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Qs extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.BLEND):a.disable(a.BLEND),this.current=e,this.dirty=!1}}class Mc extends yi{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ec extends yi{getDefault(){return c.bf.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Cc extends yi{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Th extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=e,this.dirty=!1}}class Go extends yi{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Ac extends yi{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Zo extends yi{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Wr extends yi{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Tu extends yi{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ua extends yi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Su extends yi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Wn extends yi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Rr extends yi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ws extends yi{getDefault(){return null}set(e){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class qo extends yi{getDefault(){return null}set(e){var a;if(e===this.current&&!this.dirty)return;const h=this.gl;gr(h)?h.bindVertexArray(e):(a=h.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class $o extends yi{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Pc extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Js extends yi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Kr extends yi{constructor(e,a){super(e),this.context=e,this.parent=a}getDefault(){return null}}class Sh extends Kr{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Pl extends Kr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ii extends Kr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const zc="Framebuffer is not complete";class Qr{constructor(e,a,h,p,_){this.context=e,this.width=a,this.height=h;const T=e.gl,P=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Sh(e,P),p)this.depthAttachment=_?new ii(e,P):new Pl(e,P);else if(_)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(zc)}destroy(){const e=this.context.gl,a=this.colorAttachment.get();if(a&&e.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&e.deleteRenderbuffer(h)}e.deleteFramebuffer(this.framebuffer)}}class Mu{constructor(e){var a,h;if(this.gl=e,this.clearColor=new bu(this),this.clearDepth=new Sc(this),this.clearStencil=new Cd(this),this.colorMask=new Ks(this),this.depthMask=new bs(this),this.stencilMask=new Vo(this),this.stencilFunc=new wh(this),this.stencilOp=new Ad(this),this.stencilTest=new Uo(this),this.depthRange=new Al(this),this.depthTest=new wu(this),this.depthFunc=new Pd(this),this.blend=new Qs(this),this.blendFunc=new Mc(this),this.blendColor=new Ec(this),this.blendEquation=new Cc(this),this.cullFace=new Th(this),this.cullFaceSide=new Go(this),this.frontFace=new Ac(this),this.program=new Zo(this),this.activeTexture=new Wr(this),this.viewport=new Tu(this),this.bindFramebuffer=new ua(this),this.bindRenderbuffer=new Su(this),this.bindTexture=new Wn(this),this.bindVertexBuffer=new Rr(this),this.bindElementBuffer=new ws(this),this.bindVertexArray=new qo(this),this.pixelStoreUnpack=new $o(this),this.pixelStoreUnpackPremultiplyAlpha=new Pc(this),this.pixelStoreUnpackFlipY=new Js(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),gr(e)){this.HALF_FLOAT=e.HALF_FLOAT;const p=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=e.RGBA16F)!==null&&a!==void 0?a:p?.RGBA16F_EXT,this.RGB16F=(h=e.RGB16F)!==null&&h!==void 0?h:p?.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const p=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=p?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,a){return new Cl(this,e,a)}createVertexBuffer(e,a,h){return new ss(this,e,a,h)}createRenderbuffer(e,a,h){const p=this.gl,_=p.createRenderbuffer();return this.bindRenderbuffer.set(_),p.renderbufferStorage(p.RENDERBUFFER,e,a,h),this.bindRenderbuffer.set(null),_}createFramebuffer(e,a,h,p){return new Qr(this,e,a,h,p)}clear({color:e,depth:a,stencil:h}){const p=this.gl;let _=0;e&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h!==void 0&&(_|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),p.clear(_)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){c.bH(e.blendFunction,Bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return gr(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var a;return gr(this.gl)?this.gl.deleteVertexArray(e):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let _r;function Mh(y,e,a,h,p){const _=y.context,T=y.transform,P=_.gl,z=y.useProgram("collisionBox"),L=[];let B=0,V=0;for(let ae=0;ae<h.length;ae++){const le=h[ae],fe=e.getTile(le).getBucket(a);if(!fe)continue;const ue=p?fe.textCollisionBox:fe.iconCollisionBox,me=fe.collisionCircleArray;me.length>0&&(L.push({circleArray:me,circleOffset:V,coord:le}),B+=me.length/4,V=B),ue&&z.draw(_,P.LINES,$t.disabled,di.disabled,y.colorModeForRenderPass(),Ft.disabled,vc(y.transform),y.style.map.terrain&&y.style.map.terrain.getTerrainData(le),T.getProjectionData({overscaledTileID:le,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),a.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,null,y.transform.zoom,null,null,ue.collisionVertexBuffer)}if(!p||!L.length)return;const F=y.useProgram("collisionCircle"),G=new c.b$;G.resize(4*B),G._trim();let W=0;for(const ae of L)for(let le=0;le<ae.circleArray.length/4;le++){const fe=4*le,ue=ae.circleArray[fe+0],me=ae.circleArray[fe+1],be=ae.circleArray[fe+2],he=ae.circleArray[fe+3];G.emplace(W++,ue,me,be,he,0),G.emplace(W++,ue,me,be,he,1),G.emplace(W++,ue,me,be,he,2),G.emplace(W++,ue,me,be,he,3)}(!_r||_r.length<2*B)&&(_r=function(ae){const le=2*ae,fe=new c.c1;fe.resize(le),fe._trim();for(let ue=0;ue<le;ue++){const me=6*ue;fe.uint16[me+0]=4*ue+0,fe.uint16[me+1]=4*ue+1,fe.uint16[me+2]=4*ue+2,fe.uint16[me+3]=4*ue+2,fe.uint16[me+4]=4*ue+3,fe.uint16[me+5]=4*ue+0}return fe}(B));const re=_.createIndexBuffer(_r,!0),ne=_.createVertexBuffer(G,c.c0.members,!0);for(const ae of L){const le=Tl(y.transform);F.draw(_,P.TRIANGLES,$t.disabled,di.disabled,y.colorModeForRenderPass(),Ft.disabled,le,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae.coord),null,a.id,ne,re,c.aM.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,y.transform.zoom,null,null,null)}ne.destroy(),re.destroy()}const Eu=c.ag(new Float32Array(16));function eo(y,e,a,h,p,_){const{horizontalAlign:T,verticalAlign:P}=c.aH(y);return new c.P((-(T-.5)*e/p+h[0])*_,(-(P-.5)*a/p+h[1])*_)}function Eh(y,e,a,h,p,_){const T=e.tileAnchorPoint.add(new c.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let P=h.mult(_);a||(P=P.rotate(-p));const z=T.add(P);return Xi(z.x,z.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(a){const P=En(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(y),z=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return y.add(h.rotate(z))}return y.add(h)}function Ic(y,e,a,h,p,_,T,P,z,L,B,V){const F=y.text.placedSymbolArray,G=y.text.dynamicLayoutVertexArray,W=y.icon.dynamicLayoutVertexArray,re={};G.clear();for(let ne=0;ne<F.length;ne++){const ae=F.get(ne),le=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:h[ae.crossTileID];if(le){const fe=new c.P(ae.anchorX,ae.anchorY),ue={getElevation:V,width:p.width,height:p.height,pitchedLabelPlaneMatrix:_,pitchWithMap:a,transform:p,tileAnchorPoint:fe,translation:L,unwrappedTileID:B},me=a?Yi(fe.x,fe.y,ue):En(fe.x,fe.y,ue),be=dt(p.cameraToCenterDistance,me.signedDistanceFromCamera);let he=c.ap(y.textSizeData,P,ae)*be/c.aB;a&&(he*=y.tilePixelRatio/T);const{width:Ee,height:Ze,anchor:Le,textOffset:Oe,textBoxScale:Ue}=le,ft=eo(Le,Ee,Ze,Oe,Ue,he),gt=p.getPitchedTextCorrection(fe.x+L[0],fe.y+L[1],B),tt=Eh(me.point,ue,e,ft,-p.bearingInRadians,gt),zt=y.allowVerticalPlacement&&ae.placedOrientation===c.ao.vertical?Math.PI/2:0;for(let ei=0;ei<ae.numGlyphs;ei++)c.av(G,tt,zt);z&&ae.associatedIconIndex>=0&&(re[ae.associatedIconIndex]={shiftedAnchor:tt,angle:zt})}else Qa(ae.numGlyphs,G)}if(z){W.clear();const ne=y.icon.placedSymbolArray;for(let ae=0;ae<ne.length;ae++){const le=ne.get(ae);if(le.hidden)Qa(le.numGlyphs,W);else{const fe=re[ae];if(fe)for(let ue=0;ue<le.numGlyphs;ue++)c.av(W,fe.shiftedAnchor,fe.angle);else Qa(le.numGlyphs,W)}}y.icon.dynamicLayoutVertexBuffer.updateData(W)}y.text.dynamicLayoutVertexBuffer.updateData(G)}function Ts(y,e,a){return a.iconsInText&&e?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function os(y,e,a,h,p,_,T,P,z,L,B,V,F){const G=y.context,W=G.gl,re=y.transform,ne=P==="map",ae=z==="map",le=P!=="viewport"&&a.layout.get("symbol-placement")!=="point",fe=ne&&!ae&&!le,ue=!a.layout.get("symbol-sort-key").isConstant();let me=!1;const be=y.getDepthModeForSublayer(0,$t.ReadOnly),he=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=[],Ze=re.getCircleRadiusCorrection();for(const Le of h){const Oe=e.getTile(Le),Ue=Oe.getBucket(a);if(!Ue)continue;const ft=p?Ue.text:Ue.icon;if(!ft||!ft.segments.get().length||!ft.hasVisibleVertices)continue;const gt=ft.programConfigurations.get(a.id),tt=p||Ue.sdfIcons,zt=p?Ue.textSizeData:Ue.iconSizeData,ei=ae||re.pitch!==0,_i=y.useProgram(Ts(tt,p,Ue),gt),Ci=c.an(zt,re.zoom),Si=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le);let rn,Ki,Wt,Ai,_n=[0,0],Ln=null;if(p)Ki=Oe.glyphAtlasTexture,Wt=W.LINEAR,rn=Oe.glyphAtlasTexture.size,Ue.iconsInText&&(_n=Oe.imageAtlasTexture.size,Ln=Oe.imageAtlasTexture,Ai=ei||y.options.rotating||y.options.zooming||zt.kind==="composite"||zt.kind==="camera"?W.LINEAR:W.NEAREST);else{const Qi=a.layout.get("icon-size").constantOr(0)!==1||Ue.iconsNeedLinear;Ki=Oe.imageAtlasTexture,Wt=tt||y.options.rotating||y.options.zooming||Qi||ei?W.LINEAR:W.NEAREST,rn=Oe.imageAtlasTexture.size}const Un=c.aC(Oe,1,y.transform.zoom),Or=Oi(ne,y.transform,Un),Na=c.L();c.aq(Na,Or);const Rs=Vt(ae,ne,y.transform,Un),ga=c.aD(re,Oe,_,T),co=re.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),ks=he&&Ue.hasTextData(),uo=a.layout.get("icon-text-fit")!=="none"&&ks&&Ue.hasIconData();if(le){const Qi=y.style.map.terrain?(Br,an)=>y.style.map.terrain.getElevation(Le,Br,an):null,dn=a.layout.get("text-rotation-alignment")==="map";cn(Ue,y,p,Or,Na,ae,L,dn,Le.toUnwrapped(),re.width,re.height,ga,Qi)}const ho=p&&he||uo,sr=le||ho?Eu:ae?Or:y.transform.clipSpaceToPixelsMatrix,ya=tt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Mr;Mr=tt?Ue.iconsInText?If(zt.kind,Ci,fe,ae,le,ho,y,sr,Rs,ga,rn,_n,Ze):Sd(zt.kind,Ci,fe,ae,le,ho,y,sr,Rs,ga,p,rn,0,Ze):El(zt.kind,Ci,fe,ae,le,ho,y,sr,Rs,ga,p,rn,Ze);const fo={program:_i,buffers:ft,uniformValues:Mr,projectionData:co,atlasTexture:Ki,atlasTextureIcon:Ln,atlasInterpolation:Wt,atlasInterpolationIcon:Ai,isSDF:tt,hasHalo:ya};if(ue&&Ue.canOverlap){me=!0;const Qi=ft.segments.get();for(const dn of Qi)Ee.push({segments:new c.aM([dn]),sortKey:dn.sortKey,state:fo,terrainData:Si})}else Ee.push({segments:ft.segments,sortKey:0,state:fo,terrainData:Si})}me&&Ee.sort((Le,Oe)=>Le.sortKey-Oe.sortKey);for(const Le of Ee){const Oe=Le.state;if(G.activeTexture.set(W.TEXTURE0),Oe.atlasTexture.bind(Oe.atlasInterpolation,W.CLAMP_TO_EDGE),Oe.atlasTextureIcon&&(G.activeTexture.set(W.TEXTURE1),Oe.atlasTextureIcon&&Oe.atlasTextureIcon.bind(Oe.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),Oe.isSDF){const Ue=Oe.uniformValues;Oe.hasHalo&&(Ue.u_is_halo=1,to(Oe.buffers,Le.segments,a,y,Oe.program,be,B,V,Ue,Oe.projectionData,Le.terrainData)),Ue.u_is_halo=0}to(Oe.buffers,Le.segments,a,y,Oe.program,be,B,V,Oe.uniformValues,Oe.projectionData,Le.terrainData)}}function to(y,e,a,h,p,_,T,P,z,L,B){const V=h.context;p.draw(V,V.gl.TRIANGLES,_,T,P,Ft.backCCW,z,B,L,a.id,y.layoutVertexBuffer,y.indexBuffer,e,a.paint,h.transform.zoom,y.programConfigurations.get(a.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function zl(y,e,a,h,p){const _=y.context,T=_.gl,P=di.disabled,z=new Bi([T.ONE,T.ONE],c.bf.transparent,[!0,!0,!0,!0]),L=e.getBucket(a);if(!L)return;const B=h.key;let V=a.heatmapFbos.get(B);V||(V=vr(_,e.tileSize,e.tileSize),a.heatmapFbos.set(B,V)),_.bindFramebuffer.set(V.framebuffer),_.viewport.set([0,0,e.tileSize,e.tileSize]),_.clear({color:c.bf.transparent});const F=L.programConfigurations.get(a.id),G=y.useProgram("heatmap",F,!p),W=y.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),re=y.style.map.terrain.getTerrainData(h);G.draw(_,T.TRIANGLES,$t.disabled,P,z,Ft.disabled,bd(e,y.transform.zoom,a.paint.get("heatmap-intensity"),1),re,W,a.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,a.paint,y.transform.zoom,F)}function Jr(y,e,a,h,p){const _=y.context,T=_.gl,P=y.transform;_.setColorMode(y.colorModeForRenderPass());const z=Ra(_,e),L=a.key,B=e.heatmapFbos.get(L);if(!B)return;_.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,B.colorAttachment.get()),_.activeTexture.set(T.TEXTURE1),z.bind(T.LINEAR,T.CLAMP_TO_EDGE);const V=P.getProjectionData({overscaledTileID:a,applyTerrainMatrix:p,applyGlobeMatrix:!h});y.useProgram("heatmapTexture").draw(_,T.TRIANGLES,$t.disabled,di.disabled,y.colorModeForRenderPass(),Ft.disabled,_h(y,e,0,1),null,V,e.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,e.paint,P.zoom),B.destroy(),e.heatmapFbos.delete(L)}function vr(y,e,a){var h,p;const _=y.gl,T=_.createTexture();_.bindTexture(_.TEXTURE_2D,T),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const P=(h=y.HALF_FLOAT)!==null&&h!==void 0?h:_.UNSIGNED_BYTE,z=(p=y.RGBA16F)!==null&&p!==void 0?p:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,z,e,a,0,_.RGBA,P,null);const L=y.createFramebuffer(e,a,!1,!1);return L.colorAttachment.set(T),L}function Ra(y,e){return e.colorRampTexture||(e.colorRampTexture=new c.T(y,e.colorRamp,y.gl.RGBA)),e.colorRampTexture}function ea(y,e,a,h,p){if(!a||!h||!h.imageAtlas)return;const _=h.imageAtlas.patternPositions;let T=_[a.to.toString()],P=_[a.from.toString()];if(!T&&P&&(T=P),!P&&T&&(P=T),!T||!P){const z=p.getPaintProperty(e);T=_[z],P=_[z]}T&&P&&y.setConstantPatternPositions(T,P)}function ha(y,e,a,h,p,_,T,P){const z=y.context.gl,L="fill-pattern",B=a.paint.get(L),V=B&&B.constantOr(1),F=a.getCrossfadeParameters();let G,W,re,ne,ae;const le=y.transform,fe=a.paint.get("fill-translate"),ue=a.paint.get("fill-translate-anchor");T?(W=V&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=z.LINES):(W=V?"fillPattern":"fill",G=z.TRIANGLES);const me=B.constantOr(null);for(const be of h){const he=e.getTile(be);if(V&&!he.patternsLoaded())continue;const Ee=he.getBucket(a);if(!Ee)continue;const Ze=Ee.programConfigurations.get(a.id),Le=y.useProgram(W,Ze),Oe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be);V&&(y.context.activeTexture.set(z.TEXTURE0),he.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ze.updatePaintBuffers(F)),ea(Ze,L,me,he,a);const Ue=le.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),ft=c.aD(le,he,fe,ue);if(T){ne=Ee.indexBuffer2,ae=Ee.segments2;const tt=[z.drawingBufferWidth,z.drawingBufferHeight];re=W==="fillOutlinePattern"&&V?wl(y,F,he,tt,ft):bl(tt,ft)}else ne=Ee.indexBuffer,ae=Ee.segments,re=V?_c(y,F,he,ft):{u_fill_translate:ft};const gt=y.stencilModeForClipping(be);Le.draw(y.context,G,p,gt,_,Ft.backCCW,re,Oe,Ue,a.id,Ee.layoutVertexBuffer,ne,ae,a.paint,y.transform.zoom,Ze)}}function Ss(y,e,a,h,p,_,T,P){const z=y.context,L=z.gl,B="fill-extrusion-pattern",V=a.paint.get(B),F=V.constantOr(1),G=a.getCrossfadeParameters(),W=a.paint.get("fill-extrusion-opacity"),re=V.constantOr(null),ne=y.transform;for(const ae of h){const le=e.getTile(ae),fe=le.getBucket(a);if(!fe)continue;const ue=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae),me=fe.programConfigurations.get(a.id),be=y.useProgram(F?"fillExtrusionPattern":"fillExtrusion",me);F&&(y.context.activeTexture.set(L.TEXTURE0),le.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),me.updatePaintBuffers(G));const he=ne.getProjectionData({overscaledTileID:ae,applyGlobeMatrix:!P,applyTerrainMatrix:!0});ea(me,B,re,le,a);const Ee=c.aD(ne,le,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Ze=a.paint.get("fill-extrusion-vertical-gradient"),Le=F?zf(y,Ze,W,Ee,ae,G,le):Ir(y,Ze,W,Ee);be.draw(z,z.gl.TRIANGLES,p,_,T,Ft.backCCW,Le,ue,he,a.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,a.paint,y.transform.zoom,me,y.style.map.terrain&&fe.centroidVertexBuffer)}}function io(y,e,a,h,p,_,T,P,z){var L;const B=y.style.projection,V=y.context,F=y.transform,G=V.gl,W=[`#define NUM_ILLUMINATION_SOURCES ${a.paint.get("hillshade-highlight-color").values.length}`],re=y.useProgram("hillshade",null,!1,W),ne=!y.options.moving;for(const ae of h){const le=e.getTile(ae),fe=le.fbo;if(!fe)continue;const ue=B.getMeshFromTileID(V,ae.canonical,P,!0,"raster"),me=(L=y.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ae);V.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,fe.colorAttachment.get());const be=F.getProjectionData({overscaledTileID:ae,aligned:ne,applyGlobeMatrix:!z,applyTerrainMatrix:!0});re.draw(V,G.TRIANGLES,_,p[ae.overscaledZ],T,Ft.backCCW,wd(y,le,a),me,be,a.id,ue.vertexBuffer,ue.indexBuffer,ue.segments)}}function Dc(y,e,a,h,p,_,T,P,z){var L;const B=y.style.projection,V=y.context,F=y.transform,G=V.gl,W=y.useProgram("colorRelief"),re=!y.options.moving;let ne=!0,ae=0;for(const le of h){const fe=e.getTile(le),ue=fe.dem;if(ne){const Le=G.getParameter(G.MAX_TEXTURE_SIZE),{elevationTexture:Oe,colorTexture:Ue}=a.getColorRampTextures(V,Le,ue.getUnpackVector());V.activeTexture.set(G.TEXTURE1),Oe.bind(G.NEAREST,G.CLAMP_TO_EDGE),V.activeTexture.set(G.TEXTURE4),Ue.bind(G.LINEAR,G.CLAMP_TO_EDGE),ne=!1,ae=Oe.size[0]}if(!ue||!ue.data)continue;const me=ue.stride,be=ue.getPixels();if(V.activeTexture.set(G.TEXTURE0),V.pixelStoreUnpackPremultiplyAlpha.set(!1),fe.demTexture=fe.demTexture||y.getTileTexture(me),fe.demTexture){const Le=fe.demTexture;Le.update(be,{premultiply:!1}),Le.bind(G.LINEAR,G.CLAMP_TO_EDGE)}else fe.demTexture=new c.T(V,be,G.RGBA,{premultiply:!1}),fe.demTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const he=B.getMeshFromTileID(V,le.canonical,P,!0,"raster"),Ee=(L=y.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(le),Ze=F.getProjectionData({overscaledTileID:le,aligned:re,applyGlobeMatrix:!z,applyTerrainMatrix:!0});W.draw(V,G.TRIANGLES,_,p[le.overscaledZ],T,Ft.backCCW,Sl(a,fe.dem,ae),Ee,Ze,a.id,he.vertexBuffer,he.indexBuffer,he.segments)}}const Il=[new c.P(0,0),new c.P(c.$,0),new c.P(c.$,c.$),new c.P(0,c.$)];function An(y,e,a,h,p,_,T,P,z=!1,L=!1){const B=h[h.length-1].overscaledZ,V=y.context,F=V.gl,G=y.useProgram("raster"),W=y.transform,re=y.style.projection,ne=y.colorModeForRenderPass(),ae=!y.options.moving;for(const le of h){const fe=y.getDepthModeForSublayer(le.overscaledZ-B,a.paint.get("raster-opacity")===1?$t.ReadWrite:$t.ReadOnly,F.LESS),ue=e.getTile(le);ue.registerFadeDuration(a.paint.get("raster-fade-duration"));const me=e.findLoadedParent(le,0),be=e.findLoadedSibling(le),he=tn(ue,me||be||null,e,a,y.transform,y.style.map.terrain);let Ee,Ze;const Le=a.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;V.activeTexture.set(F.TEXTURE0),ue.texture.bind(Le,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(F.TEXTURE1),me?(me.texture.bind(Le,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Ee=Math.pow(2,me.tileID.overscaledZ-ue.tileID.overscaledZ),Ze=[ue.tileID.canonical.x*Ee%1,ue.tileID.canonical.y*Ee%1]):ue.texture.bind(Le,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),ue.texture.useMipmap&&V.extTextureFilterAnisotropic&&y.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const Oe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(le),Ue=W.getProjectionData({overscaledTileID:le,aligned:ae,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),ft=Ml(Ze||[0,0],Ee||1,he,a,P),gt=re.getMeshFromTileID(V,le.canonical,_,T,"raster");G.draw(V,F.TRIANGLES,fe,p?p[le.overscaledZ]:di.disabled,ne,z?Ft.frontCCW:Ft.backCCW,ft,Oe,Ue,a.id,gt.vertexBuffer,gt.indexBuffer,gt.segments)}}function tn(y,e,a,h,p,_){const T=h.paint.get("raster-fade-duration");if(!_&&T>0){const P=Y.now(),z=(P-y.timeAdded)/T,L=e?(P-e.timeAdded)/T:-1,B=a.getSource(),V=Pt(p,{tileSize:B.tileSize,roundZoom:B.roundZoom}),F=!e||Math.abs(e.tileID.overscaledZ-V)>Math.abs(y.tileID.overscaledZ-V),G=F&&y.refreshedUponExpiration?1:c.ah(F?z:1-L,0,1);return y.refreshedUponExpiration&&z>=1&&(y.refreshedUponExpiration=!1),e?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}const wi=new c.bf(1,0,0,1),no=new c.bf(0,1,0,1),ta=new c.bf(0,0,1,1),Rc=new c.bf(1,0,1,1),Ho=new c.bf(0,1,1,1);function Cu(y,e,a,h){Zr(y,0,e+a/2,y.transform.width,a,h)}function nn(y,e,a,h){Zr(y,e-a/2,0,a,y.transform.height,h)}function Zr(y,e,a,h,p,_){const T=y.context,P=T.gl;P.enable(P.SCISSOR_TEST),P.scissor(e*y.pixelRatio,a*y.pixelRatio,h*y.pixelRatio,p*y.pixelRatio),T.clear({color:_}),P.disable(P.SCISSOR_TEST)}function xr(y,e,a){const h=y.context,p=h.gl,_=y.useProgram("debug"),T=$t.disabled,P=di.disabled,z=y.colorModeForRenderPass(),L="$debug",B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(a);h.activeTexture.set(p.TEXTURE0);const V=e.getTileByID(a.key).latestRawTileData,F=Math.floor((V&&V.byteLength||0)/1024),G=e.getTile(a).tileSize,W=512/Math.min(G,512)*(a.overscaledZ/y.transform.zoom)*.5;let re=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(re+=` => ${a.overscaledZ}`),function(ae,le){ae.initDebugOverlayCanvas();const fe=ae.debugOverlayCanvas,ue=ae.context.gl,me=ae.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,fe.width,fe.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(le,5,5),me.strokeText(le,5,5),ae.debugOverlayTexture.update(fe),ae.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}(y,`${re} ${F}kB`);const ne=y.transform.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(h,p.TRIANGLES,T,P,Bi.alphaBlended,Ft.disabled,No(c.bf.transparent,W),null,ne,L,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),_.draw(h,p.LINE_STRIP,T,P,z,Ft.disabled,No(c.bf.red),B,ne,L,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function kc(y,e,a,h){const{isRenderingGlobe:p}=h,_=y.context,T=_.gl,P=y.transform,z=y.colorModeForRenderPass(),L=y.getDepthModeFor3D(),B=y.useProgram("terrain");_.bindFramebuffer.set(null),_.viewport.set([0,0,y.width,y.height]);for(const V of a){const F=e.getTerrainMesh(V.tileID),G=y.renderToTexture.getTexture(V),W=e.getTerrainData(V.tileID);_.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,G.texture);const re=e.getMeshFrameDelta(P.zoom),ne=P.calculateFogMatrix(V.tileID.toUnwrapped()),ae=vu(re,ne,y.style.sky,P.pitch,p),le=P.getProjectionData({overscaledTileID:V.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(_,T.TRIANGLES,L,di.disabled,z,Ft.backCCW,ae,W,le,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}function Ms(y,e){if(!e.mesh){const a=new c.aL;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(1,1),a.emplaceBack(-1,1);const h=new c.aN;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),e.mesh=new $s(y.createVertexBuffer(a,is.members),y.createIndexBuffer(h),c.aM.simpleSegment(0,0,a.length,h.length))}return e.mesh}class Au{constructor(e,a){this.context=new Mu(e),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=si.maxUnderzooming+si.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Io}resize(e,a,h){if(this.width=Math.floor(e*h),this.height=Math.floor(a*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const e=this.context,a=new c.aL;a.emplaceBack(0,0),a.emplaceBack(c.$,0),a.emplaceBack(0,c.$),a.emplaceBack(c.$,c.$),this.tileExtentBuffer=e.createVertexBuffer(a,is.members),this.tileExtentSegments=c.aM.simpleSegment(0,0,4,2);const h=new c.aL;h.emplaceBack(0,0),h.emplaceBack(c.$,0),h.emplaceBack(0,c.$),h.emplaceBack(c.$,c.$),this.debugBuffer=e.createVertexBuffer(h,is.members),this.debugSegments=c.aM.simpleSegment(0,0,4,5);const p=new c.c6;p.emplaceBack(0,0,0,0),p.emplaceBack(c.$,0,c.$,0),p.emplaceBack(0,c.$,0,c.$),p.emplaceBack(c.$,c.$,c.$,c.$),this.rasterBoundsBuffer=e.createVertexBuffer(p,Af.members),this.rasterBoundsSegments=c.aM.simpleSegment(0,0,4,2);const _=new c.aL;_.emplaceBack(0,0),_.emplaceBack(c.$,0),_.emplaceBack(0,c.$),_.emplaceBack(c.$,c.$),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(_,is.members),this.rasterBoundsSegmentsPosOnly=c.aM.simpleSegment(0,0,4,5);const T=new c.aL;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(T,is.members),this.viewportSegments=c.aM.simpleSegment(0,0,4,2);const P=new c.c7;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(P);const z=new c.aN;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(z);const L=this.context.gl;this.stencilClearMode=new di({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new $s(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,a=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=c.L();c.bY(h,0,this.width,this.height,0,0,1),c.N(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]);const p={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(e,a.TRIANGLES,$t.disabled,this.stencilClearMode,Bi.disabled,Ft.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,a,h){if(this.currentStencilSource===e.source||!e.isTileClipped()||!a||!a.length)return;this.currentStencilSource=e.source,this.nextStencilID+a.length>256&&this.clearStencil();const p=this.context;p.setColorMode(Bi.disabled),p.setDepthMode($t.disabled);const _={};for(const T of a)_[T.key]=this.nextStencilID++;this._renderTileMasks(_,a,h,!0),this._renderTileMasks(_,a,h,!1),this._tileClippingMaskIDs=_}_renderTileMasks(e,a,h,p){const _=this.context,T=_.gl,P=this.style.projection,z=this.transform,L=this.useProgram("clippingMask");for(const B of a){const V=e[B.key],F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),G=P.getMeshFromTileID(this.context,B.canonical,p,!0,"stencil"),W=z.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!h,applyTerrainMatrix:!0});L.draw(_,T.TRIANGLES,$t.disabled,new di({func:T.ALWAYS,mask:0},V,255,T.KEEP,T.KEEP,T.REPLACE),Bi.disabled,h?Ft.disabled:Ft.backCCW,null,F,W,"$clipping",G.vertexBuffer,G.indexBuffer,G.segments)}}_renderTilesDepthBuffer(){const e=this.context,a=e.gl,h=this.style.projection,p=this.transform,_=this.useProgram("depth"),T=this.getDepthModeFor3D(),P=ze(p,{tileSize:p.tileSize});for(const z of P){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(z),B=h.getMeshFromTileID(this.context,z.canonical,!0,!0,"raster"),V=p.getProjectionData({overscaledTileID:z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(e,a.TRIANGLES,T,di.disabled,Bi.disabled,Ft.backCCW,null,L,V,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,a=this.context.gl;return new di({func:a.NOTEQUAL,mask:255},e,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(e){const a=this.context.gl;return new di({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,a.KEEP,a.KEEP,a.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const a=this.context.gl,h=e.sort((T,P)=>P.overscaledZ-T.overscaledZ),p=h[h.length-1].overscaledZ,_=h[0].overscaledZ-p+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let P=0;P<_;P++)T[P+p]=new di({func:a.GEQUAL,mask:255},P+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=_,[T,h]}return[{[p]:di.disabled},h]}stencilConfigForOverlapTwoPass(e){const a=this.context.gl,h=e.sort((T,P)=>P.overscaledZ-T.overscaledZ),p=h[h.length-1].overscaledZ,_=h[0].overscaledZ-p+1;if(this.clearStencil(),_>1){const T={},P={};for(let z=0;z<_;z++)T[z+p]=new di({func:a.GREATER,mask:255},_+1+z,255,a.KEEP,a.KEEP,a.REPLACE),P[z+p]=new di({func:a.GREATER,mask:255},1+z,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID=2*_+1,[T,P,h]}return this.nextStencilID=3,[{[p]:new di({func:a.GREATER,mask:255},2,255,a.KEEP,a.KEEP,a.REPLACE)},{[p]:new di({func:a.GREATER,mask:255},1,255,a.KEEP,a.KEEP,a.REPLACE)},h]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Bi([e.CONSTANT_COLOR,e.ONE],new c.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Bi.unblended:Bi.alphaBlended}getDepthModeForSublayer(e,a,h){if(!this.opaquePassEnabledForLayer())return $t.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new $t(h||this.context.gl.LEQUAL,a,[p,p])}getDepthModeFor3D(){return new $t(this.context.gl.LEQUAL,$t.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,a){var h,p;this.style=e,this.options=a,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(Y.now()),this.imageManager.beginFrame();const _=this.style._order,T=this.style.sourceCaches,P={},z={},L={},B={isRenderingToTexture:!1,isRenderingGlobe:((h=e.projection)===null||h===void 0?void 0:h.transitionState)>0};for(const F in T){const G=T[F];G.used&&G.prepare(this.context),P[F]=G.getVisibleCoordinates(!1),z[F]=P[F].slice().reverse(),L[F]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<_.length;F++)if(this.style._layers[_[F]].is3D()){this.opaquePassCutoff=F;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const F of _){const G=this.style._layers[F];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const W=z[G.source];(G.type==="custom"||W.length)&&this.renderLayer(this,T[G.source],G,W,B)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:F=>this.useProgram(F)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?c.bf.black:c.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(F,G){const W=F.context,re=W.gl,ne=((be,he,Ee)=>{const Ze=Math.cos(he.rollInRadians),Le=Math.sin(he.rollInRadians),Oe=we(he),Ue=he.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:be.properties.get("sky-color"),u_horizon_color:be.properties.get("horizon-color"),u_horizon:[(he.width/2-Oe*Le)*Ee,(he.height/2+Oe*Ze)*Ee],u_horizon_normal:[-Le,Ze],u_sky_horizon_blend:be.properties.get("sky-horizon-blend")*he.height/2*Ee,u_sky_blend:Ue}})(G,F.style.map.transform,F.pixelRatio),ae=new $t(re.LEQUAL,$t.ReadWrite,[0,1]),le=di.disabled,fe=F.colorModeForRenderPass(),ue=F.useProgram("sky"),me=Ms(W,G);ue.draw(W,re.TRIANGLES,ae,le,fe,Ft.disabled,ne,null,void 0,"sky",me.vertexBuffer,me.indexBuffer,me.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[_[this.currentLayer]],G=T[F.source],W=P[F.source];this._renderTileClippingMasks(F,W,!1),this.renderLayer(this,G,F,W,B)}this.renderPass="translucent";let V=!1;for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const F=this.style._layers[_[this.currentLayer]],G=T[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F,B))continue;this.opaquePassEnabledForLayer()||V||(V=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const W=(F.type==="symbol"?L:z)[F.source];this._renderTileClippingMasks(F,P[F.source],!!this.renderToTexture),this.renderLayer(this,G,F,W,B)}if(B.isRenderingGlobe&&function(F,G,W){const re=F.context,ne=re.gl,ae=F.useProgram("atmosphere"),le=new $t(ne.LEQUAL,$t.ReadOnly,[0,1]),fe=F.transform,ue=function(Ue,ft){const gt=Ue.properties.get("position"),tt=[-gt.x,-gt.y,-gt.z],zt=c.ag(new Float64Array(16));return Ue.properties.get("anchor")==="map"&&(c.b6(zt,zt,ft.rollInRadians),c.b7(zt,zt,-ft.pitchInRadians),c.b6(zt,zt,ft.bearingInRadians),c.b7(zt,zt,ft.center.lat*Math.PI/180),c.bz(zt,zt,-ft.center.lng*Math.PI/180)),c.c5(tt,tt,zt),tt}(W,F.transform),me=fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=G.properties.get("atmosphere-blend")*me.projectionTransition;if(be===0)return;const he=_l(fe.worldSize,fe.center.lat),Ee=fe.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,c.aw(Ze,Ze,fe.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,c.aw(Ze,Ze,Ee),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const Le=((Ue,ft,gt,tt,zt)=>({u_sun_pos:Ue,u_atmosphere_blend:ft,u_globe_position:gt,u_globe_radius:tt,u_inv_proj_matrix:zt}))(ue,be,[Ze[0],Ze[1],Ze[2]],he,Ee),Oe=Ms(re,G);ae.draw(re,ne.TRIANGLES,le,di.disabled,Bi.alphaBlended,Ft.disabled,Le,null,null,"atmosphere",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const F=function(G,W){let re=null;const ne=Object.values(G._layers).flatMap(ue=>ue.source&&!ue.isHidden(W)?[G.sourceCaches[ue.source]]:[]),ae=ne.filter(ue=>ue.getSource().type==="vector"),le=ne.filter(ue=>ue.getSource().type!=="vector"),fe=ue=>{(!re||re.getSource().maxzoom<ue.getSource().maxzoom)&&(re=ue)};return ae.forEach(ue=>fe(ue)),re||le.forEach(ue=>fe(ue)),re}(this.style,this.transform.zoom);F&&function(G,W,re){for(let ne=0;ne<re.length;ne++)xr(G,W,re[ne])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const G=F.transform.padding;Cu(F,F.transform.height-(G.top||0),3,wi),Cu(F,G.bottom||0,3,no),nn(F,G.left||0,3,ta),nn(F,F.transform.width-(G.right||0),3,Rc);const W=F.transform.centerPoint;(function(re,ne,ae,le){Zr(re,ne-1,ae-10,2,20,le),Zr(re,ne-10,ae-1,20,2,le)})(F,W.x,F.transform.height-W.y,Ho)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=e?!c.c8(a,h):!c.c9(a,h)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(c.ca(a,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,T){const P=_.context,z=P.gl,L=_.transform,B=Bi.unblended,V=new $t(z.LEQUAL,$t.ReadWrite,[0,1]),F=T.sourceCache.getRenderableTiles(),G=_.useProgram("terrainDepth");P.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:c.bf.transparent,depth:1});for(const W of F){const re=T.getTerrainMesh(W.tileID),ne=T.getTerrainData(W.tileID),ae=L.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),le={u_ele_delta:T.getMeshFrameDelta(L.zoom)};G.draw(P,z.TRIANGLES,V,di.disabled,B,Ft.backCCW,le,ne,ae,"terrain",re.vertexBuffer,re.indexBuffer,re.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,T){const P=_.context,z=P.gl,L=_.transform,B=Bi.unblended,V=new $t(z.LEQUAL,$t.ReadWrite,[0,1]),F=T.getCoordsTexture(),G=T.sourceCache.getRenderableTiles(),W=_.useProgram("terrainCoords");P.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:c.bf.transparent,depth:1}),T.coordsIndex=[];for(const re of G){const ne=T.getTerrainMesh(re.tileID),ae=T.getTerrainData(re.tileID);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,F.texture);const le={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(L.zoom)},fe=L.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});W.draw(P,z.TRIANGLES,V,di.disabled,B,Ft.backCCW,le,ae,fe,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments),T.coordsIndex.push(re.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(e,a,h,p,_){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(p||[]).length)&&(this.id=h.id,c.cb(h)?function(T,P,z,L,B,V){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:F}=V,G=di.disabled,W=T.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(re,ne,ae,le,fe,ue,me,be,he){const Ee=ne.transform,Ze=ne.style.map.terrain,Le=fe==="map",Oe=ue==="map";for(const Ue of re){const ft=le.getTile(Ue),gt=ft.getBucket(ae);if(!gt||!gt.text||!gt.text.segments.get().length)continue;const tt=c.an(gt.textSizeData,Ee.zoom),zt=c.aC(ft,1,ne.transform.zoom),ei=Oi(Le,ne.transform,zt),_i=ae.layout.get("icon-text-fit")!=="none"&&gt.hasIconData();if(tt){const Ci=Math.pow(2,Ee.zoom-ft.tileID.overscaledZ),Si=Ze?(rn,Ki)=>Ze.getElevation(Ue,rn,Ki):null;Ic(gt,Le,Oe,he,Ee,ei,Ci,tt,_i,c.aD(Ee,ft,me,be),Ue.toUnwrapped(),Si)}}}(L,T,z,P,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),B),z.paint.get("icon-opacity").constantOr(1)!==0&&os(T,P,z,L,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),G,W,F),z.paint.get("text-opacity").constantOr(1)!==0&&os(T,P,z,L,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),G,W,F),P.map.showCollisionBoxes&&(Mh(T,P,z,L,!0),Mh(T,P,z,L,!1))}(e,a,h,p,this.style.placement.variableOffsets,_):c.cc(h)?function(T,P,z,L,B){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:V}=B,F=z.paint.get("circle-opacity"),G=z.paint.get("circle-stroke-width"),W=z.paint.get("circle-stroke-opacity"),re=!z.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(G.constantOr(1)===0||W.constantOr(1)===0))return;const ne=T.context,ae=ne.gl,le=T.transform,fe=T.getDepthModeForSublayer(0,$t.ReadOnly),ue=di.disabled,me=T.colorModeForRenderPass(),be=[],he=le.getCircleRadiusCorrection();for(let Ee=0;Ee<L.length;Ee++){const Ze=L[Ee],Le=P.getTile(Ze),Oe=Le.getBucket(z);if(!Oe)continue;const Ue=z.paint.get("circle-translate"),ft=z.paint.get("circle-translate-anchor"),gt=c.aD(le,Le,Ue,ft),tt=Oe.programConfigurations.get(z.id),zt=T.useProgram("circle",tt),ei=Oe.layoutVertexBuffer,_i=Oe.indexBuffer,Ci=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ze),Si={programConfiguration:tt,program:zt,layoutVertexBuffer:ei,indexBuffer:_i,uniformValues:xd(T,Le,z,gt,he),terrainData:Ci,projectionData:le.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!V,applyTerrainMatrix:!0})};if(re){const rn=Oe.segments.get();for(const Ki of rn)be.push({segments:new c.aM([Ki]),sortKey:Ki.sortKey,state:Si})}else be.push({segments:Oe.segments,sortKey:0,state:Si})}re&&be.sort((Ee,Ze)=>Ee.sortKey-Ze.sortKey);for(const Ee of be){const{programConfiguration:Ze,program:Le,layoutVertexBuffer:Oe,indexBuffer:Ue,uniformValues:ft,terrainData:gt,projectionData:tt}=Ee.state;Le.draw(ne,ae.TRIANGLES,fe,ue,me,Ft.backCCW,ft,gt,tt,z.id,Oe,Ue,Ee.segments,z.paint,T.transform.zoom,Ze)}}(e,a,h,p,_):c.cd(h)?function(T,P,z,L,B){if(z.paint.get("heatmap-opacity")===0)return;const V=T.context,{isRenderingToTexture:F,isRenderingGlobe:G}=B;if(T.style.map.terrain){for(const W of L){const re=P.getTile(W);P.hasRenderableParent(W)||(T.renderPass==="offscreen"?zl(T,re,z,W,G):T.renderPass==="translucent"&&Jr(T,z,W,F,G))}V.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(W,re,ne,ae){const le=W.context,fe=le.gl,ue=W.transform,me=di.disabled,be=new Bi([fe.ONE,fe.ONE],c.bf.transparent,[!0,!0,!0,!0]);(function(he,Ee,Ze){const Le=he.gl;he.activeTexture.set(Le.TEXTURE1),he.viewport.set([0,0,Ee.width/4,Ee.height/4]);let Oe=Ze.heatmapFbos.get(c.c2);Oe?(Le.bindTexture(Le.TEXTURE_2D,Oe.colorAttachment.get()),he.bindFramebuffer.set(Oe.framebuffer)):(Oe=vr(he,Ee.width/4,Ee.height/4),Ze.heatmapFbos.set(c.c2,Oe))})(le,W,ne),le.clear({color:c.bf.transparent});for(let he=0;he<ae.length;he++){const Ee=ae[he];if(re.hasRenderableParent(Ee))continue;const Ze=re.getTile(Ee),Le=Ze.getBucket(ne);if(!Le)continue;const Oe=Le.programConfigurations.get(ne.id),Ue=W.useProgram("heatmap",Oe),ft=ue.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),gt=ue.getCircleRadiusCorrection();Ue.draw(le,fe.TRIANGLES,$t.disabled,me,be,Ft.backCCW,bd(Ze,ue.zoom,ne.paint.get("heatmap-intensity"),gt),null,ft,ne.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,ne.paint,ue.zoom,Oe)}le.viewport.set([0,0,W.width,W.height])}(T,P,z,L):T.renderPass==="translucent"&&function(W,re){const ne=W.context,ae=ne.gl;ne.setColorMode(W.colorModeForRenderPass());const le=re.heatmapFbos.get(c.c2);le&&(ne.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,le.colorAttachment.get()),ne.activeTexture.set(ae.TEXTURE1),Ra(ne,re).bind(ae.LINEAR,ae.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(ne,ae.TRIANGLES,$t.disabled,di.disabled,W.colorModeForRenderPass(),Ft.disabled,_h(W,re,0,1),null,null,re.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,re.paint,W.transform.zoom))}(T,z)}(e,a,h,p,_):c.ce(h)?function(T,P,z,L,B){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:V}=B,F=z.paint.get("line-opacity"),G=z.paint.get("line-width");if(F.constantOr(1)===0||G.constantOr(1)===0)return;const W=T.getDepthModeForSublayer(0,$t.ReadOnly),re=T.colorModeForRenderPass(),ne=z.paint.get("line-dasharray"),ae=z.paint.get("line-pattern"),le=ae.constantOr(1),fe=z.paint.get("line-gradient"),ue=z.getCrossfadeParameters(),me=le?"linePattern":ne?"lineSDF":fe?"lineGradient":"line",be=T.context,he=be.gl,Ee=T.transform;let Ze=!0;for(const Le of L){const Oe=P.getTile(Le);if(le&&!Oe.patternsLoaded())continue;const Ue=Oe.getBucket(z);if(!Ue)continue;const ft=Ue.programConfigurations.get(z.id),gt=T.context.program.get(),tt=T.useProgram(me,ft),zt=Ze||tt.program!==gt,ei=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Le),_i=ae.constantOr(null);if(_i&&Oe.imageAtlas){const Wt=Oe.imageAtlas,Ai=Wt.patternPositions[_i.to.toString()],_n=Wt.patternPositions[_i.from.toString()];Ai&&_n&&ft.setConstantPatternPositions(Ai,_n)}const Ci=Ee.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),Si=Ee.getPixelScale(),rn=le?xh(T,Oe,z,Si,ue):ne?Ws(T,Oe,z,Si,ne,ue):fe?xc(T,Oe,z,Si,Ue.lineClipsArray.length):xu(T,Oe,z,Si);if(le)be.activeTexture.set(he.TEXTURE0),Oe.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),ft.updatePaintBuffers(ue);else if(ne&&(zt||T.lineAtlas.dirty))be.activeTexture.set(he.TEXTURE0),T.lineAtlas.bind(be);else if(fe){const Wt=Ue.gradients[z.id];let Ai=Wt.texture;if(z.gradientVersion!==Wt.version){let _n=256;if(z.stepInterpolant){const Ln=P.getSource().maxzoom,Un=Le.canonical.z===Ln?Math.ceil(1<<T.transform.maxZoom-Le.canonical.z):1;_n=c.ah(c.c3(Ue.maxLineLength/c.$*1024*Un),256,be.maxTextureSize)}Wt.gradient=c.c4({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:_n,image:Wt.gradient||void 0,clips:Ue.lineClipsArray}),Wt.texture?Wt.texture.update(Wt.gradient):Wt.texture=new c.T(be,Wt.gradient,he.RGBA),Wt.version=z.gradientVersion,Ai=Wt.texture}be.activeTexture.set(he.TEXTURE0),Ai.bind(z.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}const Ki=T.stencilModeForClipping(Le);tt.draw(be,he.TRIANGLES,W,Ki,re,Ft.disabled,rn,ei,Ci,z.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,z.paint,T.transform.zoom,ft,Ue.layoutVertexBuffer2),Ze=!1}}(e,a,h,p,_):c.cf(h)?function(T,P,z,L,B){const V=z.paint.get("fill-color"),F=z.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const{isRenderingToTexture:G}=B,W=T.colorModeForRenderPass(),re=z.paint.get("fill-pattern"),ne=T.opaquePassEnabledForLayer()&&!re.constantOr(1)&&V.constantOr(c.bf.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===ne){const ae=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?$t.ReadWrite:$t.ReadOnly);ha(T,P,z,L,ae,W,!1,G)}if(T.renderPass==="translucent"&&z.paint.get("fill-antialias")){const ae=T.getDepthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,$t.ReadOnly);ha(T,P,z,L,ae,W,!0,G)}}(e,a,h,p,_):c.cg(h)?function(T,P,z,L,B){const V=z.paint.get("fill-extrusion-opacity");if(V===0)return;const{isRenderingToTexture:F}=B;if(T.renderPass==="translucent"){const G=new $t(T.context.gl.LEQUAL,$t.ReadWrite,T.depthRangeFor3D);if(V!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))Ss(T,P,z,L,G,di.disabled,Bi.disabled,F),Ss(T,P,z,L,G,T.stencilModeFor3D(),T.colorModeForRenderPass(),F);else{const W=T.colorModeForRenderPass();Ss(T,P,z,L,G,di.disabled,W,F)}}}(e,a,h,p,_):c.ch(h)?function(T,P,z,L,B){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:V}=B,F=T.context,G=T.style.projection.useSubdivision,W=T.getDepthModeForSublayer(0,$t.ReadOnly),re=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(ne,ae,le,fe,ue,me,be){const he=ne.context,Ee=he.gl;for(const Ze of le){const Le=ae.getTile(Ze),Oe=Le.dem;if(!Oe||!Oe.data||!Le.needsHillshadePrepare)continue;const Ue=Oe.dim,ft=Oe.stride,gt=Oe.getPixels();if(he.activeTexture.set(Ee.TEXTURE1),he.pixelStoreUnpackPremultiplyAlpha.set(!1),Le.demTexture=Le.demTexture||ne.getTileTexture(ft),Le.demTexture){const zt=Le.demTexture;zt.update(gt,{premultiply:!1}),zt.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE)}else Le.demTexture=new c.T(he,gt,Ee.RGBA,{premultiply:!1}),Le.demTexture.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);he.activeTexture.set(Ee.TEXTURE0);let tt=Le.fbo;if(!tt){const zt=new c.T(he,{width:Ue,height:Ue,data:null},Ee.RGBA);zt.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),tt=Le.fbo=he.createFramebuffer(Ue,Ue,!0,!1),tt.colorAttachment.set(zt.texture)}he.bindFramebuffer.set(tt.framebuffer),he.viewport.set([0,0,Ue,Ue]),ne.useProgram("hillshadePrepare").draw(he,Ee.TRIANGLES,ue,me,be,Ft.disabled,vh(Le.tileID,Oe),null,null,fe.id,ne.rasterBoundsBuffer,ne.quadTriangleIndexBuffer,ne.rasterBoundsSegments),Le.needsHillshadePrepare=!1}})(T,P,L,z,W,di.disabled,re),F.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(G){const[ne,ae,le]=T.stencilConfigForOverlapTwoPass(L);io(T,P,z,le,ne,W,re,!1,V),io(T,P,z,le,ae,W,re,!0,V)}else{const[ne,ae]=T.getStencilConfigForOverlapAndUpdateStencilID(L);io(T,P,z,ae,ne,W,re,!1,V)}}(e,a,h,p,_):c.ci(h)?function(T,P,z,L,B){if(T.renderPass!=="translucent"||!L.length)return;const{isRenderingToTexture:V}=B,F=T.style.projection.useSubdivision,G=T.getDepthModeForSublayer(0,$t.ReadOnly),W=T.colorModeForRenderPass();if(F){const[re,ne,ae]=T.stencilConfigForOverlapTwoPass(L);Dc(T,P,z,ae,re,G,W,!1,V),Dc(T,P,z,ae,ne,G,W,!0,V)}else{const[re,ne]=T.getStencilConfigForOverlapAndUpdateStencilID(L);Dc(T,P,z,ne,re,G,W,!1,V)}}(e,a,h,p,_):c.cj(h)?function(T,P,z,L,B){if(T.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:V}=B,F=P.getSource(),G=T.style.projection.useSubdivision;if(F instanceof Pa)An(T,P,z,L,null,!1,!1,F.tileCoords,F.flippedWindingOrder,V);else if(G){const[W,re,ne]=T.stencilConfigForOverlapTwoPass(L);An(T,P,z,ne,W,!1,!0,Il,!1,V),An(T,P,z,ne,re,!0,!0,Il,!1,V)}else{const[W,re]=T.getStencilConfigForOverlapAndUpdateStencilID(L);An(T,P,z,re,W,!1,!0,Il,!1,V)}}(e,a,h,p,_):c.ck(h)?function(T,P,z,L,B){const V=z.paint.get("background-color"),F=z.paint.get("background-opacity");if(F===0)return;const{isRenderingToTexture:G}=B,W=T.context,re=W.gl,ne=T.style.projection,ae=T.transform,le=ae.tileSize,fe=z.paint.get("background-pattern");if(T.isPatternMissing(fe))return;const ue=!fe&&V.a===1&&F===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ue)return;const me=di.disabled,be=T.getDepthModeForSublayer(0,ue==="opaque"?$t.ReadWrite:$t.ReadOnly),he=T.colorModeForRenderPass(),Ee=T.useProgram(fe?"backgroundPattern":"background"),Ze=L||ze(ae,{tileSize:le,terrain:T.style.map.terrain});fe&&(W.activeTexture.set(re.TEXTURE0),T.imageManager.bind(T.context));const Le=z.getCrossfadeParameters();for(const Oe of Ze){const Ue=ae.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ft=fe?Ed(F,T,fe,{tileID:Oe,tileSize:le},Le):Md(F,V),gt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Oe),tt=ne.getMeshFromTileID(W,Oe.canonical,!1,!0,"raster");Ee.draw(W,re.TRIANGLES,be,me,he,Ft.backCCW,ft,gt,Ue,z.id,tt.vertexBuffer,tt.indexBuffer,tt.segments)}}(e,0,h,p,_):c.cl(h)&&function(T,P,z,L){const{isRenderingGlobe:B}=L,V=T.context,F=z.implementation,G=T.style.projection,W=T.transform,re=W.getProjectionDataForCustomLayer(B),ne={farZ:W.farZ,nearZ:W.nearZ,fov:W.fov*Math.PI/180,modelViewProjectionMatrix:W.modelViewProjectionMatrix,projectionMatrix:W.projectionMatrix,shaderData:{variantName:G.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${G.shaderPreludeCode.vertexSource}`,define:G.shaderDefine},defaultProjectionData:re},ae=F.renderingMode?F.renderingMode:"2d";if(T.renderPass==="offscreen"){const le=F.prerender;le&&(T.setCustomLayerDefaults(),V.setColorMode(T.colorModeForRenderPass()),le.call(F,V.gl,ne),V.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),V.setColorMode(T.colorModeForRenderPass()),V.setStencilMode(di.disabled);const le=ae==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,$t.ReadOnly);V.setDepthMode(le),F.render(V.gl,ne),V.setDirty(),T.setBaseState(),V.bindFramebuffer.set(null)}}(e,0,h,_))}saveTileTexture(e){const a=this._tileTextures[e.size[0]];a?a.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const a=this._tileTextures[e];return a&&a.length>0?a.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const a=this.imageManager.getPattern(e.from.toString()),h=this.imageManager.getPattern(e.to.toString());return!a||!h}useProgram(e,a,h=!1,p=[]){this.cache=this.cache||{};const _=!!this.style.map.terrain,T=this.style.projection,P=h?Ia.projectionMercator:T.shaderPreludeCode,z=h?_s:T.shaderDefine,L=e+(a?a.cacheKey:"")+`/${h?Do:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(_?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[L]||(this.cache[L]=new yh(this.context,Ia[e],a,Dr[e],this._showOverdrawInspector,_,P,z,p)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:a}=this.context.gl;return this.width!==e||this.height!==a}}function ia(y,e){let a,h=!1,p=null,_=null;const T=()=>{p=null,h&&(y.apply(_,a),p=setTimeout(T,e),h=!1)};return(...P)=>(h=!0,_=this,a=P,p||T(),p)}class da{constructor(e){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(h=p)}),(h&&h[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(!this._isValidHash(a))return!1;const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:h,pitch:+(a[4]||0)}),!0},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const h=a.join("/");let p=h;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${h}`);let _=window.location.hash.replace(p,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let T=window.location.href.replace(/(#.+)?$/,_);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=ia(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,p=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,p),T=Math.round(a.lng*_)/_,P=Math.round(a.lat*_)/_,z=this._map.getBearing(),L=this._map.getPitch();let B="";if(B+=e?`/${T}/${P}/${h}`:`${h}/${P}/${T}`,(z||L)&&(B+="/"+Math.round(10*z)/10),L&&(B+=`/${Math.round(L)}`),this._hashName){const V=this._hashName;let F=!1;const G=window.location.hash.slice(1).split("&").map(W=>{const re=W.split("=")[0];return re===V?(F=!0,`${re}=${B}`):W}).filter(W=>W);return F||G.push(`${V}=${B}`),`#${G.join("&")}`}return`#${B}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new c.S(+e[2],+e[1])}catch{return!1}const a=+e[0],h=+(e[3]||0),p=+(e[4]||0);return a>=this._map.getMinZoom()&&a<=this._map.getMaxZoom()&&h>=-180&&h<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const br={linearity:.3,easing:c.cm(0,0,.3,1)},ka=c.e({deceleration:2500,maxSpeed:1400},br),Pu=c.e({deceleration:20,maxSpeed:1400},br),zu=c.e({deceleration:1e3,maxSpeed:360},br),Dl=c.e({deceleration:1e3,maxSpeed:90},br),Lc=c.e({deceleration:1e3,maxSpeed:360},br);class ro{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Y.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,a=Y.now();for(;e.length>0&&a-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)a.zoom+=_.zoomDelta||0,a.bearing+=_.bearingDelta||0,a.pitch+=_.pitchDelta||0,a.roll+=_.rollDelta||0,_.panDelta&&a.pan._add(_.panDelta),_.around&&(a.around=_.around),_.pinchAround&&(a.pinchAround=_.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const _=Es(a.pan.mag(),h,c.e({},ka,e||{})),T=a.pan.mult(_.amount/a.pan.mag()),P=this._map.cameraHelper.handlePanInertia(T,this._map.transform);p.center=P.easingCenter,p.offset=P.easingOffset,Gi(p,_)}if(a.zoom){const _=Es(a.zoom,h,Pu);p.zoom=this._map.transform.zoom+_.amount,Gi(p,_)}if(a.bearing){const _=Es(a.bearing,h,zu);p.bearing=this._map.transform.bearing+c.ah(_.amount,-179,179),Gi(p,_)}if(a.pitch){const _=Es(a.pitch,h,Dl);p.pitch=this._map.transform.pitch+_.amount,Gi(p,_)}if(a.roll){const _=Es(a.roll,h,Lc);p.roll=this._map.transform.roll+c.ah(_.amount,-179,179),Gi(p,_)}if(p.zoom||p.bearing){const _=a.pinchAround===void 0?a.around:a.pinchAround;p.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(p,{noMoveStart:!0})}}function Gi(y,e){(!y.duration||y.duration<e.duration)&&(y.duration=e.duration,y.easing=e.easing)}function Es(y,e,a){const{maxSpeed:h,linearity:p,deceleration:_}=a,T=c.ah(y*p/(e/1e3),-h,h),P=Math.abs(T)/(_*p);return{easing:a.easing,duration:1e3*P,amount:T*(P/2)}}class kr extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h,p={}){h=h instanceof MouseEvent?h:new MouseEvent(e,h);const _=X.mousePos(a.getCanvas(),h),T=a.unproject(_);super(e,c.e({point:_,lngLat:T,originalEvent:h},p)),this._defaultPrevented=!1,this.target=a}}class Rl extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h){const p=e==="touchend"?h.changedTouches:h.touches,_=X.touchPos(a.getCanvasContainer(),p),T=_.map(z=>a.unproject(z)),P=_.reduce((z,L,B,V)=>z.add(L.div(V.length)),new c.P(0,0));super(e,{points:_,point:P,lngLats:T,lngLat:a.unproject(P),originalEvent:h}),this._defaultPrevented=!1}}class Ch extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h){super(e,{originalEvent:h}),this._defaultPrevented=!1}}class zd{constructor(e,a){this._map=e,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ch(e.type,this._map,e))}mousedown(e,a){return this._mousedownPos=a,this._firePreventable(new kr(e.type,this._map,e))}mouseup(e){this._map.fire(new kr(e.type,this._map,e))}click(e,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new kr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new kr(e.type,this._map,e))}mouseover(e){this._map.fire(new kr(e.type,this._map,e))}mouseout(e){this._map.fire(new kr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Rl(e.type,this._map,e))}touchmove(e){this._map.fire(new Rl(e.type,this._map,e))}touchend(e){this._map.fire(new Rl(e.type,this._map,e))}touchcancel(e){this._map.fire(new Rl(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kn{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new kr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new kr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ao{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(c.P.convert(e),this._map.terrain)}}class Xo{constructor(e,a){this._map=e,this._tr=new ao(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,a){this.isEnabled()&&e.shiftKey&&e.button===0&&(X.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(e,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=h,this._box||(this._box=X.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const _=Math.min(p.x,h.x),T=Math.max(p.x,h.x),P=Math.min(p.y,h.y),z=Math.max(p.y,h.y);X.setTransform(this._box,`translate(${_}px,${P}px)`),this._box.style.width=T-_+"px",this._box.style.height=z-P+"px"}mouseupWindow(e,a){if(!this._active||e.button!==0)return;const h=this._startPos,p=a;if(this.reset(),X.suppressClick(),h.x!==p.x||h.y!==p.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:e})),{cameraAnimation:_=>_.fitScreenCoordinates(h,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(X.remove(this._box),this._box=null),X.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,a){return this._map.fire(new c.l(e,{originalEvent:a}))}}function ls(y,e){if(y.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${e.length}`);const a={};for(let h=0;h<y.length;h++)a[y[h].identifier]=e[h];return a}class Iu{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),h.length===this.numTouches&&(this.centroid=function(p){const _=new c.P(0,0);for(const T of p)_._add(T);return _.div(p.length)}(a),this.touches=ls(h,a)))}touchmove(e,a,h){if(this.aborted||!this.centroid)return;const p=ls(h,a);for(const _ in this.touches){const T=p[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(e,a,h){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Vn{constructor(e){this.singleTap=new Iu(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,a,h){this.singleTap.touchstart(e,a,h)}touchmove(e,a,h){this.singleTap.touchmove(e,a,h)}touchend(e,a,h){const p=this.singleTap.touchend(e,a,h);if(p){const _=e.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(p)<30;if(_&&T||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class wr{constructor(e){this._tr=new ao(e),this._zoomIn=new Vn({numTouches:1,numTaps:2}),this._zoomOut=new Vn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,a,h){this._zoomIn.touchstart(e,a,h),this._zoomOut.touchstart(e,a,h)}touchmove(e,a,h){this._zoomIn.touchmove(e,a,h),this._zoomOut.touchmove(e,a,h)}touchend(e,a,h){const p=this._zoomIn.touchend(e,a,h),_=this._zoomOut.touchend(e,a,h),T=this._tr;return p?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(p)},{originalEvent:e})}):_?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kl{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const a=this._moveFunction(...e);if(a.bearingDelta||a.pitchDelta||a.rollDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(e,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(a)?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,a){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const p=Array.isArray(a)?a[0]:a;return!this._moved&&p.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(h,p))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&X.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const fa=0,Ll=2,Id={[fa]:1,[Ll]:2};class La{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const a=X.mouseButton(e);this._eventButton=a}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(a,h){const p=Id[h];return a.buttons===void 0||(a.buttons&p)!==p}(e,this._eventButton)}isValidEndEvent(e){return X.mouseButton(e)===this._eventButton}}class Ah{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class Du{constructor(e=new La({checkCorrectEvent:()=>!0}),a=new Ah){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=a}_executeRelevantHandler(e,a,h){return e instanceof MouseEvent?a(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?h(e):void 0}startMove(e){this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.startMove(a),a=>this.oneFingerTouchMoveStateManager.startMove(a))}endMove(e){this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.endMove(a),a=>this.oneFingerTouchMoveStateManager.endMove(a))}isValidStartEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidStartEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidStartEvent(a))}isValidMoveEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidMoveEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(a))}isValidEndEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidEndEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidEndEvent(a))}}const Ol=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=e=>{e.preventDefault()}};class Cs{constructor(e,a){this._clickTolerance=e.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,a,h){return this._calculateTransform(e,a,h)}touchmove(e,a,h){if(this._active){if(!this._shouldBePrevented(h.length))return e.preventDefault(),this._calculateTransform(e,a,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,a,h){this._calculateTransform(e,a,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,a,h){h.length>0&&(this._active=!0);const p=ls(h,a),_=new c.P(0,0),T=new c.P(0,0);let P=0;for(const L in p){const B=p[L],V=this._touches[L];V&&(_._add(B),T._add(B.sub(V)),P++,p[L]=B)}if(this._touches=p,this._shouldBePrevented(P)||!T.mag())return;const z=T.div(P);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(P),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(e,a,h){if(!this._firstTwoTouches)return;e.preventDefault();const[p,_]=this._firstTwoTouches,T=wt(h,a,p),P=wt(h,a,_);if(!T||!P)return;const z=this._aroundCenter?null:T.add(P).div(2);return this._move([T,P],z,e)}touchend(e,a,h){if(!this._firstTwoTouches)return;const[p,_]=this._firstTwoTouches,T=wt(h,a,p),P=wt(h,a,_);T&&P||(this._active&&X.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function wt(y,e,a){for(let h=0;h<y.length;h++)if(y[h].identifier===a)return e[h]}function Oc(y,e){return Math.log(y/e)/Math.LN2}class Bc extends pa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,a){const h=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Oc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oc(this._distance,h),pinchAround:a}}}function Bl(y,e){return 180*y.angleWith(e)/Math.PI}class Yo extends pa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,a,h){const p=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bl(this._vector,p),pinchAround:a}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const a=25/(Math.PI*this._minDiameter)*360,h=Bl(e,this._startVector);return Math.abs(h)<a}}function Oa(y){return Math.abs(y.y)>Math.abs(y.x)}class jc extends pa{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,a,h){super.touchstart(e,a,h),this._currentTouchCount=h.length}_start(e){this._lastPoints=e,Oa(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,a,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=e[0].sub(this._lastPoints[0]),_=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,_,h.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(p.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(e,a,h){if(this._valid!==void 0)return this._valid;const p=e.mag()>=2,_=a.mag()>=2;if(!p&&!_)return;if(!p||!_)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const T=e.y>0==a.y>0;return Oa(e)&&Oa(a)&&T}}const ci={panStep:100,bearingStep:15,pitchStep:10};class Ba{constructor(e){this._tr=new ao(e);const a=ci;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let a=0,h=0,p=0,_=0,T=0;switch(e.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:e.shiftKey?h=-1:(e.preventDefault(),_=-1);break;case 39:e.shiftKey?h=1:(e.preventDefault(),_=1);break;case 38:e.shiftKey?p=1:(e.preventDefault(),T=-1);break;case 40:e.shiftKey?p=-1:(e.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(h=0,p=0),{cameraAnimation:P=>{const z=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Ph,zoom:a?Math.round(z.zoom)+a*(e.shiftKey?2:1):z.zoom,bearing:z.bearing+h*this._bearingStep,pitch:z.pitch+p*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:z.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ph(y){return y*(2-y)}const jl=4.000244140625,so=1/450;class As{constructor(e,a){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=e,this._tr=new ao(e),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=so}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let a=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const h=Y.now(),p=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%jl==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),e.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=e,this._delta-=a,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=X.mousePos(this._map.getCanvas(),e),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(c.S.convert(h.center)):a,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const P=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>jl?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&z!==0&&(z=1/z);const L=typeof this._targetZoom!="number"?e.scale:c.af(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),c.ak(L*z)).zoom,this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,h=this._startZoom,p=this._easing;let _,T=!1;if(this._type==="wheel"&&h&&p){const P=Y.now()-this._lastWheelEventTime,z=Math.min((P+5)/200,1),L=p(z);_=c.C.number(h,a,L),z<1?this._frameId||(this._frameId=!0):T=!0}else _=a,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=_,{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let a=c.co;if(this._prevEase){const h=this._prevEase,p=(Y.now()-h.start)/h.duration,_=h.easing(p+.01)-h.easing(p),T=.27/Math.sqrt(_*_+1e-4)*.01,P=Math.sqrt(.0729-T*T);a=c.cm(T,P,.25,1)}return this._prevEase={start:Y.now(),duration:e,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wo{constructor(e,a){this._clickZoom=e,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Nc{constructor(e){this._tr=new ao(e),this.reset()}reset(){this._active=!1}dblclick(e,a){return e.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ru{constructor(){this._tap=new Vn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,a,h){if(!this._swipePoint)if(this._tapTime){const p=a[0],_=e.timeStamp-this._tapTime<500,T=this._tapPoint.dist(p)<30;_&&T?h.length>0&&(this._swipePoint=p,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(e,a,h)}touchmove(e,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const p=a[0],_=p.y-this._swipePoint.y;return this._swipePoint=p,e.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(e,a,h)}touchend(e,a,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const p=this._tap.touchend(e,a,h);p&&(this._tapTime=e.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nl{constructor(e,a,h){this._el=e,this._mousePan=a,this._touchPan=h}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ko{constructor(e,a,h,p){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=a,this._mousePitch=h,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class zh{constructor(e,a,h,p){this._el=e,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ih{constructor(e,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=X.create("div","maplibregl-cooperative-gesture-screen",e);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=h,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(X.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,a){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:e,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Tr=y=>y.zoom||y.drag||y.roll||y.pitch||y.rotate;class ji extends c.l{}function Qo(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta||y.rollDelta}class Fc{constructor(e,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,_)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=p.type==="renderFrame"?void 0:p,P={needsRenderFrame:!1},z={},L={};for(const{handlerName:F,handler:G,allowed:W}of this._handlers){if(!G.isEnabled())continue;let re;if(this._blockedByActive(L,W,F))G.reset();else if(G[_||p.type]){if(c.cp(p,_||p.type)){const ne=X.mousePos(this._map.getCanvas(),p);re=G[_||p.type](p,ne)}else if(c.cq(p,_||p.type)){const ne=this._getMapTouches(p.touches),ae=X.touchPos(this._map.getCanvas(),ne);re=G[_||p.type](p,ae,ne)}else c.cr(_||p.type)||(re=G[_||p.type](p));this.mergeHandlerResult(P,z,re,F,T),re&&re.needsRenderFrame&&this._triggerRenderFrame()}(re||G.isActive())&&(L[F]=G)}const B={};for(const F in this._previousActiveHandlers)L[F]||(B[F]=T);this._previousActiveHandlers=L,(Object.keys(B).length||Qo(P))&&(this._changes.push([P,z,B]),this._triggerRenderFrame()),(Object.keys(L).length||Qo(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:V}=P;V&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],V(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ro(e),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,_,T]of this._listeners)X.addEventListener(p,_,p===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[e,a,h]of this._listeners)X.removeEventListener(e,a,e===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(e){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new zd(a,e));const p=a.boxZoom=new Xo(a,e);this._add("boxZoom",p),e.interactive&&e.boxZoom&&p.enable();const _=a.cooperativeGestures=new Ih(a,e.cooperativeGestures);this._add("cooperativeGestures",_),e.cooperativeGestures&&_.enable();const T=new wr(a),P=new Nc(a);a.doubleClickZoom=new Wo(P,T),this._add("tapZoom",T),this._add("clickZoom",P),e.interactive&&e.doubleClickZoom&&a.doubleClickZoom.enable();const z=new Ru;this._add("tapDragZoom",z);const L=a.touchPitch=new jc(a);this._add("touchPitch",L),e.interactive&&e.touchPitch&&a.touchPitch.enable(e.touchPitch);const B=()=>a.project(a.getCenter()),V=function({enable:ue,clickTolerance:me,aroundCenter:be=!0,minPixelCenterThreshold:he=100,rotateDegreesPerPixelMoved:Ee=.8},Ze){const Le=new La({checkCorrectEvent:Oe=>X.mouseButton(Oe)===0&&Oe.ctrlKey||X.mouseButton(Oe)===2&&!Oe.ctrlKey});return new kl({clickTolerance:me,move:(Oe,Ue)=>{const ft=Ze();if(be&&Math.abs(ft.y-Oe.y)>he)return{bearingDelta:c.cn(new c.P(Oe.x,Ue.y),Ue,ft)};let gt=(Ue.x-Oe.x)*Ee;return be&&Ue.y<ft.y&&(gt=-gt),{bearingDelta:gt}},moveStateManager:Le,enable:ue,assignEvents:Ol})}(e,B),F=function({enable:ue,clickTolerance:me,pitchDegreesPerPixelMoved:be=-.5}){const he=new La({checkCorrectEvent:Ee=>X.mouseButton(Ee)===0&&Ee.ctrlKey||X.mouseButton(Ee)===2});return new kl({clickTolerance:me,move:(Ee,Ze)=>({pitchDelta:(Ze.y-Ee.y)*be}),moveStateManager:he,enable:ue,assignEvents:Ol})}(e),G=function({enable:ue,clickTolerance:me,rollDegreesPerPixelMoved:be=.3},he){const Ee=new La({checkCorrectEvent:Ze=>X.mouseButton(Ze)===2&&Ze.ctrlKey});return new kl({clickTolerance:me,move:(Ze,Le)=>{const Oe=he();let Ue=(Le.x-Ze.x)*be;return Le.y<Oe.y&&(Ue=-Ue),{rollDelta:Ue}},moveStateManager:Ee,enable:ue,assignEvents:Ol})}(e,B);a.dragRotate=new Ko(e,V,F,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",F,["mouseRotate","mouseRoll"]),this._add("mouseRoll",G,["mousePitch"]),e.interactive&&e.dragRotate&&a.dragRotate.enable();const W=function({enable:ue,clickTolerance:me}){const be=new La({checkCorrectEvent:he=>X.mouseButton(he)===0&&!he.ctrlKey});return new kl({clickTolerance:me,move:(he,Ee)=>({around:Ee,panDelta:Ee.sub(he)}),activateOnStart:!0,moveStateManager:be,enable:ue,assignEvents:Ol})}(e),re=new Cs(e,a);a.dragPan=new Nl(h,W,re),this._add("mousePan",W),this._add("touchPan",re,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&a.dragPan.enable(e.dragPan);const ne=new Yo,ae=new Bc;a.touchZoomRotate=new zh(h,ae,ne,z),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&a.touchZoomRotate.enable(e.touchZoomRotate);const le=a.scrollZoom=new As(a,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),e.interactive&&e.scrollZoom&&a.scrollZoom.enable(e.scrollZoom);const fe=a.keyboard=new Ba(a);this._add("keyboard",fe),e.interactive&&e.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new kn(a))}_add(e,a,h){this._handlers.push({handlerName:e,handler:a,allowed:h}),this._handlersById[e]=a}stop(e){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Tr(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,a,h){for(const p in e)if(p!==h&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(e){const a=[];for(const h of e)this._el.contains(h.target)&&a.push(h);return a}mergeHandlerResult(e,a,h,p,_){if(!h)return;c.e(e,h);const T={handlerName:p,originalEvent:h.originalEvent||_};h.zoomDelta!==void 0&&(a.zoom=T),h.panDelta!==void 0&&(a.drag=T),h.rollDelta!==void 0&&(a.roll=T),h.pitchDelta!==void 0&&(a.pitch=T),h.bearingDelta!==void 0&&(a.rotate=T)}_applyChanges(){const e={},a={},h={};for(const[p,_,T]of this._changes)p.panDelta&&(e.panDelta=(e.panDelta||new c.P(0,0))._add(p.panDelta)),p.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(e.rollDelta=(e.rollDelta||0)+p.rollDelta),p.around!==void 0&&(e.around=p.around),p.pinchAround!==void 0&&(e.pinchAround=p.pinchAround),p.noInertia&&(e.noInertia=p.noInertia),c.e(a,_),c.e(h,T);this._updateMapTransform(e,a,h),this._changes=[]}_updateMapTransform(e,a,h){const p=this._map,_=p._getTransformForUpdate(),T=p.terrain;if(!(Qo(e)||T&&this._terrainMovement))return this._fireEvents(a,h,!0);p._stop(!0);let{panDelta:P,zoomDelta:z,bearingDelta:L,pitchDelta:B,rollDelta:V,around:F,pinchAround:G}=e;G!==void 0&&(F=G),F=F||p.transform.centerPoint,T&&!_.isPointOnMapSurface(F)&&(F=_.centerPoint);const W={panDelta:P,zoomDelta:z,rollDelta:V,pitchDelta:B,bearingDelta:L,around:F};this._map.cameraHelper.useGlobeControls&&!_.isPointOnMapSurface(F)&&(F=_.centerPoint);const re=F.distSqr(_.centerPoint)<.01?_.center:_.screenPointToLocation(P?F.sub(P):F);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(W,_),this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?_.setCenter(_.screenPointToLocation(_.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(W,_,re):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(W,_,re))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(W,_),this._map.cameraHelper.handleMapControlsPan(W,_,re)),p._applyUpdatedTransform(_),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(a,h,!0)}_fireEvents(e,a,h){const p=Tr(this._eventsInProgress),_=Tr(e),T={};for(const V in e){const{originalEvent:F}=e[V];this._eventsInProgress[V]||(T[`${V}start`]=F),this._eventsInProgress[V]=e[V]}!p&&_&&this._fireEvent("movestart",_.originalEvent);for(const V in T)this._fireEvent(V,T[V]);_&&this._fireEvent("move",_.originalEvent);for(const V in e){const{originalEvent:F}=e[V];this._fireEvent(V,F)}const P={};let z;for(const V in this._eventsInProgress){const{handlerName:F,originalEvent:G}=this._eventsInProgress[V];this._handlersById[F].isActive()||(delete this._eventsInProgress[V],z=a[F]||G,P[`${V}end`]=z)}for(const V in P)this._fireEvent(V,P[V]);const L=Tr(this._eventsInProgress),B=(p||_)&&!L;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const V=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&V.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(V)}if(h&&B){this._updatingCamera=!0;const V=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!V||!V.essential&&Y.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:z})),F(this._map.getBearing())&&this._map.resetNorth()):(F(V.bearing||this._map.getBearing())&&(V.bearing=0),V.freezeElevation=!0,this._map.easeTo(V,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(e,a){this._map.fire(new c.l(e,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new ji("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ku extends c.E{constructor(e,a,h){super(),this._renderFrameCallback=()=>{const p=Math.min((Y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=h.bearingSnap,this.cameraHelper=a,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,a){e.apply(this.transform),this.transform=e,this.cameraHelper=a}getCenter(){return new c.S(this.transform.center.lng,this.transform.center.lat)}setCenter(e,a){return this.jumpTo({center:e},a)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,a){return this.jumpTo({elevation:e},a),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,a,h){return e=c.P.convert(e).mult(-1),this.panTo(this.transform.center,c.e({offset:e},a),h)}panTo(e,a,h){return this.easeTo(c.e({center:e},a),h)}getZoom(){return this.transform.zoom}setZoom(e,a){return this.jumpTo({zoom:e},a),this}zoomTo(e,a,h){return this.easeTo(c.e({zoom:e},a),h)}zoomIn(e,a){return this.zoomTo(this.getZoom()+1,e,a),this}zoomOut(e,a){return this.zoomTo(this.getZoom()-1,e,a),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,a){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new c.l("movestart",a)).fire(new c.l("move",a)).fire(new c.l("moveend",a))),this}getBearing(){return this.transform.bearing}setBearing(e,a){return this.jumpTo({bearing:e},a),this}getPadding(){return this.transform.padding}setPadding(e,a){return this.jumpTo({padding:e},a),this}rotateTo(e,a,h){return this.easeTo(c.e({bearing:e},a),h)}resetNorth(e,a){return this.rotateTo(0,c.e({duration:1e3},e),a),this}resetNorthPitch(e,a){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},e),a),this}snapToNorth(e,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,a):this}getPitch(){return this.transform.pitch}setPitch(e,a){return this.jumpTo({pitch:e},a),this}getRoll(){return this.transform.roll}setRoll(e,a){return this.jumpTo({roll:e},a),this}cameraForBounds(e,a){e=en.convert(e).adjustAntiMeridian();const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),h,a)}_cameraForBoxAndBearing(e,a,h,p){const _={top:0,bottom:0,right:0,left:0};if(typeof(p=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const L=p.padding;p.padding={top:L,bottom:L,right:L,left:L}}const T=c.e(_,p.padding);p.padding=T;const P=this.transform,z=new en(e,a);return this.cameraHelper.cameraForBoxAndBearing(p,T,z,h,P)}fitBounds(e,a,h){return this._fitInternal(this.cameraForBounds(e,a),a,h)}fitScreenCoordinates(e,a,h,p,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(e)),this.transform.screenPointToLocation(c.P.convert(a)),h,p),p,_)}_fitInternal(e,a,h){return e?(delete(a=c.e(e,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(e,a){this.stop();const h=this._getTransformForUpdate();let p=!1,_=!1,T=!1;const P=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,e);const z=h.zoom!==P;return"elevation"in e&&h.elevation!==+e.elevation&&h.setElevation(+e.elevation),"bearing"in e&&h.bearing!==+e.bearing&&(p=!0,h.setBearing(+e.bearing)),"pitch"in e&&h.pitch!==+e.pitch&&(_=!0,h.setPitch(+e.pitch)),"roll"in e&&h.roll!==+e.roll&&(T=!0,h.setRoll(+e.roll)),e.padding==null||h.isPaddingEqual(e.padding)||h.setPadding(e.padding),this._applyUpdatedTransform(h),this.fire(new c.l("movestart",a)).fire(new c.l("move",a)),z&&this.fire(new c.l("zoomstart",a)).fire(new c.l("zoom",a)).fire(new c.l("zoomend",a)),p&&this.fire(new c.l("rotatestart",a)).fire(new c.l("rotate",a)).fire(new c.l("rotateend",a)),_&&this.fire(new c.l("pitchstart",a)).fire(new c.l("pitch",a)).fire(new c.l("pitchend",a)),T&&this.fire(new c.l("rollstart",a)).fire(new c.l("roll",a)).fire(new c.l("rollend",a)),this.fire(new c.l("moveend",a))}calculateCameraOptionsFromTo(e,a,h,p=0){const _=c.a1.fromLngLat(e,a),T=c.a1.fromLngLat(h,p),P=T.x-_.x,z=T.y-_.y,L=T.z-_.z,B=Math.hypot(P,z,L);if(B===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(P,z),F=c.ak(this.transform.cameraToCenterDistance/B/this.transform.tileSize),G=180*Math.atan2(P,-z)/Math.PI;let W=180*Math.acos(V/B)/Math.PI;return W=L<0?90-W:90+W,{center:T.toLngLat(),elevation:p,zoom:F,pitch:W,bearing:G}}calculateCameraOptionsFromCameraLngLatAltRotation(e,a,h,p,_){const T=this.transform.calculateCenterFromCameraLngLatAlt(e,a,h,p);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:h,pitch:p,roll:_}}easeTo(e,a){this._stop(!1,e.easeId),((e=c.e({offset:[0,0],duration:500,easing:c.co},e)).animate===!1||!e.essential&&Y.prefersReducedMotion)&&(e.duration=0);const h=this._getTransformForUpdate(),p=this.getBearing(),_=h.pitch,T=h.roll,P="bearing"in e?this._normalizeBearing(e.bearing,p):p,z="pitch"in e?+e.pitch:_,L="roll"in e?this._normalizeBearing(e.roll,T):T,B="padding"in e?e.padding:h.padding,V=c.P.convert(e.offset);let F,G;e.around&&(F=c.S.convert(e.around),G=h.locationToScreenPoint(F));const W={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},re=this.cameraHelper.handleEaseTo(h,{bearing:P,pitch:z,roll:L,padding:B,around:F,aroundPoint:G,offsetAsPoint:V,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||p!==P,this._pitching=this._pitching||z!==_,this._rolling=this._rolling||L!==T,this._padding=!h.isPaddingEqual(B),this._zooming=this._zooming||re.isZooming,this._easeId=e.easeId,this._prepareEase(a,e.noMoveStart,W),this.terrain&&this._prepareElevation(re.elevationCenter),this._ease(ne=>{re.easeFunc(ne),this.terrain&&!e.freezeElevation&&this._updateElevation(ne),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},ne=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a,ne)},e),this}_prepareEase(e,a,h={}){this._moving=!0,a||h.moving||this.fire(new c.l("movestart",e)),this._zooming&&!h.zooming&&this.fire(new c.l("zoomstart",e)),this._rotating&&!h.rotating&&this.fire(new c.l("rotatestart",e)),this._pitching&&!h.pitching&&this.fire(new c.l("pitchstart",e)),this._rolling&&!h.rolling&&this.fire(new c.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&a!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(h-(a-(h*e+this._elevationStart))/(1-e)),this._elevationTarget=a}this.transform.setElevation(c.C.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const a=e.getCameraLngLat(),h=e.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(a,e.zoom):0;if(h<p){const _=this.calculateCameraOptionsFromTo(a,p,e.center,e.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(e){const a=[];if(a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const h=e.clone();for(const p of a){const _=h.clone(),{center:T,zoom:P,roll:z,pitch:L,bearing:B,elevation:V}=p(_);T&&_.setCenter(T),V!==void 0&&_.setElevation(V),P!==void 0&&_.setZoom(P),z!==void 0&&_.setRoll(z),L!==void 0&&_.setPitch(L),B!==void 0&&_.setBearing(B),h.apply(_)}this.transform.apply(h)}_fireMoveEvents(e){this.fire(new c.l("move",e)),this._zooming&&this.fire(new c.l("zoom",e)),this._rotating&&this.fire(new c.l("rotate",e)),this._pitching&&this.fire(new c.l("pitch",e)),this._rolling&&this.fire(new c.l("roll",e))}_afterEase(e,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,p=this._rotating,_=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new c.l("zoomend",e)),p&&this.fire(new c.l("rotateend",e)),_&&this.fire(new c.l("pitchend",e)),T&&this.fire(new c.l("rollend",e)),this.fire(new c.l("moveend",e))}flyTo(e,a){if(!e.essential&&Y.prefersReducedMotion){const Ue=c.Q(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ue,a)}this.stop(),e=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.co},e);const h=this._getTransformForUpdate(),p=h.bearing,_=h.pitch,T=h.roll,P=h.padding,z="bearing"in e?this._normalizeBearing(e.bearing,p):p,L="pitch"in e?+e.pitch:_,B="roll"in e?this._normalizeBearing(e.roll,T):T,V="padding"in e?e.padding:h.padding,F=c.P.convert(e.offset);let G=h.centerPoint.add(F);const W=h.screenPointToLocation(G),re=this.cameraHelper.handleFlyTo(h,{bearing:z,pitch:L,roll:B,padding:V,locationAtOffset:W,offsetAsPoint:F,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let ne=e.curve;const ae=Math.max(h.width,h.height),le=ae/re.scaleOfZoom,fe=re.pixelPathLength;typeof re.scaleOfMinZoom=="number"&&(ne=Math.sqrt(ae/re.scaleOfMinZoom/fe*2));const ue=ne*ne;function me(Ue){const ft=(le*le-ae*ae+(Ue?-1:1)*ue*ue*fe*fe)/(2*(Ue?le:ae)*ue*fe);return Math.log(Math.sqrt(ft*ft+1)-ft)}function be(Ue){return(Math.exp(Ue)-Math.exp(-Ue))/2}function he(Ue){return(Math.exp(Ue)+Math.exp(-Ue))/2}const Ee=me(!1);let Ze=function(Ue){return he(Ee)/he(Ee+ne*Ue)},Le=function(Ue){return ae*((he(Ee)*(be(ft=Ee+ne*Ue)/he(ft))-be(Ee))/ue)/fe;var ft},Oe=(me(!0)-Ee)/ne;if(Math.abs(fe)<2e-6||!isFinite(Oe)){if(Math.abs(ae-le)<1e-6)return this.easeTo(e,a);const Ue=le<ae?-1:1;Oe=Math.abs(Math.log(le/ae))/ne,Le=()=>0,Ze=ft=>Math.exp(Ue*ne*ft)}return e.duration="duration"in e?+e.duration:1e3*Oe/("screenSpeed"in e?+e.screenSpeed/ne:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=p!==z,this._pitching=L!==_,this._rolling=B!==T,this._padding=!h.isPaddingEqual(V),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(re.targetCenter),this._ease(Ue=>{const ft=Ue*Oe,gt=1/Ze(ft),tt=Le(ft);this._rotating&&h.setBearing(c.C.number(p,z,Ue)),this._pitching&&h.setPitch(c.C.number(_,L,Ue)),this._rolling&&h.setRoll(c.C.number(T,B,Ue)),this._padding&&(h.interpolatePadding(P,V,Ue),G=h.centerPoint.add(F)),re.easeFunc(Ue,gt,tt,G),this.terrain&&!e.freezeElevation&&this._updateElevation(Ue),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,a){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return e||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(e,a,h){h.animate===!1||h.duration===0?(e(1),a()):(this._easeStart=Y.now(),this._easeOptions=h,this._onEaseFrame=e,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,a){e=c.aO(e,-180,180);const h=Math.abs(e-a);return Math.abs(e-360-a)<h&&(e-=360),Math.abs(e+360-a)<h&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(c.S.convert(e),this.transform.tileZoom):null}}const cs={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class li{constructor(e=cs){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=X.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=X.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=X.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){X.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,a){const h=this._map._getUIString(`AttributionControl.${a}`);e.title=h,e.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const _=a[p];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&e.indexOf(T.attribution)<0&&e.push(T.attribution)}}e=e.filter(p=>String(p).trim()),e.sort((p,_)=>p.length-_.length),e=e.filter((p,_)=>{for(let T=_+1;T<e.length;T++)if(e[T].indexOf(p)>=0)return!1;return!0});const h=e.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,e.length?(this._innerContainer.innerHTML=X.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Di{constructor(e={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=X.create("div","maplibregl-ctrl");const a=X.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){X.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ri{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const a=++this._id;return this._queue.push({callback:e,id:a,cancelled:!1}),a}remove(e){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const p of h)if(p.id===e)return void(p.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Jo=c.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Ct extends c.E{constructor(e){super(),this._lastTilesetChange=Y.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,a){this.sourceCache.update(e,a),this._renderableTilesKeys=[];const h={};for(const p of ze(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),c.bY(p.terrainRttPosMatrix32f,0,c.$,c.$,0,0,1),this._tiles[p.key]=new Hr(p,this.tileSize),this._lastTilesetChange=Y.now());for(const p in this._tiles)h[p]||delete this._tiles[p]}freeRtt(e){for(const a in this._tiles){const h=this._tiles[a];(!e||h.tileID.equals(e)||h.tileID.isChildOf(e)||e.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,a){return a?this._getTerrainCoordsForTileRanges(e,a):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const a={};for(const h of this._renderableTilesKeys){const p=this._tiles[h].tileID,_=e.clone(),T=c.ba();if(p.canonical.equals(e.canonical))c.bY(T,0,c.$,c.$,0,0,1);else if(p.canonical.isChildOf(e.canonical)){const P=p.canonical.z-e.canonical.z,z=p.canonical.x-(p.canonical.x>>P<<P),L=p.canonical.y-(p.canonical.y>>P<<P),B=c.$>>P;c.bY(T,0,B,B,0,0,1),c.M(T,T,[-z*B,-L*B,0])}else{if(!e.canonical.isChildOf(p.canonical))continue;{const P=e.canonical.z-p.canonical.z,z=e.canonical.x-(e.canonical.x>>P<<P),L=e.canonical.y-(e.canonical.y>>P<<P),B=c.$>>P;c.bY(T,0,c.$,c.$,0,0,1),c.M(T,T,[z*B,L*B,0]),c.N(T,T,[1/2**P,1/2**P,0])}}_.terrainRttPosMatrix32f=new Float32Array(T),a[h]=_}return a}_getTerrainCoordsForTileRanges(e,a){const h={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID;if(!this._isWithinTileRanges(_,a))continue;const T=e.clone(),P=c.ba();if(_.canonical.z===e.canonical.z){const z=e.canonical.x-_.canonical.x,L=e.canonical.y-_.canonical.y;c.bY(P,0,c.$,c.$,0,0,1),c.M(P,P,[z*c.$,L*c.$,0])}else if(_.canonical.z>e.canonical.z){const z=_.canonical.z-e.canonical.z,L=_.canonical.x-(_.canonical.x>>z<<z),B=_.canonical.y-(_.canonical.y>>z<<z),V=e.canonical.x-(_.canonical.x>>z),F=e.canonical.y-(_.canonical.y>>z),G=c.$>>z;c.bY(P,0,G,G,0,0,1),c.M(P,P,[-L*G+V*c.$,-B*G+F*c.$,0])}else{const z=e.canonical.z-_.canonical.z,L=e.canonical.x-(e.canonical.x>>z<<z),B=e.canonical.y-(e.canonical.y>>z<<z),V=(e.canonical.x>>z)-_.canonical.x,F=(e.canonical.y>>z)-_.canonical.y,G=c.$<<z;c.bY(P,0,G,G,0,0,1),c.M(P,P,[L*c.$+V*G,B*c.$+F*G,0])}T.terrainRttPosMatrix32f=new Float32Array(P),h[p]=T}return h}getSourceTile(e,a){const h=this.sourceCache._source;let p=e.overscaledZ-this.deltaZoom;if(p>h.maxzoom&&(p=h.maxzoom),p<h.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(p).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!_||!_.dem)&&a)for(;p>=h.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(e.scaledTo(p--).key);return _}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,a){return a[e.canonical.z]&&e.canonical.x>=a[e.canonical.z].minTileX&&e.canonical.x<=a[e.canonical.z].maxTileX&&e.canonical.y>=a[e.canonical.z].minTileY&&e.canonical.y<=a[e.canonical.z].maxTileY}}class kt{constructor(e,a,h){this._meshCache={},this.painter=e,this.sourceCache=new Ct(a),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,a,h,p=c.$){var _;if(!(a>=0&&a<p&&h>=0&&h<p))return 0;const T=this.getTerrainData(e),P=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!P)return 0;const z=c.cs([],[a/p*c.$,h/p*c.$],T.u_terrain_matrix),L=[z[0]*P.dim,z[1]*P.dim],B=Math.floor(L[0]),V=Math.floor(L[1]),F=L[0]-B,G=L[1]-V;return P.get(B,V)*(1-F)*(1-G)+P.get(B+1,V)*F*(1-G)+P.get(B,V+1)*(1-F)*G+P.get(B+1,V+1)*F*G}getElevationForLngLatZoom(e,a){if(!c.ct(a,e.wrap()))return 0;const{tileID:h,mercatorX:p,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(e,a);return this.getElevation(h,p%c.$,_%c.$,c.$)}getElevation(e,a,h,p=c.$){return this.getDEMElevation(e,a,h,p)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const p=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(p,_,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(p,new c.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ag([])}const a=this.sourceCache.getSourceTile(e,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new c.T(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const h=a&&a+a.tileID.key+e.key;if(h&&!this._demMatrixCache[h]){const p=this.sourceCache.sourceCache._source.maxzoom;let _=e.canonical.z-a.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=p?_=e.canonical.z-p:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=e.canonical.x-(e.canonical.x>>_<<_),P=e.canonical.y-(e.canonical.y>>_<<_),z=c.cu(new Float64Array(16),[1/(c.$<<_),1/(c.$<<_),0]);c.M(z,z,[T*c.$,P*c.$,0]),this._demMatrixCache[e.key]={matrix:z,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(e){const a=this.painter,h=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(a.context,{width:h,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(a.context,{width:h,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(h,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,h,p))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let P=0;P<this._coordsTextureSize;P++,T+=4)a[T+0]=255&P,a[T+1]=255&_,a[T+2]=P>>8<<4|_>>8,a[T+3]=0;const h=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new c.T(e,h,e.gl.RGBA,{premultiply:!1});return p.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),h=this.painter.context,p=h.gl,_=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(_,P-T-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null);const z=a[0]+(a[2]>>4<<8),L=a[1]+((15&a[2])<<8),B=this.coordsIndex[255-a[3]],V=B&&this.sourceCache.getTileByID(B);if(!V)return null;const F=this._coordsTextureSize,G=(1<<V.tileID.canonical.z)*F;return new c.a1((V.tileID.canonical.x*F+z)/G+V.tileID.wrap,(V.tileID.canonical.y*F+L)/G,this.getElevation(V.tileID,z,L,F))}depthAtPoint(e){const a=new Uint8Array(4),h=this.painter.context,p=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(e){var a;const h=((a=this.painter.style.projection)===null||a===void 0?void 0:a.transitionState)>0,p=h&&e.canonical.y===0,_=h&&e.canonical.y===(1<<e.canonical.z)-1,T=`m_${p?"n":""}_${_?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const P=this.painter.context,z=new c.cv,L=new c.aN,B=this.meshSize,V=c.$/B,F=B*B;for(let he=0;he<=B;he++)for(let Ee=0;Ee<=B;Ee++)z.emplaceBack(Ee*V,he*V,0);for(let he=0;he<F;he+=B+1)for(let Ee=0;Ee<B;Ee++)L.emplaceBack(Ee+he,B+Ee+he+1,B+Ee+he+2),L.emplaceBack(Ee+he,B+Ee+he+2,Ee+he+1);const G=z.length,W=G+(B+1),re=(B+1)*B,ne=p?c.bh:0,ae=p?0:1,le=_?c.bi:c.$,fe=_?0:1;for(let he=0;he<=B;he++)z.emplaceBack(he*V,ne,ae);for(let he=0;he<=B;he++)z.emplaceBack(he*V,le,fe);for(let he=0;he<B;he++)L.emplaceBack(re+he,W+he,W+he+1),L.emplaceBack(re+he,W+he+1,re+he+1),L.emplaceBack(0+he,G+he+1,G+he),L.emplaceBack(0+he,0+he+1,G+he+1);const ue=z.length,me=ue+2*(B+1);for(const he of[0,1])for(let Ee=0;Ee<=B;Ee++)for(const Ze of[0,1])z.emplaceBack(he*c.$,Ee*V,Ze);for(let he=0;he<2*B;he+=2)L.emplaceBack(ue+he,ue+he+1,ue+he+3),L.emplaceBack(ue+he,ue+he+3,ue+he+2),L.emplaceBack(me+he,me+he+3,me+he+1),L.emplaceBack(me+he,me+he+2,me+he+3);const be=new $s(P.createVertexBuffer(z,Jo.members),P.createIndexBuffer(L),c.aM.simpleSegment(0,0,z.length,L.length));return this._meshCache[T]=be,be}getMeshFrameDelta(e){return 2*Math.PI*c.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,a){var h;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(e,a);return(h=this.getMinMaxElevation(p).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(e){const a=this.getTerrainData(e).tile,h={minElevation:null,maxElevation:null};return a&&a.dem&&(h.minElevation=a.dem.min*this.exaggeration,h.maxElevation=a.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(e,a){const h=c.a1.fromLngLat(e.wrap()),p=(1<<a)*c.$,_=h.x*p,T=h.y*p,P=Math.floor(_/c.$),z=Math.floor(T/c.$);return{tileID:new c.Z(a,0,a,P,z),mercatorX:_,mercatorY:T}}}class el{constructor(e,a,h){this._context=e,this._size=a,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(h.texture),{id:e,fbo:a,texture:h,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>e.id!==a),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const ma={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ps{constructor(e,a){this.painter=e,this.terrain=a,this.pool=new el(e.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(h=>!e._layers[h].isHidden(a)),this._coordsAscending={};for(const h in e.sourceCaches){this._coordsAscending[h]={};const p=e.sourceCaches[h].getVisibleCoordinates(),_=e.sourceCaches[h].getSource(),T=_ instanceof Pa?_.terrainTileRanges:null;for(const P of p){const z=this.terrain.sourceCache.getTerrainCoords(P,T);for(const L in z)this._coordsAscending[h][L]||(this._coordsAscending[h][L]=[]),this._coordsAscending[h][L].push(z[L])}}this._coordsAscendingStr={};for(const h of e._order){const p=e._layers[h],_=p.source;if(ma[p.type]&&!this._coordsAscendingStr[_]){this._coordsAscendingStr[_]={};for(const T in this._coordsAscending[_])this._coordsAscendingStr[_][T]=this._coordsAscending[_][T].map(P=>P.key).sort().join()}}for(const h of this._renderableTiles)for(const p in this._coordsAscendingStr){const _=this._coordsAscendingStr[p][h.tileID.key];_&&_!==h.rttCoords[p]&&(h.rtt=[])}}renderLayer(e,a){if(e.isHidden(this.painter.transform.zoom))return!1;const h=Object.assign(Object.assign({},a),{isRenderingToTexture:!0}),p=e.type,_=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(ma[p]&&(this._prevType&&ma[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(e.id),!T))return!0;if(ma[this._prevType]||ma[p]&&T){this._prevType=p;const P=this._stacks.length-1,z=this._stacks[P]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(kc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[P]){const V=this.pool.getObjectForId(L.rtt[P].id);if(V.stamp===L.rtt[P].stamp){this.pool.useObject(V);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),L.rtt[P]={id:B.id,stamp:B.stamp},_.context.bindFramebuffer.set(B.fbo.framebuffer),_.context.clear({color:c.bf.transparent,stencil:0}),_.currentStencilSource=void 0;for(let V=0;V<z.length;V++){const F=_.style._layers[z[V]],G=F.source?this._coordsAscending[F.source][L.tileID.key]:[L.tileID];_.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),_._renderTileClippingMasks(F,G,!0),_.renderLayer(_,_.style.sourceCaches[F.source],F,G,h),F.source&&(L.rttCoords[F.source]=this._coordsAscendingStr[F.source][L.tileID.key])}}return kc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),ma[p]}return!1}}const Lr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},gn=R,qr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:cs,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Dh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Fl{constructor(e,a,h=!1){this.mousedown=_=>{this.startMove(_,X.mousePos(this.element,_)),X.addEventListener(window,"mousemove",this.mousemove),X.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=_=>{this.move(_,X.mousePos(this.element,_))},this.mouseup=_=>{this._rotatePitchHandler.dragEnd(_),this.offTemp()},this.touchstart=_=>{_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X.touchPos(this.element,_.targetTouches)[0],this.startMove(_,this._startPos),X.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.addEventListener(window,"touchend",this.touchend))},this.touchmove=_=>{_.targetTouches.length!==1?this.reset():(this._lastPos=X.touchPos(this.element,_.targetTouches)[0],this.move(_,this._lastPos))},this.touchend=_=>{_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=a;const p=new Du;this._rotatePitchHandler=new kl({clickTolerance:3,move:(_,T)=>{const P=a.getBoundingClientRect(),z=new c.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:c.cn(new c.P(_.x,T.y),T,z),pitchDelta:h?-.5*(T.y-_.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=e,X.addEventListener(a,"mousedown",this.mousedown),X.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),X.addEventListener(a,"touchcancel",this.reset)}startMove(e,a){this._rotatePitchHandler.dragStart(e,a),X.disableDrag()}move(e,a){const h=this.map,{bearingDelta:p,pitchDelta:_}=this._rotatePitchHandler.dragMove(e,a)||{};p&&h.setBearing(h.getBearing()+p),_&&h.setPitch(h.getPitch()+_)}off(){const e=this.element;X.removeEventListener(e,"mousedown",this.mousedown),X.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),X.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.removeEventListener(window,"touchend",this.touchend),X.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){X.enableDrag(),X.removeEventListener(window,"mousemove",this.mousemove),X.removeEventListener(window,"mouseup",this.mouseup),X.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.removeEventListener(window,"touchend",this.touchend)}}let Ei;function yn(y,e,a,h=!1){if(h||!a.getCoveringTilesDetailsProvider().allowWorldCopies())return y?.wrap();const p=new c.S(y.lng,y.lat);if(y=new c.S(y.lng,y.lat),e){const _=new c.S(y.lng-360,y.lat),T=new c.S(y.lng+360,y.lat),P=a.locationToScreenPoint(y).distSqr(e);a.locationToScreenPoint(_).distSqr(e)<P?y=_:a.locationToScreenPoint(T).distSqr(e)<P&&(y=T)}for(;Math.abs(y.lng-a.center.lng)>180;){const _=a.locationToScreenPoint(y);if(_.x>=0&&_.y>=0&&_.x<=a.width&&_.y<=a.height)break;y.lng>a.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&a.isPointOnMapSurface(a.locationToScreenPoint(y))?y:p}const Vl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function oo(y,e,a){const h=y.classList;for(const p in Vl)h.remove(`maplibregl-${a}-anchor-${p}`);h.add(`maplibregl-${a}-anchor-${e}`)}class lo extends c.E{constructor(e){if(super(),this._onKeyPress=a=>{const h=a.code,p=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const h=a.originalEvent.target,p=this._element;this._popup&&(h===p||p.contains(h))&&this.togglePopup()},this._update=a=>{if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();(a?.type==="terrain"||a?.type==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=yn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),X.setTransform(this._element,`${Vl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${p}`),Y.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e?.opacity,e?.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=c.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=X.create("div");const a=X.createNS("http://www.w3.org/2000/svg","svg"),h=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${h}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${h}`);const _=X.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=X.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const P=X.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ae of z){const le=X.createNS("http://www.w3.org/2000/svg","ellipse");le.setAttributeNS(null,"opacity","0.04"),le.setAttributeNS(null,"cx","10.5"),le.setAttributeNS(null,"cy","5.80029008"),le.setAttributeNS(null,"rx",ae.rx),le.setAttributeNS(null,"ry",ae.ry),P.appendChild(le)}const L=X.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const B=X.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(B);const V=X.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const F=X.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(F);const G=X.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const W=X.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(8.0, 8.0)");const re=X.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");const ne=X.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#FFFFFF"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962"),W.appendChild(re),W.appendChild(ne),T.appendChild(P),T.appendChild(L),T.appendChild(V),T.appendChild(G),T.appendChild(W),a.appendChild(T),a.setAttributeNS(null,"height",h*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=c.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),oo(this._element,this._anchor,"marker"),e&&e.className)for(const a of e.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),X.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=c.S.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const p=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var a,h;const p=(a=this._map)===null||a===void 0?void 0:a.terrain,_=this._map.transform.isLocationOccluded(this._lngLat);if(!p||_){const G=_?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==G&&(this._element.style.opacity=G))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const T=this._map,P=T.terrain.depthAtPoint(this._pos),z=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,z)-P<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/T.transform.pixelsPerMeter,B=Math.sin(T.getPitch()*Math.PI/180)*L,V=T.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),F=T.transform.lngLatToCameraDepth(this._lngLat,z+B)-V>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=c.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,a){return(this._opacity===void 0||e===void 0&&a===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Sr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Wi=0,zs=!1;const Is={maxWidth:100,unit:"metric"};function tl(y,e,a){const h=a&&a.maxWidth||100,p=y._container.clientHeight/2,_=y._container.clientWidth/2,T=y.unproject([_-h/2,p]),P=y.unproject([_+h/2,p]),z=Math.round(y.project(P).x-y.project(T).x),L=Math.min(h,z,y._container.clientWidth),B=T.distanceTo(P);if(a&&a.unit==="imperial"){const V=3.2808*B;V>5280?Ds(e,L,V/5280,y._getUIString("ScaleControl.Miles")):Ds(e,L,V,y._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Ds(e,L,B/1852,y._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Ds(e,L,B/1e3,y._getUIString("ScaleControl.Kilometers")):Ds(e,L,B,y._getUIString("ScaleControl.Meters"))}function Ds(y,e,a,h){const p=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let P=_/T;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(z){const L=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*L)/L}(P),T*P}(a);y.style.width=e*(p/a)+"px",y.innerHTML=`${p}&nbsp;${h}`}const ja={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Ul=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gl(y){if(y){if(typeof y=="number"){const e=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(e,e),"top-right":new c.P(-e,e),bottom:new c.P(0,-y),"bottom-left":new c.P(e,-e),"bottom-right":new c.P(-e,-e),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const e=c.P.convert(y);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return Gl(new c.P(0,0))}const Vc=R;w.AJAXError=c.cz,w.Event=c.l,w.Evented=c.E,w.LngLat=c.S,w.MercatorCoordinate=c.a1,w.Point=c.P,w.addProtocol=c.cA,w.config=c.a,w.removeProtocol=c.cB,w.AttributionControl=li,w.BoxZoomHandler=Xo,w.CanvasSource=za,w.CooperativeGesturesHandler=Ih,w.DoubleClickZoomHandler=Wo,w.DragPanHandler=Nl,w.DragRotateHandler=Ko,w.EdgeInsets=vs,w.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var e;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=a?.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){X.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=X.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);X.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},w.GeoJSONSource=Wa,w.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const a=new c.S(e.coords.longitude,e.coords.latitude),h=e.coords.accuracy,p=this._map.getBearing(),_=c.e({bearing:p},this.options.fitBoundsOptions),T=en.fromLngLat(a,h);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const a=new c.S(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&zs)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=X.create("button","maplibregl-ctrl-geolocate",this._container),X.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=X.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new lo({element:this._dotElement}),this._circleElement=X.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{const h=a?.[0]instanceof ResizeObserverEntry;a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))})}},this.options=c.e({},Sr,y)}onAdd(y){return this._map=y,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(e=!1){if(Ei!==void 0&&!e)return Ei;if(window.navigator.permissions===void 0)return Ei=!!window.navigator.geolocation,Ei;try{Ei=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ei=!!window.navigator.geolocation}return Ei})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),X.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wi=0,zs=!1}_isOutOfMapMaxBounds(y){const e=this._map.getMaxBounds(),a=y.coords;return e&&(a.longitude<e.getWest()||a.longitude>e.getEast()||a.latitude<e.getSouth()||a.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),e=y.getSouthEast(),a=y.getNorthEast(),h=e.distanceTo(a),p=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wi--,zs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wi++,Wi>1?(y={maximumAge:6e5,timeout:0},zs=!0):(y=this.options.positionOptions,zs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},w.GlobeControl=class{constructor(){this._toggleProjection=()=>{var y;const e=(y=this._map.getProjection())===null||y===void 0?void 0:y.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var y;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((y=this._map.getProjection())===null||y===void 0?void 0:y.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(y){return this._map=y,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=X.create("button","maplibregl-ctrl-globe",this._container),X.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){X.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},w.Hash=da,w.ImageSource=Pa,w.KeyboardHandler=Ba,w.LngLatBounds=en,w.LogoControl=Di,w.Map=class extends ku{constructor(y){var e,a;c.cw.mark(c.cx.create);const h=Object.assign(Object.assign(Object.assign({},qr),y),{canvasContextAttributes:Object.assign(Object.assign({},qr.canvasContextAttributes),y.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new bi,_=new hn;if(h.minZoom!==void 0&&p.setMinZoom(h.minZoom),h.maxZoom!==void 0&&p.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&p.setMinPitch(h.minPitch),h.maxPitch!==void 0&&p.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&p.setRenderWorldCopies(h.renderWorldCopies),super(p,_,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ri,this._controls=[],this._mapId=c.a7(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Lr),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Ye.addThrottleControl(()=>this.isMoving()),this._requestManager=new Fe(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let P=!1;const z=ia(L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())},50);this._resizeObserver=new ResizeObserver(L=>{P?z(L):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Fc(this,h),this._hash=h.hash&&new da(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,c.e({},h.fitBoundsOptions,{duration:0}))));const T=typeof h.style=="string"||((a=(e=h.style)===null||e===void 0?void 0:e.projection)===null||a===void 0?void 0:a.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new li(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new Di,h.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const P=c.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new c.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new c.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new c.l("sourcedataabort",P))})}_getMapId(){return this._mapId}setGlobalStateProperty(y,e){return this.style.setGlobalStateProperty(y,e),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(y,e){if(e===void 0&&(e=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=y.onAdd(this);this._controls.push(y);const h=this._controlPositions[e];return e.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(y);return e>-1&&this._controls.splice(e,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,e,a,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,e,a,h)}resize(y,e=!0){const[a,h]=this._containerDimensions(),p=this._getClampedPixelRatio(a,h);if(this._resizeCanvas(a,h,p),this.painter.resize(a,h,p),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const P=this._getClampedPixelRatio(a,h);this._resizeCanvas(a,h,P),this.painter.resize(a,h,P)}this._resizeTransform(e);const _=!this._moving;return _&&(this.stop(),this.fire(new c.l("movestart",y)).fire(new c.l("move",y))),this.fire(new c.l("resize",y)),_&&this.fire(new c.l("moveend",y)),this}_resizeTransform(y=!0){var e;const[a,h]=this._containerDimensions();this.transform.resize(a,h,y),(e=this._requestedCameraState)===null||e===void 0||e.resize(a,h,y)}_getClampedPixelRatio(y,e){const{0:a,1:h}=this._maxCanvasSize,p=this.getPixelRatio(),_=y*p,T=e*p;return Math.min(_>a?a/_:1,T>h?h/T:1)*p}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(en.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.setMinZoom(y),this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.setMaxZoom(y),this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.setMinPitch(y),this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(y>=this.transform.minPitch)return this.transform.setMaxPitch(y),this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.setRenderWorldCopies(y),this._update()}project(y){return this.transform.locationToScreenPoint(c.S.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.screenPointToLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,e,a){if(y==="mouseenter"||y==="mouseover"){let h=!1;return{layers:e,listener:a,delegates:{mousemove:_=>{const T=e.filter(z=>this.getLayer(z)),P=T.length!==0?this.queryRenderedFeatures(_.point,{layers:T}):[];P.length?h||(h=!0,a.call(this,new kr(y,this,_.originalEvent,{features:P}))):h=!1},mouseout:()=>{h=!1}}}}if(y==="mouseleave"||y==="mouseout"){let h=!1;return{layers:e,listener:a,delegates:{mousemove:T=>{const P=e.filter(z=>this.getLayer(z));(P.length!==0?this.queryRenderedFeatures(T.point,{layers:P}):[]).length?h=!0:h&&(h=!1,a.call(this,new kr(y,this,T.originalEvent)))},mouseout:T=>{h&&(h=!1,a.call(this,new kr(y,this,T.originalEvent)))}}}}{const h=p=>{const _=e.filter(P=>this.getLayer(P)),T=_.length!==0?this.queryRenderedFeatures(p.point,{layers:_}):[];T.length&&(p.features=T,a.call(this,p),delete p.features)};return{layers:e,listener:a,delegates:{[y]:h}}}}_saveDelegatedListener(y,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(e)}_removeDelegatedListener(y,e,a){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const h=this._delegatedListeners[y];for(let p=0;p<h.length;p++){const _=h[p];if(_.listener===a&&_.layers.length===e.length&&_.layers.every(T=>e.includes(T))){for(const T in _.delegates)this.off(T,_.delegates[T]);return void h.splice(p,1)}}}on(y,e,a){if(a===void 0)return super.on(y,e);const h=typeof e=="string"?[e]:e,p=this._createDelegatedListener(y,h,a);this._saveDelegatedListener(y,p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return{unsubscribe:()=>{this._removeDelegatedListener(y,h,a)}}}once(y,e,a){if(a===void 0)return super.once(y,e);const h=typeof e=="string"?[e]:e,p=this._createDelegatedListener(y,h,a);for(const _ in p.delegates){const T=p.delegates[_];p.delegates[_]=(...P)=>{this._removeDelegatedListener(y,h,a),T(...P)}}this._saveDelegatedListener(y,p);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(y,e,a){return a===void 0?super.off(y,e):(this._removeDelegatedListener(y,typeof e=="string"?[e]:e,a),this)}queryRenderedFeatures(y,e){if(!this.style)return[];let a;const h=y instanceof c.P||Array.isArray(y),p=h?y:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(h?{}:y)||{},p instanceof c.P||typeof p[0]=="number")a=[c.P.convert(p)];else{const _=c.P.convert(p[0]),T=c.P.convert(p[1]);a=[_,new c.P(T.x,_.y),T,new c.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(a,e,this.transform)}querySourceFeatures(y,e){return this.style.querySourceFeatures(y,e)}setStyle(y,e){return(e=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(y,e))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const e=this._locale[y];if(e==null)throw new Error(`Missing UI string '${y}'`);return e}_updateStyle(y,e){var a,h;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,e));const p=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new mh(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,e,p):this.style.loadJSON(y,e,p),this):((h=(a=this.style)===null||a===void 0?void 0:a.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,e){if(typeof y=="string"){const a=this._requestManager.transformRequest(y,"Style");c.j(a,new AbortController).then(h=>{this._updateDiff(h.data,e)}).catch(h=>{h&&this.fire(new c.k(h))})}else typeof y=="object"&&this._updateDiff(y,e)}_updateDiff(y,e){try{this.style.setState(y,e)&&this._update(!0)}catch(a){c.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(y,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,e){return this._lazyInitEmptyStyle(),this.style.addSource(y,e),this._update(!0)}isSourceLoaded(y){const e=this.style&&this.style.sourceCaches[y];if(e!==void 0)return e.loaded();this.fire(new c.k(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const e=this.style.sourceCaches[y.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&e.reload();for(const a in this.style._layers){const h=this.style._layers[a];h.type==="hillshade"&&h.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),h.type==="color-relief"&&h.source===y.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new kt(this.painter,e,y),this.painter.renderToTexture=new Ps(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=a=>{var h;a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==y.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=a.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:y})),this}getTerrain(){var y,e;return(e=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const e in y){const a=y[e]._tiles;for(const h in a){const p=a[h];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}setSourceTileLodParams(y,e,a){if(a){const h=this.getSource(a);if(!h)throw new Error(`There is no source with ID "${a}", cannot set LOD parameters`);h.calculateTileZoom=ot(Math.max(1,y),Math.max(1,e))}else for(const h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=ot(Math.max(1,y),Math.max(1,e));return this._update(!0),this}refreshTiles(y,e){const a=this.style.sourceCaches[y];if(!a)throw new Error(`There is no source cache with ID "${y}", cannot refresh tile`);e===void 0?a.reload(!0):a.refreshTiles(e.map(h=>new c.a4(h.z,h.x,h.y)))}addImage(y,e,a={}){const{pixelRatio:h=1,sdf:p=!1,stretchX:_,stretchY:T,content:P,textFitWidth:z,textFitHeight:L}=a;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||c.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:V,data:F}=e,G=e;return this.style.addImage(y,{data:new c.R({width:B,height:V},new Uint8Array(F)),pixelRatio:h,stretchX:_,stretchY:T,content:P,textFitWidth:z,textFitHeight:L,sdf:p,version:0,userImage:G}),G.onAdd&&G.onAdd(this,y),this}}{const{width:B,height:V,data:F}=Y.getImageData(e);this.style.addImage(y,{data:new c.R({width:B,height:V},F),pixelRatio:h,stretchX:_,stretchY:T,content:P,textFitWidth:z,textFitHeight:L,sdf:p,version:0})}}updateImage(y,e){const a=this.style.getImage(y);if(!a)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=e instanceof HTMLImageElement||c.b(e)?Y.getImageData(e):e,{width:p,height:_,data:T}=h;if(p===void 0||_===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||_!==a.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(e instanceof HTMLImageElement||c.b(e));return a.data.replace(T,P),this.style.updateImage(y,a),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return Ye.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,e){return this._lazyInitEmptyStyle(),this.style.addLayer(y,e),this._update(!0)}moveLayer(y,e){return this.style.moveLayer(y,e),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,e,a){return this.style.setLayerZoomRange(y,e,a),this._update(!0)}setFilter(y,e,a={}){return this.style.setFilter(y,e,a),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,e,a,h={}){return this.style.setPaintProperty(y,e,a,h),this._update(!0)}getPaintProperty(y,e){return this.style.getPaintProperty(y,e)}setLayoutProperty(y,e,a,h={}){return this.style.setLayoutProperty(y,e,a,h),this._update(!0)}getLayoutProperty(y,e){return this.style.getLayoutProperty(y,e)}setGlyphs(y,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,e,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,e,a,h=>{h||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,e,a=>{a||this._update(!0)}),this}setLight(y,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(y,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(y,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,e){return this.style.setFeatureState(y,e),this._update()}removeFeatureState(y,e){return this.style.removeFeatureState(y,e),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,e=0;return this._container&&(y=this._container.clientWidth||400,e=this._container.clientHeight||300),[y,e]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const e=this._canvasContainer=X.create("div","maplibregl-canvas-container",y);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=X.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),h=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],h);const p=this._controlContainer=X.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=X.create("div",`maplibregl-ctrl-${T} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,e,a){this._canvas.width=Math.floor(a*y),this._canvas.height=Math.floor(a*e),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const y=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{e={requestedAttributes:y},h&&(e.statusMessage=h.statusMessage,e.type=h.type)},{once:!0});let a=null;if(a=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,y):this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y),!a){const h="Failed to initialize WebGL";throw e?(e.message=h,new Error(JSON.stringify(e))):new Error(h)}this.painter=new Au(a,this.transform),se.testSupport(a)}migrateProjection(y,e){super.migrateProjection(y,e),this.painter.transform=y,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){var e,a,h,p,_;const T=this._idleTriggered?this._fadeDuration:0,P=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const V=this.transform.zoom,F=Y.now();this.style.zoomHistory.update(V,F);const G=new c.F(V,{now:F,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),W=G.crossFadingFactor();W===1&&W===this._crossFadingFactor||(z=!0,this._crossFadingFactor=W),this.style.update(G)}const L=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0!==P;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(_=this.style.projection)===null||_===void 0?void 0:_.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cw.mark(c.cx.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,c.cw.mark(c.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ye.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e?.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),X.remove(this._canvasContainer),X.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cw.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Y.frame(this._frameRequest,y=>{c.cw.frame(y),this._frameRequest=null;try{this._render(y)}catch(e){if(!c.cy(e)&&!function(a){return a.message===zc}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return gn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(y){return this._lazyInitEmptyStyle(),this.style.setProjection(y),this._update(!0)}},w.MapMouseEvent=kr,w.MapTouchEvent=Rl,w.MapWheelEvent=Ch,w.Marker=lo,w.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const e=this._map.getZoom(),a=e===this._map.getMaxZoom(),h=e===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,a)=>{const h=this._map._getUIString(`NavigationControl.${a}`);e.title=h,e.setAttribute("aria-label",h)},this.options=c.e({},Dh,y),this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),X.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),X.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=X.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){X.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,e){const a=X.create("button",y,this._container);return a.type="button",a.addEventListener("click",e),a}},w.Popup=class extends c.E{constructor(y){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&X.remove(this._content),this._container&&(X.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=X.create("div","maplibregl-popup",this._map.getContainer()),this._tip=X.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=yn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const a=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor;const p=Gl(this.options.offset);if(!h){const T=this._container.offsetWidth,P=this._container.offsetHeight;let z;z=a.y+p.bottom.y<P?["top"]:a.y>this._map.transform.height-P?["bottom"]:[],a.x<T/2?z.push("left"):a.x>this._map.transform.width-T/2&&z.push("right"),h=z.length===0?"bottom":z.join("-")}let _=a.add(p[h]);this.options.subpixelPositioning||(_=_.round()),X.setTransform(this._container,`${Vl[h]} translate(${_.x}px,${_.y}px)`),oo(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(ja),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.S.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const e=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=y;h=a.firstChild,h;)e.appendChild(h);return this.setDOMContent(e)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=X.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=X.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Ul);y&&y.focus()}},w.RasterDEMTileSource=pr,w.RasterTileSource=Ya,w.ScaleControl=class{constructor(y){this._onMove=()=>{tl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,tl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Is),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){X.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},w.ScrollZoomHandler=As,w.Style=mh,w.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=X.create("button","maplibregl-ctrl-terrain",this._container),X.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){X.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},w.TwoFingersTouchPitchHandler=jc,w.TwoFingersTouchRotateHandler=Yo,w.TwoFingersTouchZoomHandler=Bc,w.TwoFingersTouchZoomRotateHandler=zh,w.VectorTileSource=Aa,w.VideoSource=Eo,w.addSourceType=(y,e)=>c._(void 0,void 0,void 0,function*(){if(ms(y))throw new Error(`A source type called "${y}" already exists.`);((a,h)=>{Gs[a]=h})(y,e)}),w.clearPrewarmedResources=function(){const y=St;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(ye),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},w.createTileMesh=dh,w.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},w.getRTLTextPluginStatus=function(){return In().getRTLTextPluginStatus()},w.getVersion=function(){return Vc},w.getWorkerCount=function(){return Ke.workerCount},w.getWorkerUrl=function(){return c.a.WORKER_URL},w.importScriptInWorkers=function(y){return Hn().broadcast("IS",y)},w.prewarm=function(){hi().acquire(ye)},w.setMaxParallelImageRequests=function(y){c.a.MAX_PARALLEL_IMAGE_REQUESTS=y},w.setRTLTextPlugin=function(y,e){return In().setRTLTextPlugin(y,e)},w.setWorkerCount=function(y){Ke.workerCount=y},w.setWorkerUrl=function(y){c.a.WORKER_URL=y}});var C=m;return C})}(Jm)),Jm.exports}var WC=YC();const cx=ux(WC);function KC(){const o=Ae.useRef(null),l=Ae.useRef(null),[,m]=Ae.useState(!1),g=[106.61828,-6.176588];Ae.useEffect(()=>{if(o.current&&!l.current){const w=new cx.Map({container:o.current,style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:g,zoom:14,dragPan:!1,scrollZoom:!1});new cx.Marker().setLngLat(g).addTo(w),l.current=w}},[]);const S=()=>{l.current&&(l.current.dragPan.enable(),m(!0))},C=()=>{l.current&&(l.current.dragPan.disable(),m(!1))};return ge.jsx("div",{style:{position:"relative",height:"60vh",width:"100%"},children:ge.jsx("div",{ref:o,style:{height:"100%",width:"100%"},onMouseDown:S,onMouseLeave:C})})}function QC({item:o}){return ge.jsxs(hu,{to:o.link,className:"relative group cursor-pointer overflow-hidden shadow-md",children:[ge.jsx("img",{src:o.image,alt:o.title,className:"w-full h-[65vh] lg:h-96 object-cover transition-transform duration-300 group-hover:scale-110"}),ge.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:ge.jsx(cu.div,{whileTap:{scale:.95},className:"border border-white px-4 py-2 text-white font-semibold uppercase tracking-widest text-center max-w-[90%]",children:o.title})}),ge.jsxs("div",{className:"absolute inset-0 hidden md:grid place-items-center group pointer-events-none",children:[ge.jsx("div",{className:"absolute inset-0 bg-orange-500/80 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-auto"}),ge.jsx("div",{className:"border border-white p-4 text-white font-semibold text-center tracking-widest uppercase z-10 pointer-events-auto",children:o.title})]})]})}const JC="/perusahaan/assets/pp2-BD7pKvVk.jpeg",eA="/perusahaan/assets/aboutus4-zsS8l92d.png",tA="/perusahaan/assets/servmec2-BqkgqQRy.jpg",iA="/perusahaan/assets/au11-D8OiAb-i.jpg",nA="/perusahaan/assets/main1-ClwL47Rn.jpeg",zb="/perusahaan/assets/fbc2--JKBDdKw.jpeg",rA="/perusahaan/assets/esp1a-DzPAZb7N.jpg",Ib="/perusahaan/assets/gaoi4a-Dw8eBsst.jpg",Ry="/perusahaan/assets/cfbc2-rH3Kl6tU.jpg",aA=[{title:"Power Plant",image:JC,link:"/power-plant"},{title:"Engineering",image:eA,link:"/power-plant"},{title:"Construction",image:tA,link:"/power-plant"},{title:"Automation",image:Cb,link:"/power-plant"},{title:"IoT",image:iA,link:"/power-plant"},{title:"Maintenance",image:nA,link:"/power-plant"},{title:"Fluidized Bed Boiler",image:zb,link:"/power-plant"},{title:"Boiler Part",image:rA,link:"/power-plant"},{title:"Gas & Oil Boiler",image:Ib,link:"/power-plant"},{title:"CFBC",image:Ry,link:"/power-plant"}];function sA(){return ge.jsxs("div",{className:"flex flex-col justify-center text-[#333333] font-dm",children:[ge.jsxs("div",{className:"max-w-7xl mx-2 lg:mx-auto my-10 px-4 text-center",children:[ge.jsx("h2",{className:"mx-auto max-w-[20rem] lg:max-w-3xl text-[34px] leading-[35px] tracking-[1px] font-[400] mb-4",children:"TRUST THE EXPERTS AT AEI"}),ge.jsx("div",{className:"h-[3px] w-14 bg-[#F37021] mx-auto mt-5 mb-8"}),ge.jsx("p",{className:"max-w-2xl mx-auto text-[14px] lg:text-[16px] leading-[25.2px] font-[400] opacity-70",children:"We have ten dedicated steam plant divisions to serve every aspect of the boiler room, each led by highly skilled veteran technicians with over 20 years at IB&M. Our cross-industry service divisions include:"})]}),ge.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5",children:aA.map((o,l)=>ge.jsx(hu,{to:o.link,className:"block overflow-hidden h-[65vh] lg:h-96",children:ge.jsx(QC,{item:o})},l))})]})}const oA=[{title:"MORE POWER TO YOU",content:"Industrial Boiler & Mechanical specializes in the sale of new and reconditioned used boilers as well as the repair, installation and start up of steam process boiler systems for commercial, industrial and power utility facilities in the U.S. and abroad."},{title:"OVER 30 YEARS OF SERVICE",content:"Serving the steam process industry since 1987, we have successfully completed over 13,000 projects with a 99% on time completion rate."},{title:"INDUSTRIAL BOILER EXPERTS",content:"We're available 24 hours a day and have specialized personnel ready to service every aspect of your boiler & steam plant needs."}],lA=()=>{const[o,l]=Ae.useState(null),m=g=>{l(o===g?null:g)};return ge.jsx("div",{className:"flex flex-col justify-center items-center text-[#333333] font-dm",children:ge.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-8 max-w-[1150px] w-full mx-auto px-4 pb-10 lg:pb-28 mt-auto items-start",children:[ge.jsx("div",{className:"md:col-span-2 flex flex-col gap-3",children:oA.map((g,S)=>ge.jsxs("div",{children:[ge.jsxs("div",{className:"border border-gray-300/50 cursor-pointer flex items-center",onClick:()=>m(S),children:[ge.jsx("div",{className:"w-12 h-12 flex items-center justify-center border-r border-gray-300/50",children:o===S?ge.jsx(Tw,{className:"text-gray-700"}):ge.jsx(Sw,{className:"text-gray-700"})}),ge.jsx("div",{className:`flex-1 px-4 py-3 text-[15px] leading-[21px] font-[400] transition-colors duration-200 ${o===S?"text-[#F37021]":"text-[#333333]/80"}`,children:g.title})]}),ge.jsx(by,{initial:!1,children:o===S&&ge.jsx(cu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:ge.jsx("div",{className:"px-4 py-3 text-[14px] leading-[25.2px] font-[400] tracking-[0.5px] text-gray-600",children:g.content})},"content")})]},S))}),ge.jsxs("div",{className:"md:col-span-3 flex flex-col border border-gray-300/50",children:[ge.jsx("img",{src:w_,alt:"IBM Logo",className:"w-full h-32 md:h-[200px] object-cover"}),ge.jsx("div",{className:"py-4 text-center text-sm border-t border-gray-300/50",children:"Photo"})]})]})})},cA="/perusahaan/assets/aboutus1-BRQoWwZQ.jpg",uA=[{subtitle:"A new chapter began in 2020",title:"RESHAPING INDUSTRY STANDARDS",description:"2020 marked a pivotal year for us. In the face of global challenges, we expanded our expertise, embraced new technologies, and reinforced our commitment to delivering reliable solutions. That year wasnt just about adapting  it was about redefining whats possible for our clients and partners.",button:"SEE WHAT WE ACHIEVED",image:cA}],hA=()=>ge.jsxs("div",{className:"flex justify-center text-[#333333] font-dm relative bg-cover bg-center bg-no-repeat py-10 md:py-0",style:{backgroundImage:`url(${w_})`},children:[ge.jsx("div",{className:"absolute inset-0 bg-white/95"}),ge.jsx("div",{className:"max-w-7xl mx-2 lg:mx-auto px-2 lg:px-10 relative z-10 w-full",children:uA.map((o,l)=>ge.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-12 items-center min-h-[75vh]",children:[ge.jsxs("div",{className:"md:col-span-7 flex flex-col items-center justify-center text-center",children:[ge.jsx("p",{className:"italic text-[14px] leading-[25.2px] font-[400] tracking-[0.5px] text-[#333333]/90",children:o.subtitle}),ge.jsx("div",{className:"h-[2px] w-14 bg-[#F37021] mt-4 lg:mt-5 mb-4 md:mb-6"}),ge.jsx("h2",{className:"text-[28px] leading-[35px] tracking-[1px] font-[400] text-[#333333] mb-6",children:o.title}),ge.jsx("p",{className:"text-[#333333]/90 text-[14px] leading-[25.2px] mb-6 font-[400] tracking-[0.5px] max-w-3xl",children:o.description}),ge.jsx(hu,{to:"/projects",className:"border text-[13px] leading-[18.5px] tracking-[0.5px] font-[400] border-[#F37021] text-[#F37021] mt-2 md:mt-4 px-6 py-3 rounded hover:bg-[#333333] hover:border-[#333333] cursor-pointer hover:text-white transition inline-block",children:o.button})]}),ge.jsx("div",{className:"md:col-span-5",children:ge.jsx("div",{className:"rounded shadow-md",children:ge.jsx("img",{src:o.image,alt:o.title,className:"w-full h-44 md:h-64 object-cover"})})})]},l))})]}),dA=()=>{const[o,l]=Ae.useState(!1);return ge.jsxs(ge.Fragment,{children:[ge.jsx(lb,{isSidebarOpen:o,setIsSidebarOpen:l}),ge.jsxs("div",{className:"transition-transform duration-300",children:[ge.jsx(ZC,{}),ge.jsx("div",{className:"my-auto",children:ge.jsx(Ab,{})}),ge.jsx("div",{className:"my-auto",children:ge.jsx(lA,{})}),ge.jsx("div",{className:"my-auto",children:ge.jsx(sA,{})}),ge.jsx("div",{className:"my-auto",children:ge.jsx(hA,{})}),ge.jsx("div",{children:ge.jsx(KC,{})}),ge.jsx(Eb,{})]})]})},fA=()=>ge.jsx("div",{children:"about"}),pA=()=>ge.jsx("div",{children:"contact"}),mA=()=>ge.jsx("div",{children:"product"}),qm="/perusahaan/assets/black-N618T0Y0.jpg",gA="/perusahaan/assets/fbc1-BKixyPVV.jpeg",yA="/perusahaan/assets/fbc4-D3K7s2sF.png",_A="/perusahaan/assets/cfbc1-DT4jBxk0.JPG",vA={"fluidized-bed-boiler":{name:"Fluidized Bed Boiler",image:zb,description:"Fluidized Bed Boiler is an interesting and innovative combustion system used to produce steam",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"Fluidized Bed Boiler, FBB is an interesting and innovative combustion system used to produce steam or electricity in a variety of industries. Its greatness is ability to burn a wide array of fuels efficiently, including low-quality coal, biomass, and industrial waste.",description2:"The fluidized bed boiler process centers on the concept of (fluidization), in which solid fuels such as sand or limestone are suspended and heated by a stream of air or gas flowing through the bed of those particles. The fluidization effect creates an article similar to that of a boiling liquid, allowing better mixing and contact between fuel and combustion air.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:gA},{id:2,src:yA}]},cfbc:{name:"Circulating Fluidized Bed Combustion",image:Ry,description:"The circulating fluidized bed (CFB) is a type of fluidized bed combustion that utilizes a recirculating loop for even greater efficiency",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"The circulating fluidized bed (CFB) is a type of fluidized bed combustion that utilizes a recirculating loop for even greater efficiency of combustion. while achieving lower emission of pollutants. Reports suggest that up to 95% of pollutants can be absorbed before being emitted into the atmosphere.",description2:"The technology is limited in scale however, due to its extensive use of limestone, and the fact that it produces waste byproducts.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:_A},{id:2,src:Ry}]},"chain-grate-boiler":{name:"Chain Grate Boiler",image:qm,description:"A type of mechanical stoker for a furnace, in which the grate consists of an endless chain",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"A type of mechanical stoker for a furnace, in which the grate consists of an endless chain that draws the solid fuel into the furnace as it rotates.",description2:"A wide endless traveling chain that feeds and supports the fuel in a boiler furnace.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:""},{id:2,src:""}]},"reciprocrating-grate-boiler":{name:"Reciprocrating Grate Boiler",image:qm,description:"Boiler ini menggunakan prinsip pembakaran pada bed yang terfluidisasi...",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"The grate is air cooled and divided into three to five zones per lane with one to three lanes in total. The grate bars speed and the primary air supply are regulated for each grate zone individually. The individualized control of each zone offers an optimized combustion. The grate bars are made of high-alloyed cast steel and supplied pre-mounted. The grate is function tested before delivery.",description2:"A reciprocating step grate firing is one of commercialized combustion technologies suitable for burning various types of biomass fuels with varying moisture contents and particle sizes such as wood pallets and refuse-derived fuel.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:""},{id:2,src:""}]},"gas-oil-boiler":{name:"Gas & Oil Boiler",image:Dy,description:"Gas boilers are powered by natural gas or propane and are more efficient than standard boilers",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"Gas boilers are powered by natural gas or propane and are more efficient than standard boilers. The fuel for a gas boiler is piped into the boiler from an outside source that is connected directly to the boiler. The distribution of heat using a gas steam boiler depends on its configuration.",description2:"Gas steam boilers can be used for industrial purposes and low-pressure applications.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:Dy},{id:2,src:Ib}]},"thermal-oil-boiler":{name:"Thermal Oil Boiler",image:qm,description:"Boiler ini menggunakan prinsip pembakaran pada bed yang terfluidisasi...",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"A thermal oil boiler fires through a helical coil and generates energy from the hot products of combustion. This, by heating the coil through radiation and convection. The coil heats the thermal oil or fluid that is pumped through the thermal oil boiler. The thermal oil heats coils in various types of heat users.",description2:"A thermal oil is commonly used as a working fluid that circulate through the absorber tube and transform the solar irradiation into thermal energy and carries heat to heat exchangers or analogous for driving a Rankine steam turbine. The Rankine cycle is an idealized thermodynamic cycle describing the process by which certain heat engines, such as steam turbines or reciprocating steam engines, allow mechanical work to be extracted from a fluid as it moves between a heat source and heat sink.",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:""},{id:2,src:""}]},"boiler-part":{name:"Boiler Part",image:qm,description:"Boiler ini menggunakan prinsip pembakaran pada bed yang terfluidisasi...",title1:"Rugged durability for a variety of fuels.",title2:"High efficiency and low emissions.",description1:"A power plant is a type of industrial building used to produce electricity using raw materials. To meet society's electrical needs, the majority of power plants use one or more generators that transform mechanical energy into electrical energy. Solar power plants are an exception, as they produce this electricity without the usage of a turbine by using photovoltaic cells.",description2:"A power plant is a set of equipment and machinery used to generate electrical energy through the process of transforming energy from various energy sources. Most types of power plants produce a 3-phase alternating current mains voltage. In addition, most electricity generation uses synchronous generators powered by prime movers who derive energy from fuel or natural resources. The main components in power plants include primary energy installations, start-up installations, cooling installations and electrical installations. The type of power plant is generally named according to the initial driving force used, including water (PLTA), diesel (PLTD), steam (PLTU), gas (PLTG), gas and steam (PLTGU), geothermal (PLTP), and nuclear (NPP).",contactTitle:"One Call Does It All",contactNumber:"+1 (800) 123-4567",contactSubtitle:"AEI offers single-source sales, emergency rental, field service and repair of boilers and boiler room equipment.",contactButton:"Contact AEI",specs:["Kapasitas besar","Efisiensi tinggi","Ramah lingkungan","Pengurangan emisi"],grid:[{id:1,src:""},{id:2,src:""}]}};function xA(){const{boilerId:o}=_1(),l=o?vA[o]:null,[m,g]=Ae.useState(null);return l?ge.jsxs(ge.Fragment,{children:[ge.jsx(lb,{isSidebarOpen:!1,setIsSidebarOpen:function(){throw new Error("Function not implemented.")}}),ge.jsx("div",{className:"relative w-full h-[35vh] md:h-screen overflow-hidden group",children:ge.jsxs("div",{className:"relative h-[35vh] md:h-screen bg-cover bg-center",style:{backgroundImage:`url(${l.image})`},children:[ge.jsx("div",{className:"absolute inset-0 bg-black opacity-70 transition-opacity duration-500"}),ge.jsx("div",{className:"relative z-10 w-full flex items-center justify-start h-full pt-8 lg:pt-0",children:ge.jsxs("div",{className:"max-w-7xl mx-2 lg:mx-auto my-10 px-4 text-center w-full",children:[ge.jsx("h2",{className:"mx-auto max-w-[20rem] lg:max-w-3xl text-[16px] lg:text-[61px] leading-[16px] lg:leading-[61px] tracking-normal lg:tracking-[3px] font-[400] uppercase font-anton text-white",children:l.name}),ge.jsx("div",{className:"h-[0.5px] w-24 bg-white mx-auto mt-2 lg:mt-5 mb-4 lg:mb-8"}),ge.jsx("p",{className:"max-w-32 lg:max-w-[550px] mx-auto text-[6px] lg:text-[23px] leading-[6px] lg:leading-[24px] font-[400] tracking-normal lg:tracking-[1px] text-white/90 font-dm",children:l.description})]})})]})}),ge.jsx("div",{className:"max-w-6xl mx-auto px-4 lg:px-6 py-6 font-dm",children:ge.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start",children:[ge.jsxs("div",{className:"md:col-span-2",children:[ge.jsx("h2",{className:"text-[28px] leading-[34px] font-[400] tracking-[2.8px] mb-4 text-[#333333]/90",children:l.title1}),ge.jsx("p",{className:"text-[14px] leading-[25.2px] tracking-[0.5px] text-[#333333]/80 mb-6 ",children:l.description1}),ge.jsx("h2",{className:"text-[28px] leading-[34px] font-[400] tracking-[2.8px] mb-4 text-[#333333]/90",children:l.title2}),ge.jsx("p",{className:"text-[14px] leading-[25.2px] tracking-[0.5px] text-[#333333]/80 mb-6 ",children:l.description2}),ge.jsx("ul",{className:"divide-y divide-gray-300 border-t border-b border-gray-300",children:l.specs.map(S=>ge.jsxs("li",{className:"flex items-center py-3 px-4",children:[ge.jsx("svg",{className:"w-5 h-5 text-[#333333] font-[900] mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:ge.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),ge.jsx("span",{className:"text-[#333333]/80 text-[14px] leading-[21.5px] tracking-[0.5px] font-[400]",children:S})]},S))})]}),ge.jsx("div",{className:"lg:col-span-3 md:col-span-2 order-2 md:order-2 lg:order-3",children:ge.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-10",children:l.grid.map(S=>ge.jsxs("div",{className:"relative group cursor-pointer overflow-hidden shadow-md",onClick:()=>g(S.src),children:[ge.jsx("img",{src:S.src,alt:`photo-${S.id}`,className:"w-full h-36 md:h-56 object-cover transition-transform duration-300 group-hover:scale-110"}),ge.jsx("div",{className:"absolute inset-0 bg-orange-500/80 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:ge.jsx("div",{className:"border border-white p-4 text-white font-semibold text-center tracking-widest uppercase",children:"Zoom"})})]},S.id))})}),m&&ge.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 cursor-zoom-out",onClick:()=>g(null),children:ge.jsx("img",{src:m,alt:"Zoomed",className:"max-w-full max-h-full object-contain"})}),ge.jsxs("div",{className:"bg-[#F8F8F8] px-8 py-6 text-gray-800 self-start order-3 md:order-3 lg:order-2",children:[ge.jsx("p",{className:"mb-2 font-[400] text-[25px] leading-[35px] tracking-[1px] text-[#333333]/90",children:l.contactTitle}),ge.jsx("p",{className:"text-orange-500/80 text-[20px] leading-[30px] tracking-normal font-[400] mb-4",children:l.contactNumber}),ge.jsx("p",{className:"mb-6 text-[#333333]/80 text-[13px] leading-[26px] tracking-[0.7px] font-[400]",children:l.contactSubtitle}),ge.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-[13px] leading-[19.5px] uppercase tracking-[0.52px] text-white py-2 px-6 cursor-pointer rounded transition duration-500 font-[500]",children:l.contactButton})]})]})}),ge.jsx(Ab,{}),ge.jsx("div",{className:"bg-yellow-400 text-[#333333]/90 px-6 py-10 md:py-14 font-dm",children:ge.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 px-2 md:px-6 items-center gap-4 md:gap-6",children:[ge.jsxs("div",{className:"md:col-span-2",children:[ge.jsx("h2",{className:"text-[24px] lg:text-[30px] leading-[36px] text-center md:text-start tracking-[2.16px] mb-2 md:mb-4 font-[700] uppercase",children:"BOILER EXPERTS"}),ge.jsx("p",{className:"text-[14px] lg:text-[20px] leading-[25.2px] lg:leading-[36px] text-center md:text-start font-[400] tracking-[0.7px] lg:tracking-[1px]",children:"Contact IB&M today at (855) 753-BOILER to speak with our sales engineers about selecting the right new or fully reconditioned used oil fired boiler for your facility."})]}),ge.jsx("div",{className:"flex justify-center md:justify-end",children:ge.jsx("button",{className:"border cursor-pointer border-[#333333]/80 px-8 py-3 flex items-center gap-2 uppercase font-medium tracking-wide hover:bg-white hover:border-none hover:text-[#333333] transition duration-300",children:"Contact Us"})})]})}),ge.jsx(Eb,{})]}):ge.jsx("p",{className:"p-6",children:"Boiler tidak ditemukan."})}function bA(){const{pathname:o}=lh();return Ae.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[o]),null}function wA(){return ge.jsxs(ge.Fragment,{children:[ge.jsx(bA,{}),ge.jsxs(R1,{children:[ge.jsx(df,{path:"/",element:ge.jsx(dA,{})}),ge.jsx(df,{path:"/about",element:ge.jsx(fA,{})}),ge.jsx(df,{path:"/contact",element:ge.jsx(pA,{})}),ge.jsx(df,{path:"/product",element:ge.jsx(mA,{})}),ge.jsx(df,{path:"/boiler-systems/:boilerId",element:ge.jsx(xA,{})})]})]})}Vb.createRoot(document.getElementById("root")).render(ge.jsx(Ae.StrictMode,{children:ge.jsx(iw,{children:ge.jsx(wA,{})})}));
